const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/worker-engine-bd76f3e1-D9X6k-bW.js","assets/preload-helper-D015MH5X.js","assets/browser-awZxztMA-34e61bde-CDfG22U3.js","assets/direct-engine-3d50b393-Dh3RUDMg.js"])))=>i.map(i=>d[i]);
import{r as e,t}from"./chunk-DnojthI4.js";import{t as n}from"./preload-helper-D015MH5X.js";var r=t(((e,t)=>{t.exports={}}));function i(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){n(e);return}s.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,`next`,e)}function c(e){a(o,r,i,s,c,`throw`,e)}s(void 0)})}}function s(e,t,n){return t=p(t),function(e,t){if(t&&(typeof t==`object`||typeof t==`function`))return t;if(t!==void 0)throw TypeError(`Derived constructors may only return object or undefined`);return function(e){if(e===void 0)throw ReferenceError(`this hasn't been initialised - super() hasn't been called`);return e}(e)}(e,h()?Reflect.construct(t,n||[],p(e).constructor):t.apply(e,n))}function c(e,t){if(!(e instanceof t))throw TypeError(`Cannot call a class as a function`)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,`value`in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,`prototype`,{writable:!1}),e}function d(e,t){var n=typeof Symbol<`u`&&e[Symbol.iterator]||e[`@@iterator`];if(!n){if(Array.isArray(e)||(n=E(e))||t&&e&&typeof e.length==`number`){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||n.return==null||n.return()}finally{if(s)throw a}}}}function f(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function m(e,t){if(typeof t!=`function`&&t!==null)throw TypeError(`Super expression must either be null or a function`);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,`prototype`,{writable:!1}),t&&x(e,t)}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h=function(){return!!e})()}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?g(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function v(e,t){if(e==null)return{};var n,r,i=function(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function y(){var e,t,n=typeof Symbol==`function`?Symbol:{},r=n.iterator||`@@iterator`,i=n.toStringTag||`@@toStringTag`;function a(n,r,i,a){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return b(l,`_invoke`,function(n,r,i){var a,s,c,l=0,u=i||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,s=0,c=e,f.n=n,o}};function p(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,a=u[t],p=f.p,m=a[2];n>3?(i=m===r)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=p&&((i=n<2&&p<a[1])?(s=0,f.v=r,f.n=a[1]):p<m&&(i=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,f.n=m,s=0))}if(i||n>1)return o;throw d=!0,r}return function(i,u,m){if(l>1)throw TypeError(`Generator is already running`);for(d&&u===1&&p(u,m),s=u,c=m;(t=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(f.n=-1),p(s,c)):f.n=c:f.v=c);try{if(l=2,a){if(s||(i=`next`),t=a[i]){if(!(t=t.call(a,c)))throw TypeError(`iterator result is not an object`);if(!t.done)return t;c=t.value,s<2&&(s=0)}else s===1&&(t=a.return)&&t.call(a),s<2&&(c=TypeError(`The iterator does not provide a '`+i+`' method`),s=1);a=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==o)break}catch(t){a=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,a),!0),l}var o={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(b(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,b(e,i,`GeneratorFunction`)),e.prototype=Object.create(d),e}return c.prototype=l,b(d,`constructor`,l),b(l,`constructor`,c),c.displayName=`GeneratorFunction`,b(l,i,`GeneratorFunction`),b(d),b(d,i,`Generator`),b(d,r,function(){return this}),b(d,`toString`,function(){return`[object Generator]`}),(y=function(){return{w:a,m:f}})()}function b(e,t,n,r){var i=Object.defineProperty;try{i({},``,{})}catch{i=0}b=function(e,t,n,r){function a(t,n){b(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a(`next`,0),a(`throw`,1),a(`return`,2))},b(e,t,n,r)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e==null?null:typeof Symbol<`u`&&e[Symbol.iterator]||e[`@@iterator`];if(n!=null){var r,i,a,o,s=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||E(e,t)||function(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function C(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if(typeof Symbol<`u`&&e[Symbol.iterator]!=null||e[`@@iterator`]!=null)return Array.from(e)}(e)||E(e)||function(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function w(e){var t=function(e,t){if(typeof e!=`object`||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||`default`);if(typeof r!=`object`)return r;throw TypeError(`@@toPrimitive must return a primitive value.`)}return(t===`string`?String:Number)(e)}(e,`string`);return typeof t==`symbol`?t:t+``}function T(e){return T=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},T(e)}function E(e,t){if(e){if(typeof e==`string`)return i(e,t);var n={}.toString.call(e).slice(8,-1);return n===`Object`&&e.constructor&&(n=e.constructor.name),n===`Map`||n===`Set`?Array.from(e):n===`Arguments`||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}var D,O,k,A,ee,j,M,N,te,ne,re,ie,ae={},oe=[],se=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ce=Array.isArray;function le(e,t){for(var n in t)e[n]=t[n];return e}function ue(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function P(e,t,n){var r,i,a,o={};for(a in t)a==`key`?r=t[a]:a==`ref`?i=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?D.call(arguments,2):n),typeof e==`function`&&e.defaultProps!=null)for(a in e.defaultProps)o[a]===void 0&&(o[a]=e.defaultProps[a]);return de(e,o,r,i,null)}function de(e,t,n,r,i){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++k,__i:-1,__u:0};return i==null&&O.vnode!=null&&O.vnode(a),a}function F(e){return e.children}function fe(e,t){this.props=e,this.context=t}function pe(e,t){if(t==null)return e.__?pe(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type==`function`?pe(e):null}function me(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return me(e)}}function he(e){(!e.__d&&(e.__d=!0)&&A.push(e)&&!ge.__r++||ee!=O.debounceRendering)&&((ee=O.debounceRendering)||j)(ge)}function ge(){for(var e,t,n,r,i,a,o,s=1;A.length;)A.length>s&&A.sort(M),e=A.shift(),s=A.length,e.__d&&(n=void 0,r=void 0,i=(r=(t=e).__v).__e,a=[],o=[],t.__P&&((n=le({},r)).__v=r.__v+1,O.vnode&&O.vnode(n),we(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[i]:null,a,i??pe(r),!!(32&r.__u),o),n.__v=r.__v,n.__.__k[n.__i]=n,Ee(a,n,o),r.__e=r.__=null,n.__e!=i&&me(n)));ge.__r=0}function _e(e,t,n,r,i,a,o,s,c,l,u){var d,f,p,m,h,g,_,v=r&&r.__k||oe,y=t.length;for(c=function(e,t,n,r,i){var a,o,s,c,l,u=n.length,d=u,f=0;for(e.__k=Array(i),a=0;a<i;a++)(o=t[a])!=null&&typeof o!=`boolean`&&typeof o!=`function`?(c=a+f,(o=e.__k[a]=typeof o==`string`||typeof o==`number`||typeof o==`bigint`||o.constructor==String?de(null,o,null,null,null):ce(o)?de(F,{children:o},null,null,null):o.constructor==null&&o.__b>0?de(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,s=null,(l=o.__i=be(o,n,c,d))!=-1&&(d--,(s=n[l])&&(s.__u|=2)),s==null||s.__v==null?(l==-1&&(i>u?f--:i<u&&f++),typeof o.type!=`function`&&(o.__u|=4)):l!=c&&(l==c-1?f--:l==c+1?f++:(l>c?f--:f++,o.__u|=4))):e.__k[a]=null;if(d)for(a=0;a<u;a++)(s=n[a])!=null&&!(2&s.__u)&&(s.__e==r&&(r=pe(s)),Ae(s,s));return r}(n,t,v,c,y),d=0;d<y;d++)(p=n.__k[d])!=null&&(f=p.__i==-1?ae:v[p.__i]||ae,p.__i=d,g=we(e,p,f,i,a,o,s,c,l,u),m=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&ke(f.ref,null,p),u.push(p.ref,p.__c||m,p)),h==null&&m!=null&&(h=m),(_=!!(4&p.__u))||f.__k===p.__k?c=ve(p,c,e,_):typeof p.type==`function`&&g!==void 0?c=g:m&&(c=m.nextSibling),p.__u&=-7);return n.__e=h,c}function ve(e,t,n,r){var i,a;if(typeof e.type==`function`){for(i=e.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=e,t=ve(i[a],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=pe(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t&&=t.nextSibling;while(t!=null&&t.nodeType==8);return t}function ye(e,t){return t||=[],e==null||typeof e==`boolean`||(ce(e)?e.some(function(e){ye(e,t)}):t.push(e)),t}function be(e,t,n,r){var i,a,o,s=e.key,c=e.type,l=t[n],u=l!=null&&!(2&l.__u);if(l===null&&e.key==null||u&&s==l.key&&c==l.type)return n;if(r>(u?1:0)){for(i=n-1,a=n+1;i>=0||a<t.length;)if((l=t[o=i>=0?i--:a++])!=null&&!(2&l.__u)&&s==l.key&&c==l.type)return o}return-1}function xe(e,t,n){t[0]==`-`?e.setProperty(t,n??``):e[t]=n==null?``:typeof n!=`number`||se.test(t)?n:n+`px`}function Se(e,t,n,r,i){var a,o;e:if(t==`style`)if(typeof n==`string`)e.style.cssText=n;else{if(typeof r==`string`&&(e.style.cssText=r=``),r)for(t in r)n&&t in n||xe(e.style,t,``);if(n)for(t in n)r&&n[t]==r[t]||xe(e.style,t,n[t])}else if(t[0]==`o`&&t[1]==`n`)a=t!=(t=t.replace(N,`$1`)),o=t.toLowerCase(),t=o in e||t==`onFocusOut`||t==`onFocusIn`?o.slice(2):t.slice(2),e.l||={},e.l[t+a]=n,n?r?n.u=r.u:(n.u=te,e.addEventListener(t,a?re:ne,a)):e.removeEventListener(t,a?re:ne,a);else{if(i==`http://www.w3.org/2000/svg`)t=t.replace(/xlink(H|:h)/,`h`).replace(/sName$/,`s`);else if(t!=`width`&&t!=`height`&&t!=`href`&&t!=`list`&&t!=`form`&&t!=`tabIndex`&&t!=`download`&&t!=`rowSpan`&&t!=`colSpan`&&t!=`role`&&t!=`popover`&&t in e)try{e[t]=n??``;break e}catch{}typeof n==`function`||(n==null||!1===n&&t[4]!=`-`?e.removeAttribute(t):e.setAttribute(t,t==`popover`&&n==1?``:n))}}function Ce(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=te++;else if(t.t<n.u)return;return n(O.event?O.event(t):t)}}}function we(e,t,n,r,i,a,o,s,c,l){var u,d,f,p,m,h,g,_,v,y,b,x,S,C,w,T,E,D=t.type;if(t.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),a=[s=t.__e=n.__e]),(u=O.__b)&&u(t);e:if(typeof D==`function`)try{if(_=t.props,v=`prototype`in D&&D.prototype.render,y=(u=D.contextType)&&r[u.__c],b=u?y?y.props.value:u.__:r,n.__c?g=(d=t.__c=n.__c).__=d.__E:(v?t.__c=d=new D(_,b):(t.__c=d=new fe(_,b),d.constructor=D,d.render=je),y&&y.sub(d),d.props=_,d.state||={},d.context=b,d.__n=r,f=d.__d=!0,d.__h=[],d._sb=[]),v&&d.__s==null&&(d.__s=d.state),v&&D.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=le({},d.__s)),le(d.__s,D.getDerivedStateFromProps(_,d.__s))),p=d.props,m=d.state,d.__v=t,f)v&&D.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),v&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(v&&D.getDerivedStateFromProps==null&&_!==p&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(_,b),!d.__e&&d.shouldComponentUpdate!=null&&!1===d.shouldComponentUpdate(_,d.__s,b)||t.__v==n.__v){for(t.__v!=n.__v&&(d.props=_,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(e){e&&(e.__=t)}),x=0;x<d._sb.length;x++)d.__h.push(d._sb[x]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(_,d.__s,b),v&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(p,m,h)})}if(d.context=b,d.props=_,d.__P=e,d.__e=!1,S=O.__r,C=0,v){for(d.state=d.__s,d.__d=!1,S&&S(t),u=d.render(d.props,d.state,d.context),w=0;w<d._sb.length;w++)d.__h.push(d._sb[w]);d._sb=[]}else do d.__d=!1,S&&S(t),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++C<25);d.state=d.__s,d.getChildContext!=null&&(r=le(le({},r),d.getChildContext())),v&&!f&&d.getSnapshotBeforeUpdate!=null&&(h=d.getSnapshotBeforeUpdate(p,m)),T=u,u!=null&&u.type===F&&u.key==null&&(T=De(u.props.children)),s=_e(e,ce(T)?T:[T],t,n,r,i,a,o,s,c,l),d.base=t.__e,t.__u&=-161,d.__h.length&&o.push(d),g&&(d.__E=d.__=null)}catch(e){if(t.__v=null,c||a!=null)if(e.then){for(t.__u|=c?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,t.__e=s}else{for(E=a.length;E--;)ue(a[E]);Te(t)}else t.__e=n.__e,t.__k=n.__k,e.then||Te(t);O.__e(e,t,n)}else a==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=Oe(n.__e,t,n,r,i,a,o,c,l);return(u=O.diffed)&&u(t),128&t.__u?void 0:s}function Te(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Te)}function Ee(e,t,n){for(var r=0;r<n.length;r++)ke(n[r],n[++r],n[++r]);O.__c&&O.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){O.__e(e,t.__v)}})}function De(e){return typeof e!=`object`||!e||e.__b&&e.__b>0?e:ce(e)?e.map(De):le({},e)}function Oe(e,t,n,r,i,a,o,s,c){var l,u,d,f,p,m,h,g=n.props,_=t.props,v=t.type;if(v==`svg`?i=`http://www.w3.org/2000/svg`:v==`math`?i=`http://www.w3.org/1998/Math/MathML`:i||=`http://www.w3.org/1999/xhtml`,a!=null){for(l=0;l<a.length;l++)if((p=a[l])&&`setAttribute`in p==!!v&&(v?p.localName==v:p.nodeType==3)){e=p,a[l]=null;break}}if(e==null){if(v==null)return document.createTextNode(_);e=document.createElementNS(i,v,_.is&&_),s&&=(O.__m&&O.__m(t,a),!1),a=null}if(v==null)g===_||s&&e.data==_||(e.data=_);else{if(a&&=D.call(e.childNodes),g=n.props||ae,!s&&a!=null)for(g={},l=0;l<e.attributes.length;l++)g[(p=e.attributes[l]).name]=p.value;for(l in g)if(p=g[l],l!=`children`){if(l==`dangerouslySetInnerHTML`)d=p;else if(!(l in _)){if(l==`value`&&`defaultValue`in _||l==`checked`&&`defaultChecked`in _)continue;Se(e,l,null,p,i)}}for(l in _)p=_[l],l==`children`?f=p:l==`dangerouslySetInnerHTML`?u=p:l==`value`?m=p:l==`checked`?h=p:s&&typeof p!=`function`||g[l]===p||Se(e,l,p,g[l],i);if(u)s||d&&(u.__html==d.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=``),_e(t.type==`template`?e.content:e,ce(f)?f:[f],t,n,r,v==`foreignObject`?`http://www.w3.org/1999/xhtml`:i,a,o,a?a[0]:n.__k&&pe(n,0),s,c),a!=null)for(l=a.length;l--;)ue(a[l]);s||(l=`value`,v==`progress`&&m==null?e.removeAttribute(`value`):m!=null&&(m!==e[l]||v==`progress`&&!m||v==`option`&&m!=g[l])&&Se(e,l,m,g[l],i),l=`checked`,h!=null&&h!=e[l]&&Se(e,l,h,g[l],i))}return e}function ke(e,t,n){try{if(typeof e==`function`){var r=typeof e.__u==`function`;r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(e){O.__e(e,n)}}function Ae(e,t,n){var r,i;if(O.unmount&&O.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||ke(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){O.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&Ae(r[i],t,n||typeof e.type!=`function`);n||ue(e.__e),e.__c=e.__=e.__e=void 0}function je(e,t,n){return this.constructor(e,n)}function Me(e,t,n){var r,i,a,o;t==document&&(t=document.documentElement),O.__&&O.__(e,t),i=(r=typeof n==`function`)?null:n&&n.__k||t.__k,a=[],o=[],we(t,e=(!r&&n||t).__k=P(F,null,[e]),i||ae,ae,t.namespaceURI,!r&&n?[n]:i?null:t.firstChild?D.call(t.childNodes):null,a,!r&&n?n:i?i.__e:t.firstChild,r,o),Ee(a,e,o)}function Ne(e){function t(e){var n,r;return this.getChildContext||(n=new Set,(r={})[t.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!=e.value&&n.forEach(function(e){e.__e=!0,he(e)})},this.sub=function(e){n.add(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.delete(e),t&&t.call(e)}}),e.children}return t.__c=`__cC`+ ie++,t.__=e,t.Provider=t.__l=(t.Consumer=function(e,t){return e.children(t)}).contextType=t,t}D=oe.slice,O={__e:function(e,t,n,r){for(var i,a,o;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(e)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),o=i.__d),o)return i.__E=i}catch(t){e=t}throw e}},k=0,fe.prototype.setState=function(e,t){var n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=le({},this.state);typeof e==`function`&&(e=e(le({},n),this.props)),e&&le(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),he(this))},fe.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),he(this))},fe.prototype.render=F,A=[],j=typeof Promise==`function`?Promise.prototype.then.bind(Promise.resolve()):setTimeout,M=function(e,t){return e.__v.__b-t.__v.__b},ge.__r=0,N=/(PointerCapture)$|Capture$/i,te=0,ne=Ce(!1),re=Ce(!0),ie=0;var Pe,Fe,Ie,Le,Re=0,ze=[],Be=O,Ve=Be.__b,He=Be.__r,Ue=Be.diffed,We=Be.__c,Ge=Be.unmount,Ke=Be.__;function qe(e,t){Be.__h&&Be.__h(Fe,e,Re||t),Re=0;var n=Fe.__H||={__:[],__h:[]};return e>=n.__.length&&n.__.push({}),n.__[e]}function I(e){return Re=1,Je(rt,e)}function Je(e,t,n){var r=qe(Pe++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):rt(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=Fe,!Fe.__f)){var i=function(e,t,n){if(!r.__c.__H)return!0;var i=r.__c.__H.__.filter(function(e){return!!e.__c});if(i.every(function(e){return!e.__N}))return!a||a.call(this,e,t,n);var o=r.__c.props!==e;return i.forEach(function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}}),a&&a.call(this,e,t,n)||o};Fe.__f=!0;var a=Fe.shouldComponentUpdate,o=Fe.componentWillUpdate;Fe.componentWillUpdate=function(e,t,n){if(this.__e){var r=a;a=void 0,i(e,t,n),a=r}o&&o.call(this,e,t,n)},Fe.shouldComponentUpdate=i}return r.__N||r.__}function L(e,t){var n=qe(Pe++,3);!Be.__s&&nt(n.__H,t)&&(n.__=e,n.u=t,Fe.__H.__h.push(n))}function Ye(e,t){var n=qe(Pe++,4);!Be.__s&&nt(n.__H,t)&&(n.__=e,n.u=t,Fe.__h.push(n))}function R(e){return Re=5,z(function(){return{current:e}},[])}function z(e,t){var n=qe(Pe++,7);return nt(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function B(e,t){return Re=8,z(function(){return e},t)}function Xe(e){var t=Fe.context[e.__c],n=qe(Pe++,9);return n.c=e,t?(n.__??(n.__=!0,t.sub(Fe)),t.props.value):e.__}function Ze(){for(var e;e=ze.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(et),e.__H.__h.forEach(tt),e.__H.__h=[]}catch(t){e.__H.__h=[],Be.__e(t,e.__v)}}Be.__b=function(e){Fe=null,Ve&&Ve(e)},Be.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ke&&Ke(e,t)},Be.__r=function(e){He&&He(e),Pe=0;var t=(Fe=e.__c).__H;t&&(Ie===Fe?(t.__h=[],Fe.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(et),t.__h.forEach(tt),t.__h=[],Pe=0)),Ie=Fe},Be.diffed=function(e){Ue&&Ue(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ze.push(t)!==1&&Le===Be.requestAnimationFrame||((Le=Be.requestAnimationFrame)||$e)(Ze)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),Ie=Fe=null},Be.__c=function(e,t){t.some(function(e){try{e.__h.forEach(et),e.__h=e.__h.filter(function(e){return!e.__||tt(e)})}catch(n){t.some(function(e){e.__h&&=[]}),t=[],Be.__e(n,e.__v)}}),We&&We(e,t)},Be.unmount=function(e){Ge&&Ge(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{et(e)}catch(e){t=e}}),n.__H=void 0,t&&Be.__e(t,n.__v))};var Qe=typeof requestAnimationFrame==`function`;function $e(e){var t,n=function(){clearTimeout(r),Qe&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);Qe&&(t=requestAnimationFrame(n))}function et(e){var t=Fe,n=e.__c;typeof n==`function`&&(e.__c=void 0,n()),Fe=t}function tt(e){var t=Fe;e.__c=e.__(),Fe=t}function nt(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}function rt(e,t){return typeof t==`function`?t(e):t}var it=`/*! tailwindcss v4.1.17 | MIT License | https://tailwindcss.com */
@layer properties;
@layer theme, base, components, utilities;
@layer theme {
  :root, :host {
    --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
      "Courier New", monospace;
    --color-red-500: oklch(63.7% 0.237 25.331);
    --color-yellow-500: oklch(79.5% 0.184 86.047);
    --color-green-500: oklch(72.3% 0.219 149.579);
    --color-teal-500: oklch(70.4% 0.14 182.503);
    --color-blue-500: oklch(62.3% 0.214 259.815);
    --color-blue-600: oklch(54.6% 0.245 262.881);
    --color-blue-700: oklch(48.8% 0.243 264.376);
    --color-indigo-500: oklch(58.5% 0.233 277.117);
    --color-purple-500: oklch(62.7% 0.265 303.9);
    --color-pink-500: oklch(65.6% 0.241 354.308);
    --color-gray-50: oklch(98.5% 0.002 247.839);
    --color-gray-200: oklch(92.8% 0.006 264.531);
    --color-gray-300: oklch(87.2% 0.01 258.338);
    --color-gray-700: oklch(37.3% 0.034 259.733);
    --color-white: #fff;
    --spacing: 0.25rem;
    --container-sm: 24rem;
    --text-xs: 0.75rem;
    --text-xs--line-height: calc(1 / 0.75);
    --text-sm: 0.875rem;
    --text-sm--line-height: calc(1.25 / 0.875);
    --text-base: 1rem;
    --text-base--line-height: calc(1.5 / 1);
    --text-lg: 1.125rem;
    --text-lg--line-height: calc(1.75 / 1.125);
    --text-xl: 1.25rem;
    --text-xl--line-height: calc(1.75 / 1.25);
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --leading-relaxed: 1.625;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --radius-xl: 0.75rem;
    --radius-2xl: 1rem;
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
    --animate-spin: spin 1s linear infinite;
    --animate-pulse: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    --default-transition-duration: 150ms;
    --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    --default-font-family: var(--font-sans);
    --default-mono-font-family: var(--font-mono);
    --color-bg-app: var(--ep-background-app);
    --color-bg-surface: var(--ep-background-surface);
    --color-bg-surface-alt: var(--ep-background-surface-alt);
    --color-bg-elevated: var(--ep-background-elevated);
    --color-bg-overlay: var(--ep-background-overlay);
    --color-bg-input: var(--ep-background-input);
    --color-fg-primary: var(--ep-foreground-primary);
    --color-fg-secondary: var(--ep-foreground-secondary);
    --color-fg-muted: var(--ep-foreground-muted);
    --color-fg-disabled: var(--ep-foreground-disabled);
    --color-fg-on-accent: var(--ep-foreground-on-accent);
    --color-border-default: var(--ep-border-default);
    --color-border-subtle: var(--ep-border-subtle);
    --color-border-strong: var(--ep-border-strong);
    --color-accent: var(--ep-accent-primary);
    --color-accent-hover: var(--ep-accent-primary-hover);
    --color-accent-light: var(--ep-accent-primary-light);
    --color-accent-fg: var(--ep-accent-primary-foreground);
    --color-interactive-hover: var(--ep-interactive-hover);
    --color-interactive-active: var(--ep-interactive-active);
    --color-interactive-selected: var(--ep-interactive-selected);
    --color-interactive-focus-ring: var(--ep-interactive-focus-ring);
    --color-state-error: var(--ep-state-error);
    --color-state-error-light: var(--ep-state-error-light);
    --color-state-info-light: var(--ep-state-info-light);
    --color-tooltip-bg: var(--ep-tooltip-background);
    --color-tooltip-fg: var(--ep-tooltip-foreground);
  }
}
@layer base {
  *, ::after, ::before, ::backdrop, ::file-selector-button {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    border: 0 solid;
  }
  html, :host {
    line-height: 1.5;
    -webkit-text-size-adjust: 100%;
    -moz-tab-size: 4;
      -o-tab-size: 4;
         tab-size: 4;
    font-family: var(--default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");
    font-feature-settings: var(--default-font-feature-settings, normal);
    font-variation-settings: var(--default-font-variation-settings, normal);
    -webkit-tap-highlight-color: transparent;
  }
  hr {
    height: 0;
    color: inherit;
    border-top-width: 1px;
  }
  abbr:where([title]) {
    -webkit-text-decoration: underline dotted;
    text-decoration: underline dotted;
  }
  h1, h2, h3, h4, h5, h6 {
    font-size: inherit;
    font-weight: inherit;
  }
  a {
    color: inherit;
    -webkit-text-decoration: inherit;
    text-decoration: inherit;
  }
  b, strong {
    font-weight: bolder;
  }
  code, kbd, samp, pre {
    font-family: var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);
    font-feature-settings: var(--default-mono-font-feature-settings, normal);
    font-variation-settings: var(--default-mono-font-variation-settings, normal);
    font-size: 1em;
  }
  small {
    font-size: 80%;
  }
  sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
  }
  sub {
    bottom: -0.25em;
  }
  sup {
    top: -0.5em;
  }
  table {
    text-indent: 0;
    border-color: inherit;
    border-collapse: collapse;
  }
  :-moz-focusring {
    outline: auto;
  }
  progress {
    vertical-align: baseline;
  }
  summary {
    display: list-item;
  }
  ol, ul, menu {
    list-style: none;
  }
  img, svg, video, canvas, audio, iframe, embed, object {
    display: block;
    vertical-align: middle;
  }
  img, video {
    max-width: 100%;
    height: auto;
  }
  button, input, select, optgroup, textarea, ::file-selector-button {
    font: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    letter-spacing: inherit;
    color: inherit;
    border-radius: 0;
    background-color: transparent;
    opacity: 1;
  }
  :where(select:is([multiple], [size])) optgroup {
    font-weight: bolder;
  }
  :where(select:is([multiple], [size])) optgroup option {
    padding-inline-start: 20px;
  }
  ::file-selector-button {
    margin-inline-end: 4px;
  }
  ::-moz-placeholder {
    opacity: 1;
  }
  ::placeholder {
    opacity: 1;
  }
  @supports (not (-webkit-appearance: -apple-pay-button))  or (contain-intrinsic-size: 1px) {
    ::-moz-placeholder {
      color: currentcolor;
      @supports (color: color-mix(in lab, red, red)) {
        color: color-mix(in oklab, currentcolor 50%, transparent);
      }
    }
    ::placeholder {
      color: currentcolor;
      @supports (color: color-mix(in lab, red, red)) {
        color: color-mix(in oklab, currentcolor 50%, transparent);
      }
    }
  }
  textarea {
    resize: vertical;
  }
  ::-webkit-search-decoration {
    -webkit-appearance: none;
  }
  ::-webkit-date-and-time-value {
    min-height: 1lh;
    text-align: inherit;
  }
  ::-webkit-datetime-edit {
    display: inline-flex;
  }
  ::-webkit-datetime-edit-fields-wrapper {
    padding: 0;
  }
  ::-webkit-datetime-edit, ::-webkit-datetime-edit-year-field, ::-webkit-datetime-edit-month-field, ::-webkit-datetime-edit-day-field, ::-webkit-datetime-edit-hour-field, ::-webkit-datetime-edit-minute-field, ::-webkit-datetime-edit-second-field, ::-webkit-datetime-edit-millisecond-field, ::-webkit-datetime-edit-meridiem-field {
    padding-block: 0;
  }
  ::-webkit-calendar-picker-indicator {
    line-height: 1;
  }
  :-moz-ui-invalid {
    box-shadow: none;
  }
  button, input:where([type="button"], [type="reset"], [type="submit"]), ::file-selector-button {
    -webkit-appearance: button;
       -moz-appearance: button;
            appearance: button;
  }
  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {
    height: auto;
  }
  [hidden]:where(:not([hidden="until-found"])) {
    display: none !important;
  }
}
@layer utilities {
  .pointer-events-auto {
    pointer-events: auto;
  }
  .pointer-events-none {
    pointer-events: none;
  }
  .visible {
    visibility: visible;
  }
  .absolute {
    position: absolute;
  }
  .fixed {
    position: fixed;
  }
  .relative {
    position: relative;
  }
  .static {
    position: static;
  }
  .sticky {
    position: sticky;
  }
  .inset-0 {
    inset: calc(var(--spacing) * 0);
  }
  .inset-x-0 {
    inset-inline: calc(var(--spacing) * 0);
  }
  .inset-y-0 {
    inset-block: calc(var(--spacing) * 0);
  }
  .top-0 {
    top: calc(var(--spacing) * 0);
  }
  .top-1\\/2 {
    top: calc(1/2 * 100%);
  }
  .top-4 {
    top: calc(var(--spacing) * 4);
  }
  .top-6 {
    top: calc(var(--spacing) * 6);
  }
  .right-0 {
    right: calc(var(--spacing) * 0);
  }
  .right-1 {
    right: calc(var(--spacing) * 1);
  }
  .right-4 {
    right: calc(var(--spacing) * 4);
  }
  .bottom-0 {
    bottom: calc(var(--spacing) * 0);
  }
  .left-0 {
    left: calc(var(--spacing) * 0);
  }
  .left-1\\/2 {
    left: calc(1/2 * 100%);
  }
  .z-10 {
    z-index: 10;
  }
  .z-40 {
    z-index: 40;
  }
  .z-50 {
    z-index: 50;
  }
  .z-100 {
    z-index: 100;
  }
  .col-start-1 {
    grid-column-start: 1;
  }
  .row-start-1 {
    grid-row-start: 1;
  }
  .container {
    width: 100%;
    @media (width >= 40rem) {
      max-width: 40rem;
    }
    @media (width >= 48rem) {
      max-width: 48rem;
    }
    @media (width >= 64rem) {
      max-width: 64rem;
    }
    @media (width >= 80rem) {
      max-width: 80rem;
    }
    @media (width >= 96rem) {
      max-width: 96rem;
    }
  }
  .mx-4 {
    margin-inline: calc(var(--spacing) * 4);
  }
  .my-2 {
    margin-block: calc(var(--spacing) * 2);
  }
  .my-4 {
    margin-block: calc(var(--spacing) * 4);
  }
  .mt-0\\.5 {
    margin-top: calc(var(--spacing) * 0.5);
  }
  .mt-1 {
    margin-top: calc(var(--spacing) * 1);
  }
  .mt-2 {
    margin-top: calc(var(--spacing) * 2);
  }
  .mt-3 {
    margin-top: calc(var(--spacing) * 3);
  }
  .mt-4 {
    margin-top: calc(var(--spacing) * 4);
  }
  .mt-5 {
    margin-top: calc(var(--spacing) * 5);
  }
  .mt-6 {
    margin-top: calc(var(--spacing) * 6);
  }
  .mr-2 {
    margin-right: calc(var(--spacing) * 2);
  }
  .mb-1 {
    margin-bottom: calc(var(--spacing) * 1);
  }
  .mb-1\\.5 {
    margin-bottom: calc(var(--spacing) * 1.5);
  }
  .mb-2 {
    margin-bottom: calc(var(--spacing) * 2);
  }
  .mb-3 {
    margin-bottom: calc(var(--spacing) * 3);
  }
  .mb-4 {
    margin-bottom: calc(var(--spacing) * 4);
  }
  .mb-6 {
    margin-bottom: calc(var(--spacing) * 6);
  }
  .ml-1 {
    margin-left: calc(var(--spacing) * 1);
  }
  .block {
    display: block;
  }
  .contents {
    display: contents;
  }
  .flex {
    display: flex;
  }
  .grid {
    display: grid;
  }
  .hidden {
    display: none;
  }
  .inline {
    display: inline;
  }
  .inline-block {
    display: inline-block;
  }
  .inline-flex {
    display: inline-flex;
  }
  .h-1 {
    height: calc(var(--spacing) * 1);
  }
  .h-1\\.5 {
    height: calc(var(--spacing) * 1.5);
  }
  .h-2 {
    height: calc(var(--spacing) * 2);
  }
  .h-3 {
    height: calc(var(--spacing) * 3);
  }
  .h-3\\.5 {
    height: calc(var(--spacing) * 3.5);
  }
  .h-4 {
    height: calc(var(--spacing) * 4);
  }
  .h-5 {
    height: calc(var(--spacing) * 5);
  }
  .h-6 {
    height: calc(var(--spacing) * 6);
  }
  .h-7 {
    height: calc(var(--spacing) * 7);
  }
  .h-8 {
    height: calc(var(--spacing) * 8);
  }
  .h-9 {
    height: calc(var(--spacing) * 9);
  }
  .h-10 {
    height: calc(var(--spacing) * 10);
  }
  .h-16 {
    height: calc(var(--spacing) * 16);
  }
  .h-18 {
    height: calc(var(--spacing) * 18);
  }
  .h-\\[32px\\] {
    height: 32px;
  }
  .h-full {
    height: 100%;
  }
  .h-px {
    height: 1px;
  }
  .max-h-48 {
    max-height: calc(var(--spacing) * 48);
  }
  .max-h-60 {
    max-height: calc(var(--spacing) * 60);
  }
  .min-h-0 {
    min-height: calc(var(--spacing) * 0);
  }
  .\\!w-full {
    width: 100% !important;
  }
  .w-2 {
    width: calc(var(--spacing) * 2);
  }
  .w-3 {
    width: calc(var(--spacing) * 3);
  }
  .w-3\\.5 {
    width: calc(var(--spacing) * 3.5);
  }
  .w-4 {
    width: calc(var(--spacing) * 4);
  }
  .w-5 {
    width: calc(var(--spacing) * 5);
  }
  .w-6 {
    width: calc(var(--spacing) * 6);
  }
  .w-8 {
    width: calc(var(--spacing) * 8);
  }
  .w-9 {
    width: calc(var(--spacing) * 9);
  }
  .w-10 {
    width: calc(var(--spacing) * 10);
  }
  .w-12 {
    width: calc(var(--spacing) * 12);
  }
  .w-16 {
    width: calc(var(--spacing) * 16);
  }
  .w-18 {
    width: calc(var(--spacing) * 18);
  }
  .w-32 {
    width: calc(var(--spacing) * 32);
  }
  .w-36 {
    width: calc(var(--spacing) * 36);
  }
  .w-\\[32px\\] {
    width: 32px;
  }
  .w-auto {
    width: auto;
  }
  .w-full {
    width: 100%;
  }
  .w-px {
    width: 1px;
  }
  .max-w-\\[150px\\] {
    max-width: 150px;
  }
  .max-w-\\[240px\\] {
    max-width: 240px;
  }
  .max-w-sm {
    max-width: var(--container-sm);
  }
  .min-w-0 {
    min-width: calc(var(--spacing) * 0);
  }
  .min-w-\\[8rem\\] {
    min-width: 8rem;
  }
  .min-w-\\[32px\\] {
    min-width: 32px;
  }
  .min-w-\\[120px\\] {
    min-width: 120px;
  }
  .min-w-\\[200px\\] {
    min-width: 200px;
  }
  .flex-1 {
    flex: 1;
  }
  .flex-shrink-0 {
    flex-shrink: 0;
  }
  .shrink-0 {
    flex-shrink: 0;
  }
  .-translate-x-1\\/2 {
    --tw-translate-x: calc(calc(1/2 * 100%) * -1);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .translate-x-\\[1px\\] {
    --tw-translate-x: 1px;
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .-translate-y-1\\/2 {
    --tw-translate-y: calc(calc(1/2 * 100%) * -1);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .translate-y-\\[1px\\] {
    --tw-translate-y: 1px;
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .scale-95 {
    --tw-scale-x: 95%;
    --tw-scale-y: 95%;
    --tw-scale-z: 95%;
    scale: var(--tw-scale-x) var(--tw-scale-y);
  }
  .scale-100 {
    --tw-scale-x: 100%;
    --tw-scale-y: 100%;
    --tw-scale-z: 100%;
    scale: var(--tw-scale-x) var(--tw-scale-y);
  }
  .rotate-45 {
    rotate: 45deg;
  }
  .transform {
    transform: var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,);
  }
  .animate-pulse {
    animation: var(--animate-pulse);
  }
  .animate-spin {
    animation: var(--animate-spin);
  }
  .cursor-default {
    cursor: default;
  }
  .cursor-grab {
    cursor: grab;
  }
  .cursor-not-allowed {
    cursor: not-allowed;
  }
  .cursor-pointer {
    cursor: pointer;
  }
  .touch-none {
    touch-action: none;
  }
  .resize {
    resize: both;
  }
  .appearance-none {
    -webkit-appearance: none;
       -moz-appearance: none;
            appearance: none;
  }
  .grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  .grid-cols-6 {
    grid-template-columns: repeat(6, minmax(0, 1fr));
  }
  .flex-col {
    flex-direction: column;
  }
  .flex-row {
    flex-direction: row;
  }
  .flex-wrap {
    flex-wrap: wrap;
  }
  .items-center {
    align-items: center;
  }
  .items-end {
    align-items: flex-end;
  }
  .items-start {
    align-items: flex-start;
  }
  .justify-between {
    justify-content: space-between;
  }
  .justify-center {
    justify-content: center;
  }
  .justify-end {
    justify-content: flex-end;
  }
  .justify-start {
    justify-content: flex-start;
  }
  .gap-1 {
    gap: calc(var(--spacing) * 1);
  }
  .gap-2 {
    gap: calc(var(--spacing) * 2);
  }
  .gap-3 {
    gap: calc(var(--spacing) * 3);
  }
  .gap-4 {
    gap: calc(var(--spacing) * 4);
  }
  .space-y-2 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 2) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-3 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 3) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-4 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 4) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-6 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 6) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 6) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .gap-x-1 {
    -moz-column-gap: calc(var(--spacing) * 1);
         column-gap: calc(var(--spacing) * 1);
  }
  .space-x-2 {
    :where(& > :not(:last-child)) {
      --tw-space-x-reverse: 0;
      margin-inline-start: calc(calc(var(--spacing) * 2) * var(--tw-space-x-reverse));
      margin-inline-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-x-reverse)));
    }
  }
  .space-x-3 {
    :where(& > :not(:last-child)) {
      --tw-space-x-reverse: 0;
      margin-inline-start: calc(calc(var(--spacing) * 3) * var(--tw-space-x-reverse));
      margin-inline-end: calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-x-reverse)));
    }
  }
  .gap-y-4 {
    row-gap: calc(var(--spacing) * 4);
  }
  .divide-y {
    :where(& > :not(:last-child)) {
      --tw-divide-y-reverse: 0;
      border-bottom-style: var(--tw-border-style);
      border-top-style: var(--tw-border-style);
      border-top-width: calc(1px * var(--tw-divide-y-reverse));
      border-bottom-width: calc(1px * calc(1 - var(--tw-divide-y-reverse)));
    }
  }
  .divide-border-subtle {
    :where(& > :not(:last-child)) {
      border-color: var(--color-border-subtle);
    }
  }
  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .overflow-auto {
    overflow: auto;
  }
  .overflow-hidden {
    overflow: hidden;
  }
  .overflow-x-auto {
    overflow-x: auto;
  }
  .overflow-y-auto {
    overflow-y: auto;
  }
  .rounded {
    border-radius: 0.25rem;
  }
  .rounded-\\[3px\\] {
    border-radius: 3px;
  }
  .rounded-full {
    border-radius: calc(infinity * 1px);
  }
  .rounded-lg {
    border-radius: var(--radius-lg);
  }
  .rounded-md {
    border-radius: var(--radius-md);
  }
  .rounded-none {
    border-radius: 0;
  }
  .rounded-xl {
    border-radius: var(--radius-xl);
  }
  .rounded-t-2xl {
    border-top-left-radius: var(--radius-2xl);
    border-top-right-radius: var(--radius-2xl);
  }
  .rounded-t-lg {
    border-top-left-radius: var(--radius-lg);
    border-top-right-radius: var(--radius-lg);
  }
  .rounded-l-md {
    border-top-left-radius: var(--radius-md);
    border-bottom-left-radius: var(--radius-md);
  }
  .rounded-r-md {
    border-top-right-radius: var(--radius-md);
    border-bottom-right-radius: var(--radius-md);
  }
  .border {
    border-style: var(--tw-border-style);
    border-width: 1px;
  }
  .border-0 {
    border-style: var(--tw-border-style);
    border-width: 0px;
  }
  .border-2 {
    border-style: var(--tw-border-style);
    border-width: 2px;
  }
  .border-3 {
    border-style: var(--tw-border-style);
    border-width: 3px;
  }
  .border-4 {
    border-style: var(--tw-border-style);
    border-width: 4px;
  }
  .border-t {
    border-top-style: var(--tw-border-style);
    border-top-width: 1px;
  }
  .border-r {
    border-right-style: var(--tw-border-style);
    border-right-width: 1px;
  }
  .border-r-0 {
    border-right-style: var(--tw-border-style);
    border-right-width: 0px;
  }
  .border-b {
    border-bottom-style: var(--tw-border-style);
    border-bottom-width: 1px;
  }
  .border-b-2 {
    border-bottom-style: var(--tw-border-style);
    border-bottom-width: 2px;
  }
  .border-l {
    border-left-style: var(--tw-border-style);
    border-left-width: 1px;
  }
  .border-none {
    --tw-border-style: none;
    border-style: none;
  }
  .border-\\[\\#cfd4da\\] {
    border-color: #cfd4da;
  }
  .border-accent {
    border-color: var(--color-accent);
  }
  .border-border-default {
    border-color: var(--color-border-default);
  }
  .border-border-strong {
    border-color: var(--color-border-strong);
  }
  .border-border-subtle {
    border-color: var(--color-border-subtle);
  }
  .border-gray-200 {
    border-color: var(--color-gray-200);
  }
  .border-gray-300 {
    border-color: var(--color-gray-300);
  }
  .border-state-error {
    border-color: var(--color-state-error);
  }
  .border-transparent {
    border-color: transparent;
  }
  .border-t-accent {
    border-top-color: var(--color-accent);
  }
  .border-r-accent {
    border-right-color: var(--color-accent);
  }
  .border-b-accent {
    border-bottom-color: var(--color-accent);
  }
  .border-b-transparent {
    border-bottom-color: transparent;
  }
  .bg-\\[\\#f8f9fa\\] {
    background-color: #f8f9fa;
  }
  .bg-accent {
    background-color: var(--color-accent);
  }
  .bg-accent-light {
    background-color: var(--color-accent-light);
  }
  .bg-bg-app {
    background-color: var(--color-bg-app);
  }
  .bg-bg-elevated {
    background-color: var(--color-bg-elevated);
  }
  .bg-bg-input {
    background-color: var(--color-bg-input);
  }
  .bg-bg-overlay {
    background-color: var(--color-bg-overlay);
  }
  .bg-bg-surface {
    background-color: var(--color-bg-surface);
  }
  .bg-bg-surface-alt {
    background-color: var(--color-bg-surface-alt);
  }
  .bg-bg-surface\\/80 {
    background-color: var(--color-bg-surface);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-bg-surface) 80%, transparent);
    }
  }
  .bg-blue-500 {
    background-color: var(--color-blue-500);
  }
  .bg-blue-600 {
    background-color: var(--color-blue-600);
  }
  .bg-border-default {
    background-color: var(--color-border-default);
  }
  .bg-border-subtle {
    background-color: var(--color-border-subtle);
  }
  .bg-green-500 {
    background-color: var(--color-green-500);
  }
  .bg-indigo-500 {
    background-color: var(--color-indigo-500);
  }
  .bg-inherit {
    background-color: inherit;
  }
  .bg-interactive-hover {
    background-color: var(--color-interactive-hover);
  }
  .bg-interactive-selected {
    background-color: var(--color-interactive-selected);
  }
  .bg-pink-500 {
    background-color: var(--color-pink-500);
  }
  .bg-purple-500 {
    background-color: var(--color-purple-500);
  }
  .bg-red-500 {
    background-color: var(--color-red-500);
  }
  .bg-state-error-light {
    background-color: var(--color-state-error-light);
  }
  .bg-state-info-light {
    background-color: var(--color-state-info-light);
  }
  .bg-teal-500 {
    background-color: var(--color-teal-500);
  }
  .bg-tooltip-bg {
    background-color: var(--color-tooltip-bg);
  }
  .bg-transparent {
    background-color: transparent;
  }
  .bg-white {
    background-color: var(--color-white);
  }
  .bg-yellow-500 {
    background-color: var(--color-yellow-500);
  }
  .p-0 {
    padding: calc(var(--spacing) * 0);
  }
  .p-1 {
    padding: calc(var(--spacing) * 1);
  }
  .p-1\\.5 {
    padding: calc(var(--spacing) * 1.5);
  }
  .p-2 {
    padding: calc(var(--spacing) * 2);
  }
  .p-3 {
    padding: calc(var(--spacing) * 3);
  }
  .p-4 {
    padding: calc(var(--spacing) * 4);
  }
  .p-5 {
    padding: calc(var(--spacing) * 5);
  }
  .p-6 {
    padding: calc(var(--spacing) * 6);
  }
  .p-8 {
    padding: calc(var(--spacing) * 8);
  }
  .p-\\[5px\\] {
    padding: 5px;
  }
  .px-1 {
    padding-inline: calc(var(--spacing) * 1);
  }
  .px-2 {
    padding-inline: calc(var(--spacing) * 2);
  }
  .px-3 {
    padding-inline: calc(var(--spacing) * 3);
  }
  .px-4 {
    padding-inline: calc(var(--spacing) * 4);
  }
  .px-5 {
    padding-inline: calc(var(--spacing) * 5);
  }
  .px-6 {
    padding-inline: calc(var(--spacing) * 6);
  }
  .py-1 {
    padding-block: calc(var(--spacing) * 1);
  }
  .py-1\\.5 {
    padding-block: calc(var(--spacing) * 1.5);
  }
  .py-2 {
    padding-block: calc(var(--spacing) * 2);
  }
  .py-2\\.5 {
    padding-block: calc(var(--spacing) * 2.5);
  }
  .py-3 {
    padding-block: calc(var(--spacing) * 3);
  }
  .py-4 {
    padding-block: calc(var(--spacing) * 4);
  }
  .pt-2 {
    padding-top: calc(var(--spacing) * 2);
  }
  .pt-4 {
    padding-top: calc(var(--spacing) * 4);
  }
  .pr-2 {
    padding-right: calc(var(--spacing) * 2);
  }
  .pr-3 {
    padding-right: calc(var(--spacing) * 3);
  }
  .pr-7 {
    padding-right: calc(var(--spacing) * 7);
  }
  .pr-9 {
    padding-right: calc(var(--spacing) * 9);
  }
  .pb-3 {
    padding-bottom: calc(var(--spacing) * 3);
  }
  .pl-2 {
    padding-left: calc(var(--spacing) * 2);
  }
  .pl-3 {
    padding-left: calc(var(--spacing) * 3);
  }
  .pl-4 {
    padding-left: calc(var(--spacing) * 4);
  }
  .pl-8 {
    padding-left: calc(var(--spacing) * 8);
  }
  .text-center {
    text-align: center;
  }
  .text-left {
    text-align: left;
  }
  .text-right {
    text-align: right;
  }
  .text-base {
    font-size: var(--text-base);
    line-height: var(--tw-leading, var(--text-base--line-height));
  }
  .text-lg {
    font-size: var(--text-lg);
    line-height: var(--tw-leading, var(--text-lg--line-height));
  }
  .text-sm {
    font-size: var(--text-sm);
    line-height: var(--tw-leading, var(--text-sm--line-height));
  }
  .text-xl {
    font-size: var(--text-xl);
    line-height: var(--tw-leading, var(--text-xl--line-height));
  }
  .text-xs {
    font-size: var(--text-xs);
    line-height: var(--tw-leading, var(--text-xs--line-height));
  }
  .text-\\[13px\\] {
    font-size: 13px;
  }
  .leading-none {
    --tw-leading: 1;
    line-height: 1;
  }
  .leading-relaxed {
    --tw-leading: var(--leading-relaxed);
    line-height: var(--leading-relaxed);
  }
  .font-bold {
    --tw-font-weight: var(--font-weight-bold);
    font-weight: var(--font-weight-bold);
  }
  .font-medium {
    --tw-font-weight: var(--font-weight-medium);
    font-weight: var(--font-weight-medium);
  }
  .font-semibold {
    --tw-font-weight: var(--font-weight-semibold);
    font-weight: var(--font-weight-semibold);
  }
  .whitespace-nowrap {
    white-space: nowrap;
  }
  .text-accent {
    color: var(--color-accent);
  }
  .text-accent-fg {
    color: var(--color-accent-fg);
  }
  .text-fg-disabled {
    color: var(--color-fg-disabled);
  }
  .text-fg-muted {
    color: var(--color-fg-muted);
  }
  .text-fg-on-accent {
    color: var(--color-fg-on-accent);
  }
  .text-fg-primary {
    color: var(--color-fg-primary);
  }
  .text-fg-secondary {
    color: var(--color-fg-secondary);
  }
  .text-gray-700 {
    color: var(--color-gray-700);
  }
  .text-state-error {
    color: var(--color-state-error);
  }
  .text-tooltip-fg {
    color: var(--color-tooltip-fg);
  }
  .text-white {
    color: var(--color-white);
  }
  .uppercase {
    text-transform: uppercase;
  }
  .italic {
    font-style: italic;
  }
  .underline {
    text-decoration-line: underline;
  }
  .placeholder-fg-muted {
    &::-moz-placeholder {
      color: var(--color-fg-muted);
    }
    &::placeholder {
      color: var(--color-fg-muted);
    }
  }
  .accent-accent {
    accent-color: var(--color-accent);
  }
  .opacity-0 {
    opacity: 0%;
  }
  .opacity-50 {
    opacity: 50%;
  }
  .opacity-100 {
    opacity: 100%;
  }
  .shadow {
    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-2xl {
    --tw-shadow: 0 25px 50px -12px var(--tw-shadow-color, rgb(0 0 0 / 0.25));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-lg {
    --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-md {
    --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-sm {
    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring-1 {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring-2 {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring-accent {
    --tw-ring-color: var(--color-accent);
  }
  .ring-border-default {
    --tw-ring-color: var(--color-border-default);
  }
  .ring-interactive-focus-ring {
    --tw-ring-color: var(--color-interactive-focus-ring);
  }
  .outline {
    outline-style: var(--tw-outline-style);
    outline-width: 1px;
  }
  .outline-1 {
    outline-style: var(--tw-outline-style);
    outline-width: 1px;
  }
  .outline-2 {
    outline-style: var(--tw-outline-style);
    outline-width: 2px;
  }
  .-outline-offset-1 {
    outline-offset: calc(1px * -1);
  }
  .outline-offset-2 {
    outline-offset: 2px;
  }
  .outline-accent {
    outline-color: var(--color-accent);
  }
  .outline-border-default {
    outline-color: var(--color-border-default);
  }
  .backdrop-blur {
    --tw-backdrop-blur: blur(8px);
    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);
  }
  .transition {
    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to, opacity, box-shadow, transform, translate, scale, rotate, filter, backdrop-filter, display, content-visibility, overlay, pointer-events;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-\\[height\\] {
    transition-property: height;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-all {
    transition-property: all;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-colors {
    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-opacity {
    transition-property: opacity;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-transform {
    transition-property: transform, translate, scale, rotate;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .duration-150 {
    --tw-duration: 150ms;
    transition-duration: 150ms;
  }
  .duration-200 {
    --tw-duration: 200ms;
    transition-duration: 200ms;
  }
  .duration-300 {
    --tw-duration: 300ms;
    transition-duration: 300ms;
  }
  .ease-in-out {
    --tw-ease: var(--ease-in-out);
    transition-timing-function: var(--ease-in-out);
  }
  .ease-out {
    --tw-ease: var(--ease-out);
    transition-timing-function: var(--ease-out);
  }
  .outline-none {
    --tw-outline-style: none;
    outline-style: none;
  }
  .select-none {
    -webkit-user-select: none;
    -moz-user-select: none;
         user-select: none;
  }
  .group-hover\\:opacity-100 {
    &:is(:where(.group):hover *) {
      @media (hover: hover) {
        opacity: 100%;
      }
    }
  }
  .peer-checked\\:opacity-100 {
    &:is(:where(.peer):checked ~ *) {
      opacity: 100%;
    }
  }
  .placeholder\\:text-fg-muted {
    &::-moz-placeholder {
      color: var(--color-fg-muted);
    }
    &::placeholder {
      color: var(--color-fg-muted);
    }
  }
  .first\\:mt-0 {
    &:first-child {
      margin-top: calc(var(--spacing) * 0);
    }
  }
  .checked\\:border-accent {
    &:checked {
      border-color: var(--color-accent);
    }
  }
  .checked\\:bg-accent {
    &:checked {
      background-color: var(--color-accent);
    }
  }
  .hover\\:border-b-accent {
    &:hover {
      @media (hover: hover) {
        border-bottom-color: var(--color-accent);
      }
    }
  }
  .hover\\:border-b-fg-muted {
    &:hover {
      @media (hover: hover) {
        border-bottom-color: var(--color-fg-muted);
      }
    }
  }
  .hover\\:\\!bg-accent-hover {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-accent-hover) !important;
      }
    }
  }
  .hover\\:\\!bg-blue-700 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-blue-700) !important;
      }
    }
  }
  .hover\\:bg-accent {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-accent);
      }
    }
  }
  .hover\\:bg-accent-hover {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-accent-hover);
      }
    }
  }
  .hover\\:bg-border-default {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-border-default);
      }
    }
  }
  .hover\\:bg-gray-50 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-gray-50);
      }
    }
  }
  .hover\\:bg-interactive-hover {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-interactive-hover);
      }
    }
  }
  .hover\\:bg-transparent {
    &:hover {
      @media (hover: hover) {
        background-color: transparent;
      }
    }
  }
  .hover\\:text-accent-hover {
    &:hover {
      @media (hover: hover) {
        color: var(--color-accent-hover);
      }
    }
  }
  .hover\\:text-fg-on-accent {
    &:hover {
      @media (hover: hover) {
        color: var(--color-fg-on-accent);
      }
    }
  }
  .hover\\:text-fg-primary {
    &:hover {
      @media (hover: hover) {
        color: var(--color-fg-primary);
      }
    }
  }
  .hover\\:text-fg-secondary {
    &:hover {
      @media (hover: hover) {
        color: var(--color-fg-secondary);
      }
    }
  }
  .hover\\:shadow-md {
    &:hover {
      @media (hover: hover) {
        --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .hover\\:ring {
    &:hover {
      @media (hover: hover) {
        --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .hover\\:ring-0 {
    &:hover {
      @media (hover: hover) {
        --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .hover\\:ring-accent {
    &:hover {
      @media (hover: hover) {
        --tw-ring-color: var(--color-accent);
      }
    }
  }
  .hover\\:ring-transparent {
    &:hover {
      @media (hover: hover) {
        --tw-ring-color: transparent;
      }
    }
  }
  .focus\\:border-accent {
    &:focus {
      border-color: var(--color-accent);
    }
  }
  .focus\\:border-blue-500 {
    &:focus {
      border-color: var(--color-blue-500);
    }
  }
  .focus\\:border-transparent {
    &:focus {
      border-color: transparent;
    }
  }
  .focus\\:ring-1 {
    &:focus {
      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
  .focus\\:ring-2 {
    &:focus {
      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
  .focus\\:ring-accent {
    &:focus {
      --tw-ring-color: var(--color-accent);
    }
  }
  .focus\\:ring-blue-500 {
    &:focus {
      --tw-ring-color: var(--color-blue-500);
    }
  }
  .focus\\:outline-none {
    &:focus {
      --tw-outline-style: none;
      outline-style: none;
    }
  }
  .active\\:cursor-grabbing {
    &:active {
      cursor: grabbing;
    }
  }
  .active\\:bg-interactive-active {
    &:active {
      background-color: var(--color-interactive-active);
    }
  }
  .disabled\\:cursor-not-allowed {
    &:disabled {
      cursor: not-allowed;
    }
  }
  .disabled\\:opacity-40 {
    &:disabled {
      opacity: 40%;
    }
  }
  .disabled\\:opacity-50 {
    &:disabled {
      opacity: 50%;
    }
  }
  .disabled\\:hover\\:bg-transparent {
    &:disabled {
      &:hover {
        @media (hover: hover) {
          background-color: transparent;
        }
      }
    }
  }
  .disabled\\:hover\\:ring-0 {
    &:disabled {
      &:hover {
        @media (hover: hover) {
          --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
          box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
        }
      }
    }
  }
  .md\\:flex {
    @media (width >= 48rem) {
      display: flex;
    }
  }
  .md\\:h-auto {
    @media (width >= 48rem) {
      height: auto;
    }
  }
  .md\\:max-h-\\[80vh\\] {
    @media (width >= 48rem) {
      max-height: 80vh;
    }
  }
  .md\\:w-\\[28rem\\] {
    @media (width >= 48rem) {
      width: 28rem;
    }
  }
  .md\\:max-w-\\[90vw\\] {
    @media (width >= 48rem) {
      max-width: 90vw;
    }
  }
  .md\\:flex-none {
    @media (width >= 48rem) {
      flex: none;
    }
  }
  .md\\:items-center {
    @media (width >= 48rem) {
      align-items: center;
    }
  }
  .md\\:justify-center {
    @media (width >= 48rem) {
      justify-content: center;
    }
  }
  .md\\:rounded-lg {
    @media (width >= 48rem) {
      border-radius: var(--radius-lg);
    }
  }
  .md\\:border {
    @media (width >= 48rem) {
      border-style: var(--tw-border-style);
      border-width: 1px;
    }
  }
  .md\\:border-border-subtle {
    @media (width >= 48rem) {
      border-color: var(--color-border-subtle);
    }
  }
  .md\\:shadow-lg {
    @media (width >= 48rem) {
      --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
}
@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap');
:host {
  --tw-translate-x: 0;
  --tw-translate-y: 0;
  --tw-translate-z: 0;
  --tw-rotate-x: rotateX(0);
  --tw-rotate-y: rotateY(0);
  --tw-rotate-z: rotateZ(0);
  --tw-skew-x: skewX(0);
  --tw-skew-y: skewY(0);
  --tw-border-style: solid;
  --tw-gradient-from: #0000;
  --tw-gradient-via: #0000;
  --tw-gradient-to: #0000;
  --tw-gradient-from-position: 0%;
  --tw-gradient-via-position: 50%;
  --tw-gradient-to-position: 100%;
  --tw-shadow: 0 0 #0000;
  --tw-inset-shadow: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
  --tw-inset-ring-shadow: 0 0 #0000;
  --tw-ring-offset-width: 0px;
  --tw-ring-offset-color: #fff;
  --tw-ring-offset-shadow: 0 0 #0000;
  --tw-outline-style: solid;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  width: 100%;
  height: 100%;
  font-family: 'Open Sans', system-ui, sans-serif;
  color: var(--ep-foreground-primary);
  background-color: var(--ep-background-surface);
}
:host *::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
:host *::-webkit-scrollbar-track {
  background: var(--ep-scrollbar-track);
}
:host *::-webkit-scrollbar-thumb {
  background: var(--ep-scrollbar-thumb);
  border-radius: 4px;
}
:host *::-webkit-scrollbar-thumb:hover {
  background: var(--ep-scrollbar-thumb-hover);
}
@property --tw-translate-x {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-translate-y {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-translate-z {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-scale-x {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-y {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-z {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-rotate-x {
  syntax: "*";
  inherits: false;
}
@property --tw-rotate-y {
  syntax: "*";
  inherits: false;
}
@property --tw-rotate-z {
  syntax: "*";
  inherits: false;
}
@property --tw-skew-x {
  syntax: "*";
  inherits: false;
}
@property --tw-skew-y {
  syntax: "*";
  inherits: false;
}
@property --tw-space-y-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-space-x-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-divide-y-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-border-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-leading {
  syntax: "*";
  inherits: false;
}
@property --tw-font-weight {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-inset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-ring-inset {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-offset-width {
  syntax: "<length>";
  inherits: false;
  initial-value: 0px;
}
@property --tw-ring-offset-color {
  syntax: "*";
  inherits: false;
  initial-value: #fff;
}
@property --tw-ring-offset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-outline-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-backdrop-blur {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-brightness {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-contrast {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-grayscale {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-hue-rotate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-invert {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-opacity {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-saturate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-sepia {
  syntax: "*";
  inherits: false;
}
@property --tw-duration {
  syntax: "*";
  inherits: false;
}
@property --tw-ease {
  syntax: "*";
  inherits: false;
}
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
@keyframes pulse {
  50% {
    opacity: 0.5;
  }
}
@layer properties {
  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {
    *, ::before, ::after, ::backdrop {
      --tw-translate-x: 0;
      --tw-translate-y: 0;
      --tw-translate-z: 0;
      --tw-scale-x: 1;
      --tw-scale-y: 1;
      --tw-scale-z: 1;
      --tw-rotate-x: initial;
      --tw-rotate-y: initial;
      --tw-rotate-z: initial;
      --tw-skew-x: initial;
      --tw-skew-y: initial;
      --tw-space-y-reverse: 0;
      --tw-space-x-reverse: 0;
      --tw-divide-y-reverse: 0;
      --tw-border-style: solid;
      --tw-leading: initial;
      --tw-font-weight: initial;
      --tw-shadow: 0 0 #0000;
      --tw-shadow-color: initial;
      --tw-shadow-alpha: 100%;
      --tw-inset-shadow: 0 0 #0000;
      --tw-inset-shadow-color: initial;
      --tw-inset-shadow-alpha: 100%;
      --tw-ring-color: initial;
      --tw-ring-shadow: 0 0 #0000;
      --tw-inset-ring-color: initial;
      --tw-inset-ring-shadow: 0 0 #0000;
      --tw-ring-inset: initial;
      --tw-ring-offset-width: 0px;
      --tw-ring-offset-color: #fff;
      --tw-ring-offset-shadow: 0 0 #0000;
      --tw-outline-style: solid;
      --tw-backdrop-blur: initial;
      --tw-backdrop-brightness: initial;
      --tw-backdrop-contrast: initial;
      --tw-backdrop-grayscale: initial;
      --tw-backdrop-hue-rotate: initial;
      --tw-backdrop-invert: initial;
      --tw-backdrop-opacity: initial;
      --tw-backdrop-saturate: initial;
      --tw-backdrop-sepia: initial;
      --tw-duration: initial;
      --tw-ease: initial;
    }
  }
}
`,at=0;function V(e,t,n,r,i,a){t||={};var o,s,c=t;if(`ref`in c)for(s in c={},t)s==`ref`?o=t[s]:c[s]=t[s];var l={type:e,props:c,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--at,__i:-1,__u:0,__source:i,__self:a};if(typeof e==`function`&&(o=e.defaultProps))for(s in o)c[s]===void 0&&(c[s]=o[s]);return O.vnode&&O.vnode(l),l}var ot=(e=>(e[e.Degree0=0]=`Degree0`,e[e.Degree90=1]=`Degree90`,e[e.Degree180=2]=`Degree180`,e[e.Degree270=3]=`Degree270`,e))(ot||{});function st(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function ct(e){return{width:Math.ceil(e.width),height:Math.ceil(e.height)}}function lt(e){return{origin:st(e.origin),size:ct(e.size)}}function ut(e){let{width:t,height:n}=e;return{width:n,height:t}}function dt(e,t,n){return{width:(e=t%2==0?e:ut(e)).width*n,height:e.height*n}}function ft(e){let t=[e.p1.x,e.p2.x,e.p3.x,e.p4.x],n=[e.p1.y,e.p2.y,e.p3.y,e.p4.y];return{origin:{x:Math.min(...t),y:Math.min(...n)},size:{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}}}function pt(e){return{p1:{x:e.origin.x,y:e.origin.y},p2:{x:e.origin.x+e.size.width,y:e.origin.y},p3:{x:e.origin.x+e.size.width,y:e.origin.y+e.size.height},p4:{x:e.origin.x,y:e.origin.y+e.size.height}}}function mt(e,t,n){let r=t.x,i=t.y;switch(n){case 0:r=t.x,i=t.y;break;case 1:r=e.height-t.y,i=t.x;break;case 2:r=e.width-t.x,i=e.height-t.y;break;case 3:r=t.y,i=e.width-t.x}return{x:r,y:i}}function ht(e,t){return{x:e.x*t,y:e.y*t}}function gt(e){if(e.length===0)return{origin:{x:0,y:0},size:{width:0,height:0}};let t=e.map(e=>e.x),n=e.map(e=>e.y),r=Math.min(...t),i=Math.min(...n);return{origin:{x:r,y:i},size:{width:Math.max(...t)-r,height:Math.max(...n)-i}}}function _t(e,t){return{origin:{x:e.origin.x-t,y:e.origin.y-t},size:{width:e.size.width+2*t,height:e.size.height+2*t}}}function vt(e,t,n){let r=t.origin.x,i=t.origin.y,a=t.size;switch(n){case 0:break;case 1:r=e.height-t.origin.y-t.size.height,i=t.origin.x,a=ut(t.size);break;case 2:r=e.width-t.origin.x-t.size.width,i=e.height-t.origin.y-t.size.height;break;case 3:r=t.origin.y,i=e.width-t.origin.x-t.size.width,a=ut(t.size)}return{origin:{x:r,y:i},size:{width:a.width,height:a.height}}}function yt(e,t){return{origin:{x:e.origin.x*t,y:e.origin.y*t},size:{width:e.size.width*t,height:e.size.height*t}}}function bt(e,t,n,r){return yt(vt(e,t,n),r)}function xt(e){if(e.length===0)return null;let t=e[0].origin.x,n=e[0].origin.y,r=e[0].origin.x+e[0].size.width,i=e[0].origin.y+e[0].size.height;for(let a of e)t=Math.min(t,a.origin.x),n=Math.min(n,a.origin.y),r=Math.max(r,a.origin.x+a.size.width),i=Math.max(i,a.origin.y+a.size.height);return{origin:{x:t,y:n},size:{width:r-t,height:i-n}}}function St(e,t,n,r){let i=e.origin.x,a=e.origin.y,o=e.size.width,s=e.size.height,c=n/o,l=r/s,u=n/s,d=r/o;switch(t){case 0:return{a:c,b:0,c:0,d:l,e:-c*i,f:-l*a};case 3:return{a:0,b:-d,c:u,d:0,e:-u*a,f:d*(i+o)};case 2:return{a:-c,b:0,c:0,d:-l,e:c*(i+o),f:l*(a+s)};case 1:return{a:0,b:d,c:-u,d:0,e:u*(a+s),f:-d*i}}}var Ct=class{isEnabled(){return!1}debug(){}info(){}warn(){}error(){}perf(){}},wt=class{isEnabled(){return!0}debug(e,t,...n){console.debug(`${e}.${t}`,...n)}info(e,t,...n){console.info(`${e}.${t}`,...n)}warn(e,t,...n){console.warn(`${e}.${t}`,...n)}error(e,t,...n){console.error(`${e}.${t}`,...n)}perf(e,t,n,r,...i){console.info(`${e}.${t}.${n}.${r}`,...i)}},Tt=class{constructor(e,t){this.logger=e,this.level=t}isEnabled(e){return this.level<={debug:0,info:1,warn:2,error:3}[e]}debug(e,t,...n){this.level<=0&&this.logger.debug(e,t,...n)}info(e,t,...n){this.level<=1&&this.logger.info(e,t,...n)}warn(e,t,...n){this.level<=2&&this.logger.warn(e,t,...n)}error(e,t,...n){this.level<=3&&this.logger.error(e,t,...n)}perf(e,t,n,r,...i){this.logger.perf(e,t,n,r,...i)}},Et=class{constructor(){this.marks=new Map}isEnabled(){return!1}debug(e,t,...n){}info(e,t,...n){}warn(e,t,...n){}error(e,t,...n){}perf(e,t,n,r,i,...a){let o=`${e}.${t}.${n}.${r}.${i}`;switch(r){case`Begin`:globalThis.performance.mark(o,{detail:a}),this.marks.set(`${e}.${t}.${n}.${i}`,Date.now());break;case`End`:globalThis.performance.mark(o,{detail:a});let r=`${e}.${t}.${n}.Measure.${i}`,s=`${e}.${t}.${n}.Begin.${i}`;globalThis.performance.measure(r,s,o);let c=this.marks.get(`${e}.${t}.${n}.${i}`);if(c){let r=Date.now()-c;console.info(` ${e}.${t}.${n}.${i}: ${r}ms`),this.marks.delete(`${e}.${t}.${n}.${i}`)}}}},Dt=class{constructor(e){this.loggers=e}isEnabled(e){return this.loggers.some(t=>t.isEnabled(e))}debug(e,t,...n){for(let r of this.loggers)r.debug(e,t,...n)}info(e,t,...n){for(let r of this.loggers)r.info(e,t,...n)}warn(e,t,...n){for(let r of this.loggers)r.warn(e,t,...n)}error(e,t,...n){for(let r of this.loggers)r.error(e,t,...n)}perf(e,t,n,r,...i){for(let a of this.loggers)a.perf(e,t,n,r,...i)}},Ot=(e=>(e[e.Pending=0]=`Pending`,e[e.Resolved=1]=`Resolved`,e[e.Rejected=2]=`Rejected`,e[e.Aborted=3]=`Aborted`,e))(Ot||{}),kt=class extends Error{constructor(e){super(`Task aborted: ${JSON.stringify(e)}`),this.name=`TaskAbortedError`,this.reason=e}},At=class extends Error{constructor(e){super(`Task rejected: ${JSON.stringify(e)}`),this.name=`TaskRejectedError`,this.reason=e}},jt=class e{constructor(){this.state={stage:0},this.resolvedCallbacks=[],this.rejectedCallbacks=[],this._promise=null,this.progressCbs=[]}toPromise(){return this._promise||=new Promise((e,t)=>{this.wait(t=>e(t),e=>{e.type===`abort`?t(new kt(e.reason)):t(new At(e.reason))})}),this._promise}wait(e,t){switch(this.state.stage){case 0:this.resolvedCallbacks.push(e),this.rejectedCallbacks.push(t);break;case 1:e(this.state.result);break;case 2:t({type:`reject`,reason:this.state.reason});break;case 3:t({type:`abort`,reason:this.state.reason})}}resolve(e){if(this.state.stage===0){this.state={stage:1,result:e};for(let t of this.resolvedCallbacks)try{t(e)}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}reject(e){if(this.state.stage===0){this.state={stage:2,reason:e};for(let t of this.rejectedCallbacks)try{t({type:`reject`,reason:e})}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}abort(e){if(this.state.stage===0){this.state={stage:3,reason:e};for(let t of this.rejectedCallbacks)try{t({type:`abort`,reason:e})}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}fail(e){e.type===`abort`?this.abort(e.reason):this.reject(e.reason)}onProgress(e){this.progressCbs.push(e)}progress(e){for(let t of this.progressCbs)t(e)}static all(t){let n=new e;if(t.length===0)return n.resolve([]),n;let r=Array(t.length),i=0,a=!1;return t.forEach((e,o)=>{e.wait(e=>{a||(r[o]=e,i++,i===t.length&&(a=!0,n.resolve(r)))},e=>{a||(a=!0,e.type===`abort`?n.abort(e.reason):n.reject(e.reason))})}),n}static allSettled(t){let n=new e;if(t.length===0)return n.resolve([]),n;let r=Array(t.length),i=0;return t.forEach((e,a)=>{e.wait(e=>{r[a]={status:`resolved`,value:e},i++,i===t.length&&n.resolve(r)},e=>{r[a]={status:e.type===`abort`?`aborted`:`rejected`,reason:e.reason},i++,i===t.length&&n.resolve(r)})}),n}static race(t){let n=new e;if(t.length===0)return n.reject(`No tasks provided`),n;let r=!1;return t.forEach(e=>{e.wait(e=>{r||(r=!0,n.resolve(e))},e=>{r||(r=!0,e.type===`abort`?n.abort(e.reason):n.reject(e.reason))})}),n}static withProgress(t,n){let r=e.all(t);if(n){let e=0;t.forEach(r=>{r.wait(()=>{e++,n(e,t.length)},()=>{e++,n(e,t.length)})})}return r}},Mt=Object.freeze([``,``,``,``,``,``]),Nt=RegExp(`[${Mt.join(``)}]`,`g`);function Pt(e){return e.replace(Nt,``)}var Ft=(e=>(e[e.Unknown=0]=`Unknown`,e[e.XYZ=1]=`XYZ`,e[e.FitPage=2]=`FitPage`,e[e.FitHorizontal=3]=`FitHorizontal`,e[e.FitVertical=4]=`FitVertical`,e[e.FitRectangle=5]=`FitRectangle`,e[e.FitBoundingBox=6]=`FitBoundingBox`,e[e.FitBoundingBoxHorizontal=7]=`FitBoundingBoxHorizontal`,e[e.FitBoundingBoxVertical=8]=`FitBoundingBoxVertical`,e))(Ft||{}),It=(e=>(e[e.NotSet=0]=`NotSet`,e[e.True=1]=`True`,e[e.False=2]=`False`,e[e.Unknown=3]=`Unknown`,e))(It||{}),Lt=(e=>(e[e.Unknown=-1]=`Unknown`,e[e.Courier=0]=`Courier`,e[e.Courier_Bold=1]=`Courier_Bold`,e[e.Courier_BoldOblique=2]=`Courier_BoldOblique`,e[e.Courier_Oblique=3]=`Courier_Oblique`,e[e.Helvetica=4]=`Helvetica`,e[e.Helvetica_Bold=5]=`Helvetica_Bold`,e[e.Helvetica_BoldOblique=6]=`Helvetica_BoldOblique`,e[e.Helvetica_Oblique=7]=`Helvetica_Oblique`,e[e.Times_Roman=8]=`Times_Roman`,e[e.Times_Bold=9]=`Times_Bold`,e[e.Times_BoldItalic=10]=`Times_BoldItalic`,e[e.Times_Italic=11]=`Times_Italic`,e[e.Symbol=12]=`Symbol`,e[e.ZapfDingbats=13]=`ZapfDingbats`,e))(Lt||{}),Rt=(e=>(e[e.Left=0]=`Left`,e[e.Center=1]=`Center`,e[e.Right=2]=`Right`,e))(Rt||{}),zt=(e=>(e[e.Top=0]=`Top`,e[e.Middle=1]=`Middle`,e[e.Bottom=2]=`Bottom`,e))(zt||{}),H=(e=>(e[e.Normal=0]=`Normal`,e[e.Multiply=1]=`Multiply`,e[e.Screen=2]=`Screen`,e[e.Overlay=3]=`Overlay`,e[e.Darken=4]=`Darken`,e[e.Lighten=5]=`Lighten`,e[e.ColorDodge=6]=`ColorDodge`,e[e.ColorBurn=7]=`ColorBurn`,e[e.HardLight=8]=`HardLight`,e[e.SoftLight=9]=`SoftLight`,e[e.Difference=10]=`Difference`,e[e.Exclusion=11]=`Exclusion`,e[e.Hue=12]=`Hue`,e[e.Saturation=13]=`Saturation`,e[e.Color=14]=`Color`,e[e.Luminosity=15]=`Luminosity`,e))(H||{}),Bt=(e=>(e[e.Contain=0]=`Contain`,e[e.Cover=1]=`Cover`,e[e.Stretch=2]=`Stretch`,e))(Bt||{}),Vt=(e=>(e[e.Unsupported=0]=`Unsupported`,e[e.Goto=1]=`Goto`,e[e.RemoteGoto=2]=`RemoteGoto`,e[e.URI=3]=`URI`,e[e.LaunchAppOrOpenFile=4]=`LaunchAppOrOpenFile`,e))(Vt||{}),U=(e=>(e[e.UNKNOWN=0]=`UNKNOWN`,e[e.TEXT=1]=`TEXT`,e[e.LINK=2]=`LINK`,e[e.FREETEXT=3]=`FREETEXT`,e[e.LINE=4]=`LINE`,e[e.SQUARE=5]=`SQUARE`,e[e.CIRCLE=6]=`CIRCLE`,e[e.POLYGON=7]=`POLYGON`,e[e.POLYLINE=8]=`POLYLINE`,e[e.HIGHLIGHT=9]=`HIGHLIGHT`,e[e.UNDERLINE=10]=`UNDERLINE`,e[e.SQUIGGLY=11]=`SQUIGGLY`,e[e.STRIKEOUT=12]=`STRIKEOUT`,e[e.STAMP=13]=`STAMP`,e[e.CARET=14]=`CARET`,e[e.INK=15]=`INK`,e[e.POPUP=16]=`POPUP`,e[e.FILEATTACHMENT=17]=`FILEATTACHMENT`,e[e.SOUND=18]=`SOUND`,e[e.MOVIE=19]=`MOVIE`,e[e.WIDGET=20]=`WIDGET`,e[e.SCREEN=21]=`SCREEN`,e[e.PRINTERMARK=22]=`PRINTERMARK`,e[e.TRAPNET=23]=`TRAPNET`,e[e.WATERMARK=24]=`WATERMARK`,e[e.THREED=25]=`THREED`,e[e.RICHMEDIA=26]=`RICHMEDIA`,e[e.XFAWIDGET=27]=`XFAWIDGET`,e[e.REDACT=28]=`REDACT`,e))(U||{}),Ht=(e=>(e[e.Normal=0]=`Normal`,e[e.Rollover=1]=`Rollover`,e[e.Down=2]=`Down`,e))(Ht||{}),Ut=(e=>(e[e.Unknown=-1]=`Unknown`,e[e.Comment=0]=`Comment`,e[e.Key=1]=`Key`,e[e.Note=2]=`Note`,e[e.Help=3]=`Help`,e[e.NewParagraph=4]=`NewParagraph`,e[e.Paragraph=5]=`Paragraph`,e[e.Insert=6]=`Insert`,e[e.Graph=7]=`Graph`,e[e.PushPin=8]=`PushPin`,e[e.Paperclip=9]=`Paperclip`,e[e.Tag=10]=`Tag`,e[e.Speaker=11]=`Speaker`,e[e.Mic=12]=`Mic`,e[e.Approved=13]=`Approved`,e[e.Experimental=14]=`Experimental`,e[e.NotApproved=15]=`NotApproved`,e[e.AsIs=16]=`AsIs`,e[e.Expired=17]=`Expired`,e[e.NotForPublicRelease=18]=`NotForPublicRelease`,e[e.Confidential=19]=`Confidential`,e[e.Final=20]=`Final`,e[e.Sold=21]=`Sold`,e[e.Departmental=22]=`Departmental`,e[e.ForComment=23]=`ForComment`,e[e.TopSecret=24]=`TopSecret`,e[e.Draft=25]=`Draft`,e[e.ForPublicRelease=26]=`ForPublicRelease`,e))(Ut||{}),W=(e=>(e[e.None=0]=`None`,e[e.Square=1]=`Square`,e[e.Circle=2]=`Circle`,e[e.Diamond=3]=`Diamond`,e[e.OpenArrow=4]=`OpenArrow`,e[e.ClosedArrow=5]=`ClosedArrow`,e[e.Butt=6]=`Butt`,e[e.ROpenArrow=7]=`ROpenArrow`,e[e.RClosedArrow=8]=`RClosedArrow`,e[e.Slash=9]=`Slash`,e[e.Unknown=10]=`Unknown`,e))(W||{}),Wt=(e=>(e[e.UNKNOWN=0]=`UNKNOWN`,e[e.PUSHBUTTON=1]=`PUSHBUTTON`,e[e.CHECKBOX=2]=`CHECKBOX`,e[e.RADIOBUTTON=3]=`RADIOBUTTON`,e[e.COMBOBOX=4]=`COMBOBOX`,e[e.LISTBOX=5]=`LISTBOX`,e[e.TEXTFIELD=6]=`TEXTFIELD`,e[e.SIGNATURE=7]=`SIGNATURE`,e[e.XFA=8]=`XFA`,e[e.XFA_CHECKBOX=9]=`XFA_CHECKBOX`,e[e.XFA_COMBOBOX=10]=`XFA_COMBOBOX`,e[e.XFA_IMAGEFIELD=11]=`XFA_IMAGEFIELD`,e[e.XFA_LISTBOX=12]=`XFA_LISTBOX`,e[e.XFA_PUSHBUTTON=13]=`XFA_PUSHBUTTON`,e[e.XFA_SIGNATURE=14]=`XFA_SIGNATURE`,e[e.XFA_TEXTFIELD=15]=`XFA_TEXTFIELD`,e))(Wt||{}),Gt=(e=>(e[e.Color=0]=`Color`,e[e.InteriorColor=1]=`InteriorColor`,e))(Gt||{}),G=(e=>(e[e.UNKNOWN=0]=`UNKNOWN`,e[e.SOLID=1]=`SOLID`,e[e.DASHED=2]=`DASHED`,e[e.BEVELED=3]=`BEVELED`,e[e.INSET=4]=`INSET`,e[e.UNDERLINE=5]=`UNDERLINE`,e[e.CLOUDY=6]=`CLOUDY`,e))(G||{}),Kt=(e=>(e[e.UNKNOWN=0]=`UNKNOWN`,e[e.TEXT=1]=`TEXT`,e[e.PATH=2]=`PATH`,e[e.IMAGE=3]=`IMAGE`,e[e.SHADING=4]=`SHADING`,e[e.FORM=5]=`FORM`,e))(Kt||{}),qt=Object.freeze({1:`invisible`,2:`hidden`,4:`print`,8:`noZoom`,16:`noRotate`,32:`noView`,64:`readOnly`,128:`locked`,256:`toggleNoView`}),Jt=Object.entries(qt).reduce((e,[t,n])=>(e[n]=Number(t),e),{});function Yt(e){return Object.keys(qt).filter(t=>(e&t)!==0).map(e=>qt[e])}function Xt(e){return e.reduce((e,t)=>e|Jt[t],0)}var Zt=(e=>(e[e.Create=0]=`Create`,e[e.Read=1]=`Read`,e[e.Update=2]=`Update`,e[e.Delete=3]=`Delete`,e))(Zt||{}),Qt=(e=>(e[e.None=0]=`None`,e[e.MatchCase=1]=`MatchCase`,e[e.MatchWholeWord=2]=`MatchWholeWord`,e[e.MatchConsecutive=4]=`MatchConsecutive`,e))(Qt||{}),$t=(e=>(e[e.Display=0]=`Display`,e[e.Print=1]=`Print`,e))($t||{}),K=(e=>(e[e.Ok=0]=`Ok`,e[e.Unknown=1]=`Unknown`,e[e.NotFound=2]=`NotFound`,e[e.WrongFormat=3]=`WrongFormat`,e[e.Password=4]=`Password`,e[e.Security=5]=`Security`,e[e.PageError=6]=`PageError`,e[e.XFALoad=7]=`XFALoad`,e[e.XFALayout=8]=`XFALayout`,e[e.Cancelled=9]=`Cancelled`,e[e.Initialization=10]=`Initialization`,e[e.NotReady=11]=`NotReady`,e[e.NotSupport=12]=`NotSupport`,e[e.LoadDoc=13]=`LoadDoc`,e[e.DocNotOpen=14]=`DocNotOpen`,e[e.CantCloseDoc=15]=`CantCloseDoc`,e[e.CantCreateNewDoc=16]=`CantCreateNewDoc`,e[e.CantImportPages=17]=`CantImportPages`,e[e.CantCreateAnnot=18]=`CantCreateAnnot`,e[e.CantSetAnnotRect=19]=`CantSetAnnotRect`,e[e.CantSetAnnotContent=20]=`CantSetAnnotContent`,e[e.CantRemoveInkList=21]=`CantRemoveInkList`,e[e.CantAddInkStoke=22]=`CantAddInkStoke`,e[e.CantReadAttachmentSize=23]=`CantReadAttachmentSize`,e[e.CantReadAttachmentContent=24]=`CantReadAttachmentContent`,e[e.CantFocusAnnot=25]=`CantFocusAnnot`,e[e.CantSelectText=26]=`CantSelectText`,e[e.CantSelectOption=27]=`CantSelectOption`,e[e.CantCheckField=28]=`CantCheckField`,e[e.CantSetAnnotString=29]=`CantSetAnnotString`,e))(K||{}),q=class{static create(){return new jt}static resolve(e){let t=new jt;return t.resolve(e),t}static reject(e){let t=new jt;return t.reject(e),t}static abort(e){let t=new jt;return t.reject(e),t}};function en(e){let t=e=>(e=>Math.max(0,Math.min(255,e)))(e).toString(16).padStart(2,`0`);return`#${t(e.red)}${t(e.green)}${t(e.blue)}`}function tn(e){/^#?[0-9a-f]{3}$/i.test(e)&&(e=e.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,`#$1$1$2$2$3$3`).toLowerCase());let[,t,n,r]=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e)??(()=>{throw Error(`Invalid hex colour: "${e}"`)})();return{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16)}}function nn(e){return(e=>Math.max(0,Math.min(255,e)))(e)/255}function rn(e){return((e,t=255)=>Math.max(0,Math.min(t,e)))(Math.round(255*e))}function an(e){if(!e?.startsWith(`D:`)||e.length<16)return;let t=+e.slice(2,6),n=e.slice(6,8)-1,r=+e.slice(8,10),i=+e.slice(10,12),a=+e.slice(12,14),o=+e.slice(14,16);return new Date(Date.UTC(t,n,r,i,a,o))}function on(e=new Date){let t=(e,t=2)=>e.toString().padStart(t,`0`);return`D:${e.getUTCFullYear()}${t(e.getUTCMonth()+1)}${t(e.getUTCDate())}${t(e.getUTCHours())}${t(e.getUTCMinutes())}${t(e.getUTCSeconds())}`}var sn=Object.freeze([{id:Rt.Left,label:`Left`,css:`left`},{id:Rt.Center,label:`Center`,css:`center`},{id:Rt.Right,label:`Right`,css:`right`}]),cn=sn.reduce((e,t)=>(e[t.id]=t,e),{});function ln(e){return function(e){return cn[e]??cn[Rt.Left]}(e).css}sn.reduce((e,t)=>(e[t.css]=t.id,e),{}),sn.map(e=>({value:e.id,label:e.label}));var un=(e=>(e.Courier=`Courier`,e.Helvetica=`Helvetica`,e.Times=`Times`,e.Symbol=`Symbol`,e.ZapfDingbats=`ZapfDingbats`,e.Unknown=`Unknown`,e))(un||{}),dn=Lt.Helvetica,fn={id:Lt.Helvetica,family:`Helvetica`,bold:!1,italic:!1,label:`Helvetica`,css:`Helvetica, Arial, sans-serif`},pn=Object.freeze([{id:Lt.Courier,family:`Courier`,bold:!1,italic:!1,label:`Courier`,css:`Courier, monospace`},{id:Lt.Courier_Bold,family:`Courier`,bold:!0,italic:!1,label:`Courier Bold`,css:`"Courier-Bold", Courier, monospace`},{id:Lt.Courier_BoldOblique,family:`Courier`,bold:!0,italic:!0,label:`Courier Bold Oblique`,css:`"Courier-BoldOblique", Courier, monospace`},{id:Lt.Courier_Oblique,family:`Courier`,bold:!1,italic:!0,label:`Courier Oblique`,css:`"Courier-Oblique", Courier, monospace`},fn,{id:Lt.Helvetica_Bold,family:`Helvetica`,bold:!0,italic:!1,label:`Helvetica Bold`,css:`"Helvetica-Bold", Arial, sans-serif`},{id:Lt.Helvetica_BoldOblique,family:`Helvetica`,bold:!0,italic:!0,label:`Helvetica Bold Oblique`,css:`"Helvetica-BoldOblique", Arial, sans-serif`},{id:Lt.Helvetica_Oblique,family:`Helvetica`,bold:!1,italic:!0,label:`Helvetica Oblique`,css:`"Helvetica-Oblique", Arial, sans-serif`},{id:Lt.Times_Roman,family:`Times`,bold:!1,italic:!1,label:`Times Roman`,css:`"Times New Roman", Times, serif`},{id:Lt.Times_Bold,family:`Times`,bold:!0,italic:!1,label:`Times Bold`,css:`"Times New Roman Bold", Times, serif`},{id:Lt.Times_BoldItalic,family:`Times`,bold:!0,italic:!0,label:`Times Bold Italic`,css:`"Times New Roman Bold Italic", Times, serif`},{id:Lt.Times_Italic,family:`Times`,bold:!1,italic:!0,label:`Times Italic`,css:`"Times New Roman Italic", Times, serif`},{id:Lt.Symbol,family:`Symbol`,bold:!1,italic:!1,label:`Symbol`,css:`Symbol`},{id:Lt.ZapfDingbats,family:`ZapfDingbats`,bold:!1,italic:!1,label:`Zapf Dingbats`,css:`ZapfDingbats`}]),mn=pn.reduce((e,t)=>(e[t.id]=t,e),{}),hn=new Map;for(let e of pn)hn.set(`${e.family}_${e.bold}_${e.italic}`,e.id);function gn(e){return mn[e]??fn}function _n(e){return gn(e).bold}function vn(e){return gn(e).italic}function yn(e,{bold:t,italic:n}){return hn.get(`${e}_${t}_${n}`)??dn}Object.values(un).filter(e=>e!==`Unknown`).map(e=>({value:e,label:e}));var bn=[...new Set(pn.map(e=>e.family))];function xn(e){switch(e){case`Courier`:return`Courier`;case`Helvetica`:default:return`Helvetica`;case`Times`:return`Times`;case`Symbol`:return`Symbol`;case`ZapfDingbats`:return`ZapfDingbats`}}var Sn=Object.freeze([{id:H.Normal,label:`Normal`,css:`normal`},{id:H.Multiply,label:`Multiply`,css:`multiply`},{id:H.Screen,label:`Screen`,css:`screen`},{id:H.Overlay,label:`Overlay`,css:`overlay`},{id:H.Darken,label:`Darken`,css:`darken`},{id:H.Lighten,label:`Lighten`,css:`lighten`},{id:H.ColorDodge,label:`Color Dodge`,css:`color-dodge`},{id:H.ColorBurn,label:`Color Burn`,css:`color-burn`},{id:H.HardLight,label:`Hard Light`,css:`hard-light`},{id:H.SoftLight,label:`Soft Light`,css:`soft-light`},{id:H.Difference,label:`Difference`,css:`difference`},{id:H.Exclusion,label:`Exclusion`,css:`exclusion`},{id:H.Hue,label:`Hue`,css:`hue`},{id:H.Saturation,label:`Saturation`,css:`saturation`},{id:H.Color,label:`Color`,css:`color`},{id:H.Luminosity,label:`Luminosity`,css:`luminosity`}]),Cn=Sn.reduce((e,t)=>(e[t.id]=t,e),{});function wn(e){return function(e){return Cn[e]??Cn[H.Normal]}(e).css}Sn.reduce((e,t)=>(e[t.css]=t.id,e),{}),Sn.map(e=>({value:e.id,label:e.label}));var Tn=Sn.map(e=>e.id);function En(e){if(e instanceof Ct)return{type:`noop`};if(e instanceof wt)return{type:`console`};if(e instanceof Et)return{type:`perf`};if(e instanceof Tt){let t=e;return{type:`level`,config:{level:t.level,logger:En(t.logger)}}}return e instanceof Dt?{type:`all`,config:{loggers:e.loggers.map(En)}}:{type:`noop`}}var Dn=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function On(e){return Dn.test(e)}function kn(){if(typeof globalThis.crypto?.randomUUID==`function`)return globalThis.crypto.randomUUID();let t=function(t){if(typeof globalThis.crypto?.getRandomValues==`function`)return globalThis.crypto.getRandomValues(new Uint8Array(t));if(typeof e==`function`)try{let{randomBytes:e}=r();return e(t)}catch{}let n=new Uint8Array(t);for(let e=0;e<t;e++)n[e]=Math.floor(256*Math.random());return n}(16);t[6]=15&t[6]|64,t[8]=63&t[8]|128;let n=Array.from(t,e=>e.toString(16).padStart(2,`0`)).join(``);return`${n.slice(0,8)}-${n.slice(8,12)}-${n.slice(12,16)}-${n.slice(16,20)}-${n.slice(20)}`}var An=class e extends jt{constructor(e={}){super(),this.children=new Map,this.childResults=[],this.completedCount=0,this.expectedCount=0,this.isFinalized=!1,this.config={aggregate:e.aggregate??(e=>e),onChildComplete:e.onChildComplete??(()=>{}),failFast:e.failFast??!0}}addChild(e,t){if(this.state.stage!==Ot.Pending)return this.state.stage===Ot.Aborted&&e.abort(this.state.reason),this;let n=t??this.expectedCount;return this.expectedCount=Math.max(this.expectedCount,n+1),this.children.set(e,n),e.wait(t=>this.handleChildSuccess(e,t,n),t=>this.handleChildError(e,t,n)),this}finalize(){return this.isFinalized||(this.isFinalized=!0,this.expectedCount===0&&this.resolve(this.config.aggregate([]))),this}handleChildSuccess(e,t,n){if(this.state.stage!==Ot.Pending)return;this.childResults[n]=t,this.completedCount++,this.children.delete(e);let r=this.config.onChildComplete(this.completedCount,this.expectedCount,t,n);if(r!==void 0&&this.progress(r),this.completedCount===this.expectedCount){let e=this.config.aggregate(this.childResults);this.resolve(e)}}handleChildError(e,t,n){if(this.state.stage===Ot.Pending){if(this.children.delete(e),this.config.failFast){for(let[e]of this.children)e.abort(`Sibling task failed`);this.children.clear(),this.fail(t)}else if(this.childResults[n]=void 0,this.completedCount++,this.completedCount===this.expectedCount){let e=this.config.aggregate(this.childResults);this.resolve(e)}}}abort(e){for(let[t]of this.children)t.abort(e);this.children.clear(),super.abort(e)}reject(e){for(let[t]of this.children)t.abort(e);this.children.clear(),super.reject(e)}getPendingCount(){return this.children.size}getCompletedCount(){return this.completedCount}static gather(t){let n=new e({aggregate:e=>e,onChildComplete:(e,t)=>({completed:e,total:t})});return t.forEach((e,t)=>n.addChild(e,t)),n.finalize(),n}static gatherIndexed(t){let n=new e({aggregate:e=>{let t={};return e.forEach((e,n)=>{t[n]=e}),t},onChildComplete:(e,t,n,r)=>({page:r,result:n})});return t.forEach((e,t)=>n.addChild(e,t)),n.finalize(),n}static gatherFrom(t,n){let r=new e(n);return t.forEach((e,t)=>r.addChild(e,t)),r.finalize(),r}static first(t){let n=!1,r=new e({aggregate:e=>e[0],failFast:!1});return r.handleChildSuccess=(e,t)=>{if(!n){n=!0;for(let[t]of r.children)t!==e&&t.abort(`Race won by sibling`);r.resolve(t)}},t.forEach((e,t)=>r.addChild(e,t)),r.finalize(),r}};function jn(){}var Mn=class{constructor(){this.dependencyGraph=new Map}addNode(e,t=[]){this.dependencyGraph.set(e,new Set(t))}hasCircularDependencies(){let e=new Set,t=new Set,n=r=>{e.add(r),t.add(r);let i=this.dependencyGraph.get(r)||new Set;for(let r of i)if(e.has(r)){if(t.has(r))return!0}else if(n(r))return!0;return t.delete(r),!1};for(let t of this.dependencyGraph.keys())if(!e.has(t)&&n(t))return!0;return!1}resolveLoadOrder(){if(this.hasCircularDependencies())throw Error(`Circular dependencies detected`);let e=[],t=new Set,n=new Set,r=i=>{if(n.has(i))throw Error(`Circular dependency`);if(t.has(i))return;n.add(i);let a=this.dependencyGraph.get(i)||new Set;for(let e of a)r(e);n.delete(i),t.add(i),e.push(i)};for(let e of this.dependencyGraph.keys())t.has(e)||r(e);return e}},Nn=class extends Error{constructor(e){super(e),this.name=`PluginRegistrationError`}},Pn=class extends Error{constructor(e){super(e),this.name=`PluginNotFoundError`}},Fn=class extends Error{constructor(e){super(e),this.name=`CircularDependencyError`}},In=class extends Error{constructor(e){super(e),this.name=`PluginConfigurationError`}},Ln=class{constructor(e,t){this.store=e,this.pluginId=t}getState(){return this.store.getState().plugins[this.pluginId]}dispatch(e){return this.store.dispatchToPlugin(this.pluginId,e)}subscribeToState(e){return this.store.subscribeToPlugin(this.pluginId,(t,n,r)=>{e(t,n,r)})}onAction(e,t){return this.store.onAction(e,(e,n,r)=>{t(e,n.plugins[this.pluginId],r.plugins[this.pluginId])})}},Rn=`START_LOADING_DOCUMENT`,zn=`UPDATE_DOCUMENT_LOADING_PROGRESS`,Bn=`SET_DOCUMENT_LOADED`,Vn=`SET_DOCUMENT_ERROR`,Hn=`RETRY_LOADING_DOCUMENT`,Un=`CLOSE_DOCUMENT`,Wn=`SET_ACTIVE_DOCUMENT`,Gn=`REORDER_DOCUMENTS`,Kn=`MOVE_DOCUMENT`,qn=`REFRESH_PAGES`,Jn=`SET_SCALE`,Yn=`SET_ROTATION`,Xn=[Rn,zn,Bn,Un,Wn,Vn,Hn,`REFRESH_DOCUMENT`,qn,`SET_PAGES`,Jn,Yn,`SET_DEFAULT_SCALE`,`SET_DEFAULT_ROTATION`,Gn,Kn],Zn=(e,t,n,r,i,a)=>({type:Rn,payload:{documentId:e,name:t,scale:n,rotation:r,passwordProvided:i,autoActivate:a}}),Qn=(e,t)=>({type:Un,payload:{documentId:e,nextActiveDocumentId:t}}),$n=(e,t)=>({type:qn,payload:{documentId:e,pageIndexes:t}}),er=(e,t)=>({type:Yn,payload:{rotation:e,documentId:t}}),tr=class{constructor(e,t){this.initialCoreState=t,this.pluginReducers={},this.listeners=[],this.pluginListeners={},this.isDispatching=!1,this.state={core:t,plugins:{}},this.coreReducer=e}addPluginReducer(e,t,n){this.state.plugins[e]=n,this.pluginReducers[e]=t}dispatchToCore(e){if(!this.coreReducer)return this.getState();if(this.isDispatching)throw Error(`Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.`);let t=this.getState();try{this.isDispatching=!0,this.state.core=this.coreReducer(this.state.core,e)}finally{this.isDispatching=!1}return this.listeners.forEach(n=>{n(e,this.getState(),t)}),this.getState()}dispatchToPlugin(e,t,n=!0){if(this.isDispatching)throw Error(`Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.`);let r=this.getState(),i=this.pluginReducers[e];if(!i)return r.plugins[e];let a=r.plugins[e];try{this.isDispatching=!0;let n=i(a,t);this.state.plugins[e]=n}finally{this.isDispatching=!1}return n&&this.listeners.forEach(e=>{e(t,this.getState(),r)}),this.pluginListeners[e]&&this.pluginListeners[e].forEach(n=>{let r=this.getState().plugins[e];n(t,r,a)}),this.getState().plugins[e]}dispatch(e){if(this.isDispatching)throw Error(`Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.`);let t=this.getState();try{for(let n in this.isDispatching=!0,this.isCoreAction(e)&&(this.state.core=this.coreReducer(this.state.core,e)),this.pluginReducers){let r=this.pluginReducers[n],i=t.plugins[n];r&&(this.state.plugins[n]=r(i,e))}}finally{this.isDispatching=!1}return this.listeners.forEach(n=>{n(e,this.getState(),t)}),this.getState()}getState(){if(this.isDispatching)throw Error(`You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.`);return{core:{...this.state.core},plugins:{...this.state.plugins}}}subscribe(e){if(this.isDispatching)throw Error(`You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state.`);return this.listeners.push(e),()=>{if(this.isDispatching)throw Error(`You may not unsubscribe from a store listener while the reducer is executing.`);this.listeners=this.listeners.filter(t=>t!==e)}}subscribeToPlugin(e,t){if(!(e in this.state.plugins))throw Error(`Plugin state not found for plugin "${e}". Did you forget to call addPluginReducer?`);if(this.isDispatching)throw Error(`You may not call store.subscribeToPlugin() while the reducer is executing.`);return this.pluginListeners[e]||(this.pluginListeners[e]=[]),this.pluginListeners[e].push(t),()=>{if(this.isDispatching)throw Error(`You may not unsubscribe from a store listener while the reducer is executing.`);this.pluginListeners[e]=this.pluginListeners[e].filter(e=>e!==t),this.pluginListeners[e].length===0&&delete this.pluginListeners[e]}}onAction(e,t){return this.subscribe((n,r,i)=>{n.type===e&&t(n,r,i)})}getPluginStore(e){if(!(e in this.state.plugins))throw Error(`Plugin state not found for plugin "${e}". Did you forget to call addPluginReducer?`);return new Ln(this,e)}isCoreAction(e){return Xn.includes(e.type)}destroy(){var e,t;for(let n in this.listeners.length=0,this.pluginListeners)(t=(e=this.pluginListeners[n])?.splice)==null||t.call(e,0);this.pluginListeners={},this.pluginReducers={},this.state.plugins={},this.state.core={...this.initialCoreState}}};function nr(e,t,n){let r=e.activeDocumentId;if(r!==t)return r;if(n!==void 0)return n&&e.documents[n]?n:null;let i=e.documentOrder.indexOf(t);return i===-1?null:i>0?e.documentOrder[i-1]:i<e.documentOrder.length-1?e.documentOrder[i+1]:null}var rr=(e,t)=>{switch(t.type){case Rn:{let{documentId:n,name:r,scale:i,rotation:a,passwordProvided:o,autoActivate:s=!0}=t.payload,c={id:n,name:r,status:`loading`,loadingProgress:0,error:null,document:null,scale:i??e.defaultScale,rotation:a??e.defaultRotation,passwordProvided:o??!1,pageRefreshVersions:{},loadStartedAt:Date.now()};return{...e,documents:{...e.documents,[n]:c},documentOrder:[...e.documentOrder,n],activeDocumentId:s||!e.activeDocumentId?n:e.activeDocumentId}}case zn:{let{documentId:n,progress:r}=t.payload,i=e.documents[n];return i&&i.status===`loading`?{...e,documents:{...e.documents,[n]:{...i,loadingProgress:r}}}:e}case Bn:{let{documentId:n,document:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,status:`loaded`,document:r,error:null,errorCode:void 0,errorDetails:void 0,passwordProvided:void 0,loadedAt:Date.now()}}}:e}case Vn:{let{documentId:n,error:r,errorCode:i,errorDetails:a}=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,status:`error`,error:r,errorCode:i,errorDetails:a}}}:e}case Hn:{let{documentId:n,passwordProvided:r}=t.payload,i=e.documents[n];return i&&i.status===`error`?{...e,documents:{...e.documents,[n]:{...i,status:`loading`,loadingProgress:0,error:null,errorCode:void 0,errorDetails:void 0,passwordProvided:r??!1,loadStartedAt:Date.now()}}}:e}case Un:{let{documentId:n,nextActiveDocumentId:r}=t.payload,{[n]:i,...a}=e.documents;return{...e,documents:a,documentOrder:e.documentOrder.filter(e=>e!==n),activeDocumentId:nr(e,n,r)}}case Kn:{let{documentId:n,toIndex:r}=t.payload,i=function(e,t,n){let r=e.indexOf(t);if(r===-1||n<0||n>=e.length||r===n)return null;let i=[...e];return i.splice(r,1),i.splice(n,0,t),i}(e.documentOrder,n,r);return i?{...e,documentOrder:i}:e}case Gn:return{...e,documentOrder:t.payload};case Wn:return{...e,activeDocumentId:t.payload};case Jn:{let{scale:n,documentId:r}=t.payload,i=r??e.activeDocumentId;if(!i)return e;let a=e.documents[i];return a?{...e,documents:{...e.documents,[i]:{...a,scale:n}}}:e}case Yn:{let{rotation:n,documentId:r}=t.payload,i=r??e.activeDocumentId;if(!i)return e;let a=e.documents[i];return a?{...e,documents:{...e.documents,[i]:{...a,rotation:n}}}:e}case qn:{let{documentId:n,pageIndexes:r}=t.payload,i=e.documents[n];if(!i)return e;let a={...i.pageRefreshVersions};for(let e of r)a[e]=(a[e]||0)+1;return{...e,documents:{...e.documents,[n]:{...i,pageRefreshVersions:a}}}}default:return e}},ir=class{constructor(e,t){this.plugins=new Map,this.manifests=new Map,this.capabilities=new Map,this.status=new Map,this.configurations=new Map,this.initPromise=null,this.pendingRegistrations=[],this.processingRegistrations=[],this.initialized=!1,this.isInitializing=!1,this.pluginsReadyPromise=null,this.destroyed=!1,this.resolver=new Mn,this.engine=e,this.initialCoreState=(e=>({documents:{},documentOrder:[],activeDocumentId:null,defaultScale:e?.defaultScale??1,defaultRotation:e?.defaultRotation??ot.Degree0}))(t),this.store=new tr(rr,this.initialCoreState),this.logger=t?.logger??new Ct}getLogger(){return this.logger}registerPlugin(e,t){if(this.initialized&&!this.isInitializing)throw new Nn(`Cannot register plugins after initialization`);this.validateManifest(e.manifest),this.store.addPluginReducer(e.manifest.id,e.reducer,typeof e.initialState==`function`?e.initialState(this.initialCoreState,{...e.manifest.defaultConfig,...t}):e.initialState),this.pendingRegistrations.push({package:e,config:t})}getStore(){return this.store}getEngine(){return this.engine}pluginsReady(){return this.pluginsReadyPromise||=(async()=>{this.initialized||await this.initialize();let e=Array.from(this.plugins.values()).map(e=>typeof e.ready==`function`?e.ready():Promise.resolve());await Promise.all(e)})(),this.pluginsReadyPromise}async initialize(){if(this.destroyed)throw new Nn(`Registry has been destroyed`);return this.initPromise||=(async()=>{if(this.initialized)throw new Nn(`Registry is already initialized`);this.isInitializing=!0;try{if(this.destroyed)return;for(;this.pendingRegistrations.length>0;){if(this.destroyed)return;this.processingRegistrations=[...this.pendingRegistrations],this.pendingRegistrations=[];for(let e of this.processingRegistrations){let t=new Set,n=[...e.package.manifest.requires,...e.package.manifest.optional];for(let e of n){let n=this.processingRegistrations.find(t=>t.package.manifest.provides.includes(e));n&&t.add(n.package.manifest.id)}this.resolver.addNode(e.package.manifest.id,[...t])}let e=this.resolver.resolveLoadOrder();for(let t of e){let e=this.processingRegistrations.find(e=>e.package.manifest.id===t);this.instantiatePlugin(e.package.manifest,e.package.create,e.config)}for(let t of e)await this.runPluginInitialization(t);this.processingRegistrations=[],this.resolver=new Mn}this.initialized=!0}catch(e){throw e instanceof Error?new Fn(`Failed to resolve plugin dependencies: ${e.message}`):e}finally{this.isInitializing=!1}})(),this.initPromise}instantiatePlugin(e,t,n){let r={...e.defaultConfig,...n};this.validateConfig(e.id,r,e.defaultConfig);let i=t(this,r);this.validatePlugin(i);for(let t of e.provides){if(this.capabilities.has(t))throw new Nn(`Capability ${t} is already provided by plugin ${this.capabilities.get(t)}`);this.capabilities.set(t,e.id)}this.plugins.set(e.id,i),this.manifests.set(e.id,e),this.status.set(e.id,`registered`),this.configurations.set(e.id,r)}async runPluginInitialization(e){let t=this.plugins.get(e);if(!t)return;let n=this.manifests.get(e),r=this.configurations.get(e);for(let t of n.requires)if(!this.capabilities.has(t))throw new Nn(`Missing required capability: ${t} for plugin ${e}`);this.logger.debug(`PluginRegistry`,`InitializePlugin`,`Initializing plugin ${e}`);try{t.initialize&&await t.initialize(r),this.status.set(e,`active`),this.logger.info(`PluginRegistry`,`PluginInitialized`,`Plugin ${e} initialized successfully`)}catch(t){throw this.status.set(e,`error`),this.logger.error(`PluginRegistry`,`InitializationFailed`,`Plugin ${e} initialization failed`,{error:t}),t}}getPluginConfig(e){let t=this.configurations.get(e);if(!t)throw new Pn(`Configuration for plugin ${e} not found`);return t}validateConfig(e,t,n){let r=Object.keys(n).filter(e=>!t.hasOwnProperty(e));if(r.length>0)throw new In(`Missing required configuration keys for plugin ${e}: ${r.join(`, `)}`)}async updatePluginConfig(e,t){let n=this.getPlugin(e);if(!n)throw new Pn(`Plugin ${e} not found`);let r=this.manifests.get(e),i=this.configurations.get(e);if(!r||!i)throw new Pn(`Plugin ${e} not found`);let a={...i,...t};this.validateConfig(e,a,r.defaultConfig),this.configurations.set(e,a),n.initialize&&await n.initialize(a)}registerPluginBatch(e){for(let t of e)this.registerPlugin(t.package,t.config)}async unregisterPlugin(e){let t=this.plugins.get(e);if(!t)throw new Pn(`Plugin ${e} is not registered`);let n=this.manifests.get(e);if(!n)throw new Pn(`Manifest for plugin ${e} not found`);for(let[t,r]of this.manifests.entries())if(t!==e&&[...r.requires,...r.optional].some(e=>n.provides.includes(e)))throw new Nn(`Cannot unregister plugin ${e}: plugin ${t} depends on it`);try{t.destroy&&await t.destroy();for(let e of n.provides)this.capabilities.delete(e);this.plugins.delete(e),this.manifests.delete(e),this.status.delete(e)}catch(t){throw t instanceof Error?Error(`Failed to unregister plugin ${e}: ${t.message}`):t}}getPlugin(e){return this.plugins.get(e)||null}getCapabilityProvider(e){let t=this.capabilities.get(e);return t?this.getPlugin(t):null}hasCapability(e){return this.capabilities.has(e)}getAllPlugins(){return Array.from(this.plugins.values())}getPluginStatus(e){let t=this.status.get(e);if(!t)throw new Pn(`Plugin ${e} not found`);return t}validatePlugin(e){if(!e.id)throw new Nn(`Plugin must have an id`)}validateManifest(e){if(!e.id)throw new Nn(`Manifest must have an id`);if(!e.name)throw new Nn(`Manifest must have a name`);if(!e.version)throw new Nn(`Manifest must have a version`);if(!Array.isArray(e.provides))throw new Nn(`Manifest must have a provides array`);if(!Array.isArray(e.requires))throw new Nn(`Manifest must have a requires array`);if(!Array.isArray(e.optional))throw new Nn(`Manifest must have an optional array`)}isDestroyed(){return this.destroyed}async destroy(){if(this.destroyed)throw new Nn(`Registry has already been destroyed`);this.destroyed=!0;try{await this.initPromise}catch{}for(let e of Array.from(this.plugins.values()).reverse())await e.destroy?.call(e);this.store.destroy(),this.plugins.clear(),this.manifests.clear(),this.capabilities.clear(),this.status.clear(),this.pendingRegistrations.length=0,this.processingRegistrations.length=0}};function ar(e,t){return{package:e,config:t}}function or(e){return`autoMountElements`in e&&typeof e.autoMountElements==`function`}var sr=class{constructor(e,t){if(this.id=e,this.registry=t,this.cooldownActions={},this.debouncedTimeouts={},this.unsubscribeFromState=null,this.unsubscribeFromCoreStore=null,this.unsubscribeFromStartLoadingDocument=null,this.unsubscribeFromSetDocumentLoaded=null,this.unsubscribeFromCloseDocument=null,this.unsubscribeFromSetScale=null,this.unsubscribeFromSetRotation=null,e!==this.constructor.id)throw Error(`Plugin ID mismatch: ${e} !== ${this.constructor.id}`);this.engine=this.registry.getEngine(),this.logger=this.registry.getLogger(),this.coreStore=this.registry.getStore(),this.pluginStore=this.coreStore.getPluginStore(this.id),this.unsubscribeFromState=this.pluginStore.subscribeToState((e,t,n)=>{this.onStoreUpdated(n,t)}),this.unsubscribeFromCoreStore=this.coreStore.subscribe((e,t,n)=>{this.onCoreStoreUpdated(n,t),t.core.activeDocumentId!==n.core.activeDocumentId&&this.onActiveDocumentChanged(n.core.activeDocumentId,t.core.activeDocumentId)}),this.unsubscribeFromStartLoadingDocument=this.coreStore.onAction(Rn,e=>{this.onDocumentLoadingStarted(e.payload.documentId)}),this.unsubscribeFromSetDocumentLoaded=this.coreStore.onAction(Bn,e=>{this.onDocumentLoaded(e.payload.documentId)}),this.unsubscribeFromCloseDocument=this.coreStore.onAction(Un,e=>{this.onDocumentClosed(e.payload.documentId)}),this.unsubscribeFromSetScale=this.coreStore.onAction(Jn,(e,t)=>{let n=e.payload.documentId??t.core.activeDocumentId;n&&this.onScaleChanged(n,e.payload.scale)}),this.unsubscribeFromSetRotation=this.coreStore.onAction(Yn,(e,t)=>{let n=e.payload.documentId??t.core.activeDocumentId;n&&this.onRotationChanged(n,e.payload.rotation)}),this.readyPromise=new Promise(e=>{this.readyResolve=e}),this.readyResolve()}provides(){if(!this._capability){let e=this.buildCapability();this._capability=Object.freeze(e)}return this._capability}get state(){return this.pluginStore.getState()}get coreState(){return this.coreStore.getState()}getState(){return this.pluginStore.getState()}getCoreState(){return this.coreStore.getState()}dispatchCoreAction(e){return this.coreStore.dispatchToCore(e)}dispatchToAllPlugins(e){return this.coreStore.dispatch(e)}dispatch(e){return this.pluginStore.dispatch(e)}cooldownDispatch(e,t=100){let n=Date.now();return n-(this.cooldownActions[e.type]||0)>=t&&(this.cooldownActions[e.type]=n,this.dispatch(e),!0)}debouncedDispatch(e,t=100){let n=e.type;this.debouncedTimeouts[n]&&clearTimeout(this.debouncedTimeouts[n]),this.debouncedTimeouts[n]=setTimeout(()=>{this.dispatch(e),delete this.debouncedTimeouts[n]},t)}cancelDebouncedDispatch(e){this.debouncedTimeouts[e]&&(clearTimeout(this.debouncedTimeouts[e]),delete this.debouncedTimeouts[e])}subscribe(e){return this.pluginStore.subscribeToState(e)}subscribeToCoreStore(e){return this.coreStore.subscribe(e)}onStoreUpdated(e,t){}onCoreStoreUpdated(e,t){}onDocumentLoadingStarted(e){}onDocumentLoaded(e){}onDocumentClosed(e){}onActiveDocumentChanged(e,t){}onScaleChanged(e,t){}onRotationChanged(e,t){}destroy(){Object.values(this.debouncedTimeouts).forEach(e=>{clearTimeout(e)}),this.debouncedTimeouts={},this.unsubscribeFromState&&=(this.unsubscribeFromState(),null),this.unsubscribeFromCoreStore&&=(this.unsubscribeFromCoreStore(),null),this.unsubscribeFromStartLoadingDocument&&=(this.unsubscribeFromStartLoadingDocument(),null),this.unsubscribeFromSetDocumentLoaded&&=(this.unsubscribeFromSetDocumentLoaded(),null),this.unsubscribeFromCloseDocument&&=(this.unsubscribeFromCloseDocument(),null),this.unsubscribeFromSetScale&&=(this.unsubscribeFromSetScale(),null),this.unsubscribeFromSetRotation&&=(this.unsubscribeFromSetRotation(),null)}ready(){return this.readyPromise}markReady(){this.readyResolve()}resetReady(){this.readyPromise=new Promise(e=>{this.readyResolve=e})}getActiveDocumentId(){let e=this.coreState.core.activeDocumentId;if(!e)throw Error(`No active document`);return e}getActiveDocumentIdOrNull(){return this.coreState.core.activeDocumentId}getCoreDocument(e){let t=e??this.getActiveDocumentIdOrNull();return t?this.coreState.core.documents[t]??null:null}getCoreDocumentOrThrow(e){let t=this.getCoreDocument(e);if(!t)throw Error(`Document not found: ${e??`active`}`);return t}},cr=class{constructor(e,t){this.handler=e,this.options=t,this.lastRun=0,this.handle=e=>{this.options.mode===`debounce`?this.debounce(e):this.throttle(e)}}debounce(e){this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.handler(e),this.timeoutId=void 0},this.options.wait)}throttle(e){if(this.options.mode===`debounce`)return;let t=Date.now(),n=this.options.throttleMode||`leading-trailing`;t-this.lastRun>=this.options.wait&&(n===`leading-trailing`&&this.handler(e),this.lastRun=t),this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.handler(e),this.lastRun=Date.now(),this.timeoutId=void 0},this.options.wait-(t-this.lastRun))}destroy(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},lr=class{constructor(e,t){this.handler=e,this.options=t,this.controls=new Map,this.handle=e=>{let t=String(this.options.keyExtractor(e)),n=this.controls.get(t);n||(n=new cr(this.handler,this.baseOptions),this.controls.set(t,n)),n.handle(e)},this.baseOptions={mode:t.mode,wait:t.wait,...t.mode===`throttle`&&`throttleMode`in t?{throttleMode:t.throttleMode}:{}}}destroy(){for(let e of this.controls.values())e.destroy();this.controls.clear()}};function ur(e){return`keyExtractor`in e}function J(e,t,n){return e<t?t:e>n?n:e}function dr(e,t,n){if(e===t)return!0;if(e==null||t==null)return e===t;let r=typeof e;if(r!==typeof t)return!1;if(r===`object`){n||=new Set;let r=function(e,t){return`${mr(e)}__${mr(t)}`}(e,t);if(n.has(r))return!0;n.add(r);let i=Array.isArray(e),a=Array.isArray(t);return i&&a?function(e,t,n){if(e.length!==t.length)return!1;let r=Array(t.length).fill(!1);e:for(let i=0;i<e.length;i++){let a=e[i];for(let e=0;e<t.length;e++)if(!r[e]&&dr(a,t[e],n)){r[e]=!0;continue e}return!1}return!0}(e,t,n):!i&&!a&&function(e,t,n){let r=Object.keys(e).sort(),i=Object.keys(t).sort();if(r.length!==i.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1;for(let i of r)if(!dr(e[i],t[i],n))return!1;return!0}(e,t,n)}return!1}var fr=0,pr=new WeakMap;function mr(e){return pr.has(e)||pr.set(e,++fr),pr.get(e)}function hr(){let e=new Set;return{emit:(t=void 0)=>e.forEach(e=>e(t)),on:t=>(e.add(t),()=>e.delete(t)),off:t=>e.delete(t),clear:()=>e.clear()}}function Y(e,t=dr){let n=new Set,r=new Map,i=e,a=(e,t)=>{let a=e,o=()=>{};if(t){if(ur(t)){let n=new lr(e,t);a=n.handle,o=()=>n.destroy()}else{let n=new cr(e,t);a=n.handle,o=()=>n.destroy()}r.set(e,{wrapped:a,destroy:o})}return i!==void 0&&a(i),n.add(a),()=>{n.delete(a),o(),r.delete(e)}};return{get value(){return i},emit(e=void 0){i!==void 0&&t(i,e)||(i=e,(e=>{n.forEach(t=>t(e))})(e))},on:a,off(e){let t=r.get(e);t?(n.delete(t.wrapped),t.destroy(),r.delete(e)):n.delete(e)},clear(){n.clear(),r.forEach(e=>e.destroy()),r.clear()},select:(e,t=dr)=>(n,r)=>{let o;if(i!==void 0){let t=e(i);o=t,n(t)}return a(r=>{let i=e(r);o!==void 0&&t(o,i)||(o=i,n(i))},r)}}}function gr(e,t){let n=t?.cache??!0,r=t?.equality??dr,i=new Map,a=new Map,o=new Map,s=new Set,c=new Map,l=e=>String(e);return{emit(t,o){let c=l(t);if(n){let e=i.get(c);if(e!==void 0&&r(e,o))return;i.set(c,o)}let u=a.get(c);u&&u.forEach(e=>e(o));let d=e(t,o);s.forEach(e=>e(d))},forScope(e){let t=l(e);return(e,r)=>{let s=(e=>{let t=a.get(e);return t||(t=new Set,a.set(e,t)),t})(t),c=(e=>{let t=o.get(e);return t||(t=new Map,o.set(e,t)),t})(t),l=e,u=()=>{};if(r){if(ur(r)){let t=new lr(e,r);l=t.handle,u=()=>t.destroy()}else{let t=new cr(e,r);l=t.handle,u=()=>t.destroy()}c.set(e,{wrapped:l,destroy:u})}if(n){let e=i.get(t);e!==void 0&&l(e)}return s.add(l),()=>{s.delete(l),u(),c.delete(e),s.size===0&&a.delete(t),c.size===0&&o.delete(t)}}},onGlobal:(e,t)=>{let n=e,r=()=>{};if(t){if(ur(t)){let i=new lr(e,t);n=i.handle,r=()=>i.destroy()}else{let i=new cr(e,t);n=i.handle,r=()=>i.destroy()}c.set(e,{wrapped:n,destroy:r})}return s.add(n),()=>{s.delete(n),r(),c.delete(e)}},getValue:e=>n?i.get(l(e)):void 0,getScopes:()=>n?Array.from(i.keys()):Array.from(a.keys()),clearScope(e){let t=l(e);n&&i.delete(t);let r=a.get(t);r&&(r.clear(),a.delete(t));let s=o.get(t);s&&(s.forEach(e=>e.destroy()),s.clear(),o.delete(t))},clear(){n&&i.clear(),a.forEach(e=>e.clear()),a.clear(),o.forEach(e=>{e.forEach(e=>e.destroy()),e.clear()}),o.clear(),s.clear(),c.forEach(e=>e.destroy()),c.clear()}}}var _r=class{constructor(e){this.autoMountElements=[],this.package=e}addUtility(e){return this.autoMountElements.push({component:e,type:`utility`}),this}addWrapper(e){return this.autoMountElements.push({component:e,type:`wrapper`}),this}build(){return{...this.package,autoMountElements:()=>this.autoMountElements}}};function vr(e){return new _r(e)}var yr=Ne({registry:null,coreState:null,isInitializing:!0,pluginsReady:!1,activeDocumentId:null,activeDocument:null,documents:{},documentStates:[]});function br({plugins:e,children:t}){let{utilities:n,wrappers:r}=z(()=>{let t=[],n=[];for(let r of e){let e=r.package;if(or(e)){let r=e.autoMountElements()||[];for(let e of r)e.type===`utility`?t.push(e.component):e.type===`wrapper`&&n.push(e.component)}}return{utilities:t,wrappers:n}},[e]);return V(F,{children:[r.reduce((e,t)=>V(t,{children:e}),t),n.map((e,t)=>V(e,{},`utility-${t}`))]})}function xr({engine:e,logger:t,onInitialized:n,plugins:r,children:i,autoMountDomElements:a=!0}){let[o,s]=I(null),[c,l]=I(null),[u,d]=I(!0),[f,p]=I(!1),m=R(n);L(()=>{m.current=n},[n]),L(()=>{let n=new ir(e,{logger:t});n.registerPluginBatch(r);let i;return(async()=>{if(await n.initialize(),n.isDestroyed())return;let e=n.getStore();l(e.getState().core);let t=e.subscribe((t,n,r)=>{e.isCoreAction(t)&&n.core!==r.core&&l(n.core)});if(await m.current?.call(m,n),!n.isDestroyed())return n.pluginsReady().then(()=>{n.isDestroyed()||p(!0)}),s(n),d(!1),t;t()})().then(e=>{i=e}).catch(console.error),()=>{i?.(),n.destroy(),s(null),l(null),d(!0),p(!1)}},[e,r]);let h=z(()=>{let e=c?.activeDocumentId??null,t=c?.documents??{},n=c?.documentOrder??[];return{registry:o,coreState:c,isInitializing:u,pluginsReady:f,activeDocumentId:e,activeDocument:e&&t[e]?t[e]:null,documents:t,documentStates:n.map(e=>t[e]).filter(e=>e!=null)}},[o,c,u,f]),g=typeof i==`function`?i(h):i;return V(yr.Provider,{value:h,children:f&&a?V(br,{plugins:r,children:g}):g})}function Sr(e){let{registry:t}=function(){let e=Xe(yr);if(e===void 0)throw Error(`useCapability must be used within a PDFContext.Provider`);let{registry:t,isInitializing:n}=e;if(n)return e;if(t===null)throw Error(`PDF registry failed to initialize properly`);return e}();if(t===null)return{plugin:null,isLoading:!0,ready:new Promise(()=>{})};let n=t.getPlugin(e);if(!n)throw Error(`Plugin ${e} not found`);return{plugin:n,isLoading:!1,ready:n.ready()}}function Cr(e){let{plugin:t,isLoading:n,ready:r}=Sr(e);if(!t)return{provides:null,isLoading:n,ready:r};if(!t.provides)throw Error(`Plugin ${e} does not provide a capability`);return{provides:t.provides(),isLoading:n,ready:r}}function wr(){let{coreState:e}=Xe(yr);return e}function Tr(e){let t=wr();return z(()=>t&&e?t.documents[e]??null:null,[t,e])}var Er=`https://cdn.jsdelivr.net/npm/@embedpdf/pdfium@2.0.0/dist/pdfium.wasm`;Ne(void 0);var Dr=`viewport`,Or={id:Dr,name:`Viewport Plugin`,version:`1.0.0`,provides:[`viewport`],requires:[],optional:[],defaultConfig:{viewportGap:10,scrollEndDelay:300}},kr=`INIT_VIEWPORT_STATE`,Ar=`CLEANUP_VIEWPORT_STATE`,jr=`REGISTER_VIEWPORT`,Mr=`UNREGISTER_VIEWPORT`,Nr=`SET_VIEWPORT_METRICS`,Pr=`SET_VIEWPORT_SCROLL_METRICS`,Fr=`SET_VIEWPORT_GAP`,Ir=`SET_SCROLL_ACTIVITY`,Lr=`SET_SMOOTH_SCROLL_ACTIVITY`,Rr=`ADD_VIEWPORT_GATE`,zr=`REMOVE_VIEWPORT_GATE`;function Br(e,t){return{type:Lr,payload:{documentId:e,isSmoothScrolling:t}}}var Vr={viewportMetrics:{width:0,height:0,scrollTop:0,scrollLeft:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0,clientLeft:0,clientTop:0,relativePosition:{x:0,y:0}},isScrolling:!1,isSmoothScrolling:!1,gates:new Set},Hr={viewportGap:0,documents:{},activeViewports:new Set,activeDocumentId:null},Ur=class extends sr{constructor(e,t,n){var r;super(e,t),this.id=e,this.viewportResize$=Y(),this.viewportMetrics$=Y(),this.scrollMetrics$=Y(),this.scrollActivity$=Y(),this.gateState$=Y(),this.scrollRequests$=new Map,n.viewportGap&&this.dispatch((r=n.viewportGap,{type:Fr,payload:r})),this.scrollEndDelay=n.scrollEndDelay||100}onDocumentLoadingStarted(e){this.dispatch(function(e){return{type:kr,payload:{documentId:e}}}(e)),this.scrollRequests$.set(e,hr()),this.logger.debug(`ViewportPlugin`,`DocumentOpened`,`Initialized viewport state for document: ${e}`)}onDocumentClosed(e){var t;this.dispatch(function(e){return{type:Ar,payload:{documentId:e}}}(e)),(t=this.scrollRequests$.get(e))==null||t.clear(),this.scrollRequests$.delete(e),this.logger.debug(`ViewportPlugin`,`DocumentClosed`,`Cleaned up viewport state for document: ${e}`)}buildCapability(){return{getViewportGap:()=>this.state.viewportGap,getMetrics:()=>this.getMetrics(),scrollTo:e=>this.scrollTo(e),isScrolling:()=>this.isScrolling(),isSmoothScrolling:()=>this.isSmoothScrolling(),isGated:e=>this.isGated(e),hasGate:(e,t)=>this.hasGate(e,t),getGates:e=>this.getGates(e),forDocument:e=>this.createViewportScope(e),gate:(e,t)=>this.gate(e,t),releaseGate:(e,t)=>this.releaseGate(e,t),isViewportMounted:e=>this.state.activeViewports.has(e),onViewportChange:this.viewportMetrics$.on,onViewportResize:this.viewportResize$.on,onScrollChange:this.scrollMetrics$.on,onScrollActivity:this.scrollActivity$.on,onGateChange:this.gateState$.on}}createViewportScope(e){return{getMetrics:()=>this.getMetrics(e),scrollTo:t=>this.scrollTo(t,e),isScrolling:()=>this.isScrolling(e),isSmoothScrolling:()=>this.isSmoothScrolling(e),isGated:()=>this.isGated(e),hasGate:t=>this.hasGate(t,e),getGates:()=>this.getGates(e),gate:t=>this.gate(t,e),releaseGate:t=>this.releaseGate(t,e),onViewportChange:t=>this.viewportMetrics$.on(n=>{n.documentId===e&&t(n.metrics)}),onScrollChange:t=>this.scrollMetrics$.on(n=>{n.documentId===e&&t(n.scrollMetrics)}),onScrollActivity:t=>this.scrollActivity$.on(n=>{n.documentId===e&&t(n.activity)}),onGateChange:t=>this.gateState$.on(n=>{n?.documentId===e&&t(n)})}}registerViewport(e){if(!this.state.documents[e])throw Error(`Cannot register viewport for ${e}: document state not found. Document must be opened before registering viewport.`);this.state.activeViewports.has(e)||(this.dispatch(function(e){return{type:jr,payload:{documentId:e}}}(e)),this.logger.debug(`ViewportPlugin`,`RegisterViewport`,`Registered viewport (DOM mounted) for document: ${e}`))}unregisterViewport(e){this.registry.isDestroyed()||this.state.activeViewports.has(e)&&(this.dispatch(function(e){return{type:Mr,payload:{documentId:e}}}(e)),this.logger.debug(`ViewportPlugin`,`UnregisterViewport`,`Unregistered viewport (DOM unmounted) for document: ${e}. State preserved.`))}setViewportResizeMetrics(e,t){if(this.registry.isDestroyed())return;this.dispatch(function(e,t){return{type:Nr,payload:{documentId:e,metrics:t}}}(e,t));let n=this.state.documents[e];n&&this.viewportResize$.emit({documentId:e,metrics:n.viewportMetrics})}setViewportScrollMetrics(e,t){if(this.registry.isDestroyed())return;let n=this.state.documents[e];n&&(t.scrollTop===n.viewportMetrics.scrollTop&&t.scrollLeft===n.viewportMetrics.scrollLeft||(this.dispatch(function(e,t){return{type:Pr,payload:{documentId:e,scrollMetrics:t}}}(e,t)),this.bumpScrollActivity(e),this.scrollMetrics$.emit({documentId:e,scrollMetrics:t})))}onScrollRequest(e,t){let n=this.scrollRequests$.get(e);if(!n)throw Error(`Cannot subscribe to scroll requests for ${e}: document state not initialized`);return n.on(t)}gate(e,t){let n=this.state.documents[t];n?n.gates.has(e)||(this.dispatch(function(e,t){return{type:Rr,payload:{documentId:e,key:t}}}(t,e)),this.logger.debug(`ViewportPlugin`,`GateAdded`,`Added gate '${e}' for document: ${t}. Total gates: ${n.gates.size+1}`)):this.logger.warn(`ViewportPlugin`,`GateViewport`,`Cannot gate viewport for ${t}: document not found`)}releaseGate(e,t){let n=this.state.documents[t];n?n.gates.has(e)&&(this.dispatch(function(e,t){return{type:zr,payload:{documentId:e,key:t}}}(t,e)),this.logger.debug(`ViewportPlugin`,`GateReleased`,`Released gate '${e}' for document: ${t}. Remaining gates: ${n.gates.size-1}`)):this.logger.warn(`ViewportPlugin`,`ReleaseGate`,`Cannot release gate for ${t}: document not found`)}getViewportState(e){let t=e??this.getActiveDocumentId(),n=this.state.documents[t];if(!n)throw Error(`Viewport state not found for document: ${t}`);return n}getMetrics(e){return this.getViewportState(e).viewportMetrics}isScrolling(e){return this.getViewportState(e).isScrolling}isSmoothScrolling(e){return this.getViewportState(e).isSmoothScrolling}isGated(e){return this.getViewportState(e).gates.size>0}hasGate(e,t){return this.getViewportState(t).gates.has(e)}getGates(e){let t=this.getViewportState(e);return Array.from(t.gates)}scrollTo(e,t){let n=t??this.getActiveDocumentId(),r=this.getViewportState(n),{x:i,y:a,alignX:o,alignY:s,behavior:c=`auto`}=e;c===`smooth`&&this.dispatch(Br(n,!0));let l=r.viewportMetrics,u=i,d=a;o!==void 0&&(u=i-l.clientWidth*(o/100)),s!==void 0&&(d=a-l.clientHeight*(s/100));let f=this.scrollRequests$.get(n);f&&f.emit({x:u,y:d,behavior:c})}bumpScrollActivity(e){this.debouncedDispatch(function(e,t){return{type:Ir,payload:{documentId:e,isScrolling:t}}}(e,!1),this.scrollEndDelay),this.debouncedDispatch(Br(e,!1),this.scrollEndDelay)}onStoreUpdated(e,t){for(let n in t.documents){let r=e.documents[n],i=t.documents[n];if(r!==i&&(this.viewportMetrics$.emit({documentId:n,metrics:i.viewportMetrics}),!r||r.isScrolling===i.isScrolling&&r.isSmoothScrolling===i.isSmoothScrolling||this.scrollActivity$.emit({documentId:n,activity:{isScrolling:i.isScrolling,isSmoothScrolling:i.isSmoothScrolling}}),r&&r.gates!==i.gates)){let e=Array.from(r.gates),t=Array.from(i.gates),a=t.find(t=>!e.includes(t)),o=e.find(e=>!t.includes(e));this.gateState$.emit({documentId:n,isGated:i.gates.size>0,gates:t,addedGate:a,removedGate:o}),this.logger.debug(`ViewportPlugin`,`GateStateChanged`,`Gate state changed for document ${n}. Gates: [${t.join(`, `)}], Gated: ${i.gates.size>0}`)}}}async initialize(e){this.logger.info(`ViewportPlugin`,`Initialize`,`Viewport plugin initialized`)}async destroy(){this.viewportMetrics$.clear(),this.viewportResize$.clear(),this.scrollMetrics$.clear(),this.scrollActivity$.clear(),this.gateState$.clear(),this.scrollRequests$.forEach(e=>e.clear()),this.scrollRequests$.clear(),super.destroy()}};Ur.id=`viewport`;var Wr=Ur,Gr={manifest:Or,create:(e,t)=>new Wr(Dr,e,t),reducer:(e=Hr,t)=>{switch(t.type){case kr:{let{documentId:n}=t.payload;return{...e,documents:{...e.documents,[n]:{...Vr,gates:new Set}}}}case Ar:{let{documentId:n}=t.payload,{[n]:r,...i}=e.documents,a=new Set(e.activeViewports);return a.delete(n),{...e,documents:i,activeViewports:a,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case jr:{let{documentId:n}=t.payload,r=new Set(e.activeViewports);return r.add(n),{...e,activeViewports:r,activeDocumentId:e.activeDocumentId??n}}case Mr:{let{documentId:n}=t.payload,r=new Set(e.activeViewports);return r.delete(n),{...e,activeViewports:r}}case`SET_ACTIVE_VIEWPORT_DOCUMENT`:return{...e,activeDocumentId:t.payload};case Fr:return{...e,viewportGap:t.payload};case Nr:{let{documentId:n,metrics:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,viewportMetrics:{width:r.width,height:r.height,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft,clientWidth:r.clientWidth,clientHeight:r.clientHeight,scrollWidth:r.scrollWidth,scrollHeight:r.scrollHeight,clientLeft:r.clientLeft,clientTop:r.clientTop,relativePosition:{x:r.scrollWidth<=r.clientWidth?0:r.scrollLeft/(r.scrollWidth-r.clientWidth),y:r.scrollHeight<=r.clientHeight?0:r.scrollTop/(r.scrollHeight-r.clientHeight)}}}}}:e}case Pr:{let{documentId:n,scrollMetrics:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,viewportMetrics:{...i.viewportMetrics,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft},isScrolling:!0}}}:e}case Ir:{let{documentId:n,isScrolling:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isScrolling:r}}}:e}case Lr:{let{documentId:n,isSmoothScrolling:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isSmoothScrolling:r}}}:e}case Rr:{let{documentId:n,key:r}=t.payload,i=e.documents[n];if(!i)return e;let a=new Set(i.gates);return a.add(r),{...e,documents:{...e.documents,[n]:{...i,gates:a}}}}case zr:{let{documentId:n,key:r}=t.payload,i=e.documents[n];if(!i)return e;let a=new Set(i.gates);return a.delete(r),{...e,documents:{...e.documents,[n]:{...i,gates:a}}}}default:return e}},initialState:Hr},Kr=Ne(null),qr=()=>Cr(Wr.id);function Jr(e){let{plugin:t}=Sr(Wr.id),n=R(null);return Ye(()=>{if(!t)return;let r=n.current;if(!r)return;try{t.registerViewport(e)}catch(t){console.error(`Failed to register viewport for document ${e}:`,t);return}let i=()=>{t.setViewportScrollMetrics(e,{scrollTop:r.scrollTop,scrollLeft:r.scrollLeft})};r.addEventListener(`scroll`,i);let a=new ResizeObserver(()=>{t.setViewportResizeMetrics(e,{width:r.offsetWidth,height:r.offsetHeight,clientWidth:r.clientWidth,clientHeight:r.clientHeight,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft,scrollWidth:r.scrollWidth,scrollHeight:r.scrollHeight,clientLeft:r.clientLeft,clientTop:r.clientTop})});a.observe(r);let o=t.onScrollRequest(e,({x:e,y:t,behavior:n=`auto`})=>{requestAnimationFrame(()=>{r.scrollTo({left:e,top:t,behavior:n})})});return()=>{t.unregisterViewport(e),a.disconnect(),r.removeEventListener(`scroll`,i),o()}},[t,e]),n}function Yr({children:e,documentId:t,...n}){let[r,i]=I(0),a=Jr(t),{provides:o}=qr(),s=(e=>{let{provides:t}=qr(),[n,r]=I(t?.isGated(e)??!1);return L(()=>{if(t)return r(t.isGated(e)),t.onGateChange(t=>{t.documentId===e&&r(t.isGated)})},[t,e]),n})(t);L(()=>{o&&i(o.getViewportGap())},[o]);let{style:c,...l}=n;return V(Kr.Provider,{value:a,children:V(`div`,{...l,ref:a,style:{width:`100%`,height:`100%`,overflow:`auto`,...typeof c==`object`?c:{},padding:`${r}px`},children:!s&&e})})}var Xr=(e=>(e.Vertical=`vertical`,e.Horizontal=`horizontal`,e))(Xr||{}),Zr=class{constructor(e){this.pageGap=e.pageGap??20,this.viewportGap=e.viewportGap??20,this.bufferSize=e.bufferSize??2}getVisibleRange(e,t,n){let r=this.getScrollOffset(e),i=r,a=r+this.getClientSize(e),o=0;for(;o<t.length&&(t[o].offset+t[o].height)*n<=i;)o++;let s=o;for(;s<t.length&&t[s].offset*n<=a;)s++;return{start:Math.max(0,o-this.bufferSize),end:Math.min(t.length-1,s+this.bufferSize-1)}}handleScroll(e,t,n){let r=this.getVisibleRange(e,t,n),i=t.slice(r.start,r.end+1),a=this.calculatePageVisibility(i,e,n),o=a.map(e=>e.pageNumber),s=t.slice(r.start,r.end+1).flatMap(e=>e.index),c=this.determineCurrentPage(a),l=t[r.start],u=t[r.end],d=l?l.offset*n:0,f=u?(t[t.length-1].offset+t[t.length-1].height)*n-(u.offset+u.height)*n:0;return{currentPage:c,visiblePages:o,pageVisibilityMetrics:a,renderedPageIndexes:s,scrollOffset:{x:e.scrollLeft,y:e.scrollTop},startSpacing:d,endSpacing:f}}calculatePageVisibility(e,t,n){let r=[];return e.forEach(e=>{e.pageLayouts.forEach(i=>{let a=e.x*n,o=e.y*n,s=a+i.x*n,c=o+i.y*n,l=i.rotatedWidth*n,u=i.rotatedHeight*n,d=t.scrollLeft,f=t.scrollTop,p=d+t.clientWidth,m=f+t.clientHeight,h=Math.max(s,d),g=Math.max(c,f),_=Math.min(s+l,p),v=Math.min(c+u,m);if(h<_&&g<v){let e=_-h,t=v-g,a=l*u,o=e*t;r.push({pageNumber:i.pageNumber,viewportX:h-d,viewportY:g-f,visiblePercentage:o/a*100,original:{pageX:(h-s)/n,pageY:(g-c)/n,visibleWidth:e/n,visibleHeight:t/n,scale:1},scaled:{pageX:h-s,pageY:g-c,visibleWidth:e,visibleHeight:t,scale:n}})}})}),r}determineCurrentPage(e){if(e.length===0)return 1;let t=Math.max(...e.map(e=>e.visiblePercentage)),n=e.filter(e=>e.visiblePercentage===t);return n.length===1?n[0].pageNumber:n.sort((e,t)=>e.pageNumber-t.pageNumber)[0].pageNumber}getRectLocationForPage(e,t,n){let r=t.find(t=>t.pageNumbers.includes(e));if(!r)return null;let i=r.pageLayouts.find(t=>t.pageNumber===e);if(!i)return null;let a=0;if(n){let e=n.width;r.width<e&&(a=(e-r.width)/2)}return{origin:{x:r.x+i.x+a,y:r.y+i.y},size:{width:i.width,height:i.height}}}getScrollPositionForPage(e,t,n,r,i){let a=this.getTotalContentSize(t),o=this.getRectLocationForPage(e,t,a);if(!o)return null;let s=ht(o.origin,n);if(i){let e=function(e,t,n,r){return ht(mt(e,t,n),r)}({width:o.size.width,height:o.size.height},{x:i.x,y:i.y},r,n);return{x:s.x+e.x+this.viewportGap,y:s.y+e.y+this.viewportGap}}return{x:s.x+this.viewportGap,y:s.y+this.viewportGap}}getRectPositionForPage(e,t,n,r,i){let a=this.getTotalContentSize(t),o=this.getRectLocationForPage(e,t,a);if(!o)return null;let s=ht(o.origin,n),c=bt({width:o.size.width,height:o.size.height},i,r,n);return{origin:{x:s.x+c.origin.x,y:s.y+c.origin.y},size:c.size}}},Qr=class extends Zr{constructor(e){super(e)}createVirtualItems(e){let t=0;return e.map((e,n)=>{let r=0,i=e.map(e=>{let t={pageNumber:e.index+1,pageIndex:e.index,x:r,y:0,width:e.size.width,height:e.size.height,rotatedWidth:e.rotatedSize.width,rotatedHeight:e.rotatedSize.height};return r+=e.rotatedSize.width+this.pageGap,t}),a=e.reduce((t,n,r)=>t+n.rotatedSize.width+(r<e.length-1?this.pageGap:0),0),o=Math.max(...e.map(e=>e.rotatedSize.height)),s={id:`item-${n}`,x:0,y:t,offset:t,width:a,height:o,pageLayouts:i,pageNumbers:e.map(e=>e.index+1),index:n};return t+=o+this.pageGap,s})}getTotalContentSize(e){return e.length===0?{width:0,height:0}:{width:Math.max(...e.map(e=>e.width)),height:e[e.length-1].y+e[e.length-1].height}}getScrollOffset(e){return e.scrollTop}getClientSize(e){return e.clientHeight}},$r=class extends Zr{constructor(e){super(e)}createVirtualItems(e){let t=0;return e.map((e,n)=>{let r=0,i=e.map(e=>{let t={pageNumber:e.index+1,pageIndex:e.index,x:r,y:0,width:e.size.width,height:e.size.height,rotatedWidth:e.rotatedSize.width,rotatedHeight:e.rotatedSize.height};return r+=e.rotatedSize.width+this.pageGap,t}),a=e.reduce((t,n,r)=>t+n.rotatedSize.width+(r<e.length-1?this.pageGap:0),0),o=Math.max(...e.map(e=>e.rotatedSize.height)),s={id:`item-${n}`,x:t,y:0,offset:t,width:a,height:o,pageLayouts:i,pageNumbers:e.map(e=>e.index+1),index:n};return t+=a+this.pageGap,s})}getTotalContentSize(e){return e.length===0?{width:0,height:0}:{width:e[e.length-1].x+e[e.length-1].width,height:Math.max(...e.map(e=>e.height))}}getScrollOffset(e){return e.scrollLeft}getClientSize(e){return e.clientWidth}},ei=`INIT_SCROLL_STATE`,ti=`CLEANUP_SCROLL_STATE`,ni=`UPDATE_DOCUMENT_SCROLL_STATE`,ri=`SET_SCROLL_STRATEGY`;function ii(e,t){return{type:ni,payload:{documentId:e,state:t}}}var ai={isChanging:!1,targetPage:1,fromPage:1,startTime:0},oi=class extends sr{constructor(e,t,n){var r;super(e,t),this.id=e,this.config=n,this.strategies=new Map,this.layoutReady=new Set,this.initialLayoutFired=new Set,this.scrollerLayoutEmitters=new Map,this.pageChange$=Y(),this.scroll$=Y(),this.layoutChange$=Y(),this.pageChangeState$=Y(),this.layoutReady$=Y(),this.state$=Y(),this.viewport=this.registry.getPlugin(`viewport`).provides(),this.spread=this.registry.getPlugin(`spread`)?.provides()??null,this.viewport.onScrollActivity(e=>{let t=this.getDocumentState(e.documentId);t!=null&&t.pageChangeState.isChanging&&!e.activity.isSmoothScrolling&&this.completePageChange(e.documentId)}),(r=this.spread)==null||r.onSpreadChange(e=>{this.refreshDocumentLayout(e.documentId)}),this.viewport.onViewportChange(e=>{let t=this.getDocumentState(e.documentId);if(!t)return;let n=this.computeMetrics(e.documentId,e.metrics);this.layoutReady.has(e.documentId)?this.commitMetrics(e.documentId,n):this.commitMetrics(e.documentId,{...n,scrollOffset:t.scrollOffset})})}onDocumentLoadingStarted(e){let t=this.getCoreDocument(e);if(!t)return;let n=this.createDocumentState(t);this.dispatch(function(e,t){return{type:ei,payload:{documentId:e,state:t}}}(e,n));let r=this.createStrategy(n.strategy);this.strategies.set(e,r),this.scrollerLayoutEmitters.set(e,Y())}onDocumentLoaded(e){let t=this.getCoreDocument(e);t&&(this.dispatch(ii(e,{totalPages:t.document?.pageCount??0})),this.refreshDocumentLayout(e),this.logger.debug(`ScrollPlugin`,`DocumentOpened`,`Initialized scroll state for document: ${e}`))}onDocumentClosed(e){this.strategies.delete(e),this.layoutReady.delete(e),this.initialLayoutFired.delete(e);let t=this.scrollerLayoutEmitters.get(e);t&&(t.clear(),this.scrollerLayoutEmitters.delete(e)),this.dispatch(function(e){return{type:ti,payload:e}}(e)),this.logger.debug(`ScrollPlugin`,`DocumentClosed`,`Cleaned up scroll state for document: ${e}`)}onScaleChanged(e){let t=this.coreState.core.documents[e];if(!t||t.status!==`loaded`)return;let n=this.viewport.forDocument(e),r=this.computeMetrics(e,n.getMetrics());this.commitMetrics(e,r)}onRotationChanged(e){this.refreshDocumentLayout(e)}onScrollerData(e,t){let n=this.scrollerLayoutEmitters.get(e);if(!n)throw Error(`No scroller layout emitter found for document: ${e}`);return n.on(t)}getScrollerLayout(e){let t=this.getDocumentState(e),n=this.getCoreDocumentOrThrow(e);if(!t||!n)throw Error(`Cannot get scroller layout for document: ${e}`);return r=t,i=n.scale,{startSpacing:r.startSpacing,endSpacing:r.endSpacing,totalWidth:r.totalContentSize.width*i,totalHeight:r.totalContentSize.height*i,pageGap:r.pageGap*i,strategy:r.strategy,items:r.renderedPageIndexes.map(e=>({...r.virtualItems[e],pageLayouts:r.virtualItems[e].pageLayouts.map(e=>({...e,rotatedWidth:e.rotatedWidth*i,rotatedHeight:e.rotatedHeight*i,width:e.width*i,height:e.height*i}))}))};var r,i}setLayoutReady(e){if(this.layoutReady.has(e))return;let t=this.getDocumentState(e);if(!t)return;this.layoutReady.add(e);let n=!this.initialLayoutFired.has(e);n&&this.initialLayoutFired.add(e),this.viewport.forDocument(e).scrollTo({...t.scrollOffset,behavior:`instant`}),this.layoutReady$.emit({documentId:e,isInitial:n,pageNumber:t.currentPage,totalPages:t.totalPages})}clearLayoutReady(e){this.layoutReady.delete(e)}buildCapability(){return{getCurrentPage:()=>this.getCurrentPage(),getTotalPages:()=>this.getTotalPages(),getPageChangeState:()=>this.getPageChangeState(),scrollToPage:e=>this.scrollToPage(e),scrollToNextPage:e=>this.scrollToNextPage(e),scrollToPreviousPage:e=>this.scrollToPreviousPage(e),getMetrics:e=>this.getMetrics(e),getLayout:()=>this.getLayout(),getRectPositionForPage:(e,t,n,r)=>this.getRectPositionForPage(e,t,n,r),forDocument:e=>this.createScrollScope(e),setScrollStrategy:(e,t)=>this.setScrollStrategyForDocument(e,t),getPageGap:()=>this.state.defaultPageGap,onPageChange:this.pageChange$.on,onScroll:this.scroll$.on,onLayoutChange:this.layoutChange$.on,onLayoutReady:this.layoutReady$.on,onPageChangeState:this.pageChangeState$.on,onStateChange:this.state$.on}}createScrollScope(e){return{getCurrentPage:()=>this.getCurrentPage(e),getTotalPages:()=>this.getTotalPages(e),getPageChangeState:()=>this.getPageChangeState(e),scrollToPage:t=>this.scrollToPage(t,e),scrollToNextPage:t=>this.scrollToNextPage(t,e),scrollToPreviousPage:t=>this.scrollToPreviousPage(t,e),getSpreadPagesWithRotatedSize:()=>this.getSpreadPagesWithRotatedSize(e),getMetrics:t=>this.getMetrics(t,e),getLayout:()=>this.getLayout(e),getRectPositionForPage:(t,n,r,i)=>this.getRectPositionForPage(t,n,r,i,e),setScrollStrategy:t=>this.setScrollStrategyForDocument(t,e),onPageChange:t=>this.pageChange$.on(n=>{n.documentId===e&&t(n)}),onScroll:t=>this.scroll$.on(n=>{n.documentId===e&&t(n.metrics)}),onLayoutChange:t=>this.layoutChange$.on(n=>{n.documentId===e&&t(n.layout)})}}getDocumentState(e){let t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){let t=this.getDocumentState(e);if(!t)throw Error(`Scroll state not found for document: ${e??`active`}`);return t}getStrategy(e){let t=e??this.getActiveDocumentId(),n=this.strategies.get(t);if(!n)throw Error(`Strategy not found for document: ${t}`);return n}createStrategy(e){let t={pageGap:this.state.defaultPageGap,viewportGap:this.viewport.getViewportGap(),bufferSize:this.state.defaultBufferSize};return e===Xr.Horizontal?new $r(t):new Qr(t)}createDocumentState(e){return{virtualItems:[],totalPages:e.document?.pageCount??0,currentPage:1,totalContentSize:{width:0,height:0},strategy:this.state.defaultStrategy,pageGap:this.state.defaultPageGap,visiblePages:[],pageVisibilityMetrics:[],renderedPageIndexes:[],scrollOffset:{x:0,y:0},startSpacing:0,endSpacing:0,pageChangeState:ai}}startPageChange(e,t,n=`smooth`){let r=this.getDocumentState(e);if(!r)return;let i={isChanging:!0,targetPage:t,fromPage:r.currentPage,startTime:Date.now()};this.dispatch(ii(e,{pageChangeState:i})),n===`instant`&&this.completePageChange(e)}completePageChange(e){let t=this.getDocumentState(e);if(!t||!t.pageChangeState.isChanging)return;let n={isChanging:!1,targetPage:t.pageChangeState.targetPage,fromPage:t.pageChangeState.fromPage,startTime:t.pageChangeState.startTime};this.dispatch(ii(e,{pageChangeState:n}))}computeLayout(e,t){let n=this.getStrategy(e),r=n.createVirtualItems(t);return{virtualItems:r,totalContentSize:n.getTotalContentSize(r)}}computeMetrics(e,t,n){let r=this.getCoreDocumentOrThrow(e),i=this.getDocumentState(e),a=this.getStrategy(e);if(!i)throw Error(`Document state not found: ${e}`);return a.handleScroll(t,n??i.virtualItems,r.scale)}commitMetrics(e,t){let n=this.getDocumentState(e);n&&(this.dispatch(ii(e,t)),this.scroll$.emit({documentId:e,metrics:t}),t.currentPage!==n.currentPage&&this.pageChange$.emit({documentId:e,pageNumber:t.currentPage,totalPages:n.totalPages}),this.pushScrollerLayout(e))}pushScrollerLayout(e){let t=this.scrollerLayoutEmitters.get(e);if(t)try{let n=this.getScrollerLayout(e);t.emit(n)}catch{}}refreshDocumentLayout(e){let t=this.coreState.core.documents[e],n=this.getDocumentState(e);if(!t||!n||t.status!==`loaded`)return;let r=this.getSpreadPagesWithRotatedSize(e),i=this.computeLayout(e,r),a=this.viewport.forDocument(e),o=this.computeMetrics(e,a.getMetrics(),i.virtualItems);this.dispatch(ii(e,{...i,...o})),this.layoutChange$.emit({documentId:e,layout:i}),this.pushScrollerLayout(e)}getSpreadPagesWithRotatedSize(e){let t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t];if(!n)throw Error(`Document ${t} not loaded`);return(this.spread?.forDocument(t).getSpreadPages()||n.document?.pages.map(e=>[e])||[]).map(e=>e.map(e=>({...e,rotatedSize:dt(e.size,n.rotation,1)})))}getCurrentPage(e){return this.getDocumentStateOrThrow(e).currentPage}getTotalPages(e){return this.getDocumentStateOrThrow(e).totalPages}getPageChangeState(e){return this.getDocumentStateOrThrow(e).pageChangeState}scrollToPage(e,t){let n=t??this.getActiveDocumentId(),r=this.getDocumentStateOrThrow(n),i=this.getStrategy(n),a=this.getCoreDocumentOrThrow(n),{pageNumber:o,behavior:s=`smooth`,pageCoordinates:c,alignX:l,alignY:u}=e;this.startPageChange(n,o,s);let d=i.getScrollPositionForPage(o,r.virtualItems,a.scale,a.rotation,c);d?this.viewport.forDocument(n).scrollTo({...d,behavior:s,alignX:l,alignY:u}):this.completePageChange(n)}scrollToNextPage(e=`smooth`,t){let n=t??this.getActiveDocumentId(),r=this.getDocumentStateOrThrow(n),i=this.getStrategy(n),a=this.getCoreDocumentOrThrow(n),o=r.virtualItems.findIndex(e=>e.pageNumbers.includes(r.currentPage));if(o>=0&&o<r.virtualItems.length-1){let t=r.virtualItems[o+1].pageNumbers[0];this.startPageChange(n,t,e);let s=i.getScrollPositionForPage(t,r.virtualItems,a.scale,a.rotation);s?this.viewport.forDocument(n).scrollTo({...s,behavior:e}):this.completePageChange(n)}}scrollToPreviousPage(e=`smooth`,t){let n=t??this.getActiveDocumentId(),r=this.getDocumentStateOrThrow(n),i=this.getStrategy(n),a=this.coreState.core.documents[n],o=r.virtualItems.findIndex(e=>e.pageNumbers.includes(r.currentPage));if(o>0){let t=r.virtualItems[o-1].pageNumbers[0];this.startPageChange(n,t,e);let s=i.getScrollPositionForPage(t,r.virtualItems,a.scale,a.rotation);s?this.viewport.forDocument(n).scrollTo({...s,behavior:e}):this.completePageChange(n)}}getMetrics(e,t){let n=t??this.getActiveDocumentId();if(e)return this.computeMetrics(n,e);let r=this.viewport.forDocument(n);return this.computeMetrics(n,r.getMetrics())}getLayout(e){let t=this.getDocumentStateOrThrow(e);return{virtualItems:t.virtualItems,totalContentSize:t.totalContentSize}}getRectPositionForPage(e,t,n,r,i){let a=i??this.getActiveDocumentId(),o=this.getDocumentStateOrThrow(a),s=this.getStrategy(a),c=this.getCoreDocumentOrThrow(a);return s.getRectPositionForPage(e+1,o.virtualItems,n??c.scale,r??c.rotation,t)}setScrollStrategyForDocument(e,t){let n=t??this.getActiveDocumentId(),r=this.getDocumentState(n);if(!r||r.strategy===e)return;let i=this.createStrategy(e);this.strategies.set(n,i),this.dispatch(function(e,t){return{type:ri,payload:{documentId:e,strategy:t}}}(n,e)),this.refreshDocumentLayout(n)}onStoreUpdated(e,t){for(let n in t.documents){let r=e.documents[n],i=t.documents[n];r!==i&&(this.state$.emit(i),r?.pageChangeState!==i.pageChangeState&&this.pageChangeState$.emit({documentId:n,state:i.pageChangeState}),this.pushScrollerLayout(n))}}async initialize(){this.logger.info(`ScrollPlugin`,`Initialize`,`Scroll plugin initialized`)}async destroy(){this.strategies.clear(),this.layoutReady.clear(),this.initialLayoutFired.clear();for(let e of this.scrollerLayoutEmitters.values())e.clear();this.scrollerLayoutEmitters.clear(),this.pageChange$.clear(),this.scroll$.clear(),this.layoutChange$.clear(),this.pageChangeState$.clear(),this.layoutReady$.clear(),this.state$.clear(),super.destroy()}};oi.id=`scroll`;var si=oi,ci=`scroll`,li={manifest:{id:ci,name:`Scroll Plugin`,version:`1.0.0`,provides:[`scroll`],requires:[`viewport`],optional:[`spread`],defaultConfig:{defaultPageGap:10,defaultBufferSize:4,defaultStrategy:Xr.Vertical}},create:(e,t)=>new si(ci,e,t),reducer:(e,t)=>{switch(t.type){case ei:{let{documentId:n,state:r}=t.payload;return{...e,documents:{...e.documents,[n]:r}}}case ti:{let{[t.payload]:n,...r}=e.documents;return{...e,documents:r}}case ni:{let{documentId:n,state:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,...r}}}:e}case ri:{let{documentId:n,strategy:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,strategy:r}}}:e}default:return e}},initialState:(e,t)=>((e,t)=>({defaultStrategy:t.defaultStrategy??Xr.Vertical,defaultPageGap:t.defaultPageGap??10,defaultBufferSize:t.defaultBufferSize??2,documents:{}}))(0,t)},ui=()=>Cr(si.id),di=e=>{let{provides:t}=ui(),[n,r]=I(1),[i,a]=I(1);return L(()=>{if(!t||!e)return;let n=t.forDocument(e);return r(n.getCurrentPage()),a(n.getTotalPages()),t.onPageChange(t=>{t.documentId===e&&(r(t.pageNumber),a(t.totalPages))})},[t,e]),{provides:t?.forDocument(e)??null,state:{currentPage:n,totalPages:i}}};function fi({documentId:e,renderPage:t,...n}){let{plugin:r}=Sr(si.id),[i,a]=I({layout:null,docId:null});L(()=>{if(!r||!e)return;let t=r.onScrollerData(e,t=>{a({layout:t,docId:e})});return()=>{t(),a({layout:null,docId:null}),r.clearLayoutReady(e)}},[r,e]);let o=i.docId===e?i.layout:null;return Ye(()=>{r&&e&&o&&r.setLayoutReady(e)},[r,e,o]),o?V(`div`,{...n,style:{width:`${o.totalWidth}px`,height:`${o.totalHeight}px`,position:`relative`,boxSizing:`border-box`,margin:`0 auto`,...o.strategy===Xr.Horizontal&&{display:`flex`,flexDirection:`row`}},children:[V(`div`,{style:{...o.strategy===Xr.Horizontal?{width:o.startSpacing,height:`100%`,flexShrink:0}:{height:o.startSpacing,width:`100%`}}}),V(`div`,{style:{gap:o.pageGap,display:`flex`,alignItems:`center`,position:`relative`,boxSizing:`border-box`,...o.strategy===Xr.Horizontal?{flexDirection:`row`,minHeight:`100%`}:{flexDirection:`column`,minWidth:`fit-content`}},children:o.items.map(e=>V(`div`,{style:{display:`flex`,justifyContent:`center`,gap:o.pageGap},children:e.pageLayouts.map(e=>V(`div`,{style:{width:`${e.rotatedWidth}px`,height:`${e.rotatedHeight}px`},children:t({...e})},e.pageNumber))},e.pageNumbers[0]))}),V(`div`,{style:{...o.strategy===Xr.Horizontal?{width:o.endSpacing,height:`100%`,flexShrink:0}:{height:o.endSpacing,width:`100%`}}})]}):null}var pi=(e=>(e.None=`none`,e.Odd=`odd`,e.Even=`even`,e))(pi||{}),mi=`SPREAD/INIT_STATE`,hi=`SPREAD/CLEANUP_STATE`,gi=`SPREAD/SET_SPREAD_MODE`,_i=`SPREAD/SET_PAGE_GROUPING`;function vi(e,t){return{type:_i,payload:{documentId:e,grouping:t}}}var yi=class extends sr{constructor(e,t,n){super(e,t),this.spreadEmitter$=Y(),this.defaultSpreadMode=n.defaultSpreadMode??pi.None,this.viewport=t.getPlugin(`viewport`)?.provides()??null}onDocumentLoadingStarted(e){var t;let n={spreadMode:this.defaultSpreadMode};this.dispatch(function(e,t){return{type:mi,payload:{documentId:e,state:t}}}(e,n)),(t=this.viewport)==null||t.gate(`spread`,e),this.logger.debug(`SpreadPlugin`,`DocumentOpened`,`Initialized spread state for document: ${e}`)}onDocumentLoaded(e){var t;let n=this.coreState.core.documents[e];if(n?.document){let t=this.calculatePageGrouping(e,n.document.pages.length);this.dispatch(vi(e,t))}(t=this.viewport)==null||t.releaseGate(`spread`,e)}onDocumentClosed(e){this.dispatch(function(e){return{type:hi,payload:e}}(e)),this.logger.debug(`SpreadPlugin`,`DocumentClosed`,`Cleaned up spread state for document: ${e}`)}buildCapability(){return{setSpreadMode:e=>this.setSpreadModeForDocument(e),getSpreadMode:()=>this.getSpreadModeForDocument(),getSpreadPages:()=>this.getSpreadPages(),forDocument:e=>this.createSpreadScope(e),onSpreadChange:this.spreadEmitter$.on}}createSpreadScope(e){return{setSpreadMode:t=>this.setSpreadModeForDocument(t,e),getSpreadMode:()=>this.getSpreadModeForDocument(e),getSpreadPages:()=>this.getSpreadPages(e),onSpreadChange:t=>this.spreadEmitter$.on(n=>{n.documentId===e&&t(n.spreadMode)})}}getDocumentState(e){let t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){let t=this.getDocumentState(e);if(!t)throw Error(`Spread state not found for document: ${e??`active`}`);return t}setSpreadModeForDocument(e,t){let n=t??this.getActiveDocumentId(),r=this.getDocumentStateOrThrow(n),i=this.coreState.core.documents[n];if(!i?.document)throw Error(`Document ${n} not loaded`);if(r.spreadMode!==e){this.dispatch(function(e,t){return{type:gi,payload:{documentId:e,spreadMode:t}}}(n,e));let t=this.calculatePageGrouping(n,i.document.pages.length);this.dispatch(vi(n,t)),this.spreadEmitter$.emit({documentId:n,spreadMode:e})}}getSpreadModeForDocument(e){return this.getDocumentStateOrThrow(e).spreadMode}calculatePageGrouping(e,t){switch(this.getDocumentStateOrThrow(e).spreadMode){case pi.None:return Array.from({length:t},(e,t)=>[t]);case pi.Odd:return Array.from({length:Math.ceil(t/2)},(e,n)=>{let r=[2*n];return 2*n+1<t&&r.push(2*n+1),r});case pi.Even:return[[0],...Array.from({length:Math.ceil((t-1)/2)},(e,n)=>{let r=[1+2*n];return 1+2*n+1<t&&r.push(1+2*n+1),r})];default:return Array.from({length:t},(e,t)=>[t])}}getSpreadPages(e){let t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t],r=this.getDocumentStateOrThrow(t);if(!n?.document)throw Error(`Document ${t} not loaded`);let i=r.pageGrouping??[],a=n.document.pages;return i.map(e=>e.map(e=>a[e]).filter(Boolean))}onStoreUpdated(e,t){for(let n in t.documents){let r=e.documents[n],i=t.documents[n];r?.spreadMode!==i.spreadMode&&this.logger.debug(`SpreadPlugin`,`SpreadModeChanged`,`Spread mode changed for document ${n}: ${r?.spreadMode??pi.None} -> ${i.spreadMode}`)}}async initialize(e){this.logger.info(`SpreadPlugin`,`Initialize`,`Spread plugin initialized`)}async destroy(){this.spreadEmitter$.clear(),super.destroy()}};yi.id=`spread`;var bi=yi,xi=`spread`,Si={id:xi,name:`Spread Plugin`,version:`1.0.0`,provides:[`spread`],requires:[],optional:[`viewport`],defaultConfig:{}};pi.None;var Ci={documents:{},activeDocumentId:null},wi={manifest:Si,create:(e,t)=>new bi(xi,e,t),reducer:(e=Ci,t)=>{switch(t.type){case mi:{let{documentId:n,state:r}=t.payload;return{...e,documents:{...e.documents,[n]:r},activeDocumentId:e.activeDocumentId??n}}case hi:{let n=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case`SPREAD/SET_ACTIVE_DOCUMENT`:return{...e,activeDocumentId:t.payload};case gi:{let{documentId:n,spreadMode:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,spreadMode:r}}}:e}case _i:{let{documentId:n,grouping:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,pageGrouping:r}}}:e}default:return e}},initialState:Ci},Ti=`ui`,Ei={id:Ti,name:`UI Plugin`,version:`1.0.0`,provides:[`ui`],requires:[`commands`],optional:[`i18n`],defaultConfig:{schema:{id:`empty`,version:`1.0.0`,toolbars:{},menus:{},sidebars:{},modals:{},selectionMenus:{}}}},Di=`UI/INIT_STATE`,Oi=`UI/CLEANUP_STATE`,ki=`UI/SET_ACTIVE_TOOLBAR`,Ai=`UI/CLOSE_TOOLBAR_SLOT`,ji=`UI/SET_ACTIVE_SIDEBAR`,Mi=`UI/CLOSE_SIDEBAR_SLOT`,Ni=`UI/SET_SIDEBAR_TAB`,Pi=`UI/OPEN_MODAL`,Fi=`UI/CLOSE_MODAL`,Ii=`UI/CLEAR_MODAL`,Li=`UI/OPEN_MENU`,Ri=`UI/CLOSE_MENU`,zi=`UI/CLOSE_ALL_MENUS`,Bi=`UI/SET_DISABLED_CATEGORIES`,Vi=`UI/SET_HIDDEN_ITEMS`,Hi=(e,t,n,r,i)=>({type:ji,payload:{documentId:e,placement:t,slot:n,sidebarId:r,activeTab:i}}),Ui=(e,t,n)=>({type:Mi,payload:{documentId:e,placement:t,slot:n}}),Wi=(e,t)=>({type:Li,payload:{documentId:e,menuState:t}}),Gi=(e,t)=>({type:Ri,payload:{documentId:e,menuId:t}}),Ki=e=>({type:Bi,payload:{categories:e}}),qi=e=>({type:Vi,payload:{hiddenItems:e}});function Ji(e,t){if(!t)return e;let n={...e};for(let[e,r]of Object.entries(t))n[e]?n[e]={...n[e],...r,items:r.items??n[e].items,responsive:r.responsive??n[e].responsive}:n[e]=r;return n}function Yi(e,t){if(!t)return e;let n={...e};for(let[e,r]of Object.entries(t))n[e]?n[e]={...n[e],...r,items:r.items??n[e].items}:n[e]=r;return n}function Xi(e,t){if(!t)return e;let n={...e};for(let[e,r]of Object.entries(t))n[e]?n[e]={...n[e],...r,content:r.content??n[e].content}:n[e]=r;return n}function Zi(e,t){if(!e.responsive?.breakpoints)return null;let n=function(e,t,n){if(!n||!t?.groups)return e;let r=t.groups.find(e=>e.locales.includes(n));if(!r)return e;let i={};for(let[t,n]of Object.entries(e)){let e=r.breakpoints[t];e?i[t]={minWidth:n.minWidth,maxWidth:n.maxWidth,hide:e.replaceHide?e.replaceHide:[...n.hide||[],...e.hide||[]],show:e.replaceShow?e.replaceShow:[...n.show||[],...e.show||[]]}:i[t]=n}return i}(e.responsive.breakpoints,e.responsive.localeOverrides,t),r=new Map,i=new Map;for(let[e,t]of Object.entries(n))i.set(e,{minWidth:t.minWidth,maxWidth:t.maxWidth});let a=new Set,o=e=>{e.forEach(e=>{a.add(e.id),e.type===`group`&&e.items&&o(e.items),e.type===`tab-group`&&e.tabs&&o(e.tabs),e.type===`section`&&e.items&&o(e.items)})};o(e.items);for(let e of a){let t=[],i=!0;Array.from(Object.entries(n)).sort((e,t)=>(e[1].minWidth??0)-(t[1].minWidth??0)).forEach(([n,r],a)=>{let o=r.hide?.includes(e),s=r.show?.includes(e);(o||s)&&(t.push({breakpointId:n,minWidth:r.minWidth,maxWidth:r.maxWidth,visible:s||!o,priority:a}),a===0&&(i=s||!o))}),t.length>0&&r.set(e,{itemId:e,shouldRender:!0,visibilityRules:t,defaultVisible:i})}return{items:r,breakpoints:i}}var Qi=`data-epdf`,$i=`data-epdf-s`,ea=`data-epdf-i`,ta=`data-epdf-cat`,na=`data-epdf-dis`,ra=`data-epdf-hid`,ia={ROOT:`[${Qi}]`,STYLES:`[${$i}]`,ITEM:e=>`[${ea}="${e}"]`,CATEGORIES:e=>`[${ta}~="${e}"]`,DISABLED_CATEGORY:e=>`[${na}~="${e}"]`,HIDDEN_ITEM:e=>`[${ra}~="${e}"]`},aa={useContainerQueries:!0};function oa(e,t={}){let n={...aa,...t.config},r=t.locale,i=ca(e,r),a=[];a.push(function(e){return`/*  */\n/* EmbedPDF UI Stylesheet - Auto-generated${e?` (locale: ${e})`:``}                         */\n/* DO NOT EDIT MANUALLY - This file is generated from your UI schema            */\n/*  */`}(r));let o=function(e,t){let n=[],r=t.useContainerQueries?`@container`:`@media`,i=new Set;return e.responsiveItems.forEach((e,t)=>{if(i.has(t))return;i.add(t);let a=function(e,t,n){if(t.visibilityRules.length===0)return null;let r=[],i=ia.ITEM(e);t.defaultVisible||r.push(`${i} { display: none; }`);for(let e of t.visibilityRules){let t=[];if(e.minWidth!==void 0&&t.push(`(min-width: ${e.minWidth}px)`),e.maxWidth!==void 0&&t.push(`(max-width: ${e.maxWidth}px)`),t.length>0){let a=e.visible?`flex`:`none`;r.push(`${n} ${t.join(` and `)} {\n  ${i} { display: ${a}; }\n}`)}}return r.length>0?r.join(`
`):null}(t,e,r);a&&n.push(a)}),n.length===0?``:`/*  Responsive Visibility Rules  */\n/* Items show/hide based on container width */\n\n${n.join(`

`)}`}(i,n);o&&a.push(o);let s=function(e){if(e.categories.size===0)return``;let t=[],n=Array.from(e.categories).sort();for(let e of n)t.push(`${ia.ROOT}[${na}~="${e}"] [${ta}~="${e}"] {\n  display: none !important;\n}`);return`/*  Category Visibility Rules  */\n/* Items hide when ANY of their categories is disabled */\n/* Use: data-disabled-categories="category1 category2" on root element */\n\n${t.join(`

`)}`}(i);s&&a.push(s);let c=function(e,t){if(e.dependencies.length===0)return``;let n=[],r=t.useContainerQueries?`@container`:`@media`;for(let t of e.dependencies){let i=ba(t,e,r);i.length>0&&n.push(...i)}return n.length===0?``:`/*  Dependency Visibility Rules  */\n/* Container elements hide when all their dependencies are hidden */\n\n${n.join(`

`)}`}(i,n);return c&&a.push(c),a.filter(e=>e.trim()).join(`

`)}function sa(e,t){let n=new Set(t),r=[];return e.forEach((e,t)=>{e.some(e=>n.has(e))&&r.push(t)}),r}function ca(e,t){let n=new Set,r=new Map,i=[],a=new Map,o=new Map;for(let[s,c]of Object.entries(e.menus))la(s,c,n,r,i,a,o,t);for(let[a,s]of Object.entries(e.toolbars))pa(a,s,n,r,i,o,t);for(let[t,a]of Object.entries(e.sidebars))ga(t,a,n,r,i);for(let[a,s]of Object.entries(e.selectionMenus||{}))_a(a,s,n,r,i,o,t);return{categories:n,itemCategories:r,dependencies:i,menuBreakpoints:a,responsiveItems:o}}function la(e,t,n,r,i,a,o,s){ya(e,t.categories,t.visibilityDependsOn,n,r,i),ua(t.items,n,r,i);let c=Zi(t,s);c&&c.items.forEach((e,t)=>{o.set(t,e)});let l=function(e,t,n){let r=[],i=Zi(e,n);if(e.responsive?.breakpoints&&i){let e=Array.from(i.breakpoints.entries()).sort((e,t)=>(e[1].minWidth??0)-(t[1].minWidth??0));for(let[n,a]of e){let e=fa(i,a),n=new Set;for(let r of e){let e=t.get(r);e&&e.forEach(e=>n.add(e))}r.push({minWidth:a.minWidth,maxWidth:a.maxWidth,visibleItemIds:e,visibleCategories:n})}}else{let n=[],i=new Set;da(e.items,t,n,i),r.push({visibleItemIds:n,visibleCategories:i})}return r}(t,r,s);a.set(e,l)}function ua(e,t,n,r){for(let i of e)ya(i.id,i.categories,i.visibilityDependsOn,t,n,r),i.type===`section`&&ua(i.items,t,n,r)}function da(e,t,n,r){for(let i of e){n.push(i.id);let e=t.get(i.id);e&&e.forEach(e=>r.add(e)),i.type===`section`&&da(i.items,t,n,r)}}function fa(e,t){let n=[];return e.items.forEach((e,r)=>{let i=e.defaultVisible;for(let n of e.visibilityRules)(n.minWidth===void 0||t.minWidth!==void 0&&t.minWidth>=n.minWidth)&&(n.maxWidth===void 0||t.maxWidth!==void 0&&t.maxWidth<=n.maxWidth)&&(i=n.visible);i&&n.push(r)}),n}function pa(e,t,n,r,i,a,o){ya(e,t.categories,t.visibilityDependsOn,n,r,i);let s=Zi(t,o);s&&s.items.forEach((e,t)=>{a.set(t,e)}),ma(t.items,n,r,i)}function ma(e,t,n,r){for(let i of e)ya(i.id,i.categories,i.visibilityDependsOn,t,n,r),i.type===`group`&&i.items&&ma(i.items,t,n,r),i.type===`tab-group`&&i.tabs&&ha(i.tabs,t,n,r)}function ha(e,t,n,r){for(let i of e)ya(i.id,i.categories,i.visibilityDependsOn,t,n,r)}function ga(e,t,n,r,i){if(ya(e,t.categories,t.visibilityDependsOn,n,r,i),t.content.type===`tabs`)for(let e of t.content.tabs)ya(e.id,e.categories,e.visibilityDependsOn,n,r,i)}function _a(e,t,n,r,i,a,o){if(ya(e,t.categories,t.visibilityDependsOn,n,r,i),t.responsive){let e=Zi(t,o);e&&e.items.forEach((e,t)=>{a.set(t,e)})}va(t.items,n,r,i)}function va(e,t,n,r){for(let i of e)ya(i.id,i.categories,i.visibilityDependsOn,t,n,r),i.type===`group`&&i.items&&va(i.items,t,n,r)}function ya(e,t,n,r,i,a){var o;t!=null&&t.length&&(t.forEach(e=>r.add(e)),i.set(e,t)),n&&(n.menuId||(o=n.itemIds)!=null&&o.length)&&a.push({itemId:e,dependsOnMenuId:n.menuId,dependsOnItemIds:n.itemIds})}function ba(e,t,n,r){let i=[];if(e.dependsOnMenuId){let r=t.menuBreakpoints.get(e.dependsOnMenuId);if(r&&r.length>0){i.push(`/* "${e.itemId}" depends on menu "${e.dependsOnMenuId}" */`);for(let t of r){if(t.visibleItemIds.length===0)continue;let r=t.visibleItemIds.sort().map(e=>ia.HIDDEN_ITEM(e)).join(``),a=`${ia.ROOT}${r} ${ia.ITEM(e.itemId)} {\n  display: none !important;\n}`,o=[];t.minWidth!==void 0&&o.push(`(min-width: ${t.minWidth}px)`),t.maxWidth!==void 0&&o.push(`(max-width: ${t.maxWidth}px)`),o.length>0?i.push(`${n} ${o.join(` and `)} {\n  ${a}\n}`):i.push(a)}}}if(e.dependsOnItemIds?.length){i.push(`/* "${e.itemId}" depends on items: ${e.dependsOnItemIds.join(`, `)} */`);let t=e.dependsOnItemIds.sort().map(e=>ia.HIDDEN_ITEM(e)).join(``);i.push(`${ia.ROOT}${t} ${ia.ITEM(e.itemId)} {\n  display: none !important;\n}`)}return i}function xa(e,t){return{[ea]:e.id,[ta]:e.categories?.join(` `)||void 0,...t}}var Sa=class extends sr{constructor(e,t,n){if(super(e,t),this.cachedStylesheet=null,this.cachedLocale=null,this.i18n=null,this.i18nCleanup=null,this.categoryChanged$=Y(),this.stylesheetInvalidated$=hr(),this.toolbarChanged$=gr((e,t)=>({documentId:e,...t}),{cache:!1}),this.sidebarChanged$=gr((e,t)=>({documentId:e,...t}),{cache:!1}),this.modalChanged$=gr((e,t)=>({documentId:e,...t}),{cache:!1}),this.menuChanged$=gr((e,t)=>({documentId:e,...t}),{cache:!1}),this.schema=n.schema,this.stylesheetConfig=n.stylesheetConfig||{},this.itemCategories=ca(this.schema).itemCategories,n.disabledCategories?.length){this.dispatch(Ki(n.disabledCategories));let e=sa(this.itemCategories,n.disabledCategories);this.dispatch(qi(e))}this.i18n=t.getPlugin(`i18n`)?.provides()??null,this.i18n&&(this.i18nCleanup=this.i18n.onLocaleChange(({currentLocale:e})=>{this.handleLocaleChange(e)}),this.cachedLocale=this.i18n.getLocale())}async initialize(){this.logger.info(`UIPlugin`,`Initialize`,`UI plugin initialized`)}async destroy(){this.i18nCleanup&&=(this.i18nCleanup(),null),this.toolbarChanged$.clear(),this.sidebarChanged$.clear(),this.modalChanged$.clear(),this.menuChanged$.clear(),this.stylesheetInvalidated$.clear(),super.destroy()}onDocumentLoadingStarted(e){this.dispatch(((e,t)=>({type:Di,payload:{documentId:e,schema:t}}))(e,this.schema))}onDocumentClosed(e){this.dispatch((e=>({type:Oi,payload:{documentId:e}}))(e)),this.toolbarChanged$.clearScope(e),this.sidebarChanged$.clearScope(e),this.modalChanged$.clearScope(e),this.menuChanged$.clearScope(e)}handleLocaleChange(e){this.cachedLocale!==e&&(this.logger.debug(`UIPlugin`,`LocaleChange`,`Locale changed: ${this.cachedLocale} -> ${e}`),this.cachedLocale=e,this.invalidateStylesheet(),this.stylesheetInvalidated$.emit())}getStylesheet(){let e=this.i18n?.getLocale()??null;return this.cachedStylesheet&&this.cachedLocale===e||(this.cachedStylesheet=oa(this.schema,{config:this.stylesheetConfig,locale:e??void 0}),this.cachedLocale=e),this.cachedStylesheet}getLocale(){return this.i18n?.getLocale()??null}invalidateStylesheet(){this.cachedStylesheet=null}onStylesheetInvalidated(e){return this.stylesheetInvalidated$.on(e)}disableCategoryImpl(e){let t=new Set(this.state.disabledCategories);if(!t.has(e)){t.add(e);let n=Array.from(t);this.dispatch(Ki(n));let r=sa(this.itemCategories,n);this.dispatch(qi(r)),this.categoryChanged$.emit({disabledCategories:n,hiddenItems:r})}}enableCategoryImpl(e){let t=new Set(this.state.disabledCategories);if(t.has(e)){t.delete(e);let n=Array.from(t);this.dispatch(Ki(n));let r=sa(this.itemCategories,n);this.dispatch(qi(r)),this.categoryChanged$.emit({disabledCategories:n,hiddenItems:r})}}toggleCategoryImpl(e){this.state.disabledCategories.includes(e)?this.enableCategoryImpl(e):this.disableCategoryImpl(e)}setDisabledCategoriesImpl(e){this.dispatch(Ki(e));let t=sa(this.itemCategories,e);this.dispatch(qi(t)),this.categoryChanged$.emit({disabledCategories:e,hiddenItems:t})}buildCapability(){return{setActiveToolbar:(e,t,n,r)=>this.setToolbarForDocument(e,t,n,r),setActiveSidebar:(e,t,n,r,i)=>this.setSidebarForDocument(e,t,n,r,i),toggleSidebar:(e,t,n,r,i)=>this.toggleSidebarForDocument(e,t,n,r,i),openModal:(e,t)=>this.openModalForDocument(e,t),openMenu:(e,t,n,r)=>this.openMenuForDocument(e,t,n,r),toggleMenu:(e,t,n,r)=>this.toggleMenuForDocument(e,t,n,r),forDocument:e=>this.createUIScope(e),getSchema:()=>this.schema,mergeSchema:e=>{var t,n;this.schema=(t=this.schema,n=e,{...t,...n,toolbars:Ji(t.toolbars,n.toolbars),menus:Yi(t.menus,n.menus),sidebars:Xi(t.sidebars,n.sidebars)})},disableCategory:e=>this.disableCategoryImpl(e),enableCategory:e=>this.enableCategoryImpl(e),toggleCategory:e=>this.toggleCategoryImpl(e),setDisabledCategories:e=>this.setDisabledCategoriesImpl(e),getDisabledCategories:()=>this.state.disabledCategories,isCategoryDisabled:e=>this.state.disabledCategories.includes(e),getHiddenItems:()=>this.state.hiddenItems,onToolbarChanged:this.toolbarChanged$.onGlobal,onSidebarChanged:this.sidebarChanged$.onGlobal,onModalChanged:this.modalChanged$.onGlobal,onMenuChanged:this.menuChanged$.onGlobal,onCategoryChanged:this.categoryChanged$.on}}createUIScope(e){return{setActiveToolbar:(t,n,r)=>this.setToolbarForDocument(t,n,r,e),getActiveToolbar:(t,n)=>this.getToolbarForDocument(t,n,e),closeToolbarSlot:(t,n)=>this.closeToolbarForDocument(t,n,e),isToolbarOpen:(t,n,r)=>this.isToolbarOpenForDocument(t,n,r,e),setActiveSidebar:(t,n,r,i)=>this.setSidebarForDocument(t,n,r,e,i),getActiveSidebar:(t,n)=>this.getSidebarForDocument(t,n,e),closeSidebarSlot:(t,n)=>this.closeSidebarForDocument(t,n,e),toggleSidebar:(t,n,r,i)=>this.toggleSidebarForDocument(t,n,r,e,i),isSidebarOpen:(t,n,r)=>this.isSidebarOpenForDocument(t,n,r,e),setSidebarTab:(t,n)=>this.setSidebarTabForDocument(t,n,e),getSidebarTab:t=>this.getSidebarTabForDocument(t,e),openModal:t=>this.openModalForDocument(t,e),closeModal:()=>this.closeModalForDocument(e),clearModal:()=>this.clearModalForDocument(e),getActiveModal:()=>this.getActiveModalForDocument(e),isModalOpen:()=>this.isModalOpenForDocument(e),openMenu:(t,n,r)=>this.openMenuForDocument(t,n,r,e),closeMenu:t=>this.closeMenuForDocument(t,e),toggleMenu:(t,n,r)=>this.toggleMenuForDocument(t,n,r,e),closeAllMenus:()=>this.closeAllMenusForDocument(e),isMenuOpen:t=>this.isMenuOpenForDocument(t,e),getOpenMenus:()=>this.getOpenMenusForDocument(e),getSchema:()=>this.schema,getState:()=>this.getDocumentStateOrThrow(e),onToolbarChanged:this.toolbarChanged$.forScope(e),onSidebarChanged:this.sidebarChanged$.forScope(e),onModalChanged:this.modalChanged$.forScope(e),onMenuChanged:this.menuChanged$.forScope(e)}}getDocumentState(e){let t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){let t=this.getDocumentState(e);if(!t)throw Error(`UI state not found for document: ${e??`active`}`);return t}setToolbarForDocument(e,t,n,r){let i=r??this.getActiveDocumentId();this.dispatch(((e,t,n,r)=>({type:ki,payload:{documentId:e,placement:t,slot:n,toolbarId:r}}))(i,e,t,n)),this.toolbarChanged$.emit(i,{placement:e,slot:t,toolbarId:n})}getToolbarForDocument(e,t,n){let r=`${e}-${t}`,i=this.getDocumentStateOrThrow(n).activeToolbars[r];return i?.isOpen?i.toolbarId:null}closeToolbarForDocument(e,t,n){let r=n??this.getActiveDocumentId();this.dispatch(((e,t,n)=>({type:Ai,payload:{documentId:e,placement:t,slot:n}}))(r,e,t)),this.toolbarChanged$.emit(r,{placement:e,slot:t,toolbarId:``})}isToolbarOpenForDocument(e,t,n,r){let i=`${e}-${t}`,a=this.getDocumentStateOrThrow(r).activeToolbars[i];return!(!a||!a.isOpen)&&(!n||a.toolbarId===n)}setSidebarForDocument(e,t,n,r,i){let a=r??this.getActiveDocumentId();this.dispatch(Hi(a,e,t,n,i)),this.sidebarChanged$.emit(a,{placement:e,slot:t,sidebarId:n})}getSidebarForDocument(e,t,n){let r=`${e}-${t}`,i=this.getDocumentStateOrThrow(n).activeSidebars[r];return i?.isOpen?i.sidebarId:null}closeSidebarForDocument(e,t,n){let r=n??this.getActiveDocumentId();this.dispatch(Ui(r,e,t)),this.sidebarChanged$.emit(r,{placement:e,slot:t,sidebarId:``})}toggleSidebarForDocument(e,t,n,r,i){let a=r??this.getActiveDocumentId(),o=`${e}-${t}`,s=this.getDocumentStateOrThrow(a).activeSidebars[o];s?.sidebarId===n&&s?.isOpen?(this.dispatch(Ui(a,e,t)),this.sidebarChanged$.emit(a,{placement:e,slot:t,sidebarId:``})):(this.dispatch(Hi(a,e,t,n,i)),this.sidebarChanged$.emit(a,{placement:e,slot:t,sidebarId:n}))}isSidebarOpenForDocument(e,t,n,r){let i=`${e}-${t}`,a=this.getDocumentStateOrThrow(r).activeSidebars[i];return!(!a||!a.isOpen)&&(!n||a.sidebarId===n)}setSidebarTabForDocument(e,t,n){let r=n??this.getActiveDocumentId();this.dispatch(((e,t,n)=>({type:Ni,payload:{documentId:e,sidebarId:t,tabId:n}}))(r,e,t))}getSidebarTabForDocument(e,t){return this.getDocumentStateOrThrow(t).sidebarTabs[e]??null}openModalForDocument(e,t){let n=t??this.getActiveDocumentId();this.dispatch(((e,t)=>({type:Pi,payload:{documentId:e,modalId:t}}))(n,e)),this.modalChanged$.emit(n,{modalId:e,isOpen:!0})}closeModalForDocument(e){let t=e??this.getActiveDocumentId(),n=this.getDocumentStateOrThrow(t).activeModal;this.dispatch((e=>({type:Fi,payload:{documentId:e}}))(t)),this.modalChanged$.emit(t,{modalId:n?.modalId??null,isOpen:!1})}clearModalForDocument(e){let t=e??this.getActiveDocumentId();this.dispatch((e=>({type:Ii,payload:{documentId:e}}))(t))}getActiveModalForDocument(e){return this.getDocumentStateOrThrow(e).activeModal}isModalOpenForDocument(e){return this.getDocumentStateOrThrow(e).activeModal?.isOpen??!1}openMenuForDocument(e,t,n,r){let i=r??this.getActiveDocumentId();this.dispatch(Wi(i,{menuId:e,triggeredByCommandId:t,triggeredByItemId:n})),this.menuChanged$.emit(i,{menuId:e,isOpen:!0})}closeMenuForDocument(e,t){let n=t??this.getActiveDocumentId();this.dispatch(Gi(n,e)),this.menuChanged$.emit(n,{menuId:e,isOpen:!1})}toggleMenuForDocument(e,t,n,r){let i=r??this.getActiveDocumentId();this.getDocumentStateOrThrow(i).openMenus[e]?(this.dispatch(Gi(i,e)),this.menuChanged$.emit(i,{menuId:e,isOpen:!1})):(this.dispatch(Wi(i,{menuId:e,triggeredByCommandId:t,triggeredByItemId:n})),this.menuChanged$.emit(i,{menuId:e,isOpen:!0}))}closeAllMenusForDocument(e){let t=e??this.getActiveDocumentId();this.dispatch((e=>({type:zi,payload:{documentId:e}}))(t))}isMenuOpenForDocument(e,t){return!!this.getDocumentStateOrThrow(t).openMenus[e]}getOpenMenusForDocument(e){return Object.values(this.getDocumentStateOrThrow(e).openMenus)}};Sa.id=`ui`;var Ca=Sa,wa={activeToolbars:{},activeSidebars:{},activeModal:null,openMenus:{},sidebarTabs:{}},Ta={documents:{},disabledCategories:[],hiddenItems:[]};function Ea(e,t){return function(e){return e.ui??null}(e)?.documents[t]??null}function Da(e,t){return`${e}-${t}`}function Oa(e,t,n,r,i){let a=function(e,t,n,r){let i=Ea(e,t);return i?i.activeToolbars[Da(n,r)]??null:null}(e,t,n,r);return!(!a||!a.isOpen)&&(!i||a.toolbarId===i)}function ka(e,t,n,r,i){let a=function(e,t,n,r){let i=Ea(e,t);return i?i.activeSidebars[Da(n,r)]??null:null}(e,t,n,r);return!(!a||!a.isOpen)&&(!i||a.sidebarId===i)}var Aa={manifest:Ei,create:(e,t)=>new Ca(Ti,e,t),reducer:(e=Ta,t)=>{switch(t.type){case Di:{let{documentId:n,schema:r}=t.payload,i={};return Object.values(r.toolbars).forEach(e=>{if(e.permanent&&e.position){let t=`${e.position.placement}-${e.position.slot}`;i[t]={toolbarId:e.id,isOpen:!0}}}),{...e,documents:{...e.documents,[n]:{...wa,activeToolbars:i}}}}case Oi:{let{documentId:n}=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i}}case ki:{let{documentId:n,placement:r,slot:i,toolbarId:a}=t.payload,o=e.documents[n]||wa,s=`${r}-${i}`;return{...e,documents:{...e.documents,[n]:{...o,activeToolbars:{...o.activeToolbars,[s]:{toolbarId:a,isOpen:!0}}}}}}case Ai:{let{documentId:n,placement:r,slot:i}=t.payload,a=e.documents[n];if(!a)return e;let o=`${r}-${i}`,s=a.activeToolbars[o];return s?{...e,documents:{...e.documents,[n]:{...a,activeToolbars:{...a.activeToolbars,[o]:{...s,isOpen:!1}}}}}:e}case ji:{let{documentId:n,placement:r,slot:i,sidebarId:a,activeTab:o}=t.payload,s=e.documents[n]||wa,c=`${r}-${i}`;return{...e,documents:{...e.documents,[n]:{...s,activeSidebars:{...s.activeSidebars,[c]:{sidebarId:a,isOpen:!0}},...o&&{sidebarTabs:{...s.sidebarTabs,[a]:o}}}}}}case Mi:{let{documentId:n,placement:r,slot:i}=t.payload,a=e.documents[n];if(!a)return e;let o=`${r}-${i}`,s=a.activeSidebars[o];return s?{...e,documents:{...e.documents,[n]:{...a,activeSidebars:{...a.activeSidebars,[o]:{...s,isOpen:!1}}}}}:e}case Ni:{let{documentId:n,sidebarId:r,tabId:i}=t.payload,a=e.documents[n]||wa;return{...e,documents:{...e.documents,[n]:{...a,sidebarTabs:{...a.sidebarTabs,[r]:i}}}}}case Pi:{let{documentId:n,modalId:r}=t.payload,i=e.documents[n]||wa;return{...e,documents:{...e.documents,[n]:{...i,activeModal:{modalId:r,isOpen:!0},openMenus:{}}}}}case Fi:{let{documentId:n}=t.payload,r=e.documents[n];return r?.activeModal?{...e,documents:{...e.documents,[n]:{...r,activeModal:{...r.activeModal,isOpen:!1}}}}:e}case Ii:{let{documentId:n}=t.payload,r=e.documents[n];return r?r.activeModal?.isOpen?e:{...e,documents:{...e.documents,[n]:{...r,activeModal:null}}}:e}case Li:{let{documentId:n,menuState:r}=t.payload,i=e.documents[n]||wa;return{...e,documents:{...e.documents,[n]:{...i,openMenus:{[r.menuId]:r}}}}}case Ri:{let{documentId:n,menuId:r}=t.payload,i=e.documents[n];if(!i)return e;let{[r]:a,...o}=i.openMenus;return{...e,documents:{...e.documents,[n]:{...i,openMenus:o}}}}case zi:{let{documentId:n}=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,openMenus:{}}}}:e}case Bi:return{...e,disabledCategories:t.payload.categories};case Vi:return{...e,hiddenItems:t.payload.hiddenItems};default:return e}},initialState:Ta},ja=()=>Cr(Ca.id),Ma=e=>{let{provides:t}=ja(),[n,r]=I(null);return L(()=>{if(!t)return;let n=t.forDocument(e);r(n.getState());let i=n.onToolbarChanged(()=>r(n.getState())),a=n.onSidebarChanged(()=>r(n.getState())),o=n.onModalChanged(()=>r(n.getState())),s=n.onMenuChanged(()=>r(n.getState()));return()=>{i(),a(),o(),s()}},[t,e]),n},Na=Ne(null);function Pa(){let e=Xe(Na);if(!e)throw Error(`useUIContainer must be used within a UIProvider`);return e}var Fa=Ne(null);function Ia({children:e}){let t=R(new Map),n={register:B((e,n,r)=>{let i=`${e}:${n}`;t.current.set(i,r)},[]),unregister:B((e,n)=>{let r=`${e}:${n}`;t.current.delete(r)},[]),getAnchor:B((e,n)=>{let r=`${e}:${n}`;return t.current.get(r)||null},[])};return V(Fa.Provider,{value:n,children:e})}function La(){let e=Xe(Fa);if(!e)throw Error(`useAnchorRegistry must be used within UIProvider`);return e}function Ra(e,t){let n=La(),r=R(null),i=R(e),a=R(t);return i.current=e,a.current=t,B(e=>{let t=r.current;r.current=e,e?e!==t&&n.register(i.current,a.current,e):t&&n.unregister(i.current,a.current)},[n])}var za=Ne(null);function Ba({children:e,initialComponents:t={}}){let n=R(new Map(Object.entries(t))),r={register:B((e,t)=>{n.current.set(e,t)},[]),unregister:B(e=>{n.current.delete(e)},[]),get:B(e=>n.current.get(e),[]),has:B(e=>n.current.has(e),[]),getRegisteredIds:B(()=>Array.from(n.current.keys()),[])};return V(za.Provider,{value:r,children:e})}function Va(){let e=function(){let e=Xe(za);if(!e)throw Error(`useComponentRegistry must be used within UIProvider`);return e}();return{renderCustomComponent:(t,n,r)=>{let i=e.get(t);return i?V(i,{documentId:n,...r||{}}):(console.error(`Component "${t}" not found in registry`),null)}}}var Ha=Ne(null);function Ua({children:e,renderers:t}){return V(Ha.Provider,{value:t,children:e})}function Wa(){let e=Xe(Ha);if(!e)throw Error(`useRenderers must be used within UIProvider`);return e}function Ga(e,t){let{provides:n}=ja(),r=Wa(),i=B(i=>{let a=(n?.getSchema())?.selectionMenus?.[e];return!a||!i.selected?null:V(r.selectionMenu,{schema:a,documentId:t,props:i})},[n,r,e,t]);if((n?.getSchema())?.selectionMenus?.[e])return i}function Ka({container:e,documentId:t}){let n=Ma(t),{provides:r}=ja(),i=La(),a=Wa(),[o,s]=I(null),c=n?.openMenus||{},l=r?.getSchema();if(L(()=>{let e=Object.keys(c);if(e.length>0){let n=e[0];if(!n)return void s(null);let r=c[n];r&&r.triggeredByItemId?s({menuId:n,anchorEl:i.getAnchor(t,r.triggeredByItemId)}):s(null)}else s(null)},[c,i,t]),!o||!l)return null;let u=l.menus[o.menuId];return u?V(a.menu,{schema:u,documentId:t,anchorEl:o.anchorEl,onClose:()=>{o&&r?.forDocument(t).closeMenu(o.menuId)},container:e}):(console.warn(`Menu "${o.menuId}" not found in schema`),null)}function qa({children:e,style:t,...n}){let{plugin:r}=Sr(Ca.id),{provides:i}=ja(),[a,o]=I([]),[s,c]=I([]),l=R(null),u=R(null),d=R(null),f=R(null),p=z(()=>({containerRef:f,getContainer:()=>f.current}),[]),m=B(e=>{let t=d.current;if(d.current=e,f.current=e,e&&e!==t&&r){let t=function(e){let t=e.getRootNode();return t instanceof ShadowRoot?t:document.head}(e);u.current=t;let n=t.querySelector(ia.STYLES);if(n)return l.current=n,void(n.textContent=r.getStylesheet());let i=r.getStylesheet(),a=document.createElement(`style`);a.setAttribute($i,``),a.textContent=i,t instanceof ShadowRoot?t.insertBefore(a,t.firstChild):t.appendChild(a),l.current=a}},[r]);L(()=>()=>{var e;(e=l.current)!=null&&e.parentNode&&!d.current&&l.current.remove(),l.current=null,u.current=null},[]),L(()=>{if(r)return r.onStylesheetInvalidated(()=>{l.current&&(l.current.textContent=r.getStylesheet())})},[r]),L(()=>{if(i)return o(i.getDisabledCategories()),c(i.getHiddenItems()),i.onCategoryChanged(({disabledCategories:e,hiddenItems:t})=>{o(e),c(t)})},[i]);let h=z(()=>a.length>0?a.join(` `):void 0,[a]),g=z(()=>s.length>0?s.join(` `):void 0,[s]),_=z(()=>{let e={containerType:`inline-size`};return t&&typeof t==`object`?{...e,...t}:e},[t]),v={[Qi]:``,[na]:h,[ra]:g};return V(Na.Provider,{value:p,children:V(`div`,{ref:m,...v,...n,style:_,children:e})})}function Ja({children:e,documentId:t,components:n={},renderers:r,menuContainer:i,...a}){return V(Ia,{children:V(Ba,{initialComponents:n,children:V(Ua,{renderers:r,children:V(qa,{...a,children:[e,V(Ka,{documentId:t,container:i})]})})})})}var Ya=class extends sr{constructor(e,t,n){super(e,t),this.id=e,this.documentOpened$=Y(),this.documentClosed$=Y(),this.activeDocumentChanged$=Y(),this.documentError$=Y(),this.documentOrderChanged$=Y(),this.openFileRequest$=hr(),this.loadOptions=new Map,this.maxDocuments=n?.maxDocuments}buildCapability(){return{openFileDialog:e=>this.openFileDialog(e),openDocumentUrl:e=>this.openDocumentUrl(e),openDocumentBuffer:e=>this.openDocumentBuffer(e),retryDocument:(e,t)=>this.retryDocument(e,t),closeDocument:e=>this.closeDocument(e),closeAllDocuments:()=>this.closeAllDocuments(),setActiveDocument:e=>{if(!this.isDocumentOpen(e))throw Error(`Cannot set active document: ${e} is not open`);this.dispatchCoreAction((e=>({type:Wn,payload:e}))(e))},getActiveDocumentId:()=>this.coreState.core.activeDocumentId,getActiveDocument:()=>{let e=this.coreState.core.activeDocumentId;return e?this.coreState.core.documents[e]?.document??null:null},getDocumentOrder:()=>this.coreState.core.documentOrder,moveDocument:(e,t)=>{this.dispatchCoreAction(((e,t)=>({type:Kn,payload:{documentId:e,toIndex:t}}))(e,t))},swapDocuments:(e,t)=>{let n=this.coreState.core.documentOrder,r=n.indexOf(e),i=n.indexOf(t);if(r===-1||i===-1)throw Error(`One or both documents not found in order`);let a=[...n];[a[r],a[i]]=[a[i],a[r]],this.dispatchCoreAction((e=>({type:Gn,payload:e}))(a))},getDocument:e=>this.coreState.core.documents[e]?.document??null,getDocumentState:e=>this.coreState.core.documents[e]??null,getOpenDocuments:()=>this.coreState.core.documentOrder.map(e=>this.coreState.core.documents[e]).filter(e=>e!==null),isDocumentOpen:e=>this.isDocumentOpen(e),getDocumentCount:()=>Object.keys(this.coreState.core.documents).length,getDocumentIndex:e=>this.coreState.core.documentOrder.indexOf(e),onDocumentOpened:this.documentOpened$.on,onDocumentClosed:this.documentClosed$.on,onDocumentError:this.documentError$.on,onActiveDocumentChanged:this.activeDocumentChanged$.on,onDocumentOrderChanged:this.documentOrderChanged$.on}}isDocumentOpen(e){return!!this.coreState.core.documents[e]}onDocumentLoaded(e){let t=this.coreState.core.documents[e];t&&t.status===`loaded`&&(this.loadOptions.delete(e),this.documentOpened$.emit(t),this.logger.info(`DocumentManagerPlugin`,`DocumentOpened`,`Document ${e} opened successfully`,{name:t.name}))}onDocumentClosed(e){this.loadOptions.delete(e),this.documentClosed$.emit(e),this.logger.info(`DocumentManagerPlugin`,`DocumentClosed`,`Document ${e} closed`)}onActiveDocumentChanged(e,t){this.activeDocumentChanged$.emit({previousDocumentId:e,currentDocumentId:t}),this.logger.info(`DocumentManagerPlugin`,`ActiveDocumentChanged`,`Active document changed from ${e} to ${t}`)}onCoreStoreUpdated(e,t){e.core.documentOrder!==t.core.documentOrder&&this.documentOrderChanged$.emit({order:t.core.documentOrder})}onOpenFileRequest(e){return this.openFileRequest$.on(e)}openDocumentUrl(e){let t=new jt,n=e.documentId||this.generateDocumentId(),r=this.checkDocumentLimit();if(r)return t.reject(r),t;let i=this.extractNameFromUrl(e.url);this.loadOptions.set(n,e),this.dispatchCoreAction(Zn(n,i,e.scale,e.rotation,!!e.password,e.autoActivate)),this.logger.info(`DocumentManagerPlugin`,`OpenDocumentUrl`,`Starting to load document from URL: ${e.url}`,{documentId:n,passwordProvided:!!e.password});let a={id:n,url:e.url},o=this.engine.openDocumentUrl(a,{password:e.password,mode:e.mode,requestOptions:e.requestOptions});return t.resolve({documentId:n,task:o}),this.handleLoadTask(n,o,`OpenDocumentUrl`),t}openDocumentBuffer(e){let t=new jt,n=this.checkDocumentLimit();if(n)return t.reject(n),t;let r=e.documentId||this.generateDocumentId();this.loadOptions.set(r,e),this.dispatchCoreAction(Zn(r,e.name,e.scale,e.rotation,!!e.password,e.autoActivate)),this.logger.info(`DocumentManagerPlugin`,`OpenDocumentBuffer`,`Starting to load document from buffer: ${e.name}`,{documentId:r,passwordProvided:!!e.password});let i={id:r,content:e.buffer},a=this.engine.openDocumentBuffer(i,{password:e.password});return t.resolve({documentId:r,task:a}),this.handleLoadTask(r,a,`OpenDocumentBuffer`),t}retryDocument(e,t){let n=new jt,r=this.validateRetry(e);if(!r.valid)return n.reject(r.error),n;let i={...this.loadOptions.get(e),...t?.password&&{password:t.password}};this.loadOptions.set(e,i),this.dispatchCoreAction(((e,t)=>({type:Hn,payload:{documentId:e,passwordProvided:t}}))(e,!!t?.password)),this.logger.info(`DocumentManagerPlugin`,`RetryDocument`,`Retrying to load document ${e}`,{passwordProvided:!!t?.password});let a=`url`in i?this.retryUrlDocument(e,i):this.retryBufferDocument(e,i);return n.resolve({documentId:e,task:a}),this.handleLoadTask(e,a,`RetryDocument`),n}openFileDialog(e){let t=new jt;return this.openFileRequest$.emit({task:t,options:e}),t}closeDocument(e){let t=new jt,n=this.coreState.core.documents[e];return n?(n.status===`loaded`&&n.document?this.engine.closeDocument(n.document).wait(()=>{this.dispatchCoreAction(Qn(e)),t.resolve()},n=>{this.logger.error(`DocumentManagerPlugin`,`CloseDocument`,`Failed to close document ${e}`,n),t.fail(n)}):(this.logger.info(`DocumentManagerPlugin`,`CloseDocument`,`Closing document ${e} in ${n.status} state (skipping engine close)`),this.dispatchCoreAction(Qn(e)),t.resolve()),t):(this.logger.warn(`DocumentManagerPlugin`,`CloseDocument`,`Cannot close document ${e}: not found in state`),t.resolve(),t)}closeAllDocuments(){let e=Object.keys(this.coreState.core.documents),t=e.map(e=>this.closeDocument(e));return this.logger.info(`DocumentManagerPlugin`,`CloseAllDocuments`,`Closing ${e.length} documents`),jt.all(t)}checkDocumentLimit(){return this.maxDocuments&&Object.keys(this.coreState.core.documents).length>=this.maxDocuments?{code:K.Unknown,message:`Maximum number of documents (${this.maxDocuments}) reached`}:null}validateRetry(e){let t=this.coreState.core.documents[e];return t?t.status===`loaded`?{valid:!1,error:{code:K.Unknown,message:`Document ${e} is already loaded successfully`}}:t.status===`error`?this.loadOptions.has(e)?{valid:!0}:{valid:!1,error:{code:K.Unknown,message:`No retry information available for document ${e}`}}:{valid:!1,error:{code:K.Unknown,message:`Document ${e} is not in error state (current state: ${t.status})`}}:{valid:!1,error:{code:K.NotFound,message:`Document ${e} not found`}}}retryUrlDocument(e,t){let n={id:e,url:t.url};return this.engine.openDocumentUrl(n,{password:t.password,mode:t.mode,requestOptions:t.requestOptions})}retryBufferDocument(e,t){let n={id:e,content:t.buffer};return this.engine.openDocumentBuffer(n,{password:t.password})}handleLoadTask(e,t,n){t.wait(t=>{this.dispatchCoreAction(((e,t)=>({type:Bn,payload:{documentId:e,document:t}}))(e,t))},t=>{this.handleLoadError(e,t,n)})}handleLoadError(e,t,n){let r=t.reason?.message||`Failed to load document`;this.logger.error(`DocumentManagerPlugin`,n,`Failed to load document`,t),this.dispatchCoreAction(((e,t,n,r)=>({type:Vn,payload:{documentId:e,error:t,errorCode:n,errorDetails:r}}))(e,r,t.reason?.code,t.reason)),this.documentError$.emit({documentId:e,message:r,code:t.reason?.code,reason:t.reason})}generateDocumentId(){return`doc-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}extractNameFromUrl(e){try{let t=new URL(e).pathname.split(`/`).pop()||`document.pdf`;return decodeURIComponent(t)}catch{return`document.pdf`}}async initialize(e){if(this.logger.info(`DocumentManagerPlugin`,`Initialize`,`Document Manager Plugin initialized`,{maxDocuments:this.maxDocuments,initialDocumentsCount:e.initialDocuments?.length??0}),e.initialDocuments&&e.initialDocuments.length>0)for(let t of e.initialDocuments)try{`buffer`in t?this.openDocumentBuffer(t):`url`in t&&this.openDocumentUrl(t)}catch(e){this.logger.error(`DocumentManagerPlugin`,`Initialize`,`Failed to initiate initial document load`,e)}}async destroy(){await this.closeAllDocuments().toPromise(),this.loadOptions.clear(),this.documentOpened$.clear(),this.documentClosed$.clear(),this.activeDocumentChanged$.clear(),this.documentOrderChanged$.clear(),this.documentError$.clear(),super.destroy()}};Ya.id=`document-manager`;var Xa=Ya,Za=`document-manager`;function Qa({documentId:e,children:t}){let n=Tr(e);return n?V(F,{children:t({documentState:n,isLoading:n.status===`loading`,isError:n.status===`error`,isLoaded:n.status===`loaded`})}):null}var $a=()=>Cr(Xa.id),eo=vr({manifest:{id:Za,name:`Document Manager Plugin`,version:`1.0.0`,provides:[`document-manager`],requires:[],optional:[],defaultConfig:{maxDocuments:10}},create:(e,t)=>new Xa(Za,e,t),reducer:e=>e,initialState:{}}).addUtility(function(){let{plugin:e}=Sr(Xa.id),{provides:t}=$a(),n=R(null),r=R(null),i=R(void 0);return L(()=>{if(e?.onOpenFileRequest)return e.onOpenFileRequest(({task:e,options:t})=>{var a;r.current=e,i.current=t,(a=n.current)==null||a.click()})},[e]),V(`input`,{ref:n,type:`file`,accept:`application/pdf`,style:{display:`none`},onChange:async e=>{let n=e.currentTarget.files?.[0];if(!n||!t)return;let a=await n.arrayBuffer();t.openDocumentBuffer({name:n.name,buffer:a,documentId:i.current?.documentId,scale:i.current?.scale,rotation:i.current?.rotation,autoActivate:i.current?.autoActivate}).wait(e=>{var t;(t=r.current)==null||t.resolve(e)},e=>{var t;(t=r.current)==null||t.fail(e)})}})}).build(),to=`commands`,no={id:to,name:`Commands Plugin`,version:`1.0.0`,provides:[`commands`],requires:[],optional:[`i18n`],defaultConfig:{commands:{}}},ro=`COMMANDS/SET_DISABLED_CATEGORIES`,io=e=>({type:ro,payload:e}),ao=class extends sr{constructor(e,t,n){var r;super(e,t),this.commands=new Map,this.i18n=null,this.shortcutMap=new Map,this.commandExecuted$=hr(),this.commandStateChanged$=hr(),this.shortcutExecuted$=hr(),this.categoryChanged$=Y(),this.previousStates=new Map,this.i18n=t.getPlugin(`i18n`)?.provides()??null,(r=n.disabledCategories)!=null&&r.length&&this.dispatch(io(n.disabledCategories)),Object.values(n.commands).forEach(e=>{this.registerCommand(e)}),this.registry.getStore().subscribe((e,t)=>{this.onGlobalStoreChange(t)})}onDocumentClosed(e){this.previousStates.delete(e),this.logger.debug(`CommandsPlugin`,`DocumentClosed`,`Cleaned up command state cache for document: ${e}`)}async initialize(){this.logger.info(`CommandsPlugin`,`Initialize`,`Commands plugin initialized`)}async destroy(){this.commandExecuted$.clear(),this.commandStateChanged$.clear(),this.shortcutExecuted$.clear(),this.categoryChanged$.clear(),this.commands.clear(),this.shortcutMap.clear(),this.previousStates.clear(),super.destroy()}disableCategoryImpl(e){let t=new Set(this.state.disabledCategories);t.has(e)||(t.add(e),this.dispatch(io(Array.from(t))),this.categoryChanged$.emit({disabledCategories:Array.from(t)}))}enableCategoryImpl(e){let t=new Set(this.state.disabledCategories);t.has(e)&&(t.delete(e),this.dispatch(io(Array.from(t))),this.categoryChanged$.emit({disabledCategories:Array.from(t)}))}toggleCategoryImpl(e){this.state.disabledCategories.includes(e)?this.enableCategoryImpl(e):this.disableCategoryImpl(e)}setDisabledCategoriesImpl(e){this.dispatch(io(e)),this.categoryChanged$.emit({disabledCategories:e})}isCommandCategoryDisabled(e){return!!e.categories?.length&&e.categories.some(e=>this.state.disabledCategories.includes(e))}buildCapability(){return{resolve:(e,t)=>this.resolve(e,t),execute:(e,t,n=`ui`)=>this.execute(e,t,n),getAllCommands:e=>this.getAllCommands(e),getCommandsByCategory:(e,t)=>this.getCommandsByCategory(e,t),getCommandByShortcut:e=>this.getCommandByShortcut(e),getAllShortcuts:()=>new Map(this.shortcutMap),forDocument:e=>this.createCommandScope(e),registerCommand:e=>this.registerCommand(e),unregisterCommand:e=>this.unregisterCommand(e),disableCategory:e=>this.disableCategoryImpl(e),enableCategory:e=>this.enableCategoryImpl(e),toggleCategory:e=>this.toggleCategoryImpl(e),setDisabledCategories:e=>this.setDisabledCategoriesImpl(e),getDisabledCategories:()=>this.state.disabledCategories,isCategoryDisabled:e=>this.state.disabledCategories.includes(e),onCommandExecuted:this.commandExecuted$.on,onCommandStateChanged:this.commandStateChanged$.on,onShortcutExecuted:this.shortcutExecuted$.on,onCategoryChanged:this.categoryChanged$.on}}createCommandScope(e){return{resolve:t=>this.resolve(t,e),execute:(t,n=`ui`)=>this.execute(t,e,n),getAllCommands:()=>this.getAllCommands(e),getCommandsByCategory:t=>this.getCommandsByCategory(t,e),onCommandStateChanged:t=>this.commandStateChanged$.on(n=>{if(n.documentId===e){let{documentId:e,...r}=n;t(r)}})}}resolve(e,t){let n=t??this.getActiveDocumentId(),r=this.commands.get(e);if(!r)throw Error(`Command not found: ${e}`);let i=this.registry.getStore().getState(),a=this.resolveLabel(r,i,n),o=r.shortcuts?Array.isArray(r.shortcuts)?r.shortcuts:[r.shortcuts]:void 0,s=this.resolveDynamic(r.disabled,i,n)??!1,c=this.isCommandCategoryDisabled(r),l=s||c;return{id:r.id,label:a,icon:this.resolveDynamic(r.icon,i,n),iconProps:this.resolveDynamic(r.iconProps,i,n),active:this.resolveDynamic(r.active,i,n)??!1,disabled:l,visible:this.resolveDynamic(r.visible,i,n)??!0,shortcuts:o,shortcutLabel:r.shortcutLabel,categories:r.categories,description:r.description,execute:()=>r.action({registry:this.registry,state:i,documentId:n})}}resolveLabel(e,t,n){if(e.labelKey&&this.i18n){let r=this.resolveDynamic(e.labelParams,t,n);return this.i18n.t(e.labelKey,{params:r,documentId:n})}return e.label?e.label:e.id}resolveDynamic(e,t,n){if(e!==void 0)return typeof e==`function`?e({state:t,documentId:n}):e}execute(e,t,n=`ui`){let r=t??this.getActiveDocumentId(),i=this.resolve(e,r);i.disabled?this.logger.warn(`CommandsPlugin`,`ExecutionBlocked`,`Command '${e}' is disabled for document '${r}'`):i.visible?(i.execute(),this.commandExecuted$.emit({commandId:e,documentId:r,source:n}),this.logger.debug(`CommandsPlugin`,`CommandExecuted`,`Command '${e}' executed for document '${r}' (source: ${n})`)):this.logger.warn(`CommandsPlugin`,`ExecutionBlocked`,`Command '${e}' is not visible for document '${r}'`)}registerCommand(e){this.commands.has(e.id)&&this.logger.warn(`CommandsPlugin`,`CommandOverwrite`,`Command '${e.id}' already exists and will be overwritten`),this.commands.set(e.id,e),e.shortcuts&&(Array.isArray(e.shortcuts)?e.shortcuts:[e.shortcuts]).forEach(t=>{let n=this.normalizeShortcut(t);this.shortcutMap.set(n,e.id)}),this.logger.debug(`CommandsPlugin`,`CommandRegistered`,`Command '${e.id}' registered`)}unregisterCommand(e){let t=this.commands.get(e);t&&(t.shortcuts&&(Array.isArray(t.shortcuts)?t.shortcuts:[t.shortcuts]).forEach(e=>{let t=this.normalizeShortcut(e);this.shortcutMap.delete(t)}),this.commands.delete(e),this.logger.debug(`CommandsPlugin`,`CommandUnregistered`,`Command '${e}' unregistered`))}getCommandByShortcut(e){let t=this.normalizeShortcut(e),n=this.shortcutMap.get(t);return n?this.commands.get(n)??null:null}normalizeShortcut(e){return e.toLowerCase().split(`+`).sort().join(`+`)}getAllCommands(e){let t=e??this.getActiveDocumentId();return Array.from(this.commands.keys()).map(e=>this.resolve(e,t))}getCommandsByCategory(e,t){let n=t??this.getActiveDocumentId();return Array.from(this.commands.values()).filter(t=>t.categories?.includes(e)).map(e=>this.resolve(e.id,n))}onGlobalStoreChange(e){Object.keys(e.core.documents).forEach(t=>{this.detectCommandChanges(t,e)})}detectCommandChanges(e,t){let n=this.previousStates.get(e)??new Map;this.commands.forEach((t,r)=>{let i=this.resolve(r,e),a=n.get(r);if(!a)return void n.set(r,i);let o={};a.active!==i.active&&(o.active=i.active),a.disabled!==i.disabled&&(o.disabled=i.disabled),a.visible!==i.visible&&(o.visible=i.visible),a.label!==i.label&&(o.label=i.label),dr(a.iconProps,i.iconProps)||(o.iconProps=i.iconProps),Object.keys(o).length>0&&(n.set(r,i),this.commandStateChanged$.emit({commandId:r,documentId:e,changes:o}))}),this.previousStates.set(e,n)}};ao.id=`commands`;var oo=ao,so={disabledCategories:[]},co=()=>Cr(oo.id),lo=(e,t)=>{let{provides:n}=co(),[r,i]=I(()=>n?n.resolve(e,t):null);return L(()=>n?(i(n.resolve(e,t)),n.onCommandStateChanged(r=>{r.commandId===e&&r.documentId===t&&i(n.resolve(e,t))})):void i(null),[n,e,t]),r},uo=vr({manifest:no,create:(e,t)=>new oo(to,e,t),reducer:(e=so,t)=>t.type===ro?{...e,disabledCategories:t.payload}:e,initialState:so}).addUtility(function(){let{provides:e}=co();return L(()=>{if(!e)return;let t=function(e){return t=>{let n=t.composedPath()[0]||t.target;if(n.tagName===`INPUT`||n.tagName===`TEXTAREA`||n.isContentEditable)return;let r=function(e){let t=[];e.ctrlKey&&t.push(`ctrl`),e.shiftKey&&t.push(`shift`),e.altKey&&t.push(`alt`),e.metaKey&&t.push(`meta`);let n=e.key.toLowerCase();return[`control`,`shift`,`alt`,`meta`].includes(n)?null:[...t,n].sort().join(`+`)}(t);if(!r)return;let i=e.getCommandByShortcut(r);if(!i)return;let a=e.resolve(i.id);!a.disabled&&a.visible&&(t.preventDefault(),t.stopPropagation(),e.execute(i.id,void 0,`keyboard`))}}(e);return document.addEventListener(`keydown`,t),()=>document.removeEventListener(`keydown`,t)},[e]),null}).build(),fo=`i18n`,po={id:fo,name:`I18n Plugin`,version:`1.0.0`,provides:[`i18n`],requires:[],optional:[],defaultConfig:{defaultLocale:`en`,locales:[{code:`en`,name:`English`,translations:{commands:{zoom:{in:`Zoom In`,out:`Zoom Out`,fitWidth:`Fit to Width`,fitPage:`Fit to Page`,automatic:`Automatic`,level:`Zoom Level ({level}%)`,inArea:`Zoom In Area`},fullscreen:{enter:`Enter Full Screen`,exit:`Exit Full Screen`},rotate:{clockwise:`Rotate Clockwise`,counterclockwise:`Rotate Counter-Clockwise`},menu:`Menu`,sidebar:`Sidebar`,search:`Search`,comment:`Comment`,download:`Download`,print:`Print`,openFile:`Open PDF`,save:`Save`,settings:`Settings`,view:`View`,annotate:`Annotate`,shapes:`Shapes`,redact:`Redact`,fillAndSign:`Fill and Sign`,form:`Form`,pan:`Pan`,pointer:`Pointer`,undo:`Undo`,redo:`Redo`,copy:`Copy`,screenshot:`Screenshot`,nextPage:`Next Page`,previousPage:`Previous Page`}}},{code:`es`,name:`Espaol`,translations:{commands:{zoom:{in:`Acercar`,out:`Alejar`,fitWidth:`Ajustar al ancho`,fitPage:`Ajustar a la pgina`,automatic:`Automtico`,level:`Nivel de zoom ({level}%)`,inArea:`Acercar rea`},fullscreen:{enter:`Pantalla completa`,exit:`Salir de pantalla completa`},rotate:{clockwise:`Girar a la derecha`,counterclockwise:`Girar a la izquierda`},menu:`Men`,sidebar:`Barra lateral`,search:`Buscar`,comment:`Comentario`,download:`Descargar`,print:`Imprimir`,openFile:`Abrir PDF`,save:`Guardar`,settings:`Configuracin`,view:`Ver`,annotate:`Anotar`,shapes:`Formas`,redact:`Redactar`,fillAndSign:`Rellenar y firmar`,form:`Formulario`,pan:`Desplazar`,pointer:`Puntero`,undo:`Deshacer`,redo:`Rehacer`,copy:`Copiar`,screenshot:`Captura de pantalla`,nextPage:`Pgina siguiente`,previousPage:`Pgina anterior`}}}]}},mo=`I18N/SET_LOCALE`,ho=`I18N/REGISTER_LOCALE`,go=e=>({type:mo,payload:e}),_o=e=>({type:ho,payload:e}),vo=class extends sr{constructor(e,t,n){super(e,t),this.locales=new Map,this.paramResolvers=new Map,this.paramsCache=new Map,this.localeChange$=hr(),this.paramsChanged$=gr((e,t)=>({documentId:e,...t}),{cache:!1}),this.config=n,n.locales.forEach(e=>{this.locales.set(e.code,e),this.dispatch(_o(e.code))}),n.paramResolvers&&Object.entries(n.paramResolvers).forEach(([e,t])=>{this.paramResolvers.set(e,t)}),this.dispatch(go(n.defaultLocale)),this.registry.getStore().subscribe((e,t)=>{this.detectParamChanges(t)})}async initialize(){this.logger.info(`I18nPlugin`,`Initialize`,`I18n plugin initialized`)}async destroy(){this.localeChange$.clear(),this.paramsChanged$.clear(),this.paramResolvers.clear(),this.paramsCache.clear(),super.destroy()}onDocumentClosed(e){this.paramsCache.delete(e),this.paramsChanged$.clearScope(e),this.logger.debug(`I18nPlugin`,`DocumentClosed`,`Cleaned up params cache for document: ${e}`)}buildCapability(){return{t:(e,t)=>this.translate(e,t),forDocument:e=>this.createI18nScope(e),registerParamResolver:(e,t)=>this.registerParamResolver(e,t),unregisterParamResolver:e=>this.unregisterParamResolver(e),setLocale:e=>this.setLocale(e),getLocale:()=>this.state.currentLocale,getAvailableLocales:()=>[...this.state.availableLocales],getLocaleInfo:e=>this.locales.get(e)??null,registerLocale:e=>this.registerLocale(e),hasLocale:e=>this.locales.has(e),onLocaleChange:this.localeChange$.on,onParamsChanged:this.paramsChanged$.onGlobal}}createI18nScope(e){return{t:(t,n)=>this.translate(t,{documentId:e,...n}),onParamsChanged:this.paramsChanged$.forScope(e)}}translate(e,t){let n=this.locales.get(this.state.currentLocale),r=this.config.fallbackLocale?this.locales.get(this.config.fallbackLocale):null,i=this.getNestedValue(n?.translations,e);if(!i&&r&&(i=this.getNestedValue(r.translations,e)),!i){if(!t?.fallback)return this.logger.warn(`I18nPlugin`,`MissingTranslation`,`Translation not found for key: ${e}`),e;i=t.fallback}let a=t?.params;return!a&&this.paramResolvers.has(e)&&(a=this.resolveParams(e,t?.documentId)),this.interpolate(i,a)}resolveParams(e,t){let n=this.paramResolvers.get(e);if(!n)return;let r=this.registry.getStore().getState();try{return n({state:r,documentId:t})}catch(t){this.logger.error(`I18nPlugin`,`ParamResolverError`,`Error resolving params for key "${e}":`,t);return}}getNestedValue(e,t){if(!e)return;let n=t.split(`.`),r=e;for(let e of n){if(r==null)return;r=r[e]}return typeof r==`string`?r:void 0}interpolate(e,t){return t?e.replace(/\{(\w+)\}/g,(e,n)=>{let r=t[n];return r===void 0?e:String(r)}):e}detectParamChanges(e){Object.keys(e.core.documents).forEach(t=>{this.detectDocumentParamChanges(t,e)})}detectDocumentParamChanges(e,t){let n=this.paramsCache.get(e),r=[];this.paramResolvers.forEach((i,a)=>{try{let o=i({state:t,documentId:e});dr(n?.get(a),o)||(r.push(a),this.paramsCache.has(e)||this.paramsCache.set(e,new Map),this.paramsCache.get(e).set(a,o))}catch(e){this.logger.error(`I18nPlugin`,`ParamDetectionError`,`Error detecting param changes for key "${a}":`,e)}}),r.length>0&&(this.paramsChanged$.emit(e,{changedKeys:r}),this.logger.debug(`I18nPlugin`,`ParamsChanged`,`Translation params changed for document ${e}:`,r))}registerParamResolver(e,t){this.paramResolvers.has(e)&&this.logger.warn(`I18nPlugin`,`ResolverOverwrite`,`Param resolver for "${e}" already exists and will be overwritten`),this.paramResolvers.set(e,t),this.paramsCache.forEach(t=>{t.delete(e)}),this.logger.debug(`I18nPlugin`,`ResolverRegistered`,`Param resolver registered for: ${e}`)}unregisterParamResolver(e){this.paramResolvers.delete(e)&&(this.paramsCache.forEach(t=>{t.delete(e)}),this.logger.debug(`I18nPlugin`,`ResolverUnregistered`,`Param resolver unregistered for: ${e}`))}setLocale(e){if(!this.locales.has(e))return void this.logger.warn(`I18nPlugin`,`LocaleNotFound`,`Locale '${e}' is not registered`);let t=this.state.currentLocale;t!==e&&(this.dispatch(go(e)),this.localeChange$.emit({previousLocale:t,currentLocale:e}),this.logger.info(`I18nPlugin`,`LocaleChanged`,`Locale changed to: ${e}`))}registerLocale(e){this.locales.has(e.code)?this.logger.warn(`I18nPlugin`,`LocaleAlreadyRegistered`,`Locale '${e.code}' is already registered`):(this.locales.set(e.code,e),this.dispatch(_o(e.code)),this.logger.info(`I18nPlugin`,`LocaleRegistered`,`Locale registered: ${e.code}`))}};vo.id=`i18n`;var yo=vo,bo={currentLocale:`en`,availableLocales:[]},xo={manifest:po,create:(e,t)=>new yo(fo,e,t),reducer:(e=bo,t)=>{switch(t.type){case mo:{let n=t.payload;return e.availableLocales.includes(n)?{...e,currentLocale:n}:(console.warn(`I18nPlugin: Locale '${n}' not available`),e)}case ho:{let n=t.payload;return e.availableLocales.includes(n)?e:{...e,availableLocales:[...e.availableLocales,n]}}default:return e}},initialState:bo},So=e=>{let{provides:t}=Cr(yo.id),[,n]=Je(e=>e+1,0),r=B((n,r)=>t?t.t(n,{documentId:e,params:r?.params,fallback:r?.fallback}):r?.fallback??n,[t,e]);return L(()=>{if(!t)return;let r=t.onLocaleChange(()=>{n()}),i=e?t.forDocument(e).onParamsChanged(()=>{n()}):t.onParamsChanged(()=>{n()});return()=>{r(),i()}},[t,e]),{translate:r,locale:t?.getLocale()??`en`}},Co=(e=>(e.Automatic=`automatic`,e.FitPage=`fit-page`,e.FitWidth=`fit-width`,e))(Co||{}),wo=(e=>(e[e.Center=0]=`Center`,e[e.Top=1]=`Top`,e))(wo||{}),To=`zoom`,Eo={id:To,name:`Zoom Plugin`,version:`1.0.0`,provides:[`zoom`],requires:[`viewport`,`scroll`],optional:[`interaction-manager`,`spread`],defaultConfig:{defaultZoomLevel:Co.Automatic,minZoom:.2,maxZoom:60,zoomStep:.1,zoomRanges:[{min:.2,max:.5,step:.05},{min:.5,max:1,step:.1},{min:1,max:2,step:.2},{min:2,max:4,step:.4},{min:4,max:10,step:.8},{min:10,max:20,step:1.6},{min:20,max:40,step:3.2},{min:40,max:60,step:6.4}],presets:[{name:`Fit Page`,value:Co.FitPage},{name:`Fit Width`,value:Co.FitWidth},{name:`Automatic`,value:Co.Automatic},{name:`25%`,value:.25},{name:`50%`,value:.5},{name:`100%`,value:1},{name:`125%`,value:1.25},{name:`150%`,value:1.5},{name:`200%`,value:2},{name:`400%`,value:4},{name:`800%`,value:8},{name:`1600%`,value:16}]}},Do=`ZOOM/INIT_STATE`,Oo=`ZOOM/CLEANUP_STATE`,ko=`ZOOM/SET_ZOOM_LEVEL`,Ao=`ZOOM/SET_MARQUEE_ZOOM_ACTIVE`,jo={zoomLevel:Co.Automatic,currentZoomLevel:1,isMarqueeZoomActive:!1},Mo={documents:{},activeDocumentId:null},No=class extends sr{constructor(e,t,n){var r,i,a;super(e,t),this.zoom$=hr(),this.state$=Y(),this.viewportPlugin=t.getPlugin(`viewport`),this.viewport=this.viewportPlugin.provides(),this.scroll=t.getPlugin(`scroll`).provides(),this.interactionManager=t.getPlugin(`interaction-manager`)?.provides()??null,this.spread=t.getPlugin(`spread`)?.provides()??null,this.minZoom=n.minZoom??.25,this.maxZoom=n.maxZoom??10,this.zoomStep=n.zoomStep??.1,this.defaultZoomLevel=n.defaultZoomLevel,this.presets=n.presets??[],this.zoomRanges=this.normalizeRanges(n.zoomRanges??[]),this.viewport.onViewportResize(e=>this.recalcAuto(e.documentId,wo.Top),{mode:`debounce`,wait:150,keyExtractor:e=>e.documentId}),(r=this.spread)==null||r.onSpreadChange(e=>{this.recalcAuto(e.documentId,wo.Top)}),(i=this.interactionManager)==null||i.registerMode({id:`marqueeZoom`,scope:`page`,exclusive:!0,cursor:`zoom-in`}),(a=this.interactionManager)==null||a.onModeChange(e=>{let t=e.activeMode===`marqueeZoom`,n=this.getDocumentState(e.documentId);var r;n&&n.isMarqueeZoomActive!==t&&this.dispatch((r=e.documentId,{type:Ao,payload:{documentId:r,isActive:t}}))})}onDocumentLoadingStarted(e){this.viewport.gate(`zoom`,e);let t={...jo,zoomLevel:this.defaultZoomLevel};this.dispatch(function(e,t){return{type:Do,payload:{documentId:e,state:t}}}(e,t)),this.logger.debug(`ZoomPlugin`,`DocumentOpened`,`Initialized zoom state for document: ${e}`)}onDocumentLoaded(e){this.recalcAuto(e,wo.Top)}onDocumentClosed(e){this.dispatch(function(e){return{type:Oo,payload:e}}(e)),this.logger.debug(`ZoomPlugin`,`DocumentClosed`,`Cleaned up zoom state for document: ${e}`)}onRotationChanged(e){this.recalcAuto(e,wo.Top)}buildCapability(){return{requestZoom:(e,t)=>this.requestZoom(e,t),requestZoomBy:(e,t)=>this.requestZoomBy(e,t),zoomIn:()=>this.zoomIn(),zoomOut:()=>this.zoomOut(),zoomToArea:(e,t)=>this.zoomToArea(e,t),enableMarqueeZoom:()=>this.enableMarqueeZoom(),disableMarqueeZoom:()=>this.disableMarqueeZoom(),toggleMarqueeZoom:()=>this.toggleMarqueeZoom(),isMarqueeZoomActive:()=>this.isMarqueeZoomActive(),getState:()=>this.getDocumentStateOrThrow(),forDocument:e=>this.createZoomScope(e),registerMarqueeOnPage:e=>this.registerMarqueeOnPage(e),getPresets:()=>this.presets,onZoomChange:this.zoom$.on,onStateChange:this.state$.on}}createZoomScope(e){return{requestZoom:(t,n)=>this.requestZoom(t,n,e),requestZoomBy:(t,n)=>this.requestZoomBy(t,n,e),zoomIn:()=>this.zoomIn(e),zoomOut:()=>this.zoomOut(e),zoomToArea:(t,n)=>this.zoomToArea(t,n,e),enableMarqueeZoom:()=>this.enableMarqueeZoom(e),disableMarqueeZoom:()=>this.disableMarqueeZoom(e),toggleMarqueeZoom:()=>this.toggleMarqueeZoom(e),isMarqueeZoomActive:()=>this.isMarqueeZoomActive(e),getState:()=>this.getDocumentStateOrThrow(e),onZoomChange:t=>this.zoom$.on(n=>{n.documentId===e&&t(n)}),onStateChange:t=>this.state$.on(n=>{n.documentId===e&&t(n.state)})}}getDocumentState(e){let t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){let t=this.getDocumentState(e);if(!t)throw Error(`Zoom state not found for document: ${e??`active`}`);return t}requestZoom(e,t,n){this.handleRequest({level:e,center:t},n)}requestZoomBy(e,t,n){let r=n??this.getActiveDocumentId(),i=this.getDocumentStateOrThrow(r).currentZoomLevel,a=this.toZoom(i+e);this.handleRequest({level:a,center:t},r)}zoomIn(e){let t=e??this.getActiveDocumentId(),n=this.getDocumentStateOrThrow(t).currentZoomLevel;this.handleRequest({level:n,delta:this.stepFor(n)},t)}zoomOut(e){let t=e??this.getActiveDocumentId(),n=this.getDocumentStateOrThrow(t).currentZoomLevel;this.handleRequest({level:n,delta:-this.stepFor(n)},t)}zoomToArea(e,t,n){let r=n??this.getActiveDocumentId();this.handleZoomToArea(r,e,t)}enableMarqueeZoom(e){var t;let n=e??this.getActiveDocumentId();(t=this.interactionManager)==null||t.forDocument(n).activate(`marqueeZoom`)}disableMarqueeZoom(e){var t;let n=e??this.getActiveDocumentId();(t=this.interactionManager)==null||t.forDocument(n).activateDefaultMode()}toggleMarqueeZoom(e){let t=e??this.getActiveDocumentId(),n=this.interactionManager?.forDocument(t);n?.getActiveMode()===`marqueeZoom`?n.activateDefaultMode():n?.activate(`marqueeZoom`)}isMarqueeZoomActive(e){let t=e??this.getActiveDocumentId();return this.interactionManager?.forDocument(t).getActiveMode()===`marqueeZoom`}handleRequest({level:e,delta:t=0,center:n,focus:r=wo.Center,align:i=`keep`},a){let o=a??this.getActiveDocumentId(),s=this.getDocumentStateOrThrow(o);if(!this.coreState.core.documents[o])return;let c=this.viewport.forDocument(o),l=c.getMetrics(),u=s.currentZoomLevel;if(l.clientWidth===0||l.clientHeight===0)return;let d=typeof e==`number`?e:this.computeZoomForMode(o,e,l);if(!1===d)return;let f=J(d+t,this.minZoom,this.maxZoom),p=Math.floor(1e3*f)/1e3,m=n??{vx:l.clientWidth/2,vy:r===wo.Top?0:l.clientHeight/2},{desiredScrollLeft:h,desiredScrollTop:g}=this.computeScrollForZoomChange(o,l,u,p,m,i);isNaN(h)||isNaN(g)||this.viewportPlugin.setViewportScrollMetrics(o,{scrollLeft:h,scrollTop:g}),this.dispatch(function(e,t,n){return{type:ko,payload:{documentId:e,zoomLevel:t,currentZoomLevel:n}}}(o,typeof e==`number`?p:e,p)),this.dispatchCoreAction(((e,t)=>({type:Jn,payload:{scale:e,documentId:t}}))(p,o)),this.viewport.isGated(o)&&this.viewport.releaseGate(`zoom`,o),c.scrollTo({x:h,y:g,behavior:`instant`});let _={documentId:o,oldZoom:u,newZoom:p,level:e,center:m,desiredScrollLeft:h,desiredScrollTop:g,viewport:l};this.zoom$.emit(_)}computeZoomForMode(e,t,n){if(!this.coreState.core.documents[e])return!1;let r=this.scroll.forDocument(e),i=r?this.scroll.getPageGap():0,a=this.viewport.getViewportGap(),o=r.getSpreadPagesWithRotatedSize();if(!o.length||n.clientWidth===0||n.clientHeight===0)return!1;let s=n.clientWidth-2*a,c=n.clientHeight-2*a;if(s<=0||c<=0)return!1;let l=0,u=0;switch(o.forEach(e=>{let t=e.reduce((e,t,n)=>e+t.rotatedSize.width+(n?i:0),0),n=Math.max(...e.map(e=>e.rotatedSize.height));l=Math.max(l,t),u=Math.max(u,n)}),t){case Co.FitWidth:return s/l;case Co.FitPage:return Math.min(s/l,c/u);case Co.Automatic:return Math.min(s/l,1);default:return 1}}computeScrollForZoomChange(e,t,n,r,i,a=`keep`){let o=this.scroll.forDocument(e).getLayout(),s=this.viewport.getViewportGap(),c=o.totalContentSize.width,l=o.totalContentSize.height,u=t.clientWidth-2*s,d=t.clientHeight-2*s,f=(e,t,n)=>t*n<e?(e-t*n)/2:0,p=f(u,c,n),m=f(d,l,n),h=f(u,c,r),g=f(d,l,r),_=(t.scrollLeft+i.vx-s-p)/n*r+s+h,v=(t.scrollTop+i.vy-s-m)/n*r+s+g,y=a===`center`?_-t.clientWidth/2:_-i.vx,b=a===`center`?v-t.clientHeight/2:v-i.vy;return{desiredScrollLeft:Math.max(0,y),desiredScrollTop:Math.max(0,b)}}handleZoomToArea(e,t,n){let r=this.coreState.core.documents[e];if(!r)return;let i=r.rotation,a=this.viewport.forDocument(e).getMetrics(),o=this.viewport.getViewportGap(),s=this.getDocumentStateOrThrow(e).currentZoomLevel,c=a.clientWidth-2*o,l=a.clientHeight-2*o,u=this.scroll.forDocument(e).getLayout(),d=u.virtualItems.find(e=>e.pageLayouts.some(e=>e.pageIndex===t));if(!d)return;let f=d.pageLayouts.find(e=>e.pageIndex===t),p=vt({width:f.width,height:f.height},n,i),m=this.toZoom(Math.min(c/p.size.width,l/p.size.height)),h=d.x+f.x,g=d.y+f.y,_=h+p.origin.x+p.size.width/2,v=g+p.origin.y+p.size.height/2,y=(e,t,n)=>t*n<e?(e-t*n)/2:0,b=y(c,u.totalContentSize.width,s),x=y(l,u.totalContentSize.height,s),S=o+b+_*s-a.scrollLeft,C=o+x+v*s-a.scrollTop;this.handleRequest({level:m,center:{vx:S,vy:C},align:`center`},e)}recalcAuto(e,t){let n=this.getDocumentState(e);n&&(n.zoomLevel!==Co.Automatic&&n.zoomLevel!==Co.FitPage&&n.zoomLevel!==Co.FitWidth||this.handleRequest({level:n.zoomLevel,focus:t},e))}normalizeRanges(e){return[...e].filter(e=>e.step>0&&e.max>e.min).sort((e,t)=>e.min-t.min)}stepFor(e){let t=this.zoomRanges.find(t=>e>=t.min&&e<t.max);return t?t.step:this.zoomStep}toZoom(e){return parseFloat(J(e,this.minZoom,this.maxZoom).toFixed(2))}registerMarqueeOnPage(e){if(!this.interactionManager)return this.logger.warn(`ZoomPlugin`,`MissingDependency`,`Interaction manager plugin not loaded, marquee zoom disabled`),()=>{};let t=this.coreState.core.documents[e.documentId];if(!t||!t.document)return this.logger.warn(`ZoomPlugin`,`DocumentNotFound`,`Document not found`),()=>{};let n=t.document.pages[e.pageIndex];if(!n)return this.logger.warn(`ZoomPlugin`,`PageNotFound`,`Page ${e.pageIndex} not found`),()=>{};let r=function(e){let{pageSize:t,scale:n,minDragPx:r=5,onPreview:i,onCommit:a,onSmallDrag:o}=e,s=null,c=null;return{onPointerDown:(e,t)=>{var n;s=e,c={origin:{x:e.x,y:e.y},size:{width:0,height:0}},i?.(c),(n=t.setPointerCapture)==null||n.call(t)},onPointerMove:e=>{if(!s)return;let n=J(e.x,0,t.width),r=J(e.y,0,t.height);c={origin:{x:Math.min(s.x,n),y:Math.min(s.y,r)},size:{width:Math.abs(n-s.x),height:Math.abs(r-s.y)}},i?.(c)},onPointerUp:(e,t)=>{var l;c&&(Math.max(c.size.width,c.size.height)*n>r?a?.(c):o?.()),s=null,c=null,i?.(null),(l=t.releasePointerCapture)==null||l.call(t)},onPointerCancel:(e,t)=>{var n;s=null,c=null,i?.(null),(n=t.releasePointerCapture)==null||n.call(t)}}}({pageSize:n.size,scale:e.scale,onPreview:e.callback.onPreview,onCommit:t=>{var n,r;this.zoomToArea(e.pageIndex,t,e.documentId),(r=(n=e.callback).onCommit)==null||r.call(n,t)},onSmallDrag:()=>{var t,n;this.zoomIn(e.documentId),(n=(t=e.callback).onSmallDrag)==null||n.call(t)}});return this.interactionManager.registerHandlers({documentId:e.documentId,modeId:`marqueeZoom`,handlers:r,pageIndex:e.pageIndex})}onStoreUpdated(e,t){for(let n in t.documents){let r=e.documents[n],i=t.documents[n];r&&i&&(r.currentZoomLevel!==i.currentZoomLevel||r.zoomLevel!==i.zoomLevel||r.isMarqueeZoomActive!==i.isMarqueeZoomActive)&&this.state$.emit({documentId:n,state:i})}}async initialize(){this.logger.info(`ZoomPlugin`,`Initialize`,`Zoom plugin initialized`)}async destroy(){this.zoom$.clear(),this.state$.clear(),super.destroy()}};No.id=`zoom`;var Po=No,Fo={manifest:Eo,create:(e,t)=>new Po(To,e,t),reducer:(e=Mo,t)=>{switch(t.type){case Do:{let{documentId:n,state:r}=t.payload;return{...e,documents:{...e.documents,[n]:r},activeDocumentId:e.activeDocumentId??n}}case Oo:{let n=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case`ZOOM/SET_ACTIVE_DOCUMENT`:return{...e,activeDocumentId:t.payload};case ko:{let{documentId:n,zoomLevel:r,currentZoomLevel:i}=t.payload,a=e.documents[n];return a?{...e,documents:{...e.documents,[n]:{...a,zoomLevel:r,currentZoomLevel:i}}}:e}case Ao:{let{documentId:n,isActive:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isMarqueeZoomActive:r}}}:e}default:return e}},initialState:Mo},Io=()=>Cr(Po.id);function Lo(e){let[t,n]=[e[0],e[1]],r=n.clientX-t.clientX,i=n.clientY-t.clientY;return Math.hypot(r,i)}function Ro(e,t={}){let{provides:n}=Cr(`viewport`),{provides:r}=Io(),i=Xe(Kr),a=R(null);return Ye(()=>{let o=a.current,s=i?.current;if(o&&s&&r)return function({element:e,container:t,documentId:n,zoomProvides:r,viewportGap:i=0,options:a={}}){let{enablePinch:o=!0,enableWheel:s=!0}=a;if(typeof window>`u`)return()=>{};let c=r.forDocument(n),l=()=>c.getState(),u=0,d=1,f=!1,p=0,m=null,h=1,g=0,_=0,v=0,y=0,b=0,x=0,S=0,C=0,w=0,T=0,E=0,D=0,O=0,k=(e,t,n)=>Math.min(Math.max(e,t),n),A=()=>{let n=t.clientWidth-2*i,r=e.offsetWidth,a=r<n?(n-r)/2:0;e.style.marginLeft=`${a}px`},ee=e=>{let t=g*e,n=_*e,r=w*(1-e),i=C-t/2-v,a=T-O*e-v,o=Math.max(0,t-S),s=.3*S,c=Math.min(1,o/s),l=i+(a-i)*c;return n>x-2*D&&(r=k(y+r,x-D-n,D)-y),t>b-2*D&&(l=k(v+l,b-D-t,D)-v),{tx:l,ty:r,blend:c,finalWidth:t}},j=t=>{d=t;let{tx:n,ty:r}=ee(t);e.style.transformOrigin=`0 0`,e.style.transform=`translate(${n}px, ${r}px) scale(${t})`},M=()=>{e.style.transform=`none`,e.style.transformOrigin=`0 0`,d=1},N=()=>{let{tx:e,finalWidth:t}=ee(d),n=(d-1)*u,r,i=E;if(t<=S)r=C;else{let t=1-d;r=Math.abs(t)>.001?v+e/t:T}c.requestZoomBy(n,{vx:r,vy:i}),M(),u=0},te=(n,r)=>{let a=t.getBoundingClientRect(),o=e.getBoundingClientRect();D=i,g=o.width,_=o.height,v=o.left-a.left,y=o.top-a.top,b=a.width,x=a.height,S=t.clientWidth,C=t.clientLeft+S/2;let s=n-o.left;w=r-o.top,T=n-a.left,E=r-a.top,O=g<S?T*g/S:s},ne=e=>{if(e.touches.length!==2)return;f=!0,u=l().currentZoomLevel,p=Lo(e.touches);let t=function(e){let[t,n]=[e[0],e[1]];return{x:(t.clientX+n.clientX)/2,y:(t.clientY+n.clientY)/2}}(e.touches);te(t.x,t.y),e.preventDefault()},re=e=>{!f||e.touches.length!==2||(j(Lo(e.touches)/p),e.preventDefault())},ie=e=>{f&&(e.touches.length>=2||(f=!1,N()))},ae=e=>{if(!e.ctrlKey&&!e.metaKey)return;e.preventDefault(),m===null?(u=l().currentZoomLevel,h=1,te(e.clientX,e.clientY)):clearTimeout(m);let t=1-.01*e.deltaY;h*=t,h=Math.max(.1,Math.min(10,h)),j(h),m=setTimeout(()=>{m=null,N(),h=1},150)},oe=c.onStateChange(()=>A()),se=new ResizeObserver(()=>A());return se.observe(e),se.observe(t),A(),o&&(t.addEventListener(`touchstart`,ne,{passive:!1}),t.addEventListener(`touchmove`,re,{passive:!1}),t.addEventListener(`touchend`,ie),t.addEventListener(`touchcancel`,ie)),s&&t.addEventListener(`wheel`,ae,{passive:!1}),()=>{o&&(t.removeEventListener(`touchstart`,ne),t.removeEventListener(`touchmove`,re),t.removeEventListener(`touchend`,ie),t.removeEventListener(`touchcancel`,ie)),s&&t.removeEventListener(`wheel`,ae),m&&clearTimeout(m),oe(),se.disconnect(),M(),e.style.marginLeft=``}}({element:o,container:s,documentId:e,zoomProvides:r,viewportGap:n?.getViewportGap()||0,options:t})},[n,r,e,i,t.enablePinch,t.enableWheel]),{elementRef:a}}function zo({children:e,documentId:t,style:n,enablePinch:r=!0,enableWheel:i=!0,...a}){let{elementRef:o}=Ro(t,z(()=>({enablePinch:r,enableWheel:i}),[r,i]));return V(`div`,{ref:o,...a,style:{...n,display:`inline-block`,overflow:`visible`,boxSizing:`border-box`},children:e})}var Bo=({documentId:e,pageIndex:t,scale:n,className:r,stroke:i=`rgba(33,150,243,0.8)`,fill:a=`rgba(33,150,243,0.15)`})=>{let{provides:o}=Io(),s=Tr(e),[c,l]=I(null),u=z(()=>n===void 0?s?.scale??1:n,[n,s?.scale]);return L(()=>{if(o)return o.registerMarqueeOnPage({documentId:e,pageIndex:t,scale:u,callback:{onPreview:l}})},[o,e,t,u]),c?V(`div`,{style:{position:`absolute`,pointerEvents:`none`,left:c.origin.x*u,top:c.origin.y*u,width:c.size.width*u,height:c.size.height*u,border:`1px solid ${i}`,background:a,boxSizing:`border-box`},className:r}):null},Vo=class extends sr{constructor(e,t,n){super(e,t),this.config=n}buildCapability(){return{renderPage:e=>this.renderPage(e),renderPageRect:e=>this.renderPageRect(e),forDocument:e=>this.createRenderScope(e)}}createRenderScope(e){return{renderPage:t=>this.renderPage(t,e),renderPageRect:t=>this.renderPageRect(t,e)}}renderPage({pageIndex:e,options:t},n){let r=n??this.getActiveDocumentId(),i=this.coreState.core.documents[r];if(!i?.document)throw Error(`Document ${r} not loaded`);let a=i.document.pages.find(t=>t.index===e);if(!a)throw Error(`Page ${e} not found in document ${r}`);let o={...t??{},withForms:t?.withForms??this.config.withForms??!1,withAnnotations:t?.withAnnotations??this.config.withAnnotations??!1,imageType:t?.imageType??this.config.defaultImageType??`image/png`,imageQuality:t?.imageQuality??this.config.defaultImageQuality??.92};return this.engine.renderPage(i.document,a,o)}renderPageRect({pageIndex:e,rect:t,options:n},r){let i=r??this.getActiveDocumentId(),a=this.coreState.core.documents[i];if(!a?.document)throw Error(`Document ${i} not loaded`);let o=a.document.pages.find(t=>t.index===e);if(!o)throw Error(`Page ${e} not found in document ${i}`);let s={...n??{},withForms:n?.withForms??this.config.withForms??!1,withAnnotations:n?.withAnnotations??this.config.withAnnotations??!1,imageType:n?.imageType??this.config.defaultImageType??`image/png`,imageQuality:n?.imageQuality??this.config.defaultImageQuality??.92};return this.engine.renderPageRect(a.document,o,t,s)}async initialize(e){this.logger.info(`RenderPlugin`,`Initialize`,`Render plugin initialized`)}async destroy(){super.destroy()}};Vo.id=`render`;var Ho=Vo,Uo=`render`,Wo={manifest:{id:Uo,name:`Render Plugin`,version:`1.0.0`,provides:[`render`],requires:[],optional:[],defaultConfig:{}},create:(e,t)=>new Ho(Uo,e,t),reducer:()=>{},initialState:{}};function Go({documentId:e,pageIndex:t,scale:n,dpr:r,style:i,...a}){let{provides:o}=Cr(Ho.id),s=Tr(e),[c,l]=I(null),u=R(null),d=z(()=>s&&s.pageRefreshVersions[t]||0,[s,t]),f=z(()=>n===void 0?s?.scale??1:n,[n,s?.scale]),p=z(()=>r===void 0?window.devicePixelRatio:r,[r]);return L(()=>{if(!o)return;let n=o.forDocument(e).renderPage({pageIndex:t,options:{scaleFactor:f,dpr:p}});return n.wait(e=>{let t=URL.createObjectURL(e);l(t),u.current=t},jn),()=>{u.current?(URL.revokeObjectURL(u.current),u.current=null):n.abort({code:K.Cancelled,message:`canceled render task`})}},[e,t,f,p,o,d]),V(F,{children:c&&V(`img`,{src:c,onLoad:()=>{u.current&&=(URL.revokeObjectURL(u.current),null)},...a,style:{width:`100%`,height:`100%`,...i||{}}})})}var Ko=`rotate`,qo={id:Ko,name:`Rotate Plugin`,version:`1.0.0`,provides:[`rotate`],requires:[],optional:[],defaultConfig:{}},Jo=`ROTATE/INIT_STATE`,Yo=`ROTATE/CLEANUP_STATE`,Xo=`ROTATE/SET_ROTATION`,Zo=class extends sr{constructor(e,t,n){super(e,t),this.rotate$=Y(),this.defaultRotation=n.defaultRotation??0}onDocumentLoadingStarted(e){let t={rotation:this.defaultRotation};this.dispatch(function(e,t){return{type:Jo,payload:{documentId:e,state:t}}}(e,t)),this.dispatchCoreAction(er(this.defaultRotation,e)),this.logger.debug(`RotatePlugin`,`DocumentOpened`,`Initialized rotation state for document: ${e}`)}onDocumentClosed(e){this.dispatch(function(e){return{type:Yo,payload:e}}(e)),this.logger.debug(`RotatePlugin`,`DocumentClosed`,`Cleaned up rotation state for document: ${e}`)}buildCapability(){return{setRotation:e=>this.setRotationForDocument(e),getRotation:()=>this.getRotationForDocument(),rotateForward:()=>this.rotateForward(),rotateBackward:()=>this.rotateBackward(),forDocument:e=>this.createRotateScope(e),onRotateChange:this.rotate$.on}}createRotateScope(e){return{setRotation:t=>this.setRotationForDocument(t,e),getRotation:()=>this.getRotationForDocument(e),rotateForward:()=>this.rotateForward(e),rotateBackward:()=>this.rotateBackward(e),onRotateChange:t=>this.rotate$.on(n=>{n.documentId===e&&t(n.rotation)})}}getDocumentState(e){let t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){let t=this.getDocumentState(e);if(!t)throw Error(`Rotation state not found for document: ${e??`active`}`);return t}setRotationForDocument(e,t){let n=t??this.getActiveDocumentId();if(!this.coreState.core.documents[n]?.document)throw Error(`Document ${n} not loaded`);this.dispatch(function(e,t){return{type:Xo,payload:{documentId:e,rotation:t}}}(n,e)),this.dispatchCoreAction(er(e,n)),this.rotate$.emit({documentId:n,rotation:e})}getRotationForDocument(e){return this.getDocumentStateOrThrow(e).rotation}rotateForward(e){let t=e??this.getActiveDocumentId(),n=(this.getRotationForDocument(t)+1)%4;this.setRotationForDocument(n,t)}rotateBackward(e){let t=e??this.getActiveDocumentId(),n=(this.getRotationForDocument(t)+3)%4;this.setRotationForDocument(n,t)}getMatrixAsString(e){return function(e,t,n){let[r,i,a,o,s,c]=function(e,t,n){let r=1,i=0,a=0,o=1,s=0,c=0;switch(e){case 1:r=0,i=1,a=-1,o=0,s=n;break;case 2:r=-1,i=0,a=0,o=-1,s=t,c=n;break;case 3:r=0,i=-1,a=1,o=0,c=t}return[r,i,a,o,s,c]}(e,t,n);return`matrix(${r},${i},${a},${o},${s},${c})`}(e.rotation,e.width,e.height)}onStoreUpdated(e,t){for(let n in t.documents){let r=e.documents[n],i=t.documents[n];r?.rotation!==i.rotation&&this.logger.debug(`RotatePlugin`,`RotationChanged`,`Rotation changed for document ${n}: ${r?.rotation??0} -> ${i.rotation}`)}}async initialize(e){this.logger.info(`RotatePlugin`,`Initialize`,`Rotate plugin initialized`)}async destroy(){this.rotate$.clear(),super.destroy()}};Zo.id=`rotate`;var Qo=Zo,$o={documents:{},activeDocumentId:null},es={manifest:qo,create:(e,t)=>new Qo(Ko,e,t),reducer:(e=$o,t)=>{switch(t.type){case Jo:{let{documentId:n,state:r}=t.payload;return{...e,documents:{...e.documents,[n]:r},activeDocumentId:e.activeDocumentId??n}}case Yo:{let n=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case`ROTATE/SET_ACTIVE_DOCUMENT`:return{...e,activeDocumentId:t.payload};case Xo:{let{documentId:n,rotation:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,rotation:r}}}:e}default:return e}},initialState:$o};function ts({children:e,documentId:t,pageIndex:n,rotation:r,scale:i,style:a,...o}){let{plugin:s}=Sr(Qo.id),c=Tr(t),l=c?.document?.pages?.[n],u=l?.size?.width??0,d=l?.size?.height??0,f=r??c?.rotation??0,p=i??c?.scale??1,m=s?.getMatrixAsString({width:u*p,height:d*p,rotation:f})??`matrix(1, 0, 0, 1, 0, 0)`;return l?V(`div`,{...o,style:{position:`absolute`,transformOrigin:`0 0`,transform:m,...a},children:e}):null}var ns=`SEARCH/INIT_STATE`,rs=`SEARCH/CLEANUP_STATE`,is=`SEARCH/START_SEARCH_SESSION`,as=`SEARCH/STOP_SEARCH_SESSION`,os=`SEARCH/SET_SEARCH_FLAGS`,ss=`SEARCH/SET_SHOW_ALL_RESULTS`,cs=`SEARCH/START_SEARCH`,ls=`SEARCH/SET_SEARCH_RESULTS`,us=`SEARCH/APPEND_SEARCH_RESULTS`,ds=`SEARCH/SET_ACTIVE_RESULT_INDEX`;function fs(e,t){return{type:ss,payload:{documentId:e,showAll:t}}}function ps(e,t,n,r){return{type:ls,payload:{documentId:e,results:t,total:n,activeResultIndex:r}}}function ms(e,t){return{type:ds,payload:{documentId:e,index:t}}}var hs={flags:[],results:[],total:0,activeResultIndex:-1,showAllResults:!0,query:``,loading:!1,active:!1},gs={documents:{}},_s=(e,t,n)=>{let r=e.documents[t]||hs;return{...e,documents:{...e.documents,[t]:{...r,...n}}}},vs=class extends sr{constructor(e,t,n){super(e,t),this.searchStop$=Y(),this.searchStart$=Y(),this.searchResult$=Y(),this.searchActiveResultChange$=Y(),this.searchResultState$=Y(),this.searchState$=Y(),this.currentTask=new Map,this.pluginConfig=n}onDocumentLoadingStarted(e){let t={...hs,flags:this.pluginConfig.flags||[],showAllResults:this.pluginConfig.showAllResults??!0};this.dispatch(function(e,t){return{type:ns,payload:{documentId:e,state:t}}}(e,t))}onDocumentClosed(e){this.stopSearchSession(e),this.dispatch(function(e){return{type:rs,payload:e}}(e)),this.currentTask.delete(e)}async initialize(){}onStoreUpdated(e,t){for(let n in t.documents){let r=e.documents[n],i=t.documents[n];r!==i&&(this.searchState$.emit({documentId:n,state:i}),r&&r.results===i.results&&r.activeResultIndex===i.activeResultIndex&&r.showAllResults===i.showAllResults&&r.active===i.active||this.searchResultState$.emit({documentId:n,state:{results:i.results,activeResultIndex:i.activeResultIndex,showAllResults:i.showAllResults,active:i.active}}))}}buildCapability(){let e=e=>e??this.getActiveDocumentId(),t=t=>{let n=e(t),r=this.state.documents[n];if(!r)throw Error(`Search state not found for document ${n}`);return r};return{startSearch:t=>this.startSearchSession(e(t)),stopSearch:t=>this.stopSearchSession(e(t)),searchAllPages:(t,n)=>this.searchAllPages(t,e(n)),nextResult:t=>this.nextResult(e(t)),previousResult:t=>this.previousResult(e(t)),goToResult:(t,n)=>this.goToResult(t,e(n)),setShowAllResults:(t,n)=>this.dispatch(fs(e(n),t)),getShowAllResults:e=>t(e).showAllResults,getFlags:e=>t(e).flags,setFlags:(t,n)=>this.setFlags(t,e(n)),getState:e=>t(e),forDocument:this.createSearchScope.bind(this),onSearchResult:this.searchResult$.on,onSearchStart:this.searchStart$.on,onSearchStop:this.searchStop$.on,onActiveResultChange:this.searchActiveResultChange$.on,onSearchResultStateChange:this.searchResultState$.on,onStateChange:this.searchState$.on}}createSearchScope(e){let t=()=>{let t=this.state.documents[e];if(!t)throw Error(`Search state not found for document ${e}`);return t};return{startSearch:()=>this.startSearchSession(e),stopSearch:()=>this.stopSearchSession(e),searchAllPages:t=>this.searchAllPages(t,e),nextResult:()=>this.nextResult(e),previousResult:()=>this.previousResult(e),goToResult:t=>this.goToResult(t,e),setShowAllResults:t=>this.dispatch(fs(e,t)),getShowAllResults:()=>t().showAllResults,getFlags:()=>t().flags,setFlags:t=>this.setFlags(t,e),getState:t,onSearchResult:t=>this.searchResult$.on(n=>{n.documentId===e&&t(n.results)}),onSearchStart:t=>this.searchStart$.on(n=>{n.documentId===e&&t()}),onSearchStop:t=>this.searchStop$.on(n=>{n.documentId===e&&t()}),onActiveResultChange:t=>this.searchActiveResultChange$.on(n=>{n.documentId===e&&t(n.index)}),onSearchResultStateChange:t=>this.searchResultState$.on(n=>{n.documentId===e&&t(n.state)}),onStateChange:t=>this.searchState$.on(n=>{n.documentId===e&&t(n.state)})}}setFlags(e,t){this.dispatch(function(e,t){return{type:os,payload:{documentId:e,flags:t}}}(t,e));let n=this.state.documents[t];n!=null&&n.active&&this.searchAllPages(n.query,t,!0)}notifySearchStart(e){this.searchStart$.emit({documentId:e})}notifySearchStop(e){this.searchStop$.emit({documentId:e})}notifyActiveResultChange(e,t){this.searchActiveResultChange$.emit({documentId:e,index:t})}startSearchSession(e){this.getCoreDocument(e)&&(this.dispatch(function(e){return{type:is,payload:{documentId:e}}}(e)),this.notifySearchStart(e))}stopSearchSession(e){var t;if(!this.state.documents[e]?.active)return;let n=this.currentTask.get(e);if(n){try{(t=n.abort)==null||t.call(n,{code:K.Cancelled,message:`search stopped`})}catch{}this.currentTask.delete(e)}this.dispatch(function(e){return{type:as,payload:{documentId:e}}}(e)),this.notifySearchStop(e)}searchAllPages(e,t,n=!1){var r;let i=this.state.documents[t];if(!i)return q.reject({code:K.NotFound,message:`Search state not initialized`});let a=this.getCoreDocument(t);if(!a?.document)return q.reject({code:K.NotFound,message:`Document not loaded`});let o=e.trim();if(i.query===o&&!n)return q.resolve({results:i.results,total:i.total});let s=this.currentTask.get(t);if(s){try{(r=s.abort)==null||r.call(s,{code:K.Cancelled,message:`new search`})}catch{}this.currentTask.delete(t)}if(this.dispatch(function(e,t){return{type:cs,payload:{documentId:e,query:t}}}(t,o)),!o)return this.dispatch(ps(t,[],0,-1)),q.resolve({results:[],total:0});i.active||this.startSearchSession(t);let c=this.engine.searchAllPages(a.document,o,{flags:i.flags});return this.currentTask.set(t,c),c.onProgress(e=>{var n;(n=e?.results)!=null&&n.length&&this.currentTask.get(t)===c&&(this.dispatch(function(e,t){return{type:us,payload:{documentId:e,results:t}}}(t,e.results)),this.state.documents[t].activeResultIndex===-1&&(this.dispatch(ms(t,0)),this.notifyActiveResultChange(t,0)))}),c.wait(e=>{this.currentTask.delete(t);let n=e.total>0?0:-1;this.dispatch(ps(t,e.results,e.total,n)),this.searchResult$.emit({documentId:t,results:e}),e.total>0&&this.notifyActiveResultChange(t,0)},e=>{e?.reason?.code!==K.Cancelled&&(console.error(`Error during search:`,e),this.dispatch(ps(t,[],0,-1))),this.currentTask.delete(t)}),c}nextResult(e){let t=this.state.documents[e];if(!t||t.results.length===0)return-1;let n=t.activeResultIndex>=t.results.length-1?0:t.activeResultIndex+1;return this.goToResult(n,e)}previousResult(e){let t=this.state.documents[e];if(!t||t.results.length===0)return-1;let n=t.activeResultIndex<=0?t.results.length-1:t.activeResultIndex-1;return this.goToResult(n,e)}goToResult(e,t){let n=this.state.documents[t];return!n||n.results.length===0||e<0||e>=n.results.length?-1:(this.dispatch(ms(t,e)),this.notifyActiveResultChange(t,e),e)}async destroy(){for(let e of Object.keys(this.state.documents))this.stopSearchSession(e);this.searchResult$.clear(),this.searchStart$.clear(),this.searchStop$.clear(),this.searchActiveResultChange$.clear(),this.searchResultState$.clear(),this.searchState$.clear(),super.destroy()}};vs.id=`search`;var ys=vs,bs=`search`,xs={manifest:{id:bs,name:`Search Plugin`,version:`1.0.0`,provides:[`search`],requires:[],optional:[],defaultConfig:{flags:[]}},create:(e,t)=>new ys(bs,e,t),reducer:(e=gs,t)=>{switch(t.type){case ns:return{...e,documents:{...e.documents,[t.payload.documentId]:t.payload.state}};case rs:{let n=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i}}case is:return _s(e,t.payload.documentId,{active:!0});case as:return _s(e,t.payload.documentId,{results:[],total:0,activeResultIndex:-1,query:``,loading:!1,active:!1});case os:return _s(e,t.payload.documentId,{flags:t.payload.flags});case ss:return _s(e,t.payload.documentId,{showAllResults:t.payload.showAll});case cs:return _s(e,t.payload.documentId,{loading:!0,query:t.payload.query,results:[],total:0,activeResultIndex:-1});case us:{let{documentId:n,results:r}=t.payload,i=e.documents[n];if(!i)return e;let a=[...i.results,...r],o=i.activeResultIndex===-1&&a.length>0?0:i.activeResultIndex;return _s(e,n,{results:a,total:a.length,activeResultIndex:o,loading:!0})}case ls:{let{documentId:n,results:r,total:i,activeResultIndex:a}=t.payload;return _s(e,n,{results:r,total:i,activeResultIndex:a,loading:!1})}case ds:return _s(e,t.payload.documentId,{activeResultIndex:t.payload.index});default:return e}},initialState:gs},Ss=()=>Cr(ys.id);function Cs({documentId:e,pageIndex:t,scale:n,style:r,highlightColor:i=`#FFFF00`,activeHighlightColor:a=`#FFBF00`,...o}){let{provides:s}=Ss(),[c,l]=I(null),u=Tr(e),d=z(()=>s?.forDocument(e),[s,e]),f=z(()=>n===void 0?u?.scale??1:n,[n,u?.scale]);return L(()=>{if(!d)return void l(null);let e=d.getState();return l({results:e.results,activeResultIndex:e.activeResultIndex,showAllResults:e.showAllResults,active:e.active}),d.onSearchResultStateChange(e=>{l(e)})},[d]),!c||!c.active?null:V(`div`,{style:{...r,pointerEvents:`none`},...o,children:c.results.map((e,t)=>({result:e,originalIndex:t})).filter(({result:e})=>e.pageIndex===t).filter(({originalIndex:e})=>c.showAllResults||e===c.activeResultIndex).map(({result:e,originalIndex:t})=>e.rects.map((e,n)=>V(`div`,{style:{position:`absolute`,top:e.origin.y*f,left:e.origin.x*f,width:e.size.width*f,height:e.size.height*f,backgroundColor:t===c.activeResultIndex?a:i,mixBlendMode:`multiply`,transform:`scale(1.02)`,transformOrigin:`center`,transition:`opacity .3s ease-in-out`,opacity:1}},`${t}-${n}`)))})}var ws=`selection`,Ts={id:ws,name:`Selection Plugin`,version:`1.0.0`,provides:[`selection`],requires:[`interaction-manager`],optional:[`viewport`,`scroll`],defaultConfig:{menuHeight:40}},Es=`SELECTION/INIT_STATE`,Ds=`SELECTION/CLEANUP_STATE`,Os=`SELECTION/CACHE_PAGE_GEOMETRY`,ks=`SELECTION/SET_SELECTION`,As=`SELECTION/START_SELECTION`,js=`SELECTION/END_SELECTION`,Ms=`SELECTION/CLEAR_SELECTION`,Ns=`SELECTION/SET_RECTS`,Ps=`SELECTION/SET_SLICES`,Fs={geometry:{},rects:{},slices:{},selection:null,active:!1,selecting:!1},Is={documents:{}},Ls=(e,t,n)=>({...e,documents:{...e.documents,[t]:n}});function Rs(e,t){return e.rects[t]??[]}function zs(e,t){return xt(Rs(e,t))}function Bs(e){let t=[],n=e.rects;for(let e in n){let r=Number(e),i=xt(n[r]);i&&t.push({page:r,rect:i})}return t}function Vs(e,t){let n=e.rects[t]||[];if(n.length===0)return null;let r=zs(e,t);return r?{pageIndex:t,rect:r,segmentRects:n}:null}function Hs(e){let t=[],n=Object.keys(e.rects).map(Number);for(let r of n){let n=e.rects[r]||[];if(n.length===0)continue;let i=zs(e,r);i&&t.push({pageIndex:r,rect:i,segmentRects:n})}return t}function Us(e,t){for(let n of e.runs){if(!(t.y>=n.rect.y&&t.y<=n.rect.y+n.rect.height&&t.x>=n.rect.x&&t.x<=n.rect.x+n.rect.width))continue;let e=n.glyphs.findIndex(e=>t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height);if(e!==-1)return n.charStart+e}return-1}function Ws(e,t,n){if(!e||!t||n<e.start.page||n>e.end.page)return null;let r=n===e.start.page?e.start.index:0,i=t.runs[t.runs.length-1],a=i.charStart+i.glyphs.length-1;return{from:r,to:n===e.end.page?e.end.index:a}}function Gs(e,t,n,r=!0){let i=[];for(let r of e.runs){let e=r.charStart,a=e+r.glyphs.length-1;if(a<t||e>n)continue;let o=Math.max(t,e)-e,s=Math.min(n,a)-e,c=1/0,l=-1/0,u=1/0,d=-1/0,f=0;for(let e=o;e<=s;e++){let t=r.glyphs[e];t.flags!==2&&(c=Math.min(c,t.x),l=Math.max(l,t.x+t.width),u=Math.min(u,t.y),d=Math.max(d,t.y+t.height),f++)}c!==1/0&&f>0&&i.push({rect:{origin:{x:c,y:u},size:{width:l-c,height:d-u}},charCount:f})}return r?function(e){let t=[],n=null,r=null;for(let i of e)n&&r?Ys(n,i)?r=Ks(r,i.rect):(t.push(r),r=i.rect):r=i.rect,n=i;return r&&!qs(r)&&t.push(r),t}(i):i.map(e=>e.rect)}function Ks(e,t){let n=Math.min(e.origin.x,t.origin.x),r=Math.min(e.origin.y,t.origin.y);return{origin:{x:n,y:r},size:{width:Math.max(e.origin.x+e.size.width,t.origin.x+t.size.width)-n,height:Math.max(e.origin.y+e.size.height,t.origin.y+t.size.height)-r}}}function qs(e){return e.size.width<=0||e.size.height<=0}function Js(e,t){if(qs(e)||qs(t))return 0;let n=Ks(e,t);return n.size.height===e.size.height||n.size.height===t.size.height?1:function(e,t){let n=Math.max(e.origin.x,t.origin.x),r=Math.max(e.origin.y,t.origin.y),i=Math.min(e.origin.x+e.size.width,t.origin.x+t.size.width),a=Math.min(e.origin.y+e.size.height,t.origin.y+t.size.height);return{origin:{x:n,y:r},size:{width:Math.max(0,i-n),height:Math.max(0,a-r)}}}(e,t).size.height/n.size.height}function Ys(e,t){let n=e.rect,r=t.rect;if(Js(n,r)<.8)return!1;let i=1*n.size.width/e.charCount,a=1*r.size.width/t.charCount,o=n.origin.x-i,s=n.origin.x+n.size.width+i,c=r.origin.x-a;return o<r.origin.x+r.size.width+a&&s>c}var Xs=class extends sr{constructor(e,t,n){var r;super(e,t),this.enabledModesPerDoc=new Map,this.selecting=new Map,this.anchor=new Map,this.pageCallbacks=new Map,this.menuPlacement$=gr((e,t)=>({documentId:e,placement:t})),this.selChange$=gr((e,t)=>({documentId:e,selection:t})),this.textRetrieved$=gr((e,t)=>({documentId:e,text:t})),this.copyToClipboard$=gr((e,t)=>({documentId:e,text:t}),{cache:!1}),this.beginSelection$=gr((e,t)=>({documentId:e,page:t.page,index:t.index}),{cache:!1}),this.endSelection$=gr(e=>({documentId:e}),{cache:!1}),this.viewportCapability=null,this.scrollCapability=null,this.menuHeight=n.menuHeight??40;let i=t.getPlugin(`interaction-manager`);if(!i)throw Error(`SelectionPlugin: InteractionManagerPlugin is required.`);this.interactionManagerCapability=i.provides(),this.viewportCapability=t.getPlugin(`viewport`)?.provides()??null,this.scrollCapability=t.getPlugin(`scroll`)?.provides()??null,this.coreStore.onAction(qn,e=>{let{documentId:t,pageIndexes:n}=e.payload,r=n.map(e=>this.getNewPageGeometryAndCache(t,e));jt.all(r).wait(()=>{n.forEach(e=>{this.notifyPage(t,e)})},jn)}),(r=this.viewportCapability)==null||r.onViewportChange(e=>{this.recalculateMenuPlacement(e.documentId)},{mode:`throttle`,wait:100})}onDocumentLoadingStarted(e){this.dispatch(((e,t)=>({type:Es,payload:{documentId:e,state:t}}))(e,Fs)),this.enabledModesPerDoc.set(e,new Set([`pointerMode`])),this.pageCallbacks.set(e,new Map),this.selecting.set(e,!1),this.anchor.set(e,void 0)}onDocumentClosed(e){this.dispatch((e=>({type:Ds,payload:e}))(e)),this.enabledModesPerDoc.delete(e),this.pageCallbacks.delete(e),this.selecting.delete(e),this.anchor.delete(e),this.selChange$.clearScope(e),this.textRetrieved$.clearScope(e),this.copyToClipboard$.clearScope(e),this.beginSelection$.clearScope(e),this.endSelection$.clearScope(e),this.menuPlacement$.clearScope(e)}async initialize(){}async destroy(){this.selChange$.clear(),this.textRetrieved$.clear(),this.copyToClipboard$.clear(),this.beginSelection$.clear(),this.endSelection$.clear(),this.menuPlacement$.clear(),super.destroy()}buildCapability(){let e=e=>e??this.getActiveDocumentId();return{getFormattedSelection:t=>Hs(this.getDocumentState(e(t))),getFormattedSelectionForPage:(t,n)=>Vs(this.getDocumentState(e(n)),t),getHighlightRectsForPage:(t,n)=>Rs(this.getDocumentState(e(n)),t),getHighlightRects:t=>this.getDocumentState(e(t)).rects,getBoundingRectForPage:(t,n)=>zs(this.getDocumentState(e(n)),t),getBoundingRects:t=>Bs(this.getDocumentState(e(t))),getSelectedText:t=>this.getSelectedText(e(t)),clear:t=>this.clearSelection(e(t)),copyToClipboard:t=>this.copyToClipboard(e(t)),getState:t=>this.getDocumentState(e(t)),enableForMode:(t,n)=>this.enabledModesPerDoc.get(e(n))?.add(t),isEnabledForMode:(t,n)=>this.enabledModesPerDoc.get(e(n))?.has(t)??!1,forDocument:this.createSelectionScope.bind(this),onCopyToClipboard:this.copyToClipboard$.onGlobal,onSelectionChange:this.selChange$.onGlobal,onTextRetrieved:this.textRetrieved$.onGlobal,onBeginSelection:this.beginSelection$.onGlobal,onEndSelection:this.endSelection$.onGlobal}}createSelectionScope(e){return{getFormattedSelection:()=>Hs(this.getDocumentState(e)),getFormattedSelectionForPage:t=>Vs(this.getDocumentState(e),t),getHighlightRectsForPage:t=>Rs(this.getDocumentState(e),t),getHighlightRects:()=>this.getDocumentState(e).rects,getBoundingRectForPage:t=>zs(this.getDocumentState(e),t),getBoundingRects:()=>Bs(this.getDocumentState(e)),getSelectedText:()=>this.getSelectedText(e),clear:()=>this.clearSelection(e),copyToClipboard:()=>this.copyToClipboard(e),getState:()=>this.getDocumentState(e),onSelectionChange:this.selChange$.forScope(e),onTextRetrieved:this.textRetrieved$.forScope(e),onCopyToClipboard:this.copyToClipboard$.forScope(e),onBeginSelection:this.beginSelection$.forScope(e),onEndSelection:this.endSelection$.forScope(e)}}getDocumentState(e){let t=this.state.documents[e];if(!t)throw Error(`Selection state not found for document: ${e}`);return t}onMenuPlacement(e,t){return this.menuPlacement$.forScope(e)(t)}registerSelectionOnPage(e){var t;let{documentId:n,pageIndex:r,onRectsChange:i}=e,a=this.state.documents[n];if(!a)return this.logger.warn(`SelectionPlugin`,`RegisterFailed`,`Cannot register selection on page ${r} for document ${n}: document state not initialized.`),()=>{};(t=this.pageCallbacks.get(n))==null||t.set(r,i);let o=this.getOrLoadGeometry(n,r),s=this.interactionManagerCapability.forDocument(n),c=this.enabledModesPerDoc.get(n);i({rects:Rs(a,r),boundingRect:zs(a,r)});let l=this.interactionManagerCapability.registerAlways({scope:{type:`page`,documentId:n,pageIndex:r},handlers:{onPointerDown:(e,t,i)=>{if(!c?.has(i))return;this.clearSelection(n);let a=this.getDocumentState(n).geometry[r];if(a){let t=Us(a,e);t!==-1&&this.beginSelection(n,r,t)}},onPointerMove:(e,t,i)=>{if(!c?.has(i))return;let a=this.getDocumentState(n).geometry[r];if(a){let t=Us(a,e);t===-1?s.removeCursor(`selection-text`):s.setCursor(`selection-text`,`text`,10),this.selecting.get(n)&&t!==-1&&this.updateSelection(n,r,t)}},onPointerUp:(e,t,r)=>{c!=null&&c.has(r)&&this.endSelection(n)},onHandlerActiveEnd:e=>{c!=null&&c.has(e)&&this.clearSelection(n)}}});return()=>{var e;l(),(e=this.pageCallbacks.get(n))==null||e.delete(r),o.abort({code:K.Cancelled,message:`Cleanup`})}}getPlacementMetrics(e,t,n,r){let i=(this.scrollCapability?.forDocument(e))?.getRectPositionForPage(t,n);if(!i)return null;let a=i.origin.y-r.scrollTop,o=i.origin.y+i.size.height-r.scrollTop;return{pageIndex:t,rect:n,spaceAbove:a,spaceBelow:r.clientHeight-o,isBottomVisible:o>0&&o<=r.clientHeight,isTopVisible:a>=0&&a<r.clientHeight}}recalculateMenuPlacement(e){let t=this.state.documents[e];if(!t)return;if(t.selecting||t.selection===null)return void this.menuPlacement$.emit(e,null);let n=Bs(t);if(n.length===0)return void this.menuPlacement$.emit(e,null);let r=n[n.length-1];if(!this.viewportCapability||!this.scrollCapability)return void this.menuPlacement$.emit(e,{pageIndex:r.page,rect:r.rect,spaceAbove:0,spaceBelow:1/0,suggestTop:!1,isVisible:!0});let i=this.viewportCapability.forDocument(e).getMetrics(),a=n[0],o=this.getPlacementMetrics(e,r.page,r.rect,i),s=this.getPlacementMetrics(e,a.page,a.rect,i);o&&o.isBottomVisible&&o.spaceBelow>this.menuHeight?this.menuPlacement$.emit(e,{...o,suggestTop:!1,isVisible:!0}):s&&s.isTopVisible?this.menuPlacement$.emit(e,{...s,suggestTop:!0,isVisible:!0}):o&&o.isBottomVisible?this.menuPlacement$.emit(e,{...o,suggestTop:!1,isVisible:!0}):this.menuPlacement$.emit(e,null)}notifyPage(e,t){let n=this.pageCallbacks.get(e)?.get(t);if(n){let r=this.getDocumentState(e);n(this.interactionManagerCapability.forDocument(e).getActiveMode()===`pointerMode`?{rects:Rs(r,t),boundingRect:zs(r,t)}:{rects:[],boundingRect:null})}}notifyAllPages(e){var t;(t=this.pageCallbacks.get(e))==null||t.forEach((t,n)=>{this.notifyPage(e,n)})}getNewPageGeometryAndCache(e,t){let n=this.getCoreDocument(e);if(!n||!n.document)return q.reject({code:K.NotFound,message:`Doc Not Found`});let r=n.document.pages.find(e=>e.index===t),i=this.engine.getPageGeometry(n.document,r);return i.wait(n=>{this.dispatch(((e,t,n)=>({type:Os,payload:{documentId:e,page:t,geo:n}}))(e,t,n))},jn),i}getOrLoadGeometry(e,t){let n=this.getDocumentState(e).geometry[t];return n?q.resolve(n):this.getNewPageGeometryAndCache(e,t)}beginSelection(e,t,n){this.selecting.set(e,!0),this.anchor.set(e,{page:t,index:n}),this.dispatch((e=>({type:As,payload:{documentId:e}}))(e)),this.beginSelection$.emit(e,{page:t,index:n}),this.recalculateMenuPlacement(e)}endSelection(e){this.selecting.set(e,!1),this.anchor.set(e,void 0),this.dispatch((e=>({type:js,payload:{documentId:e}}))(e)),this.endSelection$.emit(e),this.recalculateMenuPlacement(e)}clearSelection(e){this.selecting.set(e,!1),this.anchor.set(e,void 0),this.dispatch((e=>({type:Ms,payload:{documentId:e}}))(e)),this.selChange$.emit(e,null),this.menuPlacement$.emit(e,null),this.notifyAllPages(e)}updateSelection(e,t,n){if(!this.selecting.get(e)||!this.anchor.get(e))return;let r=this.anchor.get(e),i=t>r.page||t===r.page&&n>=r.index,a={start:i?r:{page:t,index:n},end:i?{page:t,index:n}:r};this.dispatch(((e,t)=>({type:ks,payload:{documentId:e,selection:t}}))(e,a)),this.updateRectsAndSlices(e,a),this.selChange$.emit(e,a);for(let t=a.start.page;t<=a.end.page;t++)this.notifyPage(e,t)}updateRectsAndSlices(e,t){let n=this.getDocumentState(e),r={},i={};for(let e=t.start.page;e<=t.end.page;e++){let a=n.geometry[e],o=Ws(t,a,e);o&&(r[e]=Gs(a,o.from,o.to),i[e]={start:o.from,count:o.to-o.from+1})}this.dispatch(((e,t)=>({type:Ns,payload:{documentId:e,rects:t}}))(e,r)),this.dispatch(((e,t)=>({type:Ps,payload:{documentId:e,slices:t}}))(e,i))}getSelectedText(e){let t=this.getCoreDocument(e),n=this.getDocumentState(e);if(!t?.document||!n.selection)return q.reject({code:K.NotFound,message:`Doc Not Found or No Selection`});let r=n.selection,i=[];for(let e=r.start.page;e<=r.end.page;e++){let t=n.slices[e];t&&i.push({pageIndex:e,charIndex:t.start,charCount:t.count})}if(i.length===0)return q.resolve([]);let a=this.engine.getTextSlices(t.document,i);return a.wait(t=>{this.textRetrieved$.emit(e,t)},jn),a}copyToClipboard(e){this.getSelectedText(e).wait(t=>{this.copyToClipboard$.emit(e,t.join(`
`))},jn)}};Xs.id=`selection`;var Zs=Xs,Qs={manifest:Ts,create:(e,t)=>new Zs(ws,e,t),reducer:(e=Is,t)=>{switch(t.type){case Es:{let{documentId:n,state:r}=t.payload;return Ls(e,n,r)}case Ds:{let n=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i}}case Os:{let{documentId:n,page:r,geo:i}=t.payload,a=e.documents[n];return a?Ls(e,n,{...a,geometry:{...a.geometry,[r]:i}}):e}case ks:{let{documentId:n,selection:r}=t.payload,i=e.documents[n];return i?Ls(e,n,{...i,selection:r,active:!0}):e}case As:{let{documentId:n}=t.payload,r=e.documents[n];return r?Ls(e,n,{...r,selecting:!0,selection:null,rects:{}}):e}case js:{let{documentId:n}=t.payload,r=e.documents[n];return r?Ls(e,n,{...r,selecting:!1}):e}case Ms:{let{documentId:n}=t.payload,r=e.documents[n];return r?Ls(e,n,{...r,selecting:!1,selection:null,rects:{},active:!1}):e}case Ns:{let{documentId:n,rects:r}=t.payload,i=e.documents[n];return i?Ls(e,n,{...i,rects:r}):e}case Ps:{let{documentId:n,slices:r}=t.payload,i=e.documents[n];return i?Ls(e,n,{...i,slices:r}):e}case`SELECTION/RESET`:{let{documentId:n}=t.payload;return e.documents[n]?Ls(e,n,Fs):e}default:return e}},initialState:Is},$s=`onDblClick`;function ec({children:e,...t}){let{rect:n,rotation:r}=t,{matrix:i,width:a,height:o}=function(e,t){let{width:n,height:r}=e.size;switch(t%4){case 1:return{matrix:`matrix(0, -1, 1, 0, 0, ${r})`,width:r,height:n};case 2:return{matrix:`matrix(-1, 0, 0, -1, ${n}, ${r})`,width:n,height:r};case 3:return{matrix:`matrix(0, 1, -1, 0, ${n}, 0)`,width:r,height:n};default:return{matrix:`matrix(1, 0, 0, 1, 0, 0)`,width:n,height:r}}}(n,r),s=R(null);return L(()=>{let e=s.current;if(!e)return;let t=e=>{e.stopPropagation()},n=e=>{e.stopPropagation()};return e.addEventListener(`pointerdown`,t,{capture:!0}),e.addEventListener(`touchstart`,n,{capture:!0}),()=>{e.removeEventListener(`pointerdown`,t,{capture:!0}),e.removeEventListener(`touchstart`,n,{capture:!0})}},[]),V(F,{children:e({menuWrapperProps:{style:{position:`absolute`,left:n.origin.x,top:n.origin.y,transform:i,transformOrigin:`0 0`,width:a,height:o,pointerEvents:`none`,zIndex:3},ref:e=>{s.current=e}},matrix:i,rect:{origin:{x:n.origin.x,y:n.origin.y},size:{width:a,height:o}}})})}var tc=class{constructor(e,t){this.config=e,this.onUpdate=t,this.state=`idle`,this.startPoint=null,this.startElement=null,this.activeHandle=null,this.currentPosition=null,this.activeVertexIndex=null,this.startVertices=[],this.currentVertices=[],this.currentVertices=e.vertices||[]}updateConfig(e){this.config={...this.config,...e},this.currentVertices=e.vertices||[]}startDrag(e,t){this.state=`dragging`,this.startPoint={x:e,y:t},this.startElement={...this.config.element},this.currentPosition={...this.config.element},this.onUpdate({state:`start`,transformData:{type:`move`,changes:{rect:this.startElement}}})}startResize(e,t,n){this.state=`resizing`,this.activeHandle=e,this.startPoint={x:t,y:n},this.startElement={...this.config.element},this.currentPosition={...this.config.element},this.onUpdate({state:`start`,transformData:{type:`resize`,changes:{rect:this.startElement},metadata:{handle:this.activeHandle,maintainAspectRatio:this.config.maintainAspectRatio}}})}startVertexEdit(e,t,n){this.currentVertices=[...this.config.vertices??this.currentVertices],e<0||e>=this.currentVertices.length||(this.state=`vertex-editing`,this.activeVertexIndex=e,this.startPoint={x:t,y:n},this.startVertices=[...this.currentVertices],this.onUpdate({state:`start`,transformData:{type:`vertex-edit`,changes:{vertices:this.startVertices},metadata:{vertexIndex:e}}}))}move(e,t){if(this.state!==`idle`&&this.startPoint){if(this.state===`dragging`&&this.startElement){let n=this.calculateDelta(e,t),r=this.calculateDragPosition(n);this.currentPosition=r,this.onUpdate({state:`move`,transformData:{type:`move`,changes:{rect:r}}})}else if(this.state===`resizing`&&this.activeHandle&&this.startElement){let n=this.calculateDelta(e,t),r=this.calculateResizePosition(n,this.activeHandle);this.currentPosition=r,this.onUpdate({state:`move`,transformData:{type:`resize`,changes:{rect:r},metadata:{handle:this.activeHandle,maintainAspectRatio:this.config.maintainAspectRatio}}})}else if(this.state===`vertex-editing`&&this.activeVertexIndex!==null){let n=this.calculateVertexPosition(e,t);this.currentVertices=n,this.onUpdate({state:`move`,transformData:{type:`vertex-edit`,changes:{vertices:n},metadata:{vertexIndex:this.activeVertexIndex}}})}}}end(){if(this.state===`idle`)return;let e=this.state,t=this.activeHandle,n=this.activeVertexIndex;if(e===`vertex-editing`)this.onUpdate({state:`end`,transformData:{type:`vertex-edit`,changes:{vertices:this.currentVertices},metadata:{vertexIndex:n||void 0}}});else{let n=this.getCurrentPosition();this.onUpdate({state:`end`,transformData:{type:e===`dragging`?`move`:`resize`,changes:{rect:n},metadata:e===`dragging`?void 0:{handle:t||void 0,maintainAspectRatio:this.config.maintainAspectRatio}}})}this.reset()}cancel(){this.state!==`idle`&&(this.state===`vertex-editing`?this.onUpdate({state:`end`,transformData:{type:`vertex-edit`,changes:{vertices:this.startVertices},metadata:{vertexIndex:this.activeVertexIndex||void 0}}}):this.startElement&&this.onUpdate({state:`end`,transformData:{type:this.state===`dragging`?`move`:`resize`,changes:{rect:this.startElement},metadata:this.state===`dragging`?void 0:{handle:this.activeHandle||void 0,maintainAspectRatio:this.config.maintainAspectRatio}}}),this.reset())}reset(){this.state=`idle`,this.startPoint=null,this.startElement=null,this.activeHandle=null,this.currentPosition=null,this.activeVertexIndex=null,this.startVertices=[]}getCurrentPosition(){return this.currentPosition||this.config.element}calculateDelta(e,t){if(!this.startPoint)return{x:0,y:0};let n={x:e-this.startPoint.x,y:t-this.startPoint.y};return this.transformDelta(n)}transformDelta(e){let{pageRotation:t=0,scale:n=1}=this.config,r=t*Math.PI/2,i=Math.cos(r),a=Math.sin(r),o=e.x/n,s=e.y/n;return{x:i*o+a*s,y:-a*o+i*s}}clampPoint(e){let t=this.config.constraints?.boundingBox;return t?{x:Math.max(0,Math.min(e.x,t.width)),y:Math.max(0,Math.min(e.y,t.height))}:e}calculateVertexPosition(e,t){if(this.activeVertexIndex===null)return this.startVertices;let n=this.calculateDelta(e,t),r=[...this.startVertices],i=r[this.activeVertexIndex],a={x:i.x+n.x,y:i.y+n.y};return r[this.activeVertexIndex]=this.clampPoint(a),r}calculateDragPosition(e){if(!this.startElement)return this.config.element;let t={origin:{x:this.startElement.origin.x+e.x,y:this.startElement.origin.y+e.y},size:{width:this.startElement.size.width,height:this.startElement.size.height}};return this.applyConstraints(t)}calculateResizePosition(e,t){if(!this.startElement)return this.config.element;let{origin:{x:n,y:r},size:{width:i,height:a}}=this.startElement;switch(t){case`se`:i+=e.x,a+=e.y;break;case`sw`:n+=e.x,i-=e.x,a+=e.y;break;case`ne`:i+=e.x,r+=e.y,a-=e.y;break;case`nw`:n+=e.x,i-=e.x,r+=e.y,a-=e.y;break;case`n`:r+=e.y,a-=e.y;break;case`s`:a+=e.y;break;case`e`:i+=e.x;break;case`w`:n+=e.x,i-=e.x}if(this.config.maintainAspectRatio&&this.startElement){let e=this.startElement.size.width/this.startElement.size.height;if([`n`,`s`,`e`,`w`].includes(t))if(t===`n`||t===`s`){let t=a*e,r=t-i;i=t,n-=r/2}else{let o=i/e,s=o-a;a=o,t===`w`&&(n=this.startElement.origin.x+this.startElement.size.width-i),r-=s/2}else Math.abs(i-this.startElement.size.width)>Math.abs(a-this.startElement.size.height)?a=i/e:i=a*e,t.includes(`w`)&&(n=this.startElement.origin.x+this.startElement.size.width-i),t.includes(`n`)&&(r=this.startElement.origin.y+this.startElement.size.height-a)}let o=this.config.constraints?.boundingBox;if(o)switch(t){case`e`:i=Math.min(i,o.width-n);break;case`s`:a=Math.min(a,o.height-r);break;case`se`:i=Math.min(i,o.width-n),a=Math.min(a,o.height-r);break;case`w`:n<0&&(i+=n,n=0);break;case`n`:r<0&&(a+=r,r=0);break;case`sw`:n<0&&(i+=n,n=0),a=Math.min(a,o.height-r);break;case`nw`:n<0&&(i+=n,n=0),r<0&&(a+=r,r=0);break;case`ne`:i=Math.min(i,o.width-n),r<0&&(a+=r,r=0)}return this.applyConstraints({origin:{x:n,y:r},size:{width:i,height:a}})}applyConstraints(e){let{constraints:t}=this.config;if(!t)return e;let{origin:{x:n,y:r},size:{width:i,height:a}}=e;return i=Math.max(t.minWidth||1,i),a=Math.max(t.minHeight||1,a),t.maxWidth&&(i=Math.min(t.maxWidth,i)),t.maxHeight&&(a=Math.min(t.maxHeight,a)),t.boundingBox&&(n=Math.max(0,Math.min(n,t.boundingBox.width-i)),r=Math.max(0,Math.min(r,t.boundingBox.height-a))),{origin:{x:n,y:r},size:{width:i,height:a}}}};function nc(e,t){return e===`n`||e===`s`?`ns-resize`:e===`e`||e===`w`?`ew-resize`:t%2==0?{nw:`nwse-resize`,ne:`nesw-resize`,sw:`nesw-resize`,se:`nwse-resize`}[e]:{nw:`nesw-resize`,ne:`nwse-resize`,sw:`nwse-resize`,se:`nesw-resize`}[e]}function rc(e,t,n){let r=-e/2;return n===`center`?r:n===`outside`?r-t:r+t}function ic(e){let{controller:t,resizeUI:n,vertexUI:r,includeVertices:i=!1,handleAttrs:a,vertexAttrs:o}=e,{dragProps:s,createResizeProps:c,createVertexProps:l}=function(e){let{onUpdate:t,enabled:n=!0,...r}=e,i=R(null),a=R(t);L(()=>{a.current=t},[t]),L(()=>{i.current?i.current.updateConfig(r):i.current=new tc(r,e=>a.current?.call(a,e))},[r.element,r.constraints,r.maintainAspectRatio,r.pageRotation,r.scale,r.vertices]);let o=B(e=>{var t;n&&(e.preventDefault(),e.stopPropagation(),(t=i.current)==null||t.startDrag(e.clientX,e.clientY),e.currentTarget.setPointerCapture(e.pointerId))},[n]),s=B(e=>{var t;e.preventDefault(),e.stopPropagation(),(t=i.current)==null||t.move(e.clientX,e.clientY)},[]),c=B(e=>{var t,n,r;e.preventDefault(),e.stopPropagation(),(t=i.current)==null||t.end(),(r=(n=e.currentTarget).releasePointerCapture)==null||r.call(n,e.pointerId)},[]),l=B(e=>({onPointerDown:t=>{var r;n&&(t.preventDefault(),t.stopPropagation(),(r=i.current)==null||r.startResize(e,t.clientX,t.clientY),t.currentTarget.setPointerCapture(t.pointerId))},onPointerMove:s,onPointerUp:c,onPointerCancel:c}),[n,s,c]),u=B(e=>({onPointerDown:t=>{var r;n&&(t.preventDefault(),t.stopPropagation(),(r=i.current)==null||r.startVertexEdit(e,t.clientX,t.clientY),t.currentTarget.setPointerCapture(t.pointerId))},onPointerMove:s,onPointerUp:c,onPointerCancel:c}),[n,s,c]);return{dragProps:n?{onPointerDown:o,onPointerMove:s,onPointerUp:c,onPointerCancel:c}:{},createResizeProps:l,createVertexProps:u}}(t);return{dragProps:s,resize:z(()=>function(e,t={}){let{handleSize:n=8,spacing:r=1,offsetMode:i=`outside`,includeSides:a=!1,zIndex:o=3,rotationAwareCursor:s=!0}=t,c=(e.pageRotation??0)%4,l=e=>({[e]:rc(n,r,i)+`px`});return[[`nw`,{...l(`top`),...l(`left`)}],[`ne`,{...l(`top`),...l(`right`)}],[`sw`,{...l(`bottom`),...l(`left`)}],[`se`,{...l(`bottom`),...l(`right`)}],...a?[[`n`,{...l(`top`),left:`calc(50% - ${n/2}px)`}],[`s`,{...l(`bottom`),left:`calc(50% - ${n/2}px)`}],[`w`,{...l(`left`),top:`calc(50% - ${n/2}px)`}],[`e`,{...l(`right`),top:`calc(50% - ${n/2}px)`}]]:[]].map(([e,t])=>({handle:e,style:{position:`absolute`,width:n+`px`,height:n+`px`,borderRadius:`50%`,zIndex:o,cursor:s?nc(e,c):`default`,touchAction:`none`,...t},attrs:{"data-epdf-handle":e}}))}(t,n).map(e=>({key:e.attrs?.[`data-epdf-handle`],style:e.style,...c(e.handle),...e.attrs??{},...a?.(e.handle)??{}})),[t.element.origin.x,t.element.origin.y,t.element.size.width,t.element.size.height,t.scale,t.pageRotation,t.maintainAspectRatio,n?.handleSize,n?.spacing,n?.offsetMode,n?.includeSides,n?.zIndex,n?.rotationAwareCursor,c,a]),vertices:z(()=>i?function(e,t={},n){let{vertexSize:r=12,zIndex:i=4}=t,a=e.element,o=e.scale??1;return(n??e.vertices??[]).map((e,t)=>({handle:`nw`,style:{position:`absolute`,left:(e.x-a.origin.x)*o-r/2+`px`,top:(e.y-a.origin.y)*o-r/2+`px`,width:r+`px`,height:r+`px`,borderRadius:`50%`,cursor:`pointer`,zIndex:i,touchAction:`none`},attrs:{"data-epdf-vertex":t}}))}(t,r,t.vertices).map((e,t)=>({key:t,style:e.style,...l(t),...e.attrs??{},...o?.(t)??{}})):[],[i,t.element.origin.x,t.element.origin.y,t.element.size.width,t.element.size.height,t.scale,t.vertices,r?.vertexSize,r?.zIndex,l,o])}}var ac=()=>Cr(Zs.id);function oc({documentId:e,pageIndex:t,scale:n,rotation:r,background:i=`rgba(33,150,243)`,selectionMenu:a}){let{plugin:o}=Sr(Zs.id),s=Tr(e),[c,l]=I([]),[u,d]=I(null),[f,p]=I(null);L(()=>{if(o&&e)return o.registerSelectionOnPage({documentId:e,pageIndex:t,onRectsChange:({rects:e,boundingRect:t})=>{l(e),d(t)}})},[o,e,t]),L(()=>{if(o&&e)return o.onMenuPlacement(e,e=>{p(e)})},[o,e]);let m=z(()=>n===void 0?s?.scale??1:n,[n,s?.scale]),h=z(()=>r===void 0?s?.rotation??ot.Degree0:r,[r,s?.rotation]),g=a&&f&&f.pageIndex===t&&f.isVisible;return u?V(F,{children:[V(`div`,{style:{position:`absolute`,left:u.origin.x*m,top:u.origin.y*m,width:u.size.width*m,height:u.size.height*m,mixBlendMode:`multiply`,isolation:`isolate`,pointerEvents:`none`},children:c.map((e,t)=>V(`div`,{style:{position:`absolute`,left:(e.origin.x-u.origin.x)*m,top:(e.origin.y-u.origin.y)*m,width:e.size.width*m,height:e.size.height*m,background:i}},t))}),g&&V(ec,{rect:{origin:{x:f.rect.origin.x*m,y:f.rect.origin.y*m},size:{width:f.rect.size.width*m,height:f.rect.size.height*m}},rotation:h,children:e=>a({...e,context:{type:`selection`,pageIndex:t},selected:!0,placement:f})})]}):null}var sc=vr(Qs).addUtility(function(){let{provides:e}=ac();return L(()=>{if(e)return e.onCopyToClipboard(({text:e})=>{navigator.clipboard.writeText(e)})},[e]),null}).build(),cc=`tiling`,lc={id:cc,name:`Tiling Plugin`,version:`1.0.0`,provides:[`tiling`],requires:[`render`,`scroll`,`viewport`],optional:[],defaultConfig:{tileSize:768,overlapPx:2.5,extraRings:0}},uc=`TILING/INIT_STATE`,dc=`TILING/CLEANUP_STATE`,fc=`TILING/UPDATE_VISIBLE_TILES`,pc=`TILING/MARK_TILE_STATUS`,mc=(e,t)=>({type:fc,payload:{documentId:e,tiles:t}}),hc=(e,t,n,r)=>({type:pc,payload:{documentId:e,pageIndex:t,tileId:n,status:r}}),gc={visibleTiles:{}};function _c({tileSize:e=768,overlapPx:t=2.5,extraRings:n=0,scale:r,rotation:i,page:a,metric:o}){let s=a.size.width*r,c=a.size.height*r,l=e-t,u=function(e,t,n,r){return yt(vt(e,t,(4-n)%4),1/r)}(dt(a.size,i,r),{origin:{x:o.scaled.pageX,y:o.scaled.pageY},size:{width:o.scaled.visibleWidth,height:o.scaled.visibleHeight}},i,1),d=u.origin.x,f=u.origin.y,p=d+u.size.width,m=f+u.size.height,h=Math.floor((s-1)/l),g=Math.floor((c-1)/l),_=Math.max(0,Math.floor(d/l)-n),v=Math.min(h,Math.floor((p-1)/l)+n),y=Math.max(0,Math.floor(f/l)-n),b=Math.min(g,Math.floor((m-1)/l)+n),x=[];for(let t=_;t<=v;t++){let n=t*l,i=Math.min(e,s-n),o=n/r,u=i/r;for(let s=y;s<=b;s++){let d=s*l,f=Math.min(e,c-d),p=d/r,m=f/r;x.push({id:`p${a.index}-${r}-x${n}-y${d}-w${i}-h${f}`,col:t,row:s,pageRect:{origin:{x:o,y:p},size:{width:u,height:m}},screenRect:{origin:{x:n,y:d},size:{width:i,height:f}},status:`queued`,srcScale:r,isFallback:!1})}}return x}var vc=class extends sr{constructor(e,t,n){super(e,t),this.tileRendering$=Y(),this.config=n,this.renderCapability=this.registry.getPlugin(`render`).provides(),this.scrollCapability=this.registry.getPlugin(`scroll`).provides(),this.viewportCapability=this.registry.getPlugin(`viewport`).provides(),this.scrollCapability.onScroll(e=>this.calculateVisibleTiles(e.documentId,e.metrics),{mode:`throttle`,wait:50,throttleMode:`trailing`}),this.coreStore.onAction(qn,e=>this.recalculateTiles(e.payload))}onDocumentLoadingStarted(e){this.dispatch(((e,t)=>({type:uc,payload:{documentId:e,state:t}}))(e,gc))}onDocumentClosed(e){this.dispatch((e=>({type:dc,payload:e}))(e))}onScaleChanged(e){this.recalculateTilesForDocument(e)}onRotationChanged(e){this.recalculateTilesForDocument(e)}recalculateTilesForDocument(e){let t=this.scrollCapability.forDocument(e),n=this.viewportCapability.forDocument(e),r=t.getMetrics(n.getMetrics());this.calculateVisibleTiles(e,r)}async recalculateTiles(e){let{documentId:t,pageIndexes:n}=e,r=this.getCoreDocument(t);if(!r||!r.document)return;let i=this.scrollCapability.forDocument(t),a=this.viewportCapability.forDocument(t),o=i.getMetrics(a.getMetrics()),s={},c=Date.now(),l=r.scale,u=r.rotation;for(let e of n){let t=o.pageVisibilityMetrics.find(t=>t.pageNumber===e+1);if(!t)continue;let n=r.document.pages[e];n&&(s[e]=_c({page:n,metric:t,scale:l,rotation:u,tileSize:this.config.tileSize,overlapPx:this.config.overlapPx,extraRings:this.config.extraRings}).map(e=>({...e,id:`${e.id}-r${c}`})))}Object.keys(s).length>0&&this.dispatch(mc(t,s))}async initialize(){}calculateVisibleTiles(e,t){let n=this.getCoreDocument(e);if(!n||!n.document)return;let r=n.scale,i=n.rotation,a={};for(let e of t.pageVisibilityMetrics){let t=e.pageNumber-1,o=n.document.pages[t];o&&(a[t]=_c({page:o,metric:e,scale:r,rotation:i,tileSize:this.config.tileSize,overlapPx:this.config.overlapPx,extraRings:this.config.extraRings}))}this.dispatch(mc(e,a))}onStoreUpdated(e,t){for(let n in t.documents){let r=e.documents[n],i=t.documents[n];r!==i&&this.tileRendering$.emit({documentId:n,tiles:i.visibleTiles})}}buildCapability(){return{renderTile:this.renderTile.bind(this),forDocument:this.createTilingScope.bind(this),onTileRendering:this.tileRendering$.on}}createTilingScope(e){return{renderTile:t=>this.renderTile(t,e),onTileRendering:t=>this.tileRendering$.on(n=>{n.documentId===e&&t(n.tiles)})}}renderTile(e,t){let n=t??this.getActiveDocumentId();if(!this.renderCapability)throw Error(`Render capability not available.`);this.dispatch(hc(n,e.pageIndex,e.tile.id,`rendering`));let r=this.renderCapability.forDocument(n).renderPageRect({pageIndex:e.pageIndex,rect:e.tile.pageRect,options:{scaleFactor:e.tile.srcScale,dpr:e.dpr}});return r.wait(()=>{this.dispatch(hc(n,e.pageIndex,e.tile.id,`ready`))},jn),r}};vc.id=`tiling`;var yc=vc,bc={manifest:lc,create:(e,t)=>new yc(cc,e,t),reducer:(e,t)=>((e,t)=>{switch(t.type){case uc:{let{documentId:n,state:r}=t.payload;return{...e,documents:{...e.documents,[n]:r}}}case dc:{let n=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i}}case fc:{let{documentId:n,tiles:r}=t.payload,i=e.documents[n];if(!i)return e;let a={...i.visibleTiles};for(let e in r){let t=Number(e),n=r[t],i=a[t]??[],o=i.find(e=>!e.isFallback)?.srcScale,s=n.length>0?n[0].srcScale:o;if(o!==void 0&&o!==s){let e=i.filter(e=>!e.isFallback&&e.status===`ready`).map(e=>({...e,isFallback:!0}));a[t]=[...e.length>0?[]:i.filter(e=>e.isFallback),...e,...n]}else{let e=new Set(n.map(e=>e.id)),r=[],o=new Set;for(let t of i)(t.isFallback||e.has(t.id))&&(r.push(t),o.add(t.id));for(let e of n)o.has(e.id)||r.push(e);a[t]=r}}return{...e,documents:{...e.documents,[n]:{...i,visibleTiles:a}}}}case pc:{let{documentId:n,pageIndex:r,tileId:i,status:a}=t.payload,o=e.documents[n];if(!o)return e;let s=o.visibleTiles[r]?.map(e=>e.id===i?{...e,status:a}:e)??[],c=s.filter(e=>!e.isFallback),l=c.length>0&&c.every(e=>e.status===`ready`)?c:s;return{...e,documents:{...e.documents,[n]:{...o,visibleTiles:{...o.visibleTiles,[r]:l}}}}}default:return e}})(e,t),initialState:{documents:{}}},xc=()=>Cr(yc.id);function Sc({documentId:e,pageIndex:t,tile:n,dpr:r,scale:i}){let{provides:a}=xc(),o=z(()=>a?.forDocument(e),[a,e]),[s,c]=I(),l=R(null),u=i/n.srcScale;return L(()=>{if(n.status===`ready`&&l.current||!o)return;let e=o.renderTile({pageIndex:t,tile:n,dpr:r});return e.wait(e=>{let t=URL.createObjectURL(e);l.current=t,c(t)},jn),()=>{l.current?(URL.revokeObjectURL(l.current),l.current=null):e.abort({code:K.Cancelled,message:`canceled render task`})}},[o,t,n.id]),s?V(`img`,{src:s,onLoad:()=>{l.current&&=(URL.revokeObjectURL(l.current),null)},style:{position:`absolute`,left:n.screenRect.origin.x*u,top:n.screenRect.origin.y*u,width:n.screenRect.size.width*u,height:n.screenRect.size.height*u,display:`block`}}):null}function Cc({documentId:e,pageIndex:t,scale:n,style:r,...i}){let{provides:a}=xc(),o=Tr(e),[s,c]=I([]);L(()=>{if(a)return a.onTileRendering(n=>{n.documentId===e&&c(n.tiles[t]??[])})},[a,e,t]);let l=z(()=>n===void 0?o?.scale??1:n,[n,o?.scale]);return V(`div`,{style:{...r},...i,children:s?.map(n=>V(Sc,{documentId:e,pageIndex:t,tile:n,dpr:window.devicePixelRatio,scale:l},n.id))})}var wc=`thumbnail`,Tc={id:wc,name:`Thumbnail Plugin`,version:`1.0.0`,provides:[`thumbnail`],requires:[`render`],optional:[`scroll`],defaultConfig:{width:150,gap:10,buffer:3,labelHeight:16,autoScroll:!0,scrollBehavior:`smooth`,imagePadding:0,paddingY:0}},Ec=`THUMBNAIL/INIT_STATE`,Dc=`THUMBNAIL/CLEANUP_STATE`,Oc=`THUMBNAIL/SET_WINDOW_STATE`,kc=`THUMBNAIL/UPDATE_VIEWPORT_METRICS`;function Ac(e,t){return{type:Ec,payload:{documentId:e,state:t}}}var jc={thumbs:[],window:null,viewportH:0,scrollY:0},Mc={documents:{},activeDocumentId:null},Nc=class extends sr{constructor(e,t,n){super(e,t),this.cfg=n,this.scrollCapability=null,this.taskCaches=new Map,this.canAutoScroll=new Map,this.window$=gr((e,t)=>({documentId:e,window:t})),this.scrollTo$=gr((e,t)=>({documentId:e,options:t})),this.refreshPages$=gr((e,t)=>({documentId:e,pages:t}),{cache:!1}),this.renderCapability=this.registry.getPlugin(`render`).provides(),this.scrollCapability=this.registry.getPlugin(`scroll`)?.provides()??null,this.coreStore.onAction(qn,e=>{let t=e.payload.documentId??this.getActiveDocumentId(),n=e.payload.pageIndexes;this.refreshPages$.emit(t,n);let r=this.taskCaches.get(t);if(r)for(let e of n)r.delete(e)}),this.scrollCapability&&!1!==this.cfg.autoScroll&&(this.scrollCapability.onPageChangeState(({documentId:e,state:t})=>{this.canAutoScroll.set(e,!t.isChanging),t.isChanging||this.scrollToThumb(t.targetPage-1,e)}),this.scrollCapability.onPageChange(({documentId:e,pageNumber:t})=>{!1!==this.canAutoScroll.get(e)&&this.scrollToThumb(t-1,e)}))}onDocumentLoadingStarted(e){this.dispatch(Ac(e,{...jc})),this.taskCaches.set(e,new Map),this.canAutoScroll.set(e,!0),this.logger.debug(`ThumbnailPlugin`,`DocumentOpened`,`Initialized thumbnail state for document: ${e}`)}onDocumentLoaded(e){this.calculateWindowState(e)}onDocumentClosed(e){this.dispatch(function(e){return{type:Dc,payload:e}}(e));let t=this.taskCaches.get(e);t&&(t.forEach(e=>{e.abort({code:`cancelled`,message:`Document closed`})}),t.clear(),this.taskCaches.delete(e)),this.canAutoScroll.delete(e),this.window$.clearScope(e),this.scrollTo$.clearScope(e),this.refreshPages$.clearScope(e),this.logger.debug(`ThumbnailPlugin`,`DocumentClosed`,`Cleaned up thumbnail state for document: ${e}`)}onRotationChanged(e){this.calculateWindowState(e)}buildCapability(){return{scrollToThumb:e=>this.scrollToThumb(e),renderThumb:(e,t)=>this.renderThumb(e,t),updateWindow:(e,t)=>this.updateWindow(e,t),getWindow:()=>this.getWindow(),forDocument:e=>this.createThumbnailScope(e),onWindow:this.window$.onGlobal,onScrollTo:this.scrollTo$.onGlobal,onRefreshPages:this.refreshPages$.onGlobal}}createThumbnailScope(e){return{scrollToThumb:t=>this.scrollToThumb(t,e),renderThumb:(t,n)=>this.renderThumb(t,n,e),updateWindow:(t,n)=>this.updateWindow(t,n,e),getWindow:()=>this.getWindow(e),onWindow:this.window$.forScope(e),onScrollTo:this.scrollTo$.forScope(e),onRefreshPages:this.refreshPages$.forScope(e)}}getDocumentState(e){let t=e??this.getActiveDocumentId();return this.state.documents[t]??null}calculateWindowState(e){let t=this.coreState.core.documents[e];if(!t?.document)return;let n=this.cfg.width??120,r=this.cfg.labelHeight??16,i=this.cfg.gap??8,a=this.cfg.imagePadding??0,o=this.cfg.paddingY??0,s=Math.max(1,n-2*a),c=o,l=t.document.pages.map(e=>{let t=e.size.height/e.size.width,n=Math.round(s*t),o=a+n+a+r,l={pageIndex:e.index,width:s,height:n,wrapperHeight:o,top:c,labelHeight:r,padding:a};return c+=o+i,l}),u={start:-1,end:-1,items:[],totalHeight:c-i+o},d=this.getDocumentState(e);d&&(this.dispatch(Ac(e,{...d,thumbs:l,window:u})),d.viewportH>0?this.updateWindow(d.scrollY,d.viewportH,e):this.window$.emit(e,u))}updateWindow(e,t,n){let r=n??this.getActiveDocumentId(),i=this.getDocumentState(r);if(!i||!i.window||i.thumbs.length===0)return;let a=this.cfg.buffer??3;this.dispatch(function(e,t,n){return{type:kc,payload:{documentId:e,scrollY:t,viewportH:n}}}(r,e,t));let o=0,s=i.thumbs.length-1,c=0;for(;o<=s;){let t=o+s>>1,n=i.thumbs[t];n.top+n.wrapperHeight<e?o=t+1:(c=t,s=t-1)}let l=c,u=e+t;for(;l+1<i.thumbs.length&&i.thumbs[l].top<u;)l++;l=Math.min(i.thumbs.length-1,l+a);let d=Math.max(0,c-a);if(d===i.window.start&&l===i.window.end)return;let f={start:d,end:l,items:i.thumbs.slice(d,l+1),totalHeight:i.window.totalHeight};this.dispatch(function(e,t){return{type:Oc,payload:{documentId:e,window:t}}}(r,f)),this.window$.emit(r,f)}getWindow(e){return this.getDocumentState(e)?.window??null}scrollToThumb(e,t){let n=t??this.getActiveDocumentId(),r=this.getDocumentState(n);if(!r||!r.window)return;let i=r.thumbs[e];if(!i)return;let a=this.cfg.scrollBehavior??`smooth`,o=this.cfg.paddingY??0;if(r.viewportH<=0){let e=Math.max(o,i.top-i.wrapperHeight);this.scrollTo$.emit(n,{top:e,behavior:a});return}let s=i.top,c=i.top+i.wrapperHeight,l=s<r.scrollY+8+o,u=c>r.scrollY+r.viewportH-8;l?this.scrollTo$.emit(n,{top:Math.max(0,s-o),behavior:a}):u&&this.scrollTo$.emit(n,{top:Math.max(0,c-r.viewportH+o),behavior:a})}renderThumb(e,t,n){let r=n??this.getActiveDocumentId(),i=this.taskCaches.get(r);if(!i)throw Error(`Task cache not found for document: ${r}`);if(i.has(e))return i.get(e);let a=this.coreState.core.documents[r];if(!a?.document)throw Error(`Document not found: ${r}`);let o=a.document.pages[e];if(!o)throw Error(`Page ${e} not found in document: ${r}`);let s=this.cfg.width??120,c=this.cfg.imagePadding??0,l=Math.max(1,s-2*c)/o.size.width,u=this.renderCapability.forDocument(r).renderPageRect({pageIndex:e,rect:{origin:{x:0,y:0},size:o.size},options:{scaleFactor:l,dpr:t}});return i.set(e,u),u.wait(jn,()=>i.delete(e)),u}async initialize(){this.logger.info(`ThumbnailPlugin`,`Initialize`,`Thumbnail plugin initialized`)}async destroy(){this.window$.clear(),this.refreshPages$.clear(),this.scrollTo$.clear(),this.taskCaches.forEach(e=>{e.forEach(e=>{e.abort({code:`cancelled`,message:`Plugin destroyed`})}),e.clear()}),this.taskCaches.clear(),this.canAutoScroll.clear(),super.destroy()}};Nc.id=`thumbnail`;var Pc=Nc,Fc={manifest:Tc,create:(e,t)=>new Pc(wc,e,t),reducer:(e=Mc,t)=>{switch(t.type){case Ec:{let{documentId:n,state:r}=t.payload;return{...e,documents:{...e.documents,[n]:r},activeDocumentId:e.activeDocumentId??n}}case Dc:{let n=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case`THUMBNAIL/SET_ACTIVE_DOCUMENT`:return{...e,activeDocumentId:t.payload};case Oc:{let{documentId:n,window:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,window:r}}}:e}case kc:{let{documentId:n,scrollY:r,viewportH:i}=t.payload,a=e.documents[n];return a?{...e,documents:{...e.documents,[n]:{...a,scrollY:r,viewportH:i}}}:e}default:return e}},initialState:Mc},Ic=()=>Sr(Pc.id);function Lc({documentId:e,style:t,children:n,...r}){let{plugin:i}=Ic(),a=R(null),[o,s]=I({window:null,docId:null}),c=o.docId===e?o.window:null;L(()=>{if(!i)return;let t=i.provides().forDocument(e),n=t.getWindow();n&&s({window:n,docId:e});let r=t.onWindow(t=>{s({window:t,docId:e})});return()=>{r(),s({window:null,docId:null})}},[i,e]),L(()=>{let t=a.current;if(!t||!i)return;let n=i.provides().forDocument(e),r=()=>n.updateWindow(t.scrollTop,t.clientHeight);return t.addEventListener(`scroll`,r),()=>t.removeEventListener(`scroll`,r)},[i,e]),L(()=>{let t=a.current;if(!t||!i)return;let n=i.provides().forDocument(e),r=new ResizeObserver(()=>{n.updateWindow(t.scrollTop,t.clientHeight)});return r.observe(t),()=>r.disconnect()},[i,e]),L(()=>{let t=a.current;!t||!i||i.provides().forDocument(e).updateWindow(t.scrollTop,t.clientHeight)},[c,i,e]),L(()=>{let t=a.current;if(!(!t||!i||!c))return i.provides().forDocument(e).onScrollTo(({top:e,behavior:n})=>{t.scrollTo({top:e,behavior:n})})},[i,e,!!c]);let l=i?.cfg.paddingY??0;return V(`div`,{ref:a,style:{overflowY:`auto`,position:`relative`,paddingTop:l,paddingBottom:l,height:`100%`,...t},...r,children:V(`div`,{style:{height:c?.totalHeight??0,position:`relative`},children:c?.items.map(e=>n(e))})})}function Rc({documentId:e,meta:t,style:n,...r}){let{provides:i}=Cr(Pc.id),{plugin:a}=Ic(),[o,s]=I(),c=R(null),[l,u]=I(0);return L(()=>{if(a)return a.provides().forDocument(e).onRefreshPages(e=>{e.includes(t.pageIndex)&&u(e=>e+1)})},[a,e,t.pageIndex]),L(()=>{let n=(i?.forDocument(e))?.renderThumb(t.pageIndex,window.devicePixelRatio);return n?.wait(e=>{let t=URL.createObjectURL(e);c.current=t,s(t)},jn),()=>{c.current?(URL.revokeObjectURL(c.current),c.current=null):n?.abort({code:K.Cancelled,message:`canceled render task`})}},[i,e,t.pageIndex,l]),o?V(`img`,{src:o,onLoad:()=>{c.current&&=(URL.revokeObjectURL(c.current),null)},style:n,...r}):null}var X=`annotation`,zc={id:X,name:`Annotation Plugin`,version:`1.0.0`,provides:[`annotation`],requires:[`interaction-manager`,`selection`],optional:[`history`],defaultConfig:{autoCommit:!0,annotationAuthor:`Guest`,deactivateToolAfterCreate:!1,selectAfterCreate:!0}},Bc=`ANNOTATION/INIT_STATE`,Vc=`ANNOTATION/CLEANUP_STATE`,Hc=`ANNOTATION/SET_ANNOTATIONS`,Uc=`ANNOTATION/SELECT_ANNOTATION`,Wc=`ANNOTATION/DESELECT_ANNOTATION`,Gc=`ANNOTATION/SET_ACTIVE_TOOL_ID`,Kc=`ANNOTATION/CREATE_ANNOTATION`,qc=`ANNOTATION/PATCH_ANNOTATION`,Jc=`ANNOTATION/DELETE_ANNOTATION`,Yc=`ANNOTATION/COMMIT`,Xc=`ANNOTATION/PURGE_ANNOTATION`,Zc=`ANNOTATION/ADD_COLOR_PRESET`,Qc=`ANNOTATION/SET_TOOL_DEFAULTS`,$c=`ANNOTATION/ADD_TOOL`,el=e=>({type:Wc,payload:{documentId:e}}),tl=(e,t)=>({type:Gc,payload:{documentId:e,toolId:t}}),nl=(e,t,n)=>({type:Kc,payload:{documentId:e,pageIndex:t,annotation:n}}),rl=(e,t,n,r)=>({type:qc,payload:{documentId:e,pageIndex:t,id:n,patch:r}}),il=(e,t,n)=>({type:Jc,payload:{documentId:e,pageIndex:t,id:n}}),al=(e,t)=>({type:Xc,payload:{documentId:e,uid:t}});function ol(e){return e.object.type===U.INK}function sl(e){return e.object.type===U.CIRCLE}function cl(e){return e.object.type===U.POLYGON}function ll(e){return e.object.type===U.SQUARE}function ul(e){return e.object.type===U.LINE}function dl(e){return e.object.type===U.POLYLINE}function fl(e){return e.object.type===U.HIGHLIGHT}function pl(e){return e.object.type===U.UNDERLINE}function ml(e){return e.object.type===U.STRIKEOUT}function hl(e){return e.object.type===U.SQUIGGLY}function gl(e){return e.object.type===U.FREETEXT}function _l(e){return e.object.type===U.STAMP}function vl(e){return e.object.type===U.TEXT}function yl(e){return function(e){return fl(e)||pl(e)||ml(e)||hl(e)}(e)||ol(e)||ll(e)||sl(e)||cl(e)||ul(e)||dl(e)||gl(e)||_l(e)}var bl=(e,t)=>(e.pages[t]??[]).map(t=>e.byUid[t]),xl=(e,t)=>e.byUid[t]??null,Sl=(e,t)=>e.selectedUid&&(e.pages[t]??[]).includes(e.selectedUid)?e.byUid[e.selectedUid]:null;function Cl(e,t){return e.tools.find(e=>e.id===t)?.defaults}var wl=[{id:`highlight`,name:`Highlight`,matchScore:e=>e.type===U.HIGHLIGHT?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1},defaults:{type:U.HIGHLIGHT,color:`#FFCD45`,opacity:1,blendMode:H.Multiply}},{id:`underline`,name:`Underline`,matchScore:e=>e.type===U.UNDERLINE?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1},defaults:{type:U.UNDERLINE,color:`#E44234`,opacity:1}},{id:`strikeout`,name:`Strikeout`,matchScore:e=>e.type===U.STRIKEOUT?1:0,interaction:{exclusive:!1,textSelection:!0},defaults:{type:U.STRIKEOUT,color:`#E44234`,opacity:1}},{id:`squiggly`,name:`Squiggly`,matchScore:e=>e.type===U.SQUIGGLY?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1},defaults:{type:U.SQUIGGLY,color:`#E44234`,opacity:1}},{id:`ink`,name:`Pen`,matchScore:e=>e.type===U.INK&&e.intent!==`InkHighlight`?5:0,interaction:{exclusive:!1,cursor:`crosshair`,isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:U.INK,color:`#E44234`,opacity:1,strokeWidth:6}},{id:`inkHighlighter`,name:`Ink Highlighter`,matchScore:e=>e.type===U.INK&&e.intent===`InkHighlight`?10:0,interaction:{exclusive:!1,cursor:`crosshair`,isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:U.INK,intent:`InkHighlight`,color:`#FFCD45`,opacity:1,strokeWidth:14,blendMode:H.Multiply}},{id:`circle`,name:`Circle`,matchScore:e=>e.type===U.CIRCLE?1:0,interaction:{exclusive:!1,cursor:`crosshair`,isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:U.CIRCLE,color:`transparent`,opacity:1,strokeWidth:6,strokeColor:`#E44234`,strokeStyle:G.SOLID},clickBehavior:{enabled:!0,defaultSize:{width:100,height:100}}},{id:`square`,name:`Square`,matchScore:e=>e.type===U.SQUARE?1:0,interaction:{exclusive:!1,cursor:`crosshair`,isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:U.SQUARE,color:`transparent`,opacity:1,strokeWidth:6,strokeColor:`#E44234`,strokeStyle:G.SOLID},clickBehavior:{enabled:!0,defaultSize:{width:100,height:100}}},{id:`line`,name:`Line`,matchScore:e=>e.type===U.LINE&&e.intent!==`LineArrow`?5:0,interaction:{exclusive:!1,cursor:`crosshair`,isDraggable:!0,isResizable:!1,lockAspectRatio:!1},defaults:{type:U.LINE,color:`transparent`,opacity:1,strokeWidth:6,strokeColor:`#E44234`},clickBehavior:{enabled:!0,defaultLength:100,defaultAngle:0}},{id:`lineArrow`,name:`Arrow`,matchScore:e=>e.type===U.LINE&&e.intent===`LineArrow`?10:0,interaction:{exclusive:!1,cursor:`crosshair`,isDraggable:!0,isResizable:!1,lockAspectRatio:!1},defaults:{type:U.LINE,intent:`LineArrow`,color:`transparent`,opacity:1,strokeWidth:6,strokeColor:`#E44234`,lineEndings:{start:W.None,end:W.OpenArrow}},clickBehavior:{enabled:!0,defaultLength:100,defaultAngle:0}},{id:`polyline`,name:`Polyline`,matchScore:e=>e.type===U.POLYLINE?1:0,interaction:{exclusive:!1,cursor:`crosshair`,isDraggable:!0,isResizable:!1,lockAspectRatio:!1},defaults:{type:U.POLYLINE,color:`transparent`,opacity:1,strokeWidth:6,strokeColor:`#E44234`}},{id:`polygon`,name:`Polygon`,matchScore:e=>e.type===U.POLYGON?1:0,interaction:{exclusive:!1,cursor:`crosshair`,isDraggable:!0,isResizable:!1,lockAspectRatio:!1},defaults:{type:U.POLYGON,color:`transparent`,opacity:1,strokeWidth:6,strokeColor:`#E44234`}},{id:`freeText`,name:`Free Text`,matchScore:e=>e.type===U.FREETEXT?1:0,interaction:{exclusive:!1,cursor:`crosshair`,isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:U.FREETEXT,contents:`Insert text`,fontSize:14,fontColor:`#E44234`,fontFamily:Lt.Helvetica,textAlign:Rt.Left,verticalAlign:zt.Top,backgroundColor:`transparent`,opacity:1},clickBehavior:{enabled:!0,defaultSize:{width:100,height:20},defaultContent:`Insert text`}},{id:`stamp`,name:`Image`,matchScore:e=>e.type===U.STAMP?1:0,interaction:{exclusive:!1,cursor:`copy`,isDraggable:!0,isResizable:!0,lockAspectRatio:!0},defaults:{type:U.STAMP}}],Tl=[`#E44234`,`#FF8D00`,`#FFCD45`,`#5CC96E`,`#25D2D1`,`#597CE2`,`#C544CE`,`#7D2E25`,`#000000`,`#FFFFFF`],El=(e,t,n)=>{let r=e.byUid[t];return r?{...e,byUid:{...e.byUid,[t]:{...r,commitState:r.commitState===`synced`?`dirty`:r.commitState,object:{...r.object,...n}}},hasPendingChanges:!0}:e};function Dl(e){let t=e;return[()=>t,e=>{t=e}]}var Ol={annotationType:U.INK,create(e){let{onCommit:t,onPreview:n,getTool:r,pageSize:i}=e,[a,o]=Dl([]),[s,c]=Dl(!1),l={current:null},u=e=>({x:J(e.x,0,i.width),y:J(e.y,0,i.height)}),d=()=>{let e=r();return e?{...e.defaults,strokeWidth:e.defaults.strokeWidth??1,color:e.defaults.color??`#000000`,opacity:e.defaults.opacity??1,flags:e.defaults.flags??[`print`]}:null},f=()=>{let e=a();if(e.length===0||e[0].points.length===0)return null;let t=d();if(!t)return null;let n=_t(gt(e.flatMap(e=>e.points)),t.strokeWidth/2);return{type:U.INK,bounds:n,data:{...t,rect:n,inkList:e}}};return{onPointerDown:(e,t)=>{var r;let i=u(e);c(!0),l.current&&clearTimeout(l.current),o([...a(),{points:[i]}]),n(f()),(r=t.setPointerCapture)==null||r.call(t)},onPointerMove:e=>{if(!s())return;let t=a();if(t.length===0)return;let r=u(e);t[t.length-1].points.push(r),o(t),n(f())},onPointerUp:(r,i)=>{var s;c(!1),(s=i.releasePointerCapture)==null||s.call(i),l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{let r=a();if(r.length>0&&r[0].points.length>1){let n=d();if(!n)return;let i=_t(gt(r.flatMap(e=>e.points)),n.strokeWidth/2);t({...n,inkList:r,rect:i,type:U.INK,pageIndex:e.pageIndex,id:kn(),created:new Date})}o([]),n(null)},800)},onPointerCancel:(e,t)=>{var r;o([]),c(!1),n(null),l.current&&clearTimeout(l.current),(r=t.releasePointerCapture)==null||r.call(t)}}}};function kl({threshold:e=5,getTool:t,onClickDetected:n}){let[r,i]=Dl(null),[a,o]=Dl(!1);return{onStart:e=>{i(e),o(!1)},onMove:t=>{let n=r();!n||a()||Math.sqrt((t.x-n.x)**2+(t.y-n.y)**2)>e&&o(!0)},onEnd:e=>{var s;if(r()&&!a()){let r=t();r&&`clickBehavior`in r&&(s=r.clickBehavior)!=null&&s.enabled&&n(e,r)}i(null),o(!1)},hasMoved:a,reset:()=>{i(null),o(!1)}}}var Al={annotationType:U.FREETEXT,create(e){let{onCommit:t,onPreview:n,getTool:r,pageSize:i,pageIndex:a}=e,[o,s]=Dl(null),c=e=>({x:J(e.x,0,i.width),y:J(e.y,0,i.height)}),l=()=>{let e=r();return e?{...e.defaults,fontColor:e.defaults.fontColor??`#000000`,opacity:e.defaults.opacity??1,fontSize:e.defaults.fontSize??12,fontFamily:e.defaults.fontFamily??Lt.Helvetica,backgroundColor:e.defaults.backgroundColor??`transparent`,textAlign:e.defaults.textAlign??Rt.Left,verticalAlign:e.defaults.verticalAlign??zt.Top,contents:e.defaults.contents??`Insert text here`,flags:e.defaults.flags??[`print`]}:null},u=kl({threshold:5,getTool:r,onClickDetected:(e,n)=>{let r=l();if(!r)return;let o=n.clickBehavior;if(!o?.enabled)return;let{width:s,height:c}=o.defaultSize,u=s/2,d=c/2,f={origin:{x:J(e.x-u,0,i.width-s),y:J(e.y-d,0,i.height-c)},size:{width:s,height:c}},p=o.defaultContent??r.contents;t({...r,contents:p,type:U.FREETEXT,rect:f,pageIndex:a,id:kn(),created:new Date})}}),d=e=>{let t=o();if(!t)return null;let n=l();if(!n)return null;let r={origin:{x:Math.min(t.x,e.x),y:Math.min(t.y,e.y)},size:{width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y)}};return{type:U.FREETEXT,bounds:r,data:{...n,rect:r}}};return{onPointerDown:(e,t)=>{var r;let i=c(e);s(i),u.onStart(i),n(d(i)),(r=t.setPointerCapture)==null||r.call(t)},onPointerMove:e=>{let t=c(e);u.onMove(t),o()&&u.hasMoved()&&n(d(t))},onPointerUp:(r,i)=>{var a;let d=o();if(!d)return;let f=l();if(!f)return;let p=c(r);if(u.hasMoved()){let n={origin:{x:Math.min(d.x,p.x),y:Math.min(d.y,p.y)},size:{width:Math.abs(d.x-p.x),height:Math.abs(d.y-p.y)}};t({...f,type:U.FREETEXT,rect:n,pageIndex:e.pageIndex,id:kn(),created:new Date})}else u.onEnd(p);s(null),n(null),u.reset(),(a=i.releasePointerCapture)==null||a.call(i)},onPointerLeave:(e,t)=>{var r;s(null),n(null),u.reset(),(r=t.releasePointerCapture)==null||r.call(t)},onPointerCancel:(e,t)=>{var r;s(null),n(null),u.reset(),(r=t.releasePointerCapture)==null||r.call(t)}}}};function jl(e){let t=e=>{let t=9*e,n=Math.PI/6;return{x:-t*Math.cos(n),y:t*Math.sin(n)}};return{getSvgPath:n=>{let{x:r,y:i}=t(n);return e?`M 0 0 L ${r} ${i} L ${r} ${-i} Z`:`M ${r} ${i} L 0 0 L ${r} ${-i}`},getLocalPoints:e=>{let{x:n,y:r}=t(e);return[{x:0,y:0},{x:n,y:r},{x:n,y:-r}]},getRotation:e=>e,filled:e}}function Ml(e,t){let n=t=>t*e/2;return{getSvgPath:e=>{let t=n(e);return`M ${-t} 0 L ${t} 0`},getLocalPoints:e=>{let t=n(e);return[{x:-t,y:0},{x:t,y:0}]},getRotation:t,filled:!1}}var Nl=jl(!1),Pl=jl(!0),Fl={[W.OpenArrow]:Nl,[W.ClosedArrow]:Pl,[W.ROpenArrow]:{...Nl,getRotation:e=>e+Math.PI},[W.RClosedArrow]:{...Pl,getRotation:e=>e+Math.PI},[W.Circle]:{getSvgPath:e=>{let t=5*e/2;return`M ${t} 0 A ${t} ${t} 0 1 1 ${-t} 0 A ${t} ${t} 0 1 1 ${t} 0`},getLocalPoints:e=>{let t=5*e/2;return[{x:-t,y:-t},{x:t,y:t}]},getRotation:()=>0,filled:!0},[W.Square]:{getSvgPath:e=>{let t=6*e/2;return`M ${-t} ${-t} L ${t} ${-t} L ${t} ${t} L ${-t} ${t} Z`},getLocalPoints:e=>{let t=6*e/2;return[{x:-t,y:-t},{x:t,y:-t},{x:t,y:t},{x:-t,y:t}]},getRotation:e=>e,filled:!0},[W.Diamond]:{getSvgPath:e=>{let t=6*e/2;return`M 0 ${-t} L ${t} 0 L 0 ${t} L ${-t} 0 Z`},getLocalPoints:e=>{let t=6*e/2;return[{x:0,y:-t},{x:t,y:0},{x:0,y:t},{x:-t,y:0}]},getRotation:e=>e,filled:!0},[W.Butt]:Ml(6,e=>e+Math.PI/2),[W.Slash]:Ml(18,e=>e+Math.PI/1.5)};function Il(e,t,n){if(!e||e.length===0)return{origin:{x:0,y:0},size:{width:0,height:0}};let r=[...e],i=(e,t)=>Math.atan2(t.y-e.y,t.x-e.x),a=(e,n,i)=>{if(!e)return;let a=Fl[e];if(!a)return;let o=a.getLocalPoints(t),s=a.getRotation(i),c=o.map(e=>function(e,t,n){let r=Math.cos(t),i=Math.sin(t),a=e.x*r-e.y*i,o=e.x*i+e.y*r;return{x:a+n.x,y:o+n.y}}(e,s,n));r.push(...c)};if(e.length>=2){let t=i(e[1],e[0]);a(n?.start,e[0],t);let r=e.length-1,o=i(e[r-1],e[r]);a(n?.end,e[r],o)}if(r.length<=1){let n=e[0]||{x:0,y:0},r=t;return{origin:{x:n.x-r,y:n.y-r},size:{width:2*r,height:2*r}}}return _t(gt(r),t/2+1.2*t)}var Ll=class{constructor(){this.patches=new Map}register(e,t){this.patches.set(e,t)}transform(e,t){let n=this.patches.get(e.type);return n?n(e,t):t.changes}},Rl=new Ll,zl=Object.freeze(Object.defineProperty({__proto__:null,LINE_ENDING_HANDLERS:Fl,PatchRegistry:Ll,createEnding:function(e,t,n,r,i){if(!e)return null;let a=Fl[e];if(!a)return null;let o=a.getRotation(n);return{d:a.getSvgPath(t),transform:`translate(${r} ${i}) rotate(${(e=>180*e/Math.PI)(o)})`,filled:a.filled}},lineRectWithEndings:Il,patchRegistry:Rl},Symbol.toStringTag,{value:`Module`})),Bl={annotationType:U.LINE,create(e){let{pageIndex:t,onCommit:n,onPreview:r,getTool:i,pageSize:a}=e,[o,s]=Dl(null),c=e=>({x:J(e.x,0,a.width),y:J(e.y,0,a.height)}),l=()=>{let e=i();return e?{...e.defaults,strokeWidth:e.defaults.strokeWidth??1,lineEndings:e.defaults.lineEndings??{start:W.None,end:W.None},color:e.defaults.color??`#000000`,opacity:e.defaults.opacity??1,strokeStyle:e.defaults.strokeStyle??G.SOLID,strokeDashArray:e.defaults.strokeDashArray??[],strokeColor:e.defaults.strokeColor??`#000000`,flags:e.defaults.flags??[`print`]}:null},u=kl({threshold:5,getTool:i,onClickDetected:(e,r)=>{let i=l();if(!i)return;let a=r.clickBehavior;if(!a?.enabled)return;let o=a.defaultAngle??0,s=a.defaultLength/2,u=e.x-s*Math.cos(o),d=e.y-s*Math.sin(o),f=e.x+s*Math.cos(o),p=e.y+s*Math.sin(o),m=c({x:u,y:d}),h=c({x:f,y:p}),g=Il([m,h],i.strokeWidth,i.lineEndings);n({...i,rect:g,linePoints:{start:m,end:h},pageIndex:t,id:kn(),created:new Date,type:U.LINE})}}),d=e=>{let t=o();if(!t)return null;let n=l();if(!n)return null;let r=Il([t,e],n.strokeWidth,n.lineEndings);return{type:U.LINE,bounds:r,data:{...n,rect:r,linePoints:{start:t,end:e}}}};return{onPointerDown:(e,t)=>{var n;let i=c(e);s(i),u.onStart(i),r(d(i)),(n=t.setPointerCapture)==null||n.call(t)},onPointerMove:e=>{let t=c(e);u.onMove(t),o()&&u.hasMoved()&&r(d(t))},onPointerUp:(e,i)=>{var a;let d=o();if(!d)return;let f=c(e);if(u.hasMoved()){let e=l();if(!e)return;if(Math.abs(f.x-d.x)>2||Math.abs(f.y-d.y)>2){let r=Il([d,f],e.strokeWidth,e.lineEndings);n({...e,rect:r,linePoints:{start:d,end:f},pageIndex:t,id:kn(),flags:[`print`],created:new Date,type:U.LINE})}}else u.onEnd(f);s(null),r(null),u.reset(),(a=i.releasePointerCapture)==null||a.call(i)},onPointerLeave:(e,t)=>{var n;s(null),r(null),u.reset(),(n=t.releasePointerCapture)==null||n.call(t)},onPointerCancel:(e,t)=>{var n;s(null),r(null),u.reset(),(n=t.releasePointerCapture)==null||n.call(t)}}}},Vl={annotationType:U.POLYLINE,create(e){let{onCommit:t,onPreview:n,getTool:r,pageSize:i}=e,[a,o]=Dl([]),[s,c]=Dl(null),l=e=>({x:J(e.x,0,i.width),y:J(e.y,0,i.height)}),u=()=>{let e=r();return e?{...e.defaults,strokeWidth:e.defaults.strokeWidth??1,lineEndings:e.defaults.lineEndings??{start:W.None,end:W.None},color:e.defaults.color??`#000000`,opacity:e.defaults.opacity??1,strokeColor:e.defaults.strokeColor??`#000000`,strokeStyle:e.defaults.strokeStyle??G.SOLID,strokeDashArray:e.defaults.strokeDashArray??[],flags:e.defaults.flags??[`print`]}:null},d=()=>{let e=a(),t=s();if(e.length===0||!t)return null;let n=u();if(!n)return null;let r=[...e,t],i=Il(r,n.strokeWidth,n.lineEndings);return{type:U.POLYLINE,bounds:i,data:{...n,rect:i,vertices:r,currentVertex:t}}};return{onClick:e=>{let t=l(e),r=a(),i=r[r.length-1];i&&Math.abs(i.x-t.x)<1&&Math.abs(i.y-t.y)<1||(o([...r,t]),c(t),n(d()))},onDoubleClick:()=>{(()=>{let r=a();if(r.length<2)return;let i=u();if(!i)return;let s=Il(r,i.strokeWidth,i.lineEndings);t({...i,vertices:r,rect:s,type:U.POLYLINE,pageIndex:e.pageIndex,id:kn(),created:new Date}),o([]),c(null),n(null)})()},onPointerMove:e=>{a().length>0&&(c(l(e)),n(d()))},onPointerCancel:()=>{o([]),c(null),n(null)}}}},Hl={annotationType:U.POLYGON,create(e){let{onCommit:t,onPreview:n,getTool:r,scale:i,pageSize:a}=e,[o,s]=Dl([]),[c,l]=Dl(null),u=e=>({x:J(e.x,0,a.width),y:J(e.y,0,a.height)}),d=()=>{let e=r();return e?{...e.defaults,color:e.defaults.color??`#000000`,opacity:e.defaults.opacity??1,strokeWidth:e.defaults.strokeWidth??1,strokeColor:e.defaults.strokeColor??`#000000`,strokeStyle:e.defaults.strokeStyle??G.SOLID,strokeDashArray:e.defaults.strokeDashArray??[],flags:e.defaults.flags??[`print`]}:null},f=()=>{let r=o();if(r.length<3)return;let i=d();if(!i)return;let a=_t(gt(r),i.strokeWidth/2);t({...i,vertices:r,rect:a,type:U.POLYGON,pageIndex:e.pageIndex,id:kn(),created:new Date}),s([]),l(null),n(null)},p=()=>{let e=o(),t=c();if(e.length===0||!t)return null;let n=d();if(!n)return null;let r=_t(gt([...e,t]),n.strokeWidth/2);return{type:U.POLYGON,bounds:r,data:{...n,rect:r,vertices:e,currentVertex:t}}};return{onClick:e=>{let t=u(e);if((e=>{let t=o();if(t.length<2)return!1;let n=14/i/2,r=t[0];return e.x>=r.x-n&&e.x<=r.x+n&&e.y>=r.y-n&&e.y<=r.y+n})(t)&&o().length>=3)return void f();let r=o(),a=r[r.length-1];a&&Math.abs(a.x-t.x)<1&&Math.abs(a.y-t.y)<1||(s([...r,t]),l(t),n(p()))},onDoubleClick:e=>{f()},onPointerMove:e=>{o().length>0&&(l(u(e)),n(p()))},onPointerCancel:e=>{s([]),l(null),n(null)}}}},Ul={annotationType:U.SQUARE,create(e){let{pageIndex:t,onCommit:n,onPreview:r,getTool:i,pageSize:a}=e,[o,s]=Dl(null),c=e=>({x:J(e.x,0,a.width),y:J(e.y,0,a.height)}),l=()=>{let e=i();return e?{...e.defaults,flags:e.defaults.flags??[`print`],strokeWidth:e.defaults.strokeWidth??2,strokeColor:e.defaults.strokeColor??`#000000`,strokeStyle:e.defaults.strokeStyle??G.SOLID,strokeDashArray:e.defaults.strokeDashArray??[],color:e.defaults.color??`#000000`,opacity:e.defaults.opacity??1}:null},u=kl({threshold:5,getTool:i,onClickDetected:(e,r)=>{let i=l();if(!i)return;let o=r.clickBehavior;if(!o?.enabled)return;let{width:s,height:c}=o.defaultSize,u=s/2,d=c/2,f=J(e.x-u,0,a.width-s),p=J(e.y-d,0,a.height-c),m=i.strokeWidth,h=m/2,g={origin:{x:f-h,y:p-h},size:{width:s+m,height:c+m}};n({...i,type:U.SQUARE,created:new Date,id:kn(),pageIndex:t,rect:g})}}),d=e=>{let t=o();if(!t)return null;let n=Math.min(t.x,e.x),r=Math.min(t.y,e.y),i=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y),s=l();if(!s)return null;let c=s.strokeWidth,u=c/2,d={origin:{x:n-u,y:r-u},size:{width:i+c,height:a+c}};return{type:U.SQUARE,bounds:d,data:{rect:d,...s}}};return{onPointerDown:(e,t)=>{var n;let i=c(e);s(i),u.onStart(i),r(d(i)),(n=t.setPointerCapture)==null||n.call(t)},onPointerMove:e=>{let t=c(e);u.onMove(t),o()&&u.hasMoved()&&r(d(t))},onPointerUp:(e,i)=>{var a;if(!o()||!l())return;let f=c(e);if(u.hasMoved()){let e=l();if(!e)return;let r=d(f);r&&n({...e,type:U.SQUARE,created:new Date,id:kn(),pageIndex:t,rect:r.data.rect})}else u.onEnd(f);s(null),r(null),u.reset(),(a=i.releasePointerCapture)==null||a.call(i)},onPointerLeave:(e,t)=>{var n;s(null),r(null),u.reset(),(n=t.releasePointerCapture)==null||n.call(t)},onPointerCancel:(e,t)=>{var n;s(null),r(null),u.reset(),(n=t.releasePointerCapture)==null||n.call(t)}}}},Wl={annotationType:U.STAMP,create(e){let{services:t,onCommit:n,getTool:r,pageSize:i}=e;return{onPointerDown:a=>{let o=r();if(!o)return;let{imageSrc:s,imageSize:c}=o.defaults,l=(t,r,s)=>{let c=a.x-r/2,l=a.y-s/2,u={origin:{x:J(c,0,i.width-r),y:J(l,0,i.height-s)},size:{width:r,height:s}};n({...o.defaults,rect:u,type:U.STAMP,icon:o.defaults.icon??Ut.Draft,subject:o.defaults.subject??`Stamp`,flags:o.defaults.flags??[`print`],pageIndex:e.pageIndex,id:kn(),created:new Date},{imageData:t})};s?t.processImage({source:s,maxWidth:i.width,maxHeight:i.height,onComplete:e=>l(e.imageData,c?.width??e.width,c?.height??e.height)}):t.requestFile({accept:`image/png,image/jpeg`,onFile:e=>{t.processImage({source:e,maxWidth:i.width,maxHeight:i.height,onComplete:e=>l(e.imageData,e.width,e.height)})}})}}}},Gl={annotationType:U.CIRCLE,create(e){let{pageIndex:t,onCommit:n,onPreview:r,getTool:i,pageSize:a}=e,[o,s]=Dl(null),c=e=>({x:J(e.x,0,a.width),y:J(e.y,0,a.height)}),l=()=>{let e=i();return e?{...e.defaults,strokeWidth:e.defaults.strokeWidth??2,strokeColor:e.defaults.strokeColor??`#000000`,strokeStyle:e.defaults.strokeStyle??G.SOLID,strokeDashArray:e.defaults.strokeDashArray??[],color:e.defaults.color??`#000000`,opacity:e.defaults.opacity??1,flags:e.defaults.flags??[`print`]}:null},u=kl({threshold:5,getTool:i,onClickDetected:(e,r)=>{let i=l();if(!i)return;let o=r.clickBehavior;if(!o?.enabled)return;let{width:s,height:c}=o.defaultSize,u=s/2,d=c/2,f=J(e.x-u,0,a.width-s),p=J(e.y-d,0,a.height-c),m=i.strokeWidth,h=m/2,g={origin:{x:f-h,y:p-h},size:{width:s+m,height:c+m}};n({...i,type:U.CIRCLE,created:new Date,id:kn(),pageIndex:t,rect:g})}}),d=e=>{let t=o();if(!t)return null;let n=Math.min(t.x,e.x),r=Math.min(t.y,e.y),i=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y),s=l();if(!s)return null;let c=s.strokeWidth,u=c/2,d={origin:{x:n-u,y:r-u},size:{width:i+c,height:a+c}};return{type:U.CIRCLE,bounds:d,data:{rect:d,...s}}};return{onPointerDown:(e,t)=>{var n;let i=c(e);s(i),u.onStart(i),r(d(i)),(n=t.setPointerCapture)==null||n.call(t)},onPointerMove:e=>{let t=c(e);u.onMove(t),o()&&u.hasMoved()&&r(d(t))},onPointerUp:(e,i)=>{var a;if(!o()||!l())return;let f=c(e);if(u.hasMoved()){let e=l();if(!e)return;let r=d(f);r&&n({...e,type:U.CIRCLE,flags:[`print`],created:new Date,id:kn(),pageIndex:t,rect:r.data.rect})}else u.onEnd(f);s(null),r(null),u.reset(),(a=i.releasePointerCapture)==null||a.call(i)},onPointerLeave:(e,t)=>{var n;s(null),r(null),u.reset(),(n=t.releasePointerCapture)==null||n.call(t)},onPointerCancel:(e,t)=>{var n;s(null),r(null),u.reset(),(n=t.releasePointerCapture)==null||n.call(t)}}}},Kl=(e,t)=>{switch(t.type){case`vertex-edit`:default:return t.changes;case`move`:if(t.changes.rect){let n=t.changes.rect.origin.x-e.rect.origin.x,r=t.changes.rect.origin.y-e.rect.origin.y,i=e.inkList.map(e=>({points:e.points.map(e=>({x:e.x+n,y:e.y+r}))}));return{rect:t.changes.rect,inkList:i}}return t.changes;case`resize`:if(t.changes.rect){let n=e.rect,r=t.changes.rect,i=r.size.width/n.size.width,a=r.size.height/n.size.height;if((r.size.width<10||r.size.height<10)&&(i=Math.max(i,10/n.size.width),a=Math.max(a,10/n.size.height),t.changes.rect={origin:r.origin,size:{width:n.size.width*i,height:n.size.height*a}}),t.metadata?.maintainAspectRatio){let e=Math.min(i,a);i=e,a=e,t.changes.rect.size={width:n.size.width*e,height:n.size.height*e}}let o=(e,t)=>({origin:{x:e.origin.x+t,y:e.origin.y+t},size:{width:Math.max(1,e.size.width-2*t),height:Math.max(1,e.size.height-2*t)}}),s=Math.min(t.changes.rect.size.width/n.size.width,t.changes.rect.size.height/n.size.height),c=Math.max(1,Math.round(e.strokeWidth*s)),l=o(n,e.strokeWidth/2),u=o(t.changes.rect,c/2),d=u.size.width/Math.max(l.size.width,1e-6),f=u.size.height/Math.max(l.size.height,1e-6),p=e.inkList.map(e=>({points:e.points.map(e=>({x:u.origin.x+(e.x-l.origin.x)*d,y:u.origin.y+(e.y-l.origin.y)*f}))}));return{rect:t.changes.rect,inkList:p,strokeWidth:c}}return t.changes;case`property-update`:if(t.changes.strokeWidth!==void 0){let n={...e,...t.changes},r=_t(gt(n.inkList.flatMap(e=>e.points)),n.strokeWidth/2);return{...t.changes,rect:r}}return t.changes}},ql=(e,t)=>{switch(t.type){case`vertex-edit`:if(t.changes.linePoints){let{start:n,end:r}=t.changes.linePoints;return{rect:Il([n,r],e.strokeWidth,e.lineEndings),linePoints:{start:n,end:r}}}return t.changes;case`move`:if(t.changes.rect){let n=t.changes.rect.origin.x-e.rect.origin.x,r=t.changes.rect.origin.y-e.rect.origin.y;return{rect:t.changes.rect,linePoints:{start:{x:e.linePoints.start.x+n,y:e.linePoints.start.y+r},end:{x:e.linePoints.end.x+n,y:e.linePoints.end.y+r}}}}return t.changes;case`resize`:if(t.changes.rect){let n=e.rect,r=t.changes.rect,i=r.size.width/n.size.width,a=r.size.height/n.size.height;if((r.size.width<10||r.size.height<10)&&(i=Math.max(i,10/n.size.width),a=Math.max(a,10/n.size.height),t.changes.rect={origin:r.origin,size:{width:n.size.width*i,height:n.size.height*a}}),t.metadata?.maintainAspectRatio){let e=Math.min(i,a);i=e,a=e,t.changes.rect.size={width:n.size.width*e,height:n.size.height*e}}let o={start:{x:t.changes.rect.origin.x+(e.linePoints.start.x-n.origin.x)*i,y:t.changes.rect.origin.y+(e.linePoints.start.y-n.origin.y)*a},end:{x:t.changes.rect.origin.x+(e.linePoints.end.x-n.origin.x)*i,y:t.changes.rect.origin.y+(e.linePoints.end.y-n.origin.y)*a}};return{rect:t.changes.rect,linePoints:o}}return t.changes;case`property-update`:if(t.changes.strokeWidth||t.changes.lineEndings){let n={...e,...t.changes},r=Il([n.linePoints.start,n.linePoints.end],n.strokeWidth,n.lineEndings);return{...t.changes,rect:r}}return t.changes;default:return t.changes}},Jl=(e,t)=>{switch(t.type){case`vertex-edit`:return t.changes.vertices&&t.changes.vertices.length?{rect:Il(t.changes.vertices,e.strokeWidth,e.lineEndings),vertices:t.changes.vertices}:t.changes;case`move`:if(t.changes.rect){let n=t.changes.rect.origin.x-e.rect.origin.x,r=t.changes.rect.origin.y-e.rect.origin.y,i=e.vertices.map(e=>({x:e.x+n,y:e.y+r}));return{rect:t.changes.rect,vertices:i}}return t.changes;case`resize`:if(t.changes.rect){let n=e.rect,r=t.changes.rect,i=r.size.width/n.size.width,a=r.size.height/n.size.height;if((r.size.width<10||r.size.height<10)&&(i=Math.max(i,10/n.size.width),a=Math.max(a,10/n.size.height),t.changes.rect={origin:r.origin,size:{width:n.size.width*i,height:n.size.height*a}}),t.metadata?.maintainAspectRatio){let e=Math.min(i,a);i=e,a=e,t.changes.rect.size={width:n.size.width*e,height:n.size.height*e}}let o=e.vertices.map(e=>({x:t.changes.rect.origin.x+(e.x-n.origin.x)*i,y:t.changes.rect.origin.y+(e.y-n.origin.y)*a}));return{rect:t.changes.rect,vertices:o}}return t.changes;case`property-update`:if(t.changes.strokeWidth!==void 0||t.changes.lineEndings!==void 0){let n={...e,...t.changes},r=Il(n.vertices,n.strokeWidth,n.lineEndings);return{...t.changes,rect:r}}return t.changes;default:return t.changes}},Yl=(e,t)=>{switch(t.type){case`vertex-edit`:if(t.changes.vertices&&t.changes.vertices.length){let n=e.strokeWidth/2;return{rect:_t(gt(t.changes.vertices),n),vertices:t.changes.vertices}}return t.changes;case`move`:if(t.changes.rect){let n=t.changes.rect.origin.x-e.rect.origin.x,r=t.changes.rect.origin.y-e.rect.origin.y,i=e.vertices.map(e=>({x:e.x+n,y:e.y+r}));return{rect:t.changes.rect,vertices:i}}return t.changes;case`resize`:if(t.changes.rect){let n=e.rect,r=t.changes.rect,i=r.size.width/n.size.width,a=r.size.height/n.size.height;if((r.size.width<10||r.size.height<10)&&(i=Math.max(i,10/n.size.width),a=Math.max(a,10/n.size.height),t.changes.rect={origin:r.origin,size:{width:n.size.width*i,height:n.size.height*a}}),t.metadata?.maintainAspectRatio){let e=Math.min(i,a);i=e,a=e,t.changes.rect.size={width:n.size.width*e,height:n.size.height*e}}let o=e.vertices.map(e=>({x:t.changes.rect.origin.x+(e.x-n.origin.x)*i,y:t.changes.rect.origin.y+(e.y-n.origin.y)*a}));return{rect:t.changes.rect,vertices:o}}return t.changes;case`property-update`:if(t.changes.strokeWidth!==void 0){let n={...e,...t.changes},r=n.strokeWidth/2,i=_t(gt(n.vertices),r);return{...t.changes,rect:i}}return t.changes;default:return t.changes}},Xl=class extends sr{constructor(e,t,n){super(e,t),this.ANNOTATION_HISTORY_TOPIC=`annotations`,this.state$=Y(),this.pendingContexts=new Map,this.isInitialLoadComplete=new Map,this.importQueue=new Map,this.handlerFactories=new Map,this.activeTool$=Y(),this.events$=Y(),this.toolsChange$=Y(),this.patchRegistry=new Ll,this.config=n,this.selection=t.getPlugin(`selection`)?.provides()??null,this.history=t.getPlugin(`history`)?.provides()??null,this.interactionManager=t.getPlugin(`interaction-manager`)?.provides()??null,this.registerHandlerFactories(),this.registerBuiltInPatches()}onDocumentLoadingStarted(e){this.dispatch(function(e,t){return{type:Bc,payload:{documentId:e,state:t}}}(e,{pages:{},byUid:{},selectedUid:null,activeToolId:null,hasPendingChanges:!1})),this.pendingContexts.set(e,new Map),this.isInitialLoadComplete.set(e,!1),this.importQueue.set(e,[]),this.logger.debug(`AnnotationPlugin`,`DocumentOpened`,`Initialized annotation state for document: ${e}`)}onDocumentLoaded(e){let t=this.getCoreDocument(e);if(t!=null&&t.document&&this.getAllAnnotations(e,t.document),this.selection)for(let e of this.state.tools)e.interaction.textSelection&&this.selection.enableForMode(e.interaction.mode??e.id)}onDocumentClosed(e){this.dispatch(function(e){return{type:Vc,payload:e}}(e)),this.pendingContexts.delete(e),this.isInitialLoadComplete.delete(e),this.importQueue.delete(e),this.logger.debug(`AnnotationPlugin`,`DocumentClosed`,`Cleaned up annotation state for document: ${e}`)}registerHandlerFactories(){this.handlerFactories.set(U.CIRCLE,Gl),this.handlerFactories.set(U.SQUARE,Ul),this.handlerFactories.set(U.STAMP,Wl),this.handlerFactories.set(U.POLYGON,Hl),this.handlerFactories.set(U.POLYLINE,Vl),this.handlerFactories.set(U.LINE,Bl),this.handlerFactories.set(U.INK,Ol),this.handlerFactories.set(U.FREETEXT,Al)}registerBuiltInPatches(){this.patchRegistry.register(U.INK,Kl),this.patchRegistry.register(U.LINE,ql),this.patchRegistry.register(U.POLYLINE,Jl),this.patchRegistry.register(U.POLYGON,Yl)}async initialize(){var e,t;this.state.tools.forEach(e=>this.registerInteractionForTool(e)),this.history&&this.history.onHistoryChange(e=>{e.topic===this.ANNOTATION_HISTORY_TOPIC&&!1!==this.config.autoCommit&&this.commit(e.documentId)}),(e=this.interactionManager)==null||e.onModeChange(e=>{let t=this.state.tools.find(t=>(t.interaction.mode??t.id)===e.activeMode)?.id??null;t!==(this.state.documents[e.documentId]?.activeToolId??null)&&e.documentId&&this.dispatch(tl(e.documentId,t))}),(t=this.selection)==null||t.onEndSelection(({documentId:e})=>{var t;let n=this.getActiveTool(e);if(!n||!n.interaction.textSelection)return;let r=this.selection?.getFormattedSelection(),i=this.selection?.getSelectedText();if(r&&i){for(let t of r)i.wait(r=>{let i=kn();this.createAnnotation(t.pageIndex,{...n.defaults,rect:t.rect,segmentRects:t.segmentRects,pageIndex:t.pageIndex,created:new Date,id:i,custom:{text:r.join(`
`)}},void 0,e),this.getToolBehavior(n,`deactivateToolAfterCreate`)&&this.setActiveTool(null,e),this.getToolBehavior(n,`selectAfterCreate`)&&this.selectAnnotation(t.pageIndex,i,e)},jn);(t=this.selection)==null||t.clear()}})}registerInteractionForTool(e){var t;(t=this.interactionManager)==null||t.registerMode({id:e.interaction.mode??e.id,scope:`page`,exclusive:e.interaction.exclusive,cursor:e.interaction.cursor})}buildCapability(){return{getActiveTool:()=>this.getActiveTool(),setActiveTool:e=>this.setActiveTool(e),getState:()=>this.getDocumentState(),getPageAnnotations:e=>this.getPageAnnotations(e),getSelectedAnnotation:()=>this.getSelectedAnnotation(),getAnnotationById:e=>this.getAnnotationById(e),selectAnnotation:(e,t)=>this.selectAnnotation(e,t),deselectAnnotation:()=>this.deselectAnnotation(),importAnnotations:e=>this.importAnnotations(e),createAnnotation:(e,t,n)=>this.createAnnotation(e,t,n),updateAnnotation:(e,t,n)=>this.updateAnnotation(e,t,n),deleteAnnotation:(e,t)=>this.deleteAnnotation(e,t),renderAnnotation:e=>this.renderAnnotation(e),commit:()=>this.commit(),forDocument:e=>this.createAnnotationScope(e),getTools:()=>this.state.tools,getTool:e=>this.getTool(e),addTool:e=>{this.dispatch((e=>({type:$c,payload:e}))(e)),this.registerInteractionForTool(e)},findToolForAnnotation:e=>this.findToolForAnnotation(e),setToolDefaults:(e,t)=>this.dispatch(((e,t)=>({type:Qc,payload:{toolId:e,patch:t}}))(e,t)),getColorPresets:()=>[...this.state.colorPresets],addColorPreset:e=>this.dispatch((e=>({type:Zc,payload:e}))(e)),transformAnnotation:(e,t)=>this.transformAnnotation(e,t),registerPatchFunction:(e,t)=>this.registerPatchFunction(e,t),onStateChange:this.state$.on,onActiveToolChange:this.activeTool$.on,onAnnotationEvent:this.events$.on,onToolsChange:this.toolsChange$.on}}createAnnotationScope(e){return{getState:()=>this.getDocumentState(e),getPageAnnotations:t=>this.getPageAnnotations(t,e),getSelectedAnnotation:()=>this.getSelectedAnnotation(e),getAnnotationById:t=>this.getAnnotationById(t,e),selectAnnotation:(t,n)=>this.selectAnnotation(t,n,e),deselectAnnotation:()=>this.deselectAnnotation(e),getActiveTool:()=>this.getActiveTool(e),setActiveTool:t=>this.setActiveTool(t,e),findToolForAnnotation:e=>this.findToolForAnnotation(e),importAnnotations:t=>this.importAnnotations(t,e),createAnnotation:(t,n,r)=>this.createAnnotation(t,n,r,e),updateAnnotation:(t,n,r)=>this.updateAnnotation(t,n,r,e),deleteAnnotation:(t,n)=>this.deleteAnnotation(t,n,e),renderAnnotation:t=>this.renderAnnotation(t,e),commit:()=>this.commit(e),onStateChange:t=>this.state$.on(n=>{n.documentId===e&&t(n.state)}),onAnnotationEvent:t=>this.events$.on(n=>{n.documentId===e&&t(n)}),onActiveToolChange:t=>this.activeTool$.on(n=>{n.documentId===e&&t(n.tool)})}}onStoreUpdated(e,t){for(let n in t.documents){let r=e.documents[n],i=t.documents[n];r!==i&&(this.state$.emit({documentId:n,state:i}),r&&r.activeToolId!==i.activeToolId&&this.activeTool$.emit({documentId:n,tool:this.getActiveTool(n)}))}if(e.tools!==t.tools){for(let e in t.documents)this.activeTool$.emit({documentId:e,tool:this.getActiveTool(e)});this.toolsChange$.emit({tools:t.tools})}}registerPatchFunction(e,t){this.patchRegistry.register(e,t)}transformAnnotation(e,t){let n={type:t.type,changes:t.changes,metadata:t.metadata};return this.patchRegistry.transform(e,n)}registerPageHandlers(e,t,n,r){let i=(this.getCoreDocument(e)?.document)?.pages[t];if(!i||!this.interactionManager)return()=>{};let a=[];for(let o of this.state.tools){if(!o.defaults.type)continue;let s=this.handlerFactories.get(o.defaults.type);if(!s)continue;let c={pageIndex:t,pageSize:i.size,scale:n,services:r.services,onPreview:e=>r.onPreview(o.id,e),onCommit:(n,r)=>{this.createAnnotation(t,n,r,e),this.getToolBehavior(o,`deactivateToolAfterCreate`)&&this.setActiveTool(null,e),this.getToolBehavior(o,`selectAfterCreate`)&&this.selectAnnotation(t,n.id,e)},getTool:()=>this.state.tools.find(e=>e.id===o.id)},l=this.interactionManager.registerHandlers({documentId:e,modeId:o.interaction.mode??o.id,handlers:s.create(c),pageIndex:t});a.push(l)}return()=>a.forEach(e=>e())}getDocumentState(e){let t=e??this.getActiveDocumentId(),n=this.state.documents[t];if(!n)throw Error(`Annotation state not found for document: ${t}`);return n}getAllAnnotations(e,t){this.engine.getAllAnnotations(t).wait(t=>{this.dispatch(((e,t)=>({type:Hc,payload:{documentId:e,annotations:t}}))(e,t)),this.isInitialLoadComplete.set(e,!0);let n=this.importQueue.get(e);n&&n.length>0&&this.processImportQueue(e),this.events$.emit({type:`loaded`,documentId:e,total:Object.values(t).reduce((e,t)=>e+t.length,0)})},jn)}getPageAnnotations(e,t){let{pageIndex:n}=e,r=t??this.getActiveDocumentId(),i=this.getCoreDocument(r)?.document;if(!i)return q.reject({code:K.NotFound,message:`Document not found`});let a=i.pages.find(e=>e.index===n);return a?this.engine.getPageAnnotations(i,a):q.reject({code:K.NotFound,message:`Page not found`})}getSelectedAnnotation(e){return(e=>e.selectedUid?e.byUid[e.selectedUid]:null)(this.getDocumentState(e))}getAnnotationById(e,t){return xl(this.getDocumentState(t),e)}renderAnnotation({pageIndex:e,annotation:t,options:n},r){let i=r??this.getActiveDocumentId(),a=this.getCoreDocument(i)?.document;if(!a)return q.reject({code:K.NotFound,message:`Document not found`});let o=a.pages.find(t=>t.index===e);return o?this.engine.renderPageAnnotation(a,o,t,n):q.reject({code:K.NotFound,message:`Page not found`})}importAnnotations(e,t){let n=t??this.getActiveDocumentId();if(!this.isInitialLoadComplete.get(n)){let t=this.importQueue.get(n)||[];t.push(...e),this.importQueue.set(n,t);return}this.processImportItems(n,e)}processImportQueue(e){let t=this.importQueue.get(e);if(!t||t.length===0)return;let n=[...t];this.importQueue.set(e,[]),this.processImportItems(e,n)}processImportItems(e,t){let n=this.pendingContexts.get(e);if(n){for(let r of t){let{annotation:t,ctx:i}=r,a=t.pageIndex,o=t.id;this.dispatch(nl(e,a,t)),i&&n.set(o,i)}!1!==this.config.autoCommit&&this.commit(e)}}createAnnotation(e,t,n,r){let i=t.id,a=r??this.getActiveDocumentId(),o=this.pendingContexts.get(a);if(!o)return;let s={...t,author:t.author??this.config.annotationAuthor},c=()=>{this.dispatch(nl(a,e,s)),n&&o.set(i,n),this.events$.emit({type:`create`,documentId:a,annotation:s,pageIndex:e,ctx:n,committed:!1})};if(!this.history)return c(),void(this.config.autoCommit&&this.commit(a));let l={execute:c,undo:()=>{o.delete(i),this.dispatch(el(a)),this.dispatch(il(a,e,i)),this.events$.emit({type:`delete`,documentId:a,annotation:s,pageIndex:e,committed:!1})}};this.history.forDocument(a).register(l,this.ANNOTATION_HISTORY_TOPIC)}buildPatch(e,t){return`rect`in t?t:this.transformAnnotation(e,{type:`property-update`,changes:t})}updateAnnotation(e,t,n,r){let i=r??this.getActiveDocumentId(),a=this.getDocumentState(i).byUid[t].object,o=this.buildPatch(a,{...n,author:n.author??this.config.annotationAuthor}),s=()=>{this.dispatch(rl(i,e,t,o)),this.events$.emit({type:`update`,documentId:i,annotation:a,pageIndex:e,patch:o,committed:!1})};if(!this.history)return s(),void(!1!==this.config.autoCommit&&this.commit(i));let c=Object.fromEntries(Object.keys(n).map(e=>[e,a[e]])),l={execute:s,undo:()=>{this.dispatch(rl(i,e,t,c)),this.events$.emit({type:`update`,documentId:i,annotation:a,pageIndex:e,patch:c,committed:!1})}};this.history.forDocument(i).register(l,this.ANNOTATION_HISTORY_TOPIC)}deleteAnnotation(e,t,n){let r=n??this.getActiveDocumentId(),i=this.getDocumentState(r).byUid[t]?.object;if(!i)return;let a=()=>{this.dispatch(el(r)),this.dispatch(il(r,e,t)),this.events$.emit({type:`delete`,documentId:r,annotation:i,pageIndex:e,committed:!1})};if(!this.history)return a(),void(!1!==this.config.autoCommit&&this.commit(r));let o={execute:a,undo:()=>{this.dispatch(nl(r,e,i)),this.events$.emit({type:`create`,documentId:r,annotation:i,pageIndex:e,committed:!1})}};this.history.forDocument(r).register(o,this.ANNOTATION_HISTORY_TOPIC)}selectAnnotation(e,t,n){let r=n??this.getActiveDocumentId();this.dispatch(((e,t,n)=>({type:Uc,payload:{documentId:e,pageIndex:t,id:n}}))(r,e,t))}deselectAnnotation(e){let t=e??this.getActiveDocumentId();this.dispatch(el(t))}getActiveTool(e){let t=this.getDocumentState(e);return t.activeToolId?this.state.tools.find(e=>e.id===t.activeToolId)??null:null}setActiveTool(e,t){var n,r;let i=t??this.getActiveDocumentId();if(e===this.getDocumentState(i).activeToolId)return;this.dispatch(tl(i,e));let a=this.state.tools.find(t=>t.id===e);a?(n=this.interactionManager)==null||n.forDocument(i).activate(a.interaction.mode??a.id):(r=this.interactionManager)==null||r.forDocument(i).activateDefaultMode()}getTool(e){return this.state.tools.find(t=>t.id===e)}findToolForAnnotation(e){let t=null,n=0;for(let r of this.state.tools){let i=r.matchScore(e);i>n&&(n=i,t=r)}return t}commit(e){let t=new jt,n=e??this.getActiveDocumentId(),r=this.getDocumentState(n);if(!r.hasPendingChanges)return q.resolve(!0);let i=this.getCoreDocument(n)?.document;if(!i)return q.reject({code:K.NotFound,message:`Document not found`});let a=this.pendingContexts.get(n);if(!a)return q.resolve(!0);let o=[],s=[],c=[];for(let[e,t]of Object.entries(r.byUid)){if(t.commitState===`synced`)continue;let r=i.pages.find(e=>e.index===t.object.pageIndex);if(r)switch(t.commitState){case`new`:let l=a.get(t.object.id),u=this.engine.createPageAnnotation(i,r,t.object,l);u.wait(()=>{this.events$.emit({type:`create`,documentId:n,annotation:t.object,pageIndex:t.object.pageIndex,ctx:l,committed:!0}),a.delete(t.object.id)},jn),o.push(u);break;case`dirty`:let d=this.engine.updatePageAnnotation(i,r,t.object);d.wait(()=>{this.events$.emit({type:`update`,documentId:n,annotation:t.object,pageIndex:t.object.pageIndex,patch:t.object,committed:!0})},jn),s.push(d);break;case`deleted`:c.push({ta:t,uid:e})}}let l=[];for(let{ta:e,uid:t}of c){let r=i.pages.find(t=>t.index===e.object.pageIndex);if(e.commitState===`deleted`&&e.object.id){let a=new jt;this.engine.removePageAnnotation(i,r,e.object).wait(()=>{this.dispatch(al(n,t)),this.events$.emit({type:`delete`,documentId:n,annotation:e.object,pageIndex:e.object.pageIndex,committed:!0}),a.resolve(!0)},a.fail),l.push(a)}else this.dispatch(al(n,t))}let u=[...o,...s,...l];return jt.allSettled(u).wait(()=>{this.dispatch((e=>({type:Yc,payload:{documentId:e}}))(n)),t.resolve(!0)},t.fail),t}getToolBehavior(e,t){return e.behavior?.[t]===void 0?!1!==this.config[t]:e.behavior[t]}};Xl.id=`annotation`;var Zl=Xl;function Ql(e){return t=>t?.id===e}var $l=Ql(`highlight`),eu=Ql(`squiggly`),tu=Ql(`underline`),nu=Ql(`strikeout`),ru={manifest:zc,create:(e,t)=>new Zl(X,e,t),reducer:(e,t)=>{switch(t.type){case Bc:{let{documentId:n,state:r}=t.payload;return{...e,documents:{...e.documents,[n]:r},activeDocumentId:e.activeDocumentId??n}}case Vc:{let n=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case`ANNOTATION/SET_ACTIVE_DOCUMENT`:return{...e,activeDocumentId:t.payload};case Hc:{let{documentId:n,annotations:r}=t.payload,i=e.documents[n];if(!i)return e;let a={},o={};for(let[e,t]of Object.entries(r)){let n=Number(e),r=i.pages[n]||[];for(let e of r)delete o[e];a[n]=t.map(e=>{let t=e.id;return o[t]={commitState:`synced`,object:e},t})}return{...e,documents:{...e.documents,[n]:{...i,pages:a,byUid:o}}}}case Uc:{let{documentId:n,id:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,selectedUid:r}}}:e}case Wc:{let{documentId:n}=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,selectedUid:null}}}:e}case Gc:{let{documentId:n,toolId:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,activeToolId:r}}}:e}case Kc:{let{documentId:n,pageIndex:r,annotation:i}=t.payload,a=e.documents[n];if(!a)return e;let o=i.id;return{...e,documents:{...e.documents,[n]:{...a,pages:{...a.pages,[r]:[...a.pages[r]??[],o]},byUid:{...a.byUid,[o]:{commitState:`new`,object:i}},hasPendingChanges:!0}}}}case Jc:{let{documentId:n,pageIndex:r,id:i}=t.payload,a=e.documents[n];return a&&a.byUid[i]?{...e,documents:{...e.documents,[n]:{...a,pages:{...a.pages,[r]:(a.pages[r]??[]).filter(e=>e!==i)},byUid:{...a.byUid,[i]:{...a.byUid[i],commitState:`deleted`}},hasPendingChanges:!0}}}:e}case qc:{let{documentId:n,id:r,patch:i}=t.payload,a=e.documents[n];return a?{...e,documents:{...e.documents,[n]:El(a,r,i)}}:e}case Yc:{let{documentId:n}=t.payload,r=e.documents[n];if(!r)return e;let i={};for(let[e,t]of Object.entries(r.byUid))i[e]={...t,commitState:t.commitState===`dirty`||t.commitState===`new`?`synced`:t.commitState};return{...e,documents:{...e.documents,[n]:{...r,byUid:i,hasPendingChanges:!1}}}}case Xc:{let{documentId:n,uid:r}=t.payload,i=e.documents[n];if(!i)return e;let{[r]:a,...o}=i.byUid;return{...e,documents:{...e.documents,[n]:{...i,byUid:o}}}}case $c:{let n=new Map(e.tools.map(e=>[e.id,e]));return n.set(t.payload.id,t.payload),{...e,tools:Array.from(n.values())}}case Qc:{let{toolId:n,patch:r}=t.payload;return{...e,tools:e.tools.map(e=>e.id===n?{...e,defaults:{...e.defaults,...r}}:e)}}case Zc:return e.colorPresets.includes(t.payload)?e:{...e,colorPresets:[...e.colorPresets,t.payload]};default:return e}},initialState:(e,t)=>(e=>{let t=new Map;return wl.forEach(e=>t.set(e.id,e)),(e.tools||[]).forEach(e=>t.set(e.id,e)),{documents:{},activeDocumentId:null,tools:Array.from(t.values()),colorPresets:e.colorPresets??Tl}})(t)},iu=`INTERACTION/INIT_STATE`,au=`INTERACTION/CLEANUP_STATE`,ou=`INTERACTION/ACTIVATE_MODE`,su=`INTERACTION/PAUSE`,cu=`INTERACTION/RESUME`,lu=`INTERACTION/SET_CURSOR`,uu=`INTERACTION/SET_DEFAULT_MODE`,du=`INTERACTION/SET_EXCLUSION_RULES`,fu=`INTERACTION/ADD_EXCLUSION_CLASS`,pu=`INTERACTION/REMOVE_EXCLUSION_CLASS`,mu=`INTERACTION/ADD_EXCLUSION_ATTRIBUTE`,hu=`INTERACTION/REMOVE_EXCLUSION_ATTRIBUTE`;function gu(e){return{type:uu,payload:{mode:e}}}function _u(e){return{type:du,payload:{rules:e}}}var vu=`pointerMode`,yu=class extends sr{constructor(e,t,n){super(e,t),this.modes=new Map,this.cursorClaims=new Map,this.buckets=new Map,this.alwaysGlobal=new Map,this.alwaysPage=new Map,this.onModeChange$=hr(),this.onHandlerChange$=hr(),this.onCursorChange$=hr(),this.onStateChange$=Y(),this.registerMode({id:vu,scope:`page`,exclusive:!1,cursor:`auto`}),this.dispatch(gu(vu)),n.exclusionRules&&this.dispatch(_u(n.exclusionRules))}onDocumentLoadingStarted(e){let t={activeMode:this.state.defaultMode,cursor:`auto`,paused:!1};this.dispatch(function(e,t){return{type:iu,payload:{documentId:e,state:t}}}(e,t)),this.cursorClaims.set(e,new Map),this.buckets.set(e,new Map),this.alwaysGlobal.set(e,new Set),this.alwaysPage.set(e,new Map);let n=this.buckets.get(e);for(let e of this.modes.keys())n.set(e,{global:new Set,page:new Map});this.logger.debug(`InteractionManagerPlugin`,`DocumentOpened`,`Initialized interaction state for document: ${e}`)}onDocumentClosed(e){this.cursorClaims.delete(e),this.buckets.delete(e),this.alwaysGlobal.delete(e),this.alwaysPage.delete(e),this.dispatch(function(e){return{type:au,payload:e}}(e)),this.logger.debug(`InteractionManagerPlugin`,`DocumentClosed`,`Cleaned up interaction state for document: ${e}`)}buildCapability(){return{getActiveMode:()=>this.getActiveMode(),getActiveInteractionMode:()=>this.getActiveInteractionMode(),activate:e=>this.activate(e),activateDefaultMode:()=>this.activateDefaultMode(),setCursor:(e,t,n)=>this.setCursor(e,t,n),getCurrentCursor:()=>this.getCurrentCursor(),removeCursor:e=>this.removeCursor(e),getHandlersForScope:e=>this.getHandlersForScope(e),activeModeIsExclusive:()=>this.activeModeIsExclusive(),pause:()=>this.pause(),resume:()=>this.resume(),isPaused:()=>this.registry.isDestroyed()||this.isPaused(),getState:()=>this.getDocumentStateOrThrow(),forDocument:e=>this.createInteractionScope(e),registerMode:e=>this.registerMode(e),registerHandlers:e=>this.registerHandlers(e),registerAlways:e=>this.registerAlways(e),setDefaultMode:e=>this.setDefaultMode(e),getDefaultMode:()=>this.state.defaultMode,getExclusionRules:()=>this.state.exclusionRules,setExclusionRules:e=>this.dispatch(_u(e)),addExclusionClass:e=>this.dispatch(function(e){return{type:fu,payload:{className:e}}}(e)),removeExclusionClass:e=>this.dispatch(function(e){return{type:pu,payload:{className:e}}}(e)),addExclusionAttribute:e=>this.dispatch(function(e){return{type:mu,payload:{attribute:e}}}(e)),removeExclusionAttribute:e=>this.dispatch(function(e){return{type:hu,payload:{attribute:e}}}(e)),onModeChange:this.onModeChange$.on,onCursorChange:this.onCursorChange$.on,onHandlerChange:this.onHandlerChange$.on,onStateChange:this.onStateChange$.on}}createInteractionScope(e){return{getActiveMode:()=>this.getActiveMode(e),getActiveInteractionMode:()=>this.getActiveInteractionMode(e),activate:t=>this.activate(t,e),activateDefaultMode:()=>this.activateDefaultMode(e),setCursor:(t,n,r)=>this.setCursor(t,n,r,e),getCurrentCursor:()=>this.getCurrentCursor(e),removeCursor:t=>this.removeCursor(t,e),getHandlersForScope:e=>this.getHandlersForScope(e),activeModeIsExclusive:()=>this.activeModeIsExclusive(e),pause:()=>this.pause(e),resume:()=>this.resume(e),isPaused:()=>this.isPaused(e),getState:()=>this.getDocumentStateOrThrow(e),onModeChange:t=>this.onModeChange$.on(n=>{n.documentId===e&&t(n.activeMode)}),onCursorChange:t=>this.onCursorChange$.on(n=>{n.documentId===e&&t(n.cursor)}),onStateChange:t=>this.onStateChange$.on(n=>{n.documentId===e&&t(n.state)})}}getDocumentState(e){let t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){let t=this.getDocumentState(e);if(!t)throw Error(`Interaction state not found for document: ${e??`active`}`);return t}activate(e,t){var n;let r=t??this.getActiveDocumentId(),i=this.getDocumentStateOrThrow(r);if(!this.modes.has(e))throw Error(`[interaction] unknown mode '${e}'`);if(e===i.activeMode)return;let a=i.activeMode;(n=this.cursorClaims.get(r))==null||n.clear(),this.notifyHandlersInactive(r,a),this.dispatch(function(e,t){return{type:ou,payload:{documentId:e,mode:t}}}(r,e)),this.emitCursor(r),this.notifyHandlersActive(r,e),this.onModeChange$.emit({documentId:r,activeMode:e,previousMode:a})}activateDefaultMode(e){let t=e??this.getActiveDocumentId();this.activate(this.state.defaultMode,t)}setDefaultMode(e){if(!this.modes.has(e))throw Error(`[interaction] cannot set unknown mode '${e}' as default`);this.dispatch(gu(e))}getActiveMode(e){return this.getDocumentStateOrThrow(e).activeMode}getActiveInteractionMode(e){let t=this.getDocumentState(e);return t?this.modes.get(t.activeMode)??null:null}activeModeIsExclusive(e){return!!this.getActiveInteractionMode(e)?.exclusive}pause(e){let t=e??this.getActiveDocumentId();this.dispatch(function(e){return{type:su,payload:e}}(t))}resume(e){let t=e??this.getActiveDocumentId();this.dispatch(function(e){return{type:cu,payload:e}}(t))}isPaused(e){return this.getDocumentStateOrThrow(e).paused}registerMode(e){this.modes.set(e.id,e);for(let t of this.buckets.keys()){let n=this.buckets.get(t);n.has(e.id)||n.set(e.id,{global:new Set,page:new Map})}}registerHandlers({documentId:e,modeId:t,handlers:n,pageIndex:r}){let i=Array.isArray(t)?t:[t],a=[],o=this.buckets.get(e);if(!o)throw Error(`No buckets found for document: ${e}`);for(let e of i){let t=o.get(e);if(!t)throw Error(`unknown mode '${e}'`);if(r==null)t.global.add(n);else{let e=t.page.get(r)??new Set;e.add(n),t.page.set(r,e)}a.push(()=>{if(r==null)t.global.delete(n);else{let e=t.page.get(r);e&&(e.delete(n),e.size===0&&t.page.delete(r))}})}return this.onHandlerChange$.emit({...this.state}),()=>{a.forEach(e=>e()),this.onHandlerChange$.emit({...this.state})}}registerAlways({scope:e,handlers:t}){if(e.type===`global`){let n=this.alwaysGlobal.get(e.documentId)??new Set;return n.add(t),this.alwaysGlobal.set(e.documentId,n),this.onHandlerChange$.emit({...this.state}),()=>{n.delete(t),this.onHandlerChange$.emit({...this.state})}}let n=this.alwaysPage.get(e.documentId)??new Map,r=n.get(e.pageIndex)??new Set;return r.add(t),n.set(e.pageIndex,r),this.alwaysPage.set(e.documentId,n),this.onHandlerChange$.emit({...this.state}),()=>{r.delete(t),this.onHandlerChange$.emit({...this.state})}}getHandlersForScope(e){let t=this.getDocumentState(e.documentId);if(!t)return null;let n=this.modes.get(t.activeMode);if(!n)return null;let r=this.buckets.get(e.documentId);if(!r)return null;let i=r.get(n.id);if(!i)return null;let a=(e,t)=>e.size||t.size?function(e){let t=[`onPointerDown`,`onPointerUp`,`onPointerMove`,`onPointerEnter`,`onPointerLeave`,`onPointerCancel`,`onMouseDown`,`onMouseUp`,`onMouseMove`,`onMouseEnter`,`onMouseLeave`,`onMouseCancel`,`onClick`,`onDoubleClick`],n={};for(let r of t)n[r]=(t,n,i)=>{var a;for(let o of e)(a=o[r])==null||a.call(o,t,n,i)};return n}([...e,...t]):null;return e.type===`global`?a(this.alwaysGlobal.get(e.documentId)??new Set,n.scope===`global`?i.global:new Set):a(this.alwaysPage.get(e.documentId)?.get(e.pageIndex)??new Set,n.scope===`page`?i.page.get(e.pageIndex)??new Set:new Set)}setCursor(e,t,n=0,r){let i=r??this.getActiveDocumentId(),a=this.cursorClaims.get(i);a&&(a.set(e,{cursor:t,priority:n}),this.emitCursor(i))}removeCursor(e,t){let n=t??this.getActiveDocumentId(),r=this.cursorClaims.get(n);r&&(r.delete(e),this.emitCursor(n))}getCurrentCursor(e){return this.getDocumentStateOrThrow(e).cursor}emitCursor(e){let t=this.cursorClaims.get(e);if(!t)return;let n=this.getDocumentState(e);if(!n)return;let r=[...t.values()].sort((e,t)=>t.priority-e.priority)[0]??{cursor:this.modes.get(n.activeMode)?.cursor??`auto`};r.cursor!==n.cursor&&(this.dispatch(function(e,t){return{type:lu,payload:{documentId:e,cursor:t}}}(e,r.cursor)),this.onCursorChange$.emit({documentId:e,cursor:r.cursor}))}notifyHandlersActive(e,t){var n,r;(n=this.alwaysGlobal.get(e))==null||n.forEach(e=>{var n;(n=e.onHandlerActiveStart)==null||n.call(e,t)}),(r=this.alwaysPage.get(e))==null||r.forEach(e=>{e.forEach(e=>{var n;(n=e.onHandlerActiveStart)==null||n.call(e,t)})});let i=this.modes.get(t);if(!i)return;let a=this.buckets.get(e);if(!a)return;let o=a.get(t);o&&(i.scope===`global`&&o.global.forEach(e=>{var n;(n=e.onHandlerActiveStart)==null||n.call(e,t)}),i.scope===`page`&&o.page.forEach(e=>{e.forEach(e=>{var n;(n=e.onHandlerActiveStart)==null||n.call(e,t)})}))}notifyHandlersInactive(e,t){var n,r;(n=this.alwaysGlobal.get(e))==null||n.forEach(e=>{var n;(n=e.onHandlerActiveEnd)==null||n.call(e,t)}),(r=this.alwaysPage.get(e))==null||r.forEach(e=>{e.forEach(e=>{var n;(n=e.onHandlerActiveEnd)==null||n.call(e,t)})});let i=this.modes.get(t);if(!i)return;let a=this.buckets.get(e);if(!a)return;let o=a.get(t);o&&(i.scope===`global`&&o.global.forEach(e=>{var n;(n=e.onHandlerActiveEnd)==null||n.call(e,t)}),i.scope===`page`&&o.page.forEach(e=>{e.forEach(e=>{var n;(n=e.onHandlerActiveEnd)==null||n.call(e,t)})}))}onStoreUpdated(e,t){for(let n in t.documents){let r=e.documents[n],i=t.documents[n];r!==i&&this.onStateChange$.emit({documentId:n,state:i})}}async initialize(e){this.logger.info(`InteractionManagerPlugin`,`Initialize`,`Interaction Manager Plugin initialized`)}async destroy(){this.onModeChange$.clear(),this.onCursorChange$.clear(),this.onHandlerChange$.clear(),this.onStateChange$.clear(),await super.destroy()}};yu.id=`interaction-manager`;var bu=yu,xu=`interaction-manager`,Su=`pointerMode`,Cu={activeMode:Su,cursor:`auto`,paused:!1},wu={defaultMode:Su,exclusionRules:{classes:[],dataAttributes:[`data-no-interaction`]},documents:{},activeDocumentId:null},Tu={manifest:{id:xu,name:`Interaction Manager Plugin`,version:`1.0.0`,provides:[`interaction-manager`],requires:[],optional:[],defaultConfig:{exclusionRules:{classes:[],dataAttributes:[`data-no-interaction`]}}},create:(e,t)=>new bu(xu,e,t),reducer:(e=wu,t)=>{switch(t.type){case iu:{let{documentId:n,state:r}=t.payload;return{...e,documents:{...e.documents,[n]:r},activeDocumentId:e.activeDocumentId??n}}case au:{let n=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case`INTERACTION/SET_ACTIVE_DOCUMENT`:return{...e,activeDocumentId:t.payload};case ou:{let{documentId:n,mode:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,activeMode:r}}}:e}case lu:{let{documentId:n,cursor:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,cursor:r}}}:e}case su:{let n=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,paused:!0}}}:e}case cu:{let n=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,paused:!1}}}:e}case uu:return{...e,defaultMode:t.payload.mode};case du:return{...e,exclusionRules:t.payload.rules};case fu:return{...e,exclusionRules:{...e.exclusionRules,classes:[...e.exclusionRules.classes||[],t.payload.className].filter((e,t,n)=>n.indexOf(e)===t)}};case pu:return{...e,exclusionRules:{...e.exclusionRules,classes:(e.exclusionRules.classes||[]).filter(e=>e!==t.payload.className)}};case mu:return{...e,exclusionRules:{...e.exclusionRules,dataAttributes:[...e.exclusionRules.dataAttributes||[],t.payload.attribute].filter((e,t,n)=>n.indexOf(e)===t)}};case hu:return{...e,exclusionRules:{...e.exclusionRules,dataAttributes:(e.exclusionRules.dataAttributes||[]).filter(e=>e!==t.payload.attribute)}};default:return e}},initialState:wu},Eu=()=>Cr(bu.id),Du={pointerdown:`onPointerDown`,pointerup:`onPointerUp`,pointermove:`onPointerMove`,pointerenter:`onPointerEnter`,pointerleave:`onPointerLeave`,pointercancel:`onPointerCancel`,mousedown:`onMouseDown`,mouseup:`onMouseUp`,mousemove:`onMouseMove`,mouseenter:`onMouseEnter`,mouseleave:`onMouseLeave`,mousecancel:`onMouseCancel`,click:`onClick`,dblclick:`onDoubleClick`,touchstart:`onPointerDown`,touchend:`onPointerUp`,touchmove:`onPointerMove`,touchcancel:`onPointerCancel`},Ou=[`pointerdown`,`pointerup`,`pointermove`,`pointerenter`,`pointerleave`,`pointercancel`,`mousedown`,`mouseup`,`mousemove`,`mouseenter`,`mouseleave`,`mousecancel`,`click`,`dblclick`],ku=typeof PointerEvent<`u`?Ou:[...Ou,`touchstart`,`touchend`,`touchmove`,`touchcancel`];function Au(e){return typeof TouchEvent<`u`&&e instanceof TouchEvent}function ju(e,t,n,r){let i=e.forDocument(t.documentId),a=e.getHandlersForScope(t),o=()=>!1!==i.getActiveInteractionMode()?.wantsRawTouch,s={},c=o(),l=e=>{ku.forEach(t=>{let r=s[t]??(s[t]=_);var i;n.addEventListener(t,r,(i=e,t.startsWith(`touch`)?{passive:!i}:{passive:!1}))})},u=()=>{ku.forEach(e=>{let t=s[e];t&&n.removeEventListener(e,t)})};l(c),n.style.touchAction=c?`none`:``;let d=i.onModeChange(()=>{if(t.type===`global`){let e=i.getActiveInteractionMode();n.style.cursor=e?.scope===`global`?e.cursor??`auto`:`auto`}a=e.getHandlersForScope(t);let r=o();r!==c&&(u(),l(r),c=r,n.style.touchAction=c?`none`:``)}),f=e.onHandlerChange(()=>{a=e.getHandlersForScope(t)}),p=i.getActiveInteractionMode(),m=i.getCurrentCursor();n.style.cursor=t.type===`global`&&p?.scope!==`global`?`auto`:m;let h=i.onCursorChange(e=>{t.type===`global`&&i.getActiveInteractionMode()?.scope!==`global`||(n.style.cursor=e)}),g=(e,t)=>{if(r)return r(e,t);let n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}};function _(t){var r;if(e.isPaused())return;let o=e.getExclusionRules();if(t.target&&function(e,t){if(!e)return!1;let n=e;for(;n;){if(t.classes?.length){for(let e of t.classes)if(n.classList?.contains(e))return!0}if(t.dataAttributes?.length){for(let e of t.dataAttributes)if(n.hasAttribute(e))return!0}n=n.parentElement}return!1}(t.target,o))return;let s=Du[t.type];if(!s||!a?.[s])return;let l,u;if(Au(t)&&c&&(t.type===`touchmove`||t.type===`touchcancel`)&&t.preventDefault(),Au(t)){let e=t.type===`touchend`||t.type===`touchcancel`?t.changedTouches[0]:t.touches[0];if(!e)return;l=g(e,n),u={clientX:e.clientX,clientY:e.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,target:t.target,currentTarget:t.currentTarget,setPointerCapture:()=>{},releasePointerCapture:()=>{}}}else{let e=t;l=g(e,n),u={clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,target:e.target,currentTarget:e.currentTarget,setPointerCapture:()=>{var t,n;(n=(t=e.target)?.setPointerCapture)==null||n.call(t,e.pointerId)},releasePointerCapture:()=>{var t,n;(n=(t=e.target)?.releasePointerCapture)==null||n.call(t,e.pointerId)}}}(r=a[s])==null||r.call(a,l,u,i.getActiveMode())}return()=>{u(),d(),h(),f()}}var Mu=({children:e,documentId:t,style:n,...r})=>{let i=R(null),{provides:a}=Eu();return L(()=>{if(a&&i.current)return ju(a,{type:`global`,documentId:t},i.current)},[a,t]),V(`div`,{ref:i,style:{width:`100%`,height:`100%`,...n},...r,children:e})},Nu=({documentId:e,pageIndex:t,children:n,rotation:r,scale:i,convertEventToPoint:a,style:o,...s})=>{let c=R(null),{provides:l}=Eu(),u=function(e){let{provides:t}=Eu(),[n,r]=I(()=>{if(!t)return!1;let n=t.forDocument(e).getActiveInteractionMode();return n?.scope===`page`&&!!n.exclusive});return L(()=>{if(!t)return;let n=t.forDocument(e);return n.onModeChange(()=>{let e=n.getActiveInteractionMode();r(e?.scope===`page`&&!!e?.exclusive)})},[t,e]),n}(e),d=Tr(e),f=d?.document?.pages?.[t]?.size??{width:0,height:0},p=r??d?.rotation??0,m=i??d?.scale??1,h=dt(f,0,m),g=B((e,t)=>{let n=t.getBoundingClientRect(),r={x:e.clientX-n.left,y:e.clientY-n.top};return function(e,t,n,r){return ht(mt(e,t,(4-n)%4),1/r)}(dt({width:h.width,height:h.height},p,1),r,p,m)},[f,p,m]);return L(()=>{if(l&&c.current)return ju(l,{type:`page`,documentId:e,pageIndex:t},c.current,a||g)},[l,e,t,a,g]),V(`div`,{ref:c,style:{position:`relative`,width:h.width,height:h.height,...o},...s,children:[n,u&&V(`div`,{style:{position:`absolute`,top:0,left:0,right:0,bottom:0,zIndex:10}})]})},Pu={},Fu=()=>Cr(Zl.id),Iu=e=>{let{provides:t}=Fu(),[n,r]=I((t?.forDocument(e))?.getState()??{pages:{},byUid:{},selectedUid:null,activeToolId:null,hasPendingChanges:!1});return L(()=>{if(!t)return;let n=t.forDocument(e);return r(n.getState()),n.onStateChange(e=>{r(e)})},[t,e]),{state:n,provides:t?.forDocument(e)??null}};function Lu({scale:e,documentId:t,pageIndex:n,rotation:r,pageWidth:i,pageHeight:a,trackedAnnotation:o,children:s,isSelected:c,isDraggable:l,isResizable:u,lockAspectRatio:d=!1,style:f={},vertexConfig:p,selectionMenu:m,outlineOffset:h=1,onDoubleClick:g,onSelect:_,zIndex:v=1,resizeUI:y,vertexUI:b,selectionOutlineColor:x=`#007ACC`,customAnnotationRenderer:S,...C}){let[w,T]=I(o.object),{provides:E}=Fu(),D=R(null),O=z(()=>E?E.forDocument(t):null,[E,t]),k=w?{...o.object,...w}:o.object,A=y?.color??`#007ACC`,ee=b?.color??`#007ACC`,j=y?.size??12,M=b?.size??12,{dragProps:N,vertices:te,resize:ne}=ic({controller:{element:k.rect,vertices:p?.extractVertices(k),constraints:{minWidth:10,minHeight:10,boundingBox:{width:i,height:a}},maintainAspectRatio:d,pageRotation:r,scale:e,enabled:c,onUpdate:e=>{if(!e.transformData?.type)return;e.state===`start`&&(D.current=k);let t=e.transformData.type,r=D.current??k,i=e.transformData.changes.vertices?p?.transformAnnotation(r,e.transformData.changes.vertices):{rect:e.transformData.changes.rect},a=E?.transformAnnotation(r,{type:t,changes:i,metadata:e.transformData.metadata});a&&T(e=>({...e,...a})),e.state===`end`&&a&&(D.current=null,O?.updateAnnotation(n,o.object.id,a))}},resizeUI:{handleSize:j,spacing:h,offsetMode:`outside`,includeSides:!d,zIndex:v+1},vertexUI:{vertexSize:M,zIndex:v+2},includeVertices:!!p}),re=function(e,{delay:t=300,tolerancePx:n=18}={}){let r=R({t:0,x:0,y:0}),i=B(i=>{if(!e||i.pointerType===`mouse`||!1===i.isPrimary)return;let a=performance.now(),o=i.clientX,s=i.clientY,c=a-r.current.t<=t,l=o-r.current.x,u=s-r.current.y;c&&l*l+u*u<=n*n&&e?.(i),r.current={t:a,x:o,y:s}},[e,t,n]),a=B(t=>{e?.(t)},[e]);return e?{[$s]:a,onPointerUpCapture:i}:{}}(g);return L(()=>{T(o.object)},[o.object]),V(`div`,{"data-no-interaction":!0,children:[V(`div`,{...l&&c?N:{},...re,style:{position:`absolute`,left:k.rect.origin.x*e,top:k.rect.origin.y*e,width:k.rect.size.width*e,height:k.rect.size.height*e,outline:c?`1px solid ${x}`:`none`,outlineOffset:c?`${h}px`:`0px`,pointerEvents:c?`auto`:`none`,touchAction:`none`,cursor:c&&l?`move`:`default`,zIndex:v,...f},...C,children:[(()=>{let t=typeof s==`function`?s(k):s;return S?.({annotation:k,children:t,isSelected:c,scale:e,rotation:r,pageWidth:i,pageHeight:a,pageIndex:n,onSelect:_})??t})(),c&&u&&ne.map(({key:e,...t})=>y?.component?y.component({key:e,...t,backgroundColor:A}):V(`div`,{...t,style:{...t.style,backgroundColor:A}},e)),c&&te.map(({key:e,...t})=>b?.component?b.component({key:e,...t,backgroundColor:ee}):V(`div`,{...t,style:{...t.style,backgroundColor:ee}},e))]}),m&&V(ec,{rect:{origin:{x:k.rect.origin.x*e,y:k.rect.origin.y*e},size:{width:k.rect.size.width*e,height:k.rect.size.height*e}},rotation:r,children:e=>m({...e,context:{type:`annotation`,annotation:o,pageIndex:n},selected:c,placement:{suggestTop:!1}})})]})}function Ru({color:e=`#FFFF00`,opacity:t=.5,segmentRects:n,rect:r,scale:i,onClick:a,style:o}){return V(F,{children:n.map((n,s)=>V(`div`,{onPointerDown:a,onTouchStart:a,style:{position:`absolute`,left:(r?n.origin.x-r.origin.x:n.origin.x)*i,top:(r?n.origin.y-r.origin.y:n.origin.y)*i,width:n.size.width*i,height:n.size.height*i,background:e,opacity:t,pointerEvents:a?`auto`:`none`,cursor:a?`pointer`:`default`,zIndex:a?1:void 0,...o}},s))})}function zu({color:e=`#FFFF00`,opacity:t=.5,segmentRects:n,rect:r,scale:i,onClick:a,style:o}){let s=2*i;return V(F,{children:n.map((n,c)=>V(`div`,{onPointerDown:a,onTouchStart:a,style:{position:`absolute`,left:(r?n.origin.x-r.origin.x:n.origin.x)*i,top:(r?n.origin.y-r.origin.y:n.origin.y)*i,width:n.size.width*i,height:n.size.height*i,background:`transparent`,pointerEvents:a?`auto`:`none`,cursor:a?`pointer`:`default`,zIndex:a?1:0,...o},children:V(`div`,{style:{position:`absolute`,left:0,bottom:0,width:`100%`,height:s,background:e,opacity:t,pointerEvents:`none`}})},c))})}function Bu({color:e=`#FFFF00`,opacity:t=.5,segmentRects:n,rect:r,scale:i,onClick:a,style:o}){let s=2*i;return V(F,{children:n.map((n,c)=>V(`div`,{onPointerDown:a,onTouchStart:a,style:{position:`absolute`,left:(r?n.origin.x-r.origin.x:n.origin.x)*i,top:(r?n.origin.y-r.origin.y:n.origin.y)*i,width:n.size.width*i,height:n.size.height*i,background:`transparent`,pointerEvents:a?`auto`:`none`,cursor:a?`pointer`:`default`,zIndex:a?1:0,...o},children:V(`div`,{style:{position:`absolute`,left:0,top:`50%`,width:`100%`,height:s,background:e,opacity:t,transform:`translateY(-50%)`,pointerEvents:`none`}})},c))})}function Vu({color:e=`#FFFF00`,opacity:t=.5,segmentRects:n,rect:r,scale:i,onClick:a,style:o}){let s=2*i,c=6*i,l=`url("data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="${c}" height="${2*s}" viewBox="0 0 ${c} ${2*s}">\n      <path d="M0 ${s} Q ${c/4} 0 ${c/2} ${s} T ${c} ${s}"\n            fill="none" stroke="${e}" stroke-width="${s}" stroke-linecap="round"/>\n    </svg>`)}")`;return V(F,{children:n.map((e,n)=>V(`div`,{onPointerDown:a,onTouchStart:a,style:{position:`absolute`,left:(r?e.origin.x-r.origin.x:e.origin.x)*i,top:(r?e.origin.y-r.origin.y:e.origin.y)*i,width:e.size.width*i,height:e.size.height*i,background:`transparent`,pointerEvents:a?`auto`:`none`,cursor:a?`pointer`:`default`,zIndex:a?1:0,...o},children:V(`div`,{style:{position:`absolute`,left:0,bottom:0,width:`100%`,height:2*s,backgroundImage:l,backgroundRepeat:`repeat-x`,backgroundSize:`${c}px ${2*s}px`,opacity:t,pointerEvents:`none`}})},n))})}function Hu({isSelected:e,color:t=`#000000`,opacity:n=1,strokeWidth:r,inkList:i,rect:a,scale:o,onClick:s}){let c=z(()=>i.map(({points:e})=>{let t=``;return e.forEach(({x:e,y:n},r)=>{let i=e-a.origin.x,o=n-a.origin.y;t+=(r===0?`M`:`L`)+i+` `+o+` `}),t.trim()}),[i,a]),l=a.size.width*o,u=a.size.height*o;return V(`svg`,{style:{position:`absolute`,width:l,height:u,pointerEvents:`none`,zIndex:2,overflow:`visible`},width:l,height:u,viewBox:`0 0 ${a.size.width} ${a.size.height}`,children:c.map((i,a)=>V(`path`,{d:i,fill:`none`,opacity:n,onPointerDown:s,onTouchStart:s,style:{cursor:e?`move`:`pointer`,pointerEvents:e?`none`:`visibleStroke`,stroke:t,strokeWidth:r,strokeLinecap:`round`,strokeLinejoin:`round`}},a))})}function Uu({isSelected:e,color:t=`#000000`,strokeColor:n,opacity:r=1,strokeWidth:i,strokeStyle:a=G.SOLID,strokeDashArray:o,rect:s,scale:c,onClick:l}){let{width:u,height:d,x:f,y:p}=z(()=>{let e=s.size.width,t=s.size.height;return{width:Math.max(e-i,0),height:Math.max(t-i,0),x:i/2,y:i/2}},[s,i]),m=(u+i)*c,h=(d+i)*c;return V(`svg`,{style:{position:`absolute`,width:m,height:h,pointerEvents:`none`,zIndex:2},width:m,height:h,viewBox:`0 0 ${u+i} ${d+i}`,children:V(`rect`,{x:f,y:p,width:u,height:d,fill:t,opacity:r,onPointerDown:l,onTouchStart:l,style:{cursor:e?`move`:`pointer`,pointerEvents:e?`none`:t===`transparent`?`visibleStroke`:`visible`,stroke:n??t,strokeWidth:i,...a===G.DASHED&&{strokeDasharray:o?.join(`,`)}}})})}function Wu({color:e=`#000000`,strokeColor:t,opacity:n=1,strokeWidth:r,strokeStyle:i=G.SOLID,strokeDashArray:a,rect:o,scale:s,onClick:c,isSelected:l}){let{width:u,height:d,cx:f,cy:p,rx:m,ry:h}=z(()=>{let e=o.size.width,t=o.size.height,n=Math.max(e-r,0),i=Math.max(t-r,0);return{width:e,height:t,cx:r/2+n/2,cy:r/2+i/2,rx:n/2,ry:i/2}},[o,r]),g=u*s,_=d*s;return V(`svg`,{style:{position:`absolute`,width:g,height:_,pointerEvents:`none`,zIndex:2},width:g,height:_,viewBox:`0 0 ${u} ${d}`,children:V(`ellipse`,{cx:f,cy:p,rx:m,ry:h,fill:e,opacity:n,onPointerDown:c,onTouchStart:c,style:{cursor:l?`move`:`pointer`,pointerEvents:l?`none`:e===`transparent`?`visibleStroke`:`visible`,stroke:t??e,strokeWidth:r,...i===G.DASHED&&{strokeDasharray:a?.join(`,`)}}})})}function Gu({color:e=`transparent`,opacity:t=1,strokeWidth:n,strokeColor:r=`#000000`,strokeStyle:i=G.SOLID,strokeDashArray:a,rect:o,linePoints:s,lineEndings:c,scale:l,onClick:u,isSelected:d}){let{x1:f,y1:p,x2:m,y2:h}=z(()=>({x1:s.start.x-o.origin.x,y1:s.start.y-o.origin.y,x2:s.end.x-o.origin.x,y2:s.end.y-o.origin.y}),[s,o]),g=z(()=>{let e=Math.atan2(h-p,m-f);return{start:zl.createEnding(c?.start,n,e+Math.PI,f,p),end:zl.createEnding(c?.end,n,e,m,h)}},[c,n,f,p,m,h]),_=o.size.width*l,v=o.size.height*l;return V(`svg`,{style:{position:`absolute`,width:_,height:v,pointerEvents:`none`,zIndex:2,overflow:`visible`},width:_,height:v,viewBox:`0 0 ${o.size.width} ${o.size.height}`,children:[V(`line`,{x1:f,y1:p,x2:m,y2:h,opacity:t,onPointerDown:u,onTouchStart:u,style:{cursor:d?`move`:`pointer`,pointerEvents:d?`none`:`visibleStroke`,stroke:r,strokeWidth:n,strokeLinecap:`butt`,...i===G.DASHED&&{strokeDasharray:a?.join(`,`)}}}),g.start&&V(`path`,{d:g.start.d,transform:g.start.transform,onPointerDown:u,onTouchStart:u,stroke:r,style:{cursor:d?`move`:`pointer`,strokeWidth:n,strokeLinecap:`butt`,pointerEvents:d?`none`:g.start.filled?`visible`:`visibleStroke`,...i===G.DASHED&&{strokeDasharray:a?.join(`,`)}},fill:g.start.filled?e:`none`}),g.end&&V(`path`,{d:g.end.d,transform:g.end.transform,stroke:r,onPointerDown:u,onTouchStart:u,style:{cursor:d?`move`:`pointer`,strokeWidth:n,strokeLinecap:`butt`,pointerEvents:d?`none`:g.end.filled?`visible`:`visibleStroke`,...i===G.DASHED&&{strokeDasharray:a?.join(`,`)}},fill:g.end.filled?e:`none`})]})}function Ku({rect:e,vertices:t,color:n=`transparent`,strokeColor:r=`#000000`,opacity:i=1,strokeWidth:a,scale:o,isSelected:s,onClick:c,lineEndings:l}){let u=z(()=>t.map(({x:t,y:n})=>({x:t-e.origin.x,y:n-e.origin.y})),[t,e]),d=z(()=>{if(!u.length)return``;let[e,...t]=u;return`M ${e.x} ${e.y} `+t.map(e=>`L ${e.x} ${e.y} `).join(``).trim()},[u]),f=z(()=>{if(u.length<2)return{start:null,end:null};let e=(e,t)=>Math.atan2(t.y-e.y,t.x-e.x),t=e(u[0],u[1]),n=e(u[u.length-2],u[u.length-1]);return{start:zl.createEnding(l?.start,a,t+Math.PI,u[0].x,u[0].y),end:zl.createEnding(l?.end,a,n,u[u.length-1].x,u[u.length-1].y)}},[u,l,a]),p=e.size.width*o,m=e.size.height*o;return V(`svg`,{style:{position:`absolute`,width:p,height:m,pointerEvents:`none`,zIndex:2,overflow:`visible`},width:p,height:m,viewBox:`0 0 ${e.size.width} ${e.size.height}`,children:[V(`path`,{d,onPointerDown:c,onTouchStart:c,opacity:i,style:{fill:`none`,stroke:r??n,strokeWidth:a,cursor:s?`move`:`pointer`,pointerEvents:s?`none`:`visibleStroke`,strokeLinecap:`butt`,strokeLinejoin:`miter`}}),f.start&&V(`path`,{d:f.start.d,transform:f.start.transform,stroke:r,fill:f.start.filled?n:`none`,onPointerDown:c,onTouchStart:c,style:{cursor:s?`move`:`pointer`,strokeWidth:a,pointerEvents:s?`none`:f.start.filled?`visible`:`visibleStroke`,strokeLinecap:`butt`}}),f.end&&V(`path`,{d:f.end.d,transform:f.end.transform,stroke:r,fill:f.end.filled?n:`none`,onPointerDown:c,onTouchStart:c,style:{cursor:s?`move`:`pointer`,strokeWidth:a,pointerEvents:s?`none`:f.end.filled?`visible`:`visibleStroke`,strokeLinecap:`butt`}})]})}function qu({rect:e,vertices:t,color:n=`transparent`,strokeColor:r=`#000000`,opacity:i=1,strokeWidth:a,strokeStyle:o=G.SOLID,strokeDashArray:s,scale:c,isSelected:l,onClick:u,currentVertex:d,handleSize:f=14}){let p=d?[...t,d]:t,m=z(()=>p.map(({x:t,y:n})=>({x:t-e.origin.x,y:n-e.origin.y})),[p,e]),h=z(()=>{if(!m.length)return``;let[e,...t]=m,n=!!d;return(`M ${e.x} ${e.y} `+t.map(e=>`L ${e.x} ${e.y}`).join(` `)+(n?``:` Z`)).trim()},[m,d]),g=d&&t.length>0,_=e.size.width*c,v=e.size.height*c;return V(`svg`,{style:{position:`absolute`,width:_,height:v,pointerEvents:`none`,zIndex:2,overflow:`visible`},width:_,height:v,viewBox:`0 0 ${e.size.width} ${e.size.height}`,children:[V(`path`,{d:h,onPointerDown:u,onTouchStart:u,opacity:i,style:{fill:d?`none`:n,stroke:r??n,strokeWidth:a,cursor:l?`move`:`pointer`,pointerEvents:l?`none`:n===`transparent`?`visibleStroke`:`visible`,strokeLinecap:`butt`,strokeLinejoin:`miter`,...o===G.DASHED&&{strokeDasharray:s?.join(`,`)}}}),g&&t.length>1&&V(`path`,{d:`M ${m[m.length-1].x} ${m[m.length-1].y} L ${m[0].x} ${m[0].y}`,fill:`none`,style:{stroke:r,strokeWidth:a,strokeDasharray:`4,4`,opacity:.7}}),g&&t.length>=2&&V(`rect`,{x:m[0].x-f/c/2,y:m[0].y-f/c/2,width:f/c,height:f/c,fill:r,opacity:.4,stroke:r,strokeWidth:a/2})]})}function Ju({isSelected:e,isEditing:t,annotation:n,pageIndex:r,scale:i,onClick:a}){let o=R(null),{provides:s}=Fu(),[c,l]=I(!1);L(()=>{if(t&&o.current){let e=o.current;e.focus();let t=window.getSelection();if(t){let n=document.createRange();n.selectNodeContents(e),n.collapse(!1),t.removeAllRanges(),t.addRange(n)}}},[t]),Ye(()=>{try{let e=navigator;l(/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform===`MacIntel`&&e?.maxTouchPoints>1)}catch{l(!1)}},[]);let u=n.object.fontSize*i,d=c&&t&&u>0&&u<16,f=d?16:u,p=d?u/16:1,m=d?100/p:100;return V(`div`,{style:{position:`absolute`,width:n.object.rect.size.width*i,height:n.object.rect.size.height*i,cursor:e&&!t?`move`:`default`,pointerEvents:e&&!t?`none`:`auto`,zIndex:2},onPointerDown:a,onTouchStart:a,children:V(`span`,{ref:o,onBlur:()=>{s&&o.current&&s.updateAnnotation(r,n.object.id,{contents:o.current.innerText})},tabIndex:0,style:{color:n.object.fontColor,fontSize:f,fontFamily:(h=n.object.fontFamily,gn(h).css),textAlign:ln(n.object.textAlign),flexDirection:`column`,justifyContent:n.object.verticalAlign===zt.Top?`flex-start`:n.object.verticalAlign===zt.Middle?`center`:`flex-end`,display:`flex`,backgroundColor:n.object.backgroundColor,opacity:n.object.opacity,width:d?`${m}%`:`100%`,height:d?`${m}%`:`100%`,lineHeight:`1.18`,overflow:`hidden`,cursor:t?`text`:`pointer`,outline:`none`,transform:d?`scale(${p})`:void 0,transformOrigin:`top left`},contentEditable:t,...Pu,children:n.object.contents})});var h}function Yu({documentId:e,pageIndex:t,annotation:n,scaleFactor:r=1,style:i,...a}){let{provides:o}=Fu(),[s,c]=I(null),l=R(null),{width:u,height:d}=n.rect.size;return L(()=>{if(o){let i=o.forDocument(e).renderAnnotation({pageIndex:t,annotation:n,options:{scaleFactor:r,dpr:window.devicePixelRatio}});return i.wait(e=>{let t=URL.createObjectURL(e);c(t),l.current=t},jn),()=>{l.current?(URL.revokeObjectURL(l.current),l.current=null):i.abort({code:K.Cancelled,message:`canceled render task`})}}},[t,r,o,e,n.id,u,d]),V(F,{children:s&&V(`img`,{src:s,onLoad:()=>{l.current&&=(URL.revokeObjectURL(l.current),null)},...a,style:{width:`100%`,height:`100%`,display:`block`,...i||{}}})})}function Xu({isSelected:e,annotation:t,documentId:n,pageIndex:r,scale:i,onClick:a}){return V(`div`,{style:{position:`absolute`,width:`100%`,height:`100%`,zIndex:2,pointerEvents:e?`none`:`auto`,cursor:`pointer`},onPointerDown:a,onTouchStart:a,children:V(Yu,{documentId:n,pageIndex:r,annotation:{...t.object,id:t.object.id},scaleFactor:i})})}function Zu(e){let{documentId:t,pageIndex:n,scale:r,selectionMenu:i}=e,{provides:a}=Fu(),{provides:o}=ac(),[s,c]=I([]),{register:l}=function({modeId:e,pageIndex:t,documentId:n}){let{provides:r}=Eu();return{register:(i,a)=>{let o=a?.modeId??e,s=a?.pageIndex??t,c=a?.documentId??n;return o?r?.registerHandlers({modeId:o,handlers:i,pageIndex:s,documentId:c}):r?.registerAlways({scope:s===void 0?{type:`global`,documentId:c}:{type:`page`,documentId:c,pageIndex:s},handlers:i})}}}({documentId:t,pageIndex:n}),[u,d]=I(null),[f,p]=I(null),m=z(()=>a?a.forDocument(t):null,[a,t]);L(()=>{if(m){let e=m.getState();return c(bl(e,n)),d(Sl(e,n)),m.onStateChange(e=>{c(bl(e,n)),d(Sl(e,n))})}},[m,n]);let h=z(()=>({onPointerDown:(e,t)=>{t.target===t.currentTarget&&m&&(m.deselectAnnotation(),p(null))}}),[m]),g=B((e,t)=>{e.stopPropagation(),m&&o&&(m.selectAnnotation(n,t.object.id),o.clear(),t.object.id!==f&&p(null))},[m,o,f,n]);return L(()=>l(h,{documentId:t}),[l,h]),V(F,{children:s.map(a=>{let o=u?.object.id===a.object.id,s=f===a.object.id,c=m?.findToolForAnnotation(a.object);return ol(a)?V(Lu,{trackedAnnotation:a,isSelected:o,isDraggable:c?.interaction.isDraggable??!0,isResizable:c?.interaction.isResizable??!0,lockAspectRatio:c?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:e=>g(e,a),style:{mixBlendMode:wn(a.object.blendMode??H.Normal)},...e,children:e=>V(Hu,{...e,isSelected:o,scale:r,onClick:e=>g(e,a)})},a.object.id):ll(a)?V(Lu,{trackedAnnotation:a,isSelected:o,isDraggable:c?.interaction.isDraggable??!0,isResizable:c?.interaction.isResizable??!0,lockAspectRatio:c?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:e=>g(e,a),style:{mixBlendMode:wn(a.object.blendMode??H.Normal)},...e,children:e=>V(Uu,{...e,isSelected:o,scale:r,onClick:e=>g(e,a)})},a.object.id):sl(a)?V(Lu,{trackedAnnotation:a,isSelected:o,isDraggable:c?.interaction.isDraggable??!0,isResizable:c?.interaction.isResizable??!0,lockAspectRatio:c?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:e=>g(e,a),style:{mixBlendMode:wn(a.object.blendMode??H.Normal)},...e,children:e=>V(Wu,{...e,isSelected:o,scale:r,onClick:e=>g(e,a)})},a.object.id):pl(a)?V(Lu,{trackedAnnotation:a,isSelected:o,isDraggable:c?.interaction.isDraggable??!1,isResizable:c?.interaction.isResizable??!1,lockAspectRatio:c?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:e=>g(e,a),zIndex:0,style:{mixBlendMode:wn(a.object.blendMode??H.Normal)},...e,children:e=>V(zu,{...e,scale:r,onClick:e=>g(e,a)})},a.object.id):ml(a)?V(Lu,{trackedAnnotation:a,isSelected:o,isDraggable:c?.interaction.isDraggable??!1,isResizable:c?.interaction.isResizable??!1,lockAspectRatio:c?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:e=>g(e,a),zIndex:0,style:{mixBlendMode:wn(a.object.blendMode??H.Normal)},...e,children:e=>V(Bu,{...e,scale:r,onClick:e=>g(e,a)})},a.object.id):hl(a)?V(Lu,{trackedAnnotation:a,isSelected:o,isDraggable:c?.interaction.isDraggable??!1,isResizable:c?.interaction.isResizable??!1,lockAspectRatio:c?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:e=>g(e,a),zIndex:0,style:{mixBlendMode:wn(a.object.blendMode??H.Normal)},...e,children:e=>V(Vu,{...e,scale:r,onClick:e=>g(e,a)})},a.object.id):fl(a)?V(Lu,{trackedAnnotation:a,isSelected:o,isDraggable:c?.interaction.isDraggable??!1,isResizable:c?.interaction.isResizable??!1,lockAspectRatio:c?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:e=>g(e,a),zIndex:0,style:{mixBlendMode:wn(a.object.blendMode??H.Multiply)},...e,children:e=>V(Ru,{...e,scale:r,onClick:e=>g(e,a)})},a.object.id):ul(a)?V(Lu,{trackedAnnotation:a,isSelected:o,isDraggable:c?.interaction.isDraggable??!0,isResizable:c?.interaction.isResizable??!1,lockAspectRatio:c?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:e=>g(e,a),vertexConfig:{extractVertices:e=>[e.linePoints.start,e.linePoints.end],transformAnnotation:(e,t)=>({...e,linePoints:{start:t[0],end:t[1]}})},style:{mixBlendMode:wn(a.object.blendMode??H.Normal)},...e,children:e=>V(F,{children:V(Gu,{...e,isSelected:o,scale:r,onClick:e=>g(e,a)})})},a.object.id):dl(a)?V(Lu,{trackedAnnotation:a,isSelected:o,isDraggable:c?.interaction.isDraggable??!0,isResizable:c?.interaction.isResizable??!1,lockAspectRatio:c?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:e=>g(e,a),vertexConfig:{extractVertices:e=>e.vertices,transformAnnotation:(e,t)=>({...e,vertices:t})},style:{mixBlendMode:wn(a.object.blendMode??H.Normal)},...e,children:e=>V(F,{children:V(Ku,{...e,isSelected:o,scale:r,onClick:e=>g(e,a)})})},a.object.id):cl(a)?V(Lu,{trackedAnnotation:a,isSelected:o,isDraggable:c?.interaction.isDraggable??!0,isResizable:c?.interaction.isResizable??!1,lockAspectRatio:c?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:e=>g(e,a),vertexConfig:{extractVertices:e=>e.vertices,transformAnnotation:(e,t)=>({...e,vertices:t})},style:{mixBlendMode:wn(a.object.blendMode??H.Normal)},...e,children:e=>V(F,{children:V(qu,{...e,isSelected:o,scale:r,onClick:e=>g(e,a)})})},a.object.id):gl(a)?V(Lu,{trackedAnnotation:a,isSelected:o,isDraggable:(c?.interaction.isDraggable??!0)&&!s,isResizable:c?.interaction.isResizable??!0,lockAspectRatio:c?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:e=>g(e,a),style:{mixBlendMode:wn(a.object.blendMode??H.Normal)},onDoubleClick:e=>{e.stopPropagation(),p(a.object.id)},...e,children:e=>V(Ju,{isSelected:o,isEditing:s,annotation:{...a,object:e},pageIndex:n,scale:r,onClick:e=>g(e,a)})},a.object.id):_l(a)?V(Lu,{trackedAnnotation:a,isSelected:o,isDraggable:c?.interaction.isDraggable??!0,isResizable:c?.interaction.isResizable??!0,lockAspectRatio:c?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:e=>g(e,a),style:{mixBlendMode:wn(a.object.blendMode??H.Normal)},...e,children:e=>V(Xu,{isSelected:o,annotation:a,documentId:t,pageIndex:n,scale:r,onClick:e=>g(e,a)})},a.object.id):null})})}function Qu({documentId:e,pageIndex:t,scale:n}){let{provides:r}=ac(),{provides:i}=Fu(),[a,o]=I([]),[s,c]=I(null),[l,u]=I(null);if(L(()=>{if(r)return r.forDocument(e).onSelectionChange(()=>{o(r.forDocument(e).getHighlightRectsForPage(t)),c(r.forDocument(e).getBoundingRectForPage(t))})},[r,e,t]),L(()=>{if(i)return u(i.forDocument(e).getActiveTool()),i.forDocument(e).onActiveToolChange(e=>u(e))},[i,e]),!s||!l||!l.defaults)return null;switch(l.defaults.type){case U.UNDERLINE:return V(`div`,{style:{mixBlendMode:wn(l.defaults?.blendMode??H.Normal),pointerEvents:`none`,position:`absolute`,inset:0},children:V(zu,{color:l.defaults?.color,opacity:l.defaults?.opacity,segmentRects:a,scale:n})});case U.HIGHLIGHT:return V(`div`,{style:{mixBlendMode:wn(l.defaults?.blendMode??H.Multiply),pointerEvents:`none`,position:`absolute`,inset:0},children:V(Ru,{color:l.defaults?.color,opacity:l.defaults?.opacity,segmentRects:a,scale:n})});case U.STRIKEOUT:return V(`div`,{style:{mixBlendMode:wn(l.defaults?.blendMode??H.Normal),pointerEvents:`none`,position:`absolute`,inset:0},children:V(Bu,{color:l.defaults?.color,opacity:l.defaults?.opacity,segmentRects:a,scale:n})});case U.SQUIGGLY:return V(`div`,{style:{mixBlendMode:wn(l.defaults?.blendMode??H.Normal),pointerEvents:`none`,position:`absolute`,inset:0},children:V(Vu,{color:l.defaults?.color,opacity:l.defaults?.opacity,segmentRects:a,scale:n})});default:return null}}function $u({preview:e,scale:t}){let{bounds:n}=e,r={position:`absolute`,left:n.origin.x*t,top:n.origin.y*t,width:n.size.width*t,height:n.size.height*t,pointerEvents:`none`,zIndex:10};return e.type===U.CIRCLE?V(`div`,{style:r,children:V(Wu,{isSelected:!1,scale:t,...e.data})}):e.type===U.SQUARE?V(`div`,{style:r,children:V(Uu,{isSelected:!1,scale:t,...e.data})}):e.type===U.POLYGON?V(`div`,{style:r,children:V(qu,{isSelected:!1,scale:t,...e.data})}):e.type===U.POLYLINE?V(`div`,{style:r,children:V(Ku,{isSelected:!1,scale:t,...e.data})}):e.type===U.LINE?V(`div`,{style:r,children:V(Gu,{isSelected:!1,scale:t,...e.data})}):e.type===U.INK?V(`div`,{style:r,children:V(Hu,{isSelected:!1,scale:t,...e.data})}):e.type===U.FREETEXT?V(`div`,{style:r,children:V(`div`,{style:{width:`100%`,height:`100%`,border:`1px dashed ${e.data.fontColor||`#000000`}`,backgroundColor:`transparent`}})}):null}function ed({documentId:e,pageIndex:t,scale:n}){let{plugin:r}=Sr(Zl.id),[i,a]=I(new Map),o=R(null),s=R(null),c=z(()=>({requestFile:({accept:e,onFile:t})=>{if(!o.current)return;let n=o.current;n.accept=e,n.onchange=e=>{let r=e.target.files?.[0];r&&(t(r),n.value=``)},n.click()},processImage:({source:e,maxWidth:t,maxHeight:n,onComplete:r})=>{let i=s.current;if(!i||!i.getContext)return;let a=i.getContext(`2d`);if(!a)return;let o=new Image;o.crossOrigin=`Anonymous`,o.onload=()=>{let{naturalWidth:s,naturalHeight:c}=o,l=t?t/s:1,u=n?n/c:1,d=Math.min(l,u,1),f=s*d,p=c*d;i.width=f,i.height=p,a.drawImage(o,0,0,f,p);let m=a.getImageData(0,0,f,p);typeof e!=`string`&&URL.revokeObjectURL(o.src),r({imageData:m,width:f,height:p})},o.src=typeof e==`string`?e:URL.createObjectURL(e)}}),[]);return L(()=>{if(r)return r.registerPageHandlers(e,t,n,{services:c,onPreview:(e,t)=>{a(n=>{let r=new Map(n);return t?r.set(e,t):r.delete(e),r})}})},[e,t,n,r,c]),V(F,{children:[V(`input`,{ref:o,type:`file`,style:{display:`none`}}),V(`canvas`,{ref:s,style:{display:`none`}}),Array.from(i.entries()).map(([e,t])=>V($u,{preview:t,scale:n},e))]})}function td({style:e,documentId:t,pageIndex:n,scale:r,rotation:i,selectionMenu:a,resizeUI:o,vertexUI:s,selectionOutlineColor:c,customAnnotationRenderer:l,...u}){let d=Tr(t),f=d?.document?.pages?.[n],p=f?.size?.width??0,m=f?.size?.height??0,h=z(()=>r===void 0?d?.scale??1:r,[r,d?.scale]);return V(`div`,{style:{...e},...u,children:[V(Zu,{documentId:t,selectionMenu:a,pageIndex:n,scale:h,rotation:z(()=>i===void 0?d?.rotation??ot.Degree0:i,[i,d?.rotation]),pageWidth:p,pageHeight:m,resizeUI:o,vertexUI:s,selectionOutlineColor:c,customAnnotationRenderer:l}),V(Qu,{documentId:t,pageIndex:n,scale:h}),V(ed,{documentId:t,pageIndex:n,scale:h})]})}var nd=`print`,rd={id:nd,name:`Print Plugin`,version:`1.0.0`,provides:[`print`],requires:[],optional:[],defaultConfig:{}},id=class extends sr{constructor(e,t,n){super(e,t),this.printReady$=hr()}buildCapability(){return{print:e=>this.print(e),forDocument:e=>this.createPrintScope(e)}}createPrintScope(e){return{print:t=>this.print(t,e)}}print(e,t){let n=t??this.getActiveDocumentId(),r=e??{},i=new jt;return i.progress({stage:`preparing`,message:`Preparing document...`}),this.preparePrintDocument(r,n).wait(e=>{i.progress({stage:`document-ready`,message:`Document prepared successfully`}),this.printReady$.emit({documentId:n,options:r,buffer:e,task:i})},e=>i.fail(e)),i}preparePrintDocument(e,t){let n=this.coreState.core.documents[t];return n?.document?this.engine.preparePrintDocument(n.document,e):q.reject({code:K.DocNotOpen,message:`Document ${t} not found`})}onPrintRequest(e){return this.printReady$.on(e)}async initialize(e){this.logger.info(`PrintPlugin`,`Initialize`,`Print plugin initialized`)}async destroy(){this.printReady$.clear(),await super.destroy()}};id.id=`print`;var ad=id,od=()=>Cr(ad.id),sd=vr({manifest:rd,create:(e,t)=>new ad(nd,e,t),reducer:()=>{},initialState:{}}).addUtility(function(){let{provides:e}=od(),{plugin:t}=Sr(ad.id),n=R(null),r=R(null);return L(()=>{if(!e||!t)return;let i=t.onPrintRequest(({buffer:e,task:t})=>{let i=n.current;if(!i)return;r.current&&=(URL.revokeObjectURL(r.current),null);let a=URL.createObjectURL(new Blob([e],{type:`application/pdf`}));r.current=a,i.onload=()=>{var n,r;i.src===a&&(t.progress({stage:`iframe-ready`,message:`Ready to print`}),(n=i.contentWindow)==null||n.focus(),(r=i.contentWindow)==null||r.print(),t.progress({stage:`printing`,message:`Print dialog opened`}),t.resolve(e))},i.src=a});return()=>{i(),r.current&&URL.revokeObjectURL(r.current)}},[e,t]),V(`iframe`,{ref:n,style:{position:`absolute`,display:`none`},title:`Print Document`,src:`about:blank`})}).build(),cd=`fullscreen`,ld={id:cd,name:`Fullscreen Plugin`,version:`1.0.0`,provides:[`fullscreen`],requires:[],optional:[],defaultConfig:{}},ud=`SET_FULLSCREEN`,dd=class extends sr{constructor(e,t,n){super(e,t),this.onStateChange$=Y(),this.fullscreenRequest$=hr(),this.config=n}async initialize(e){}buildCapability(){return{isFullscreen:()=>this.state.isFullscreen,enableFullscreen:e=>this.enableFullscreen(e),exitFullscreen:()=>this.exitFullscreen(),toggleFullscreen:e=>this.toggleFullscreen(e),onRequest:this.fullscreenRequest$.on,onStateChange:this.onStateChange$.on}}getTargetSelector(){return this.currentTargetElement??this.config.targetElement}toggleFullscreen(e){this.state.isFullscreen?this.exitFullscreen():this.enableFullscreen(e)}enableFullscreen(e){this.currentTargetElement=e??this.config.targetElement,this.fullscreenRequest$.emit({action:`enter`,targetElement:this.currentTargetElement})}exitFullscreen(){this.fullscreenRequest$.emit({action:`exit`}),this.currentTargetElement=void 0}onStoreUpdated(e,t){this.onStateChange$.emit(t)}setFullscreenState(e){this.dispatch({type:ud,payload:e})}async destroy(){this.fullscreenRequest$.clear(),super.destroy()}};dd.id=`fullscreen`;var fd=dd,pd=()=>Sr(fd.id);async function md(e,t,n){if(e.action===`enter`){let r=function(e,t,n){if(!t||e.action!==`enter`)return t;let r=null;return n&&(r=t.querySelector(n),r||console.warn(`Fullscreen: Could not find element with selector "${n}" within the wrapper. Falling back to wrapper element.`)),r||=t,r}(e,t,n);r&&!document.fullscreenElement&&await r.requestFullscreen()}else document.fullscreenElement&&await document.exitFullscreen()}var hd=vr({manifest:ld,create:(e,t)=>new fd(cd,e,t),reducer:(e,t)=>t.type===ud?{...e,isFullscreen:t.payload}:e,initialState:{isFullscreen:!1}}).addWrapper(function({children:e,...t}){let{provides:n}=Cr(fd.id),{plugin:r}=pd(),{plugin:i}=pd(),a=R(null);return L(()=>{if(!(!n||!r))return n.onRequest(async e=>{let t=r.getTargetSelector();await md(e,a.current,t)})},[n,r]),L(()=>{if(!i)return;let e=()=>i.setFullscreenState(!!document.fullscreenElement);return document.addEventListener(`fullscreenchange`,e),()=>document.removeEventListener(`fullscreenchange`,e)},[i]),V(`div`,{...t,style:{position:`relative`,width:`100%`,height:`100%`,...t.style},ref:a,children:e})}).build(),gd=`bookmark`,_d={id:gd,name:`Bookmark Plugin`,version:`1.0.0`,provides:[`bookmark`],requires:[],optional:[],defaultConfig:{}},vd=class extends sr{constructor(e,t){super(e,t)}async initialize(e){}buildCapability(){return{getBookmarks:()=>this.getBookmarks(),forDocument:e=>this.createBookmarkScope(e)}}createBookmarkScope(e){return{getBookmarks:()=>this.getBookmarks(e)}}getBookmarks(e){let t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t];if(!n?.document)throw Error(`Document ${t} not loaded`);return this.engine.getBookmarks(n.document)}};vd.id=`bookmark`;var yd=vd,bd={manifest:_d,create:e=>new yd(gd,e),reducer:()=>{},initialState:{}},xd=class extends sr{constructor(e,t,n){super(e,t),this.downloadRequest$=hr(),this.config=n}buildCapability(){return{saveAsCopy:()=>this.saveAsCopy(),download:()=>this.download(),forDocument:e=>this.createExportScope(e)}}createExportScope(e){return{saveAsCopy:()=>this.saveAsCopy(e),download:()=>this.download(e)}}download(e){let t=e??this.getActiveDocumentId();this.downloadRequest$.emit({documentId:t})}saveAsCopy(e){let t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t];return n?.document?this.engine.saveAsCopy(n.document):q.reject({code:K.DocNotOpen,message:`Document ${t} not found`})}saveAsCopyAndGetBufferAndName(e){let t=new jt,n=this.coreState.core.documents[e];return n?.document?(this.saveAsCopy(e).wait(e=>{t.resolve({buffer:e,name:n.name??this.config.defaultFileName})},e=>t.fail(e)),t):q.reject({code:K.DocNotOpen,message:`Document ${e} not found`})}onRequest(e){return this.downloadRequest$.on(e)}async initialize(e){this.logger.info(`ExportPlugin`,`Initialize`,`Export plugin initialized`)}async destroy(){this.downloadRequest$.clear(),await super.destroy()}};xd.id=`export`;var Sd=xd,Cd=`export`,wd=vr({manifest:{id:Cd,name:`Export Plugin`,version:`1.0.0`,provides:[`export`],requires:[],optional:[],defaultConfig:{defaultFileName:`document.pdf`}},create:(e,t)=>new Sd(Cd,e,t),reducer:()=>{},initialState:{}}).addUtility(function(){let{plugin:e}=Sr(Sd.id),t=R(null);return L(()=>{if(e)return e.onRequest(n=>{let r=t.current;r&&e.saveAsCopyAndGetBufferAndName(n.documentId).wait(({buffer:e,name:t})=>{let n=URL.createObjectURL(new Blob([e]));r.href=n,r.download=t,r.click(),URL.revokeObjectURL(n)},jn)})},[e]),V(`a`,{style:{display:`none`},ref:t})}).build(),Td=`PAN/INIT_STATE`,Ed=`PAN/CLEANUP_STATE`,Dd=`PAN/SET_PAN_MODE`,Od=class extends sr{constructor(e,t,n){var r;super(e,t),this.panMode$=Y(),this.documentHandlers=new Map,this.config=n,this.interactionManager=t.getPlugin(bu.id)?.provides(),this.viewport=t.getPlugin(Wr.id)?.provides(),this.interactionManager&&(this.interactionManager.registerMode({id:`panMode`,scope:`global`,exclusive:!1,cursor:`grab`,wantsRawTouch:!1}),(r=this.interactionManager)==null||r.onModeChange(e=>{let t=e.activeMode===`panMode`,n=this.getDocumentState(e.documentId);n&&n.isPanMode!==t&&this.dispatch(function(e,t){return{type:Dd,payload:{documentId:e,isPanMode:t}}}(e.documentId,t))}))}onDocumentLoadingStarted(e){this.dispatch(function(e,t){return{type:Td,payload:{documentId:e,state:t}}}(e,{isPanMode:!1})),this.registerPanHandlersForDocument(e),this.config.defaultMode===`always`&&this.makePanDefault(!0),this.logger.debug(`PanPlugin`,`DocumentOpened`,`Initialized pan state for document: ${e}`)}onDocumentClosed(e){let t=this.documentHandlers.get(e);t&&(t(),this.documentHandlers.delete(e)),this.dispatch(function(e){return{type:Ed,payload:e}}(e)),this.logger.debug(`PanPlugin`,`DocumentClosed`,`Cleaned up pan state for document: ${e}`)}buildCapability(){return{enablePan:()=>this.enablePan(),disablePan:()=>this.disablePan(),togglePan:()=>this.togglePan(),makePanDefault:e=>this.makePanDefault(e),isPanMode:()=>this.isPanMode(),forDocument:e=>this.createPanScope(e),onPanModeChange:this.panMode$.on}}createPanScope(e){return{enablePan:()=>this.enablePan(e),disablePan:()=>this.disablePan(e),togglePan:()=>this.togglePan(e),isPanMode:()=>this.isPanMode(e),onPanModeChange:t=>this.panMode$.on(n=>{n.documentId===e&&t(n.isPanMode)})}}getDocumentState(e){let t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){let t=this.getDocumentState(e);if(!t)throw Error(`Pan state not found for document: ${e??`active`}`);return t}enablePan(e){let t=e??this.getActiveDocumentId();this.interactionManager.forDocument(t).activate(`panMode`)}disablePan(e){let t=e??this.getActiveDocumentId();this.interactionManager.forDocument(t).activateDefaultMode()}togglePan(e){let t=e??this.getActiveDocumentId(),n=this.interactionManager.forDocument(t);n.getActiveMode()===`panMode`?n.activateDefaultMode():n.activate(`panMode`)}makePanDefault(e=!0){this.interactionManager&&(this.interactionManager.setDefaultMode(`panMode`),e&&this.interactionManager.activateDefaultMode())}isPanMode(e){return this.getDocumentStateOrThrow(e).isPanMode}registerPanHandlersForDocument(e){if(!this.interactionManager||!this.viewport)return;let t=null,n=this.interactionManager.forDocument(e),r=this.viewport.forDocument(e),i=this.interactionManager.registerHandlers({documentId:e,modeId:`panMode`,handlers:{onMouseDown:(e,i)=>{let a=r.getMetrics();t={startX:i.clientX,startY:i.clientY,startLeft:a.scrollLeft,startTop:a.scrollTop},n.setCursor(`panMode`,`grabbing`,10)},onMouseMove:(e,n)=>{if(!t)return;let i=n.clientX-t.startX,a=n.clientY-t.startY;r.scrollTo({x:t.startLeft-i,y:t.startTop-a})},onMouseUp:()=>{t&&(t=null,n.removeCursor(`panMode`))},onMouseLeave:()=>{t&&(t=null,n.removeCursor(`panMode`))},onMouseCancel:()=>{t&&(t=null,n.removeCursor(`panMode`))}}});this.documentHandlers.set(e,i)}onStoreUpdated(e,t){for(let n in t.documents){let r=e.documents[n],i=t.documents[n];r?.isPanMode!==i.isPanMode&&(this.panMode$.emit({documentId:n,isPanMode:i.isPanMode}),this.logger.debug(`PanPlugin`,`PanModeChanged`,`Pan mode changed for document ${n}: ${r?.isPanMode??!1} -> ${i.isPanMode}`))}}async initialize(e){this.logger.info(`PanPlugin`,`Initialize`,`Pan plugin initialized`)}async destroy(){this.documentHandlers.forEach(e=>e()),this.documentHandlers.clear(),this.panMode$.clear(),await super.destroy()}};Od.id=`pan`;var kd=Od,Ad={documents:{},activeDocumentId:null},jd=vr({manifest:{id:`pan`,name:`Pan Plugin`,version:`1.0.0`,provides:[`pan`],requires:[`interaction-manager`,`viewport`],optional:[],defaultConfig:{defaultMode:`mobile`}},create:(e,t)=>new kd(`pan`,e,t),reducer:(e=Ad,t)=>{switch(t.type){case Td:{let{documentId:n,state:r}=t.payload;return{...e,documents:{...e.documents,[n]:r},activeDocumentId:e.activeDocumentId??n}}case Ed:{let n=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case`PAN/SET_ACTIVE_DOCUMENT`:return{...e,activeDocumentId:t.payload};case Dd:{let{documentId:n,isPanMode:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isPanMode:r}}}:e}default:return e}},initialState:Ad}).addUtility(()=>{let{provides:e}=Cr(kd.id),{plugin:t}=Sr(kd.id);return L(()=>{if(!e||!t)return;let n=t.config?.defaultMode??`never`,r=typeof window<`u`&&(`ontouchstart`in window||navigator.maxTouchPoints>0);n===`mobile`&&r&&e.makePanDefault()},[e,t]),null}).build(),Md=`capture`,Nd={id:Md,name:`Capture Plugin`,version:`1.0.0`,provides:[`capture`],requires:[`render`],optional:[`interaction-manager`],defaultConfig:{scale:1,imageType:`image/png`,withAnnotations:!1}},Pd=`CAPTURE/INIT_STATE`,Fd=`CAPTURE/CLEANUP_STATE`,Id=`CAPTURE/SET_MARQUEE_CAPTURE_ACTIVE`,Ld={isMarqueeCaptureActive:!1},Rd={documents:{},activeDocumentId:null},zd=class extends sr{constructor(e,t,n){super(e,t),this.captureArea$=hr(),this.state$=Y(),this.config=n,this.renderCapability=this.registry.getPlugin(`render`).provides(),this.interactionManagerCapability=this.registry.getPlugin(`interaction-manager`)?.provides(),this.interactionManagerCapability&&(this.interactionManagerCapability.registerMode({id:`marqueeCapture`,scope:`page`,exclusive:!0,cursor:`crosshair`}),this.interactionManagerCapability.onModeChange(e=>{let t=e.activeMode===`marqueeCapture`,n=this.getDocumentState(e.documentId);var r;n&&n.isMarqueeCaptureActive!==t&&this.dispatch((r=e.documentId,{type:Id,payload:{documentId:r,isActive:t}}))}))}onDocumentLoadingStarted(e){let t={...Ld};this.dispatch(function(e,t){return{type:Pd,payload:{documentId:e,state:t}}}(e,t)),this.logger.debug(`CapturePlugin`,`DocumentOpened`,`Initialized capture state for document: ${e}`)}onDocumentClosed(e){this.dispatch(function(e){return{type:Fd,payload:e}}(e)),this.logger.debug(`CapturePlugin`,`DocumentClosed`,`Cleaned up capture state for document: ${e}`)}async initialize(e){}buildCapability(){return{captureArea:(e,t)=>this.captureArea(e,t),enableMarqueeCapture:()=>this.enableMarqueeCapture(),disableMarqueeCapture:()=>this.disableMarqueeCapture(),toggleMarqueeCapture:()=>this.toggleMarqueeCapture(),isMarqueeCaptureActive:()=>this.isMarqueeCaptureActive(),getState:()=>this.getDocumentStateOrThrow(),forDocument:e=>this.createCaptureScope(e),registerMarqueeOnPage:e=>this.registerMarqueeOnPage(e),onCaptureArea:this.captureArea$.on,onStateChange:this.state$.on}}createCaptureScope(e){return{captureArea:(t,n)=>this.captureArea(t,n,e),enableMarqueeCapture:()=>this.enableMarqueeCapture(e),disableMarqueeCapture:()=>this.disableMarqueeCapture(e),toggleMarqueeCapture:()=>this.toggleMarqueeCapture(e),isMarqueeCaptureActive:()=>this.isMarqueeCaptureActive(e),getState:()=>this.getDocumentStateOrThrow(e),onCaptureArea:t=>this.captureArea$.on(n=>{n.documentId===e&&t(n)}),onStateChange:t=>this.state$.on(n=>{n.documentId===e&&t(n.state)})}}getDocumentState(e){let t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){let t=this.getDocumentState(e);if(!t)throw Error(`Capture state not found for document: ${e??`active`}`);return t}registerMarqueeOnPage(e){if(!this.interactionManagerCapability)return this.logger.warn(`CapturePlugin`,`MissingDependency`,`Interaction manager plugin not loaded, marquee capture disabled`),()=>{};let t=this.coreState.core.documents[e.documentId];if(!t||!t.document)return this.logger.warn(`CapturePlugin`,`DocumentNotFound`,`Document not found`),()=>{};let n=t.document.pages[e.pageIndex];if(!n)return this.logger.warn(`CapturePlugin`,`PageNotFound`,`Page ${e.pageIndex} not found`),()=>{};let r=function(e){let{pageSize:t,scale:n,minDragPx:r=5,onPreview:i,onCommit:a}=e,o=null,s=null;return{onPointerDown:(e,t)=>{var n;o=e,s={origin:{x:e.x,y:e.y},size:{width:0,height:0}},i?.(s),(n=t.setPointerCapture)==null||n.call(t)},onPointerMove:e=>{if(!o)return;let n=J(e.x,0,t.width),r=J(e.y,0,t.height);s={origin:{x:Math.min(o.x,n),y:Math.min(o.y,r)},size:{width:Math.abs(n-o.x),height:Math.abs(r-o.y)}},i?.(s)},onPointerUp:(e,t)=>{var c;s&&Math.max(s.size.width,s.size.height)*n>r&&a?.(s),o=null,s=null,i?.(null),(c=t.releasePointerCapture)==null||c.call(t)},onPointerCancel:(e,t)=>{var n;o=null,s=null,i?.(null),(n=t.releasePointerCapture)==null||n.call(t)}}}({pageSize:n.size,scale:e.scale,onPreview:e.callback.onPreview,onCommit:t=>{var n,r;this.captureArea(e.pageIndex,t,e.documentId),(r=(n=e.callback).onCommit)==null||r.call(n,t)}});return this.interactionManagerCapability.registerHandlers({documentId:e.documentId,modeId:`marqueeCapture`,handlers:r,pageIndex:e.pageIndex})}captureArea(e,t,n){let r=n??this.getActiveDocumentId();this.disableMarqueeCapture(r),this.renderCapability.forDocument(r).renderPageRect({pageIndex:e,rect:t,options:{imageType:this.config.imageType,scaleFactor:this.config.scale,withAnnotations:this.config.withAnnotations||!1}}).wait(n=>{this.captureArea$.emit({documentId:r,pageIndex:e,rect:t,blob:n,imageType:this.config.imageType||`image/png`,scale:this.config.scale||1,withAnnotations:this.config.withAnnotations||!1})},jn)}enableMarqueeCapture(e){var t;let n=e??this.getActiveDocumentId();(t=this.interactionManagerCapability)==null||t.forDocument(n).activate(`marqueeCapture`)}disableMarqueeCapture(e){var t;let n=e??this.getActiveDocumentId();(t=this.interactionManagerCapability)==null||t.forDocument(n).activateDefaultMode()}toggleMarqueeCapture(e){let t=e??this.getActiveDocumentId(),n=this.interactionManagerCapability?.forDocument(t);n?.getActiveMode()===`marqueeCapture`?n.activateDefaultMode():n?.activate(`marqueeCapture`)}isMarqueeCaptureActive(e){let t=e??this.getActiveDocumentId();return this.interactionManagerCapability?.forDocument(t).getActiveMode()===`marqueeCapture`}onStoreUpdated(e,t){for(let n in t.documents){let r=e.documents[n],i=t.documents[n];r&&i&&r.isMarqueeCaptureActive!==i.isMarqueeCaptureActive&&this.state$.emit({documentId:n,state:i})}}async destroy(){this.captureArea$.clear(),this.state$.clear(),super.destroy()}};zd.id=`capture`;var Bd=zd,Vd={manifest:Nd,create:(e,t)=>new Bd(Md,e,t),reducer:(e=Rd,t)=>{switch(t.type){case Pd:{let{documentId:n,state:r}=t.payload;return{...e,documents:{...e.documents,[n]:r},activeDocumentId:e.activeDocumentId??n}}case Fd:{let n=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case`CAPTURE/SET_ACTIVE_DOCUMENT`:return{...e,activeDocumentId:t.payload};case Id:{let{documentId:n,isActive:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isMarqueeCaptureActive:r}}}:e}default:return e}},initialState:Rd},Hd=({documentId:e,pageIndex:t,scale:n,className:r,stroke:i=`rgba(33,150,243,0.8)`,fill:a=`rgba(33,150,243,0.15)`})=>{let{provides:o}=Cr(Bd.id),s=Tr(e),[c,l]=I(null),u=z(()=>n===void 0?s?.scale??1:n,[n,s?.scale]);return L(()=>{if(o)return o.registerMarqueeOnPage({documentId:e,pageIndex:t,scale:u,callback:{onPreview:l}})},[o,e,t,u]),c?V(`div`,{style:{position:`absolute`,pointerEvents:`none`,left:c.origin.x*u,top:c.origin.y*u,width:c.size.width*u,height:c.size.height*u,border:`1px solid ${i}`,background:a,boxSizing:`border-box`},className:r}):null},Ud=`history`,Wd={id:Ud,name:`History Plugin`,version:`1.0.0`,provides:[`history`],requires:[],optional:[],defaultConfig:{}},Gd=`HISTORY/INIT_STATE`,Kd=`HISTORY/CLEANUP_STATE`,qd=`HISTORY/SET_DOCUMENT_STATE`,Jd=class extends sr{constructor(e,t){super(e,t),this.documentHistories=new Map,this.historyChange$=hr()}async initialize(e){this.logger.info(`HistoryPlugin`,`Initialize`,`History plugin initialized`)}onDocumentLoadingStarted(e){this.dispatch((e=>({type:Gd,payload:{documentId:e}}))(e)),this.documentHistories.set(e,{topicHistories:new Map,globalTimeline:[],globalIndex:-1}),this.logger.debug(`HistoryPlugin`,`DocumentOpened`,`Initialized history state for document: ${e}`)}onDocumentClosed(e){this.dispatch((e=>({type:Kd,payload:{documentId:e}}))(e)),this.documentHistories.delete(e),this.logger.debug(`HistoryPlugin`,`DocumentClosed`,`Cleaned up history state for document: ${e}`)}getDocumentHistoryData(e){let t=e??this.getActiveDocumentId(),n=this.documentHistories.get(t);if(!n)throw Error(`History data not found for document: ${t}`);return n}getDocumentHistoryState(e){let t=this.documentHistories.get(e);if(!t)throw Error(`History data not found for document: ${e}`);let n={};return Array.from(t.topicHistories.entries()).forEach(([e,t])=>{n[e]={canUndo:t.currentIndex>-1,canRedo:t.currentIndex<t.commands.length-1}}),{global:{canUndo:t.globalIndex>-1,canRedo:t.globalIndex<t.globalTimeline.length-1},topics:n}}emitHistoryChange(e,t){let n=this.getDocumentHistoryState(e);this.dispatch(((e,t)=>({type:qd,payload:{documentId:e,state:t}}))(e,n)),this.historyChange$.emit({documentId:e,topic:t,state:n})}register(e,t,n){let r=this.getDocumentHistoryData(n);r.topicHistories.has(t)||r.topicHistories.set(t,{commands:[],currentIndex:-1});let i=r.topicHistories.get(t);i.commands.splice(i.currentIndex+1),i.commands.push(e),i.currentIndex++;let a={command:e,topic:t};r.globalTimeline.splice(r.globalIndex+1),r.globalTimeline.push(a),r.globalIndex++,e.execute(),this.emitHistoryChange(n,t)}undo(e,t){let n=this.getDocumentHistoryData(t),r;if(e){let t=n.topicHistories.get(e);t&&t.currentIndex>-1&&(t.commands[t.currentIndex].undo(),t.currentIndex--,r=e)}else if(n.globalIndex>-1){let e=n.globalTimeline[n.globalIndex];e.command.undo(),n.topicHistories.get(e.topic).currentIndex--,n.globalIndex--,r=e.topic}r&&this.emitHistoryChange(t,r)}redo(e,t){let n=this.getDocumentHistoryData(t),r;if(e){let t=n.topicHistories.get(e);t&&t.currentIndex<t.commands.length-1&&(t.currentIndex++,t.commands[t.currentIndex].execute(),r=e)}else if(n.globalIndex<n.globalTimeline.length-1){n.globalIndex++;let e=n.globalTimeline[n.globalIndex];e.command.execute(),n.topicHistories.get(e.topic).currentIndex++,r=e.topic}r&&this.emitHistoryChange(t,r)}canUndo(e,t){let n=this.getDocumentHistoryData(t);if(e){let t=n.topicHistories.get(e);return!!t&&t.currentIndex>-1}return n.globalIndex>-1}canRedo(e,t){let n=this.getDocumentHistoryData(t);if(e){let t=n.topicHistories.get(e);return!!t&&t.currentIndex<t.commands.length-1}return n.globalIndex<n.globalTimeline.length-1}createHistoryScope(e){return{register:(t,n)=>this.register(t,n,e),undo:t=>this.undo(t,e),redo:t=>this.redo(t,e),canUndo:t=>this.canUndo(t,e),canRedo:t=>this.canRedo(t,e),getHistoryState:()=>this.getDocumentHistoryState(e),onHistoryChange:t=>this.historyChange$.on(n=>{n.documentId===e&&t(n.topic)})}}buildCapability(){return{register:(e,t)=>{let n=this.getActiveDocumentId();this.register(e,t,n)},undo:e=>{let t=this.getActiveDocumentId();this.undo(e,t)},redo:e=>{let t=this.getActiveDocumentId();this.redo(e,t)},canUndo:e=>{let t=this.getActiveDocumentId();return this.canUndo(e,t)},canRedo:e=>{let t=this.getActiveDocumentId();return this.canRedo(e,t)},getHistoryState:()=>{let e=this.getActiveDocumentId();return this.getDocumentHistoryState(e)},forDocument:e=>this.createHistoryScope(e),onHistoryChange:this.historyChange$.on}}async destroy(){this.historyChange$.clear(),this.documentHistories.clear(),super.destroy()}};Jd.id=`history`;var Yd=Jd,Xd={global:{canUndo:!1,canRedo:!1},topics:{}},Zd={documents:{},activeDocumentId:null},Qd={manifest:Wd,create:e=>new Yd(Ud,e),reducer:(e=Zd,t)=>{switch(t.type){case Gd:{let{documentId:n}=t.payload;return{...e,documents:{...e.documents,[n]:{...Xd}}}}case Kd:{let{documentId:n}=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case qd:{let{documentId:n,state:r}=t.payload;return e.documents[n]?{...e,documents:{...e.documents,[n]:r}}:e}case`HISTORY/SET_ACTIVE_DOCUMENT`:return{...e,activeDocumentId:t.payload};default:return e}},initialState:Zd},$d=(e=>(e.MarqueeRedact=`marqueeRedact`,e.RedactSelection=`redactSelection`,e))($d||{}),ef=`REDACTION/INIT_STATE`,tf=`REDACTION/CLEANUP_STATE`,nf=`START_REDACTION`,rf=`END_REDACTION`,af=`ADD_PENDING`,of=`REMOVE_PENDING`,sf=`CLEAR_PENDING`,cf=`SELECT_PENDING`,lf=`DESELECT_PENDING`,uf=(e,t)=>({type:af,payload:{documentId:e,items:t}}),df=(e,t,n)=>({type:of,payload:{documentId:e,page:t,id:n}}),ff=e=>({type:sf,payload:e}),pf=(e,t)=>({type:nf,payload:{documentId:e,mode:t}}),mf=e=>Object.values(e).reduce((e,t)=>e+t.length,0),hf={isRedacting:!1,activeType:null,pending:{},pendingCount:0,selected:null},gf={documents:{},activeDocumentId:null},_f=class extends sr{constructor(e,t,n){var r;super(e,t),this.redactionSelection$=new Map,this.pending$=Y(),this.selected$=Y(),this.state$=Y(),this.events$=Y(),this.documentUnsubscribers=new Map,this.config=n,this.selectionCapability=this.registry.getPlugin(`selection`)?.provides(),this.interactionManagerCapability=this.registry.getPlugin(`interaction-manager`)?.provides(),this.interactionManagerCapability&&(this.interactionManagerCapability.registerMode({id:$d.MarqueeRedact,scope:`page`,exclusive:!0,cursor:`crosshair`}),this.interactionManagerCapability.registerMode({id:$d.RedactSelection,scope:`page`,exclusive:!1})),(r=this.interactionManagerCapability)==null||r.onModeChange(e=>{let t=e.documentId;if(e.activeMode===$d.RedactSelection)this.dispatch(pf(t,$d.RedactSelection));else if(e.activeMode===$d.MarqueeRedact)this.dispatch(pf(t,$d.MarqueeRedact));else{let e=this.getDocumentState(t);e!=null&&e.isRedacting&&this.dispatch((e=>({type:rf,payload:e}))(t))}})}onDocumentLoadingStarted(e){this.dispatch(function(e,t){return{type:ef,payload:{documentId:e,state:t}}}(e,{...hf})),this.redactionSelection$.set(e,Y());let t=[];if(this.selectionCapability){let n=this.selectionCapability.forDocument(e),r=n.onSelectionChange(()=>{if(!this.getDocumentState(e)?.isRedacting)return;let t=n.getFormattedSelection();this.redactionSelection$.get(e)?.emit(t)}),i=n.onEndSelection(()=>{if(!this.getDocumentState(e)?.isRedacting)return;let t=n.getFormattedSelection().map(e=>({id:kn(),kind:`text`,page:e.pageIndex,rect:e.rect,rects:e.segmentRects}));this.dispatch(uf(e,t)),this.redactionSelection$.get(e)?.emit([]),n.clear(),this.emitPendingChange(e),t.length&&this.selectPending(t[t.length-1].page,t[t.length-1].id,e)});t.push(r,i)}this.documentUnsubscribers.set(e,t),this.logger.debug(`RedactionPlugin`,`DocumentOpened`,`Initialized redaction state for document: ${e}`)}onDocumentLoaded(e){var t;(t=this.selectionCapability)==null||t.enableForMode($d.RedactSelection,e)}onDocumentClosed(e){this.dispatch(function(e){return{type:tf,payload:e}}(e)),this.redactionSelection$.get(e)?.clear(),this.redactionSelection$.delete(e);let t=this.documentUnsubscribers.get(e);t&&(t.forEach(e=>e()),this.documentUnsubscribers.delete(e)),this.logger.debug(`RedactionPlugin`,`DocumentClosed`,`Cleaned up redaction state for document: ${e}`)}async initialize(e){this.logger.info(`RedactionPlugin`,`Initialize`,`Redaction plugin initialized`)}buildCapability(){return{queueCurrentSelectionAsPending:()=>this.queueCurrentSelectionAsPending(),enableMarqueeRedact:()=>this.enableMarqueeRedact(),toggleMarqueeRedact:()=>this.toggleMarqueeRedact(),isMarqueeRedactActive:()=>this.isMarqueeRedactActive(),enableRedactSelection:()=>this.enableRedactSelection(),toggleRedactSelection:()=>this.toggleRedactSelection(),isRedactSelectionActive:()=>this.isRedactSelectionActive(),addPending:e=>this.addPendingItems(e),removePending:(e,t)=>this.removePendingItem(e,t),clearPending:()=>this.clearPendingItems(),commitAllPending:()=>this.commitAllPending(),commitPending:(e,t)=>this.commitPendingOne(e,t),endRedaction:()=>this.endRedactionMode(),startRedaction:()=>this.startRedactionMode(),selectPending:(e,t)=>this.selectPending(e,t),getSelectedPending:()=>this.getSelectedPending(),deselectPending:()=>this.deselectPending(),getState:()=>this.getDocumentStateOrThrow(),forDocument:e=>this.createRedactionScope(e),onPendingChange:this.pending$.on,onSelectedChange:this.selected$.on,onRedactionEvent:this.events$.on,onStateChange:this.state$.on}}createRedactionScope(e){return{queueCurrentSelectionAsPending:()=>this.queueCurrentSelectionAsPending(e),enableMarqueeRedact:()=>this.enableMarqueeRedact(e),toggleMarqueeRedact:()=>this.toggleMarqueeRedact(e),isMarqueeRedactActive:()=>this.isMarqueeRedactActive(e),enableRedactSelection:()=>this.enableRedactSelection(e),toggleRedactSelection:()=>this.toggleRedactSelection(e),isRedactSelectionActive:()=>this.isRedactSelectionActive(e),addPending:t=>this.addPendingItems(t,e),removePending:(t,n)=>this.removePendingItem(t,n,e),clearPending:()=>this.clearPendingItems(e),commitAllPending:()=>this.commitAllPending(e),commitPending:(t,n)=>this.commitPendingOne(t,n,e),endRedaction:()=>this.endRedactionMode(e),startRedaction:()=>this.startRedactionMode(e),selectPending:(t,n)=>this.selectPending(t,n,e),getSelectedPending:()=>this.getSelectedPending(e),deselectPending:()=>this.deselectPending(e),getState:()=>this.getDocumentStateOrThrow(e),onPendingChange:t=>this.pending$.on(n=>{n.documentId===e&&t(n.pending)}),onSelectedChange:t=>this.selected$.on(n=>{n.documentId===e&&t(n.selected)}),onRedactionEvent:t=>this.events$.on(n=>{n.documentId===e&&t(n)}),onStateChange:t=>this.state$.on(n=>{n.documentId===e&&t(n.state)})}}getDocumentState(e){let t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){let t=this.getDocumentState(e);if(!t)throw Error(`Redaction state not found for document: ${e??`active`}`);return t}addPendingItems(e,t){let n=t??this.getActiveDocumentId();this.dispatch(uf(n,e)),this.emitPendingChange(n),this.events$.emit({type:`add`,documentId:n,items:e})}removePendingItem(e,t,n){let r=n??this.getActiveDocumentId();this.dispatch(df(r,e,t)),this.emitPendingChange(r),this.events$.emit({type:`remove`,documentId:r,page:e,id:t})}clearPendingItems(e){let t=e??this.getActiveDocumentId();this.dispatch(ff(t)),this.emitPendingChange(t),this.events$.emit({type:`clear`,documentId:t})}selectPending(e,t,n){var r;let i=n??this.getActiveDocumentId();this.dispatch(((e,t,n)=>({type:cf,payload:{documentId:e,page:t,id:n}}))(i,e,t)),(r=this.selectionCapability)==null||r.forDocument(i).clear(),this.emitSelectedChange(i)}getSelectedPending(e){let t=e??this.getActiveDocumentId();return this.getDocumentState(t)?.selected??null}deselectPending(e){let t=e??this.getActiveDocumentId();this.dispatch((e=>({type:lf,payload:e}))(t)),this.emitSelectedChange(t)}enableRedactSelection(e){var t;let n=e??this.getActiveDocumentId();(t=this.interactionManagerCapability)==null||t.forDocument(n).activate($d.RedactSelection)}toggleRedactSelection(e){let t=e??this.getActiveDocumentId(),n=this.interactionManagerCapability?.forDocument(t);n?.getActiveMode()===$d.RedactSelection?n.activateDefaultMode():n?.activate($d.RedactSelection)}isRedactSelectionActive(e){let t=e??this.getActiveDocumentId();return this.interactionManagerCapability?.forDocument(t).getActiveMode()===$d.RedactSelection}enableMarqueeRedact(e){var t;let n=e??this.getActiveDocumentId();(t=this.interactionManagerCapability)==null||t.forDocument(n).activate($d.MarqueeRedact)}toggleMarqueeRedact(e){let t=e??this.getActiveDocumentId(),n=this.interactionManagerCapability?.forDocument(t);n?.getActiveMode()===$d.MarqueeRedact?n.activateDefaultMode():n?.activate($d.MarqueeRedact)}isMarqueeRedactActive(e){let t=e??this.getActiveDocumentId();return this.interactionManagerCapability?.forDocument(t).getActiveMode()===$d.MarqueeRedact}startRedactionMode(e){var t;let n=e??this.getActiveDocumentId();(t=this.interactionManagerCapability)==null||t.forDocument(n).activate($d.RedactSelection)}endRedactionMode(e){var t;let n=e??this.getActiveDocumentId();(t=this.interactionManagerCapability)==null||t.forDocument(n).activateDefaultMode()}onRedactionSelectionChange(e,t){return this.redactionSelection$.get(e)?.on(t)??(()=>{})}registerMarqueeOnPage(e){if(!this.interactionManagerCapability)return this.logger.warn(`RedactionPlugin`,`MissingDependency`,`Interaction manager plugin not loaded, marquee redaction disabled`),()=>{};let t=this.coreState.core.documents[e.documentId];if(!t?.document)return this.logger.warn(`RedactionPlugin`,`DocumentNotFound`,`Document not found`),()=>{};let n=t.document.pages[e.pageIndex];if(!n)return this.logger.warn(`RedactionPlugin`,`PageNotFound`,`Page ${e.pageIndex} not found`),()=>{};let r=function(e){let{pageSize:t,scale:n,minDragPx:r=5,onPreview:i,onCommit:a}=e,o=null,s=null;return{onPointerDown:(e,t)=>{var n;o=e,s={origin:{x:e.x,y:e.y},size:{width:0,height:0}},i?.(s),(n=t.setPointerCapture)==null||n.call(t)},onPointerMove:e=>{if(!o)return;let n=J(e.x,0,t.width),r=J(e.y,0,t.height);s={origin:{x:Math.min(o.x,n),y:Math.min(o.y,r)},size:{width:Math.abs(n-o.x),height:Math.abs(r-o.y)}},i?.(s)},onPointerUp:(e,t)=>{var c;s&&Math.max(s.size.width,s.size.height)*n>r&&a?.(s),o=null,s=null,i?.(null),(c=t.releasePointerCapture)==null||c.call(t)},onPointerCancel:(e,t)=>{var n;o=null,s=null,i?.(null),(n=t.releasePointerCapture)==null||n.call(t)}}}({pageSize:n.size,scale:e.scale,onPreview:e.callback.onPreview,onCommit:t=>{var n,r;let i={id:kn(),kind:`area`,page:e.pageIndex,rect:t};this.dispatch(uf(e.documentId,[i])),this.emitPendingChange(e.documentId),(r=(n=e.callback).onCommit)==null||r.call(n,t),this.enableRedactSelection(e.documentId),this.selectPending(e.pageIndex,i.id,e.documentId)}}),i=this.interactionManagerCapability.registerAlways({handlers:{onPointerDown:(t,n)=>{n.target===n.currentTarget&&this.deselectPending(e.documentId)}},scope:{type:`page`,documentId:e.documentId,pageIndex:e.pageIndex}}),a=this.interactionManagerCapability.registerHandlers({documentId:e.documentId,modeId:$d.MarqueeRedact,handlers:r,pageIndex:e.pageIndex});return()=>{i(),a()}}queueCurrentSelectionAsPending(e){let t=e??this.getActiveDocumentId();if(!this.selectionCapability)return q.reject({code:K.NotFound,message:`[RedactionPlugin] selection plugin required`});if(!this.coreState.core.documents[t]?.document)return q.reject({code:K.NotFound,message:`Document not found`});let n=this.selectionCapability.forDocument(t),r=n.getFormattedSelection();if(!r.length)return q.resolve(!0);let i=kn(),a=r.map(e=>({id:i,kind:`text`,page:e.pageIndex,rect:e.rect,rects:e.segmentRects}));this.enableRedactSelection(t),this.dispatch(uf(t,a)),this.emitPendingChange(t);let o=a[a.length-1];return this.selectPending(o.page,o.id,t),this.redactionSelection$.get(t)?.emit([]),n.clear(),q.resolve(!0)}commitPendingOne(e,t,n){let r=n??this.getActiveDocumentId(),i=this.coreState.core.documents[r];if(!i?.document)return q.reject({code:K.NotFound,message:`Document not found`});let a=this.getDocumentState(r);if(!a)return q.reject({code:K.NotFound,message:`Document state not found`});let o=(a.pending[e]??[]).find(e=>e.id===t);if(!o)return q.resolve(!0);let s=o.kind===`text`?o.rects:[o.rect],c=i.document.pages[e];if(!c)return q.reject({code:K.NotFound,message:`Page not found`});let l=new jt;return this.engine.redactTextInRects(i.document,c,s,{drawBlackBoxes:this.config.drawBlackBoxes}).wait(()=>{this.dispatch(df(r,e,t)),this.emitPendingChange(r),this.dispatchCoreAction($n(r,[e])),this.events$.emit({type:`commit`,documentId:r,success:!0}),l.resolve(!0)},e=>{this.events$.emit({type:`commit`,documentId:r,success:!1,error:e.reason}),l.reject({code:K.Unknown,message:`Failed to commit redactions`})}),l}commitAllPending(e){let t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t];if(!n?.document)return q.reject({code:K.NotFound,message:`Document not found`});let r=this.getDocumentState(t);if(!r)return q.reject({code:K.NotFound,message:`Document state not found`});let i=new Map;for(let[e,t]of Object.entries(r.pending)){let n=Number(e),r=i.get(n)??[];for(let e of t)e.kind===`text`?r.push(...e.rects):r.push(e.rect);i.set(n,r)}let a=Array.from(i.entries()).filter(([e,t])=>t.length>0).map(([e])=>e),o=[];for(let[e,t]of i){let r=n.document.pages[e];r&&t.length&&o.push(this.engine.redactTextInRects(n.document,r,t,{drawBlackBoxes:this.config.drawBlackBoxes}))}let s=new jt;return jt.all(o).wait(()=>{this.dispatch(ff(t)),this.dispatchCoreAction($n(t,a)),this.emitPendingChange(t),this.events$.emit({type:`commit`,documentId:t,success:!0}),s.resolve(!0)},e=>{this.events$.emit({type:`commit`,documentId:t,success:!1,error:e.reason}),s.reject({code:K.Unknown,message:`Failed to commit redactions`})}),s}emitPendingChange(e){let t=this.getDocumentState(e);t&&this.pending$.emit({documentId:e,pending:t.pending})}emitSelectedChange(e){let t=this.getDocumentState(e);t&&this.selected$.emit({documentId:e,selected:t.selected})}emitStateChange(e){let t=this.getDocumentState(e);t&&this.state$.emit({documentId:e,state:t})}onStoreUpdated(e,t){for(let e in t.documents)t.documents[e]&&(this.emitPendingChange(e),this.emitSelectedChange(e),this.emitStateChange(e))}async destroy(){this.pending$.clear(),this.selected$.clear(),this.state$.clear(),this.events$.clear(),this.redactionSelection$.forEach(e=>e.clear()),this.redactionSelection$.clear(),this.documentUnsubscribers.forEach(e=>{e.forEach(e=>e())}),this.documentUnsubscribers.clear(),await super.destroy()}};_f.id=`redaction`;var vf=_f,yf=`redaction`,bf={manifest:{id:yf,name:`Redaction Plugin`,version:`1.0.0`,provides:[`redaction`],requires:[],optional:[`interaction-manager`,`selection`],defaultConfig:{drawBlackBoxes:!0}},create:(e,t)=>new vf(yf,e,t),reducer:(e=gf,t)=>{switch(t.type){case ef:{let{documentId:n,state:r}=t.payload;return{...e,documents:{...e.documents,[n]:r},activeDocumentId:e.activeDocumentId??n}}case tf:{let n=t.payload,{[n]:r,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case`REDACTION/SET_ACTIVE_DOCUMENT`:return{...e,activeDocumentId:t.payload};case af:{let{documentId:n,items:r}=t.payload,i=e.documents[n];if(!i)return e;let a={...i.pending};for(let e of r)a[e.page]=(a[e.page]??[]).concat(e);return{...e,documents:{...e.documents,[n]:{...i,pending:a,pendingCount:mf(a)}}}}case of:{let{documentId:n,page:r,id:i}=t.payload,a=e.documents[n];if(!a)return e;let o=(a.pending[r]??[]).filter(e=>e.id!==i),s={...a.pending,[r]:o},c=a.selected&&!(a.selected.page===r&&a.selected.id===i);return{...e,documents:{...e.documents,[n]:{...a,pending:s,pendingCount:mf(s),selected:c?a.selected:null}}}}case sf:{let n=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,pending:{},pendingCount:0,selected:null}}}:e}case cf:{let{documentId:n,page:r,id:i}=t.payload,a=e.documents[n];return a?{...e,documents:{...e.documents,[n]:{...a,selected:{page:r,id:i}}}}:e}case lf:{let n=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,selected:null}}}:e}case nf:{let{documentId:n,mode:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isRedacting:!0,activeType:r}}}:e}case rf:{let n=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,pending:{},pendingCount:0,selected:null,isRedacting:!1,activeType:null}}}:e}case`SET_ACTIVE_TYPE`:{let{documentId:n,mode:r}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,activeType:r}}}:e}default:return e}},initialState:gf},xf=()=>Sr(vf.id),Sf=({documentId:e,pageIndex:t,scale:n,className:r,stroke:i=`red`,fill:a=`transparent`})=>{let{plugin:o}=xf(),s=Tr(e),[c,l]=I(null),u=z(()=>n===void 0?s?.scale??1:n,[n,s?.scale]);return L(()=>{if(o&&e)return o.registerMarqueeOnPage({documentId:e,pageIndex:t,scale:u,callback:{onPreview:l}})},[o,e,t,u]),c?V(`div`,{style:{position:`absolute`,pointerEvents:`none`,left:c.origin.x*u,top:c.origin.y*u,width:c.size.width*u,height:c.size.height*u,border:`1px solid ${i}`,background:a,boxSizing:`border-box`},className:r}):null};function Cf({color:e=`#FFFF00`,opacity:t=1,border:n=`1px solid red`,rects:r,rect:i,scale:a,onClick:o,style:s,...c}){return V(F,{children:r.map((r,l)=>V(`div`,{onPointerDown:o,onTouchStart:o,style:{position:`absolute`,border:n,left:(i?r.origin.x-i.origin.x:r.origin.x)*a,top:(i?r.origin.y-i.origin.y:r.origin.y)*a,width:r.size.width*a,height:r.size.height*a,background:e,opacity:t,pointerEvents:o?`auto`:`none`,cursor:o?`pointer`:`default`,zIndex:o?1:void 0,...s},...c},l))})}function wf({documentId:e,pageIndex:t,scale:n}){let{plugin:r}=xf(),[i,a]=I([]),[o,s]=I(null);return L(()=>{if(r)return r.onRedactionSelectionChange(e,e=>{let n=e.find(e=>e.pageIndex===t);a(n?.segmentRects??[]),s(n?.rect??null)})},[r,e,t]),o?V(`div`,{style:{mixBlendMode:`normal`,pointerEvents:`none`,position:`absolute`,inset:0},children:V(Cf,{color:`transparent`,opacity:1,rects:i,scale:n,border:`1px solid red`})}):null}function Tf({documentId:e,pageIndex:t,scale:n,bboxStroke:r=`rgba(0,0,0,0.8)`,rotation:i=ot.Degree0,selectionMenu:a}){let{provides:o}=Cr(vf.id),[s,c]=I([]),[l,u]=I(null);L(()=>{if(!o)return;let n=o.forDocument(e),r=n.getState();c(r.pending[t]??[]),u(r.selected&&r.selected.page===t?r.selected.id:null);let i=n.onPendingChange(e=>c(e[t]??[])),a=n.onSelectedChange(e=>{u(e&&e.page===t?e.id:null)});return()=>{i?.(),a?.()}},[o,e,t]);let d=B((n,r)=>{n.stopPropagation(),o&&o.forDocument(e).selectPending(t,r)},[o,e,t]);return s.length?V(`div`,{style:{position:`absolute`,inset:0,pointerEvents:`none`},children:s.map(e=>{if(e.kind===`area`){let o=e.rect;return V(F,{children:[V(`div`,{style:{position:`absolute`,left:o.origin.x*n,top:o.origin.y*n,width:o.size.width*n,height:o.size.height*n,background:`transparent`,outline:l===e.id?`1px solid ${r}`:`none`,outlineOffset:`2px`,border:`1px solid red`,pointerEvents:`auto`,cursor:`pointer`},onPointerDown:t=>d(t,e.id),onTouchStart:t=>d(t,e.id)}),a&&V(ec,{rect:{origin:{x:o.origin.x*n,y:o.origin.y*n},size:{width:o.size.width*n,height:o.size.height*n}},rotation:i,children:n=>a({...n,context:{type:`redaction`,item:e,pageIndex:t},selected:l===e.id,placement:{suggestTop:!1}})})]},e.id)}let o=e.rect;return V(F,{children:[V(`div`,{style:{position:`absolute`,left:o.origin.x*n,top:o.origin.y*n,width:o.size.width*n,height:o.size.height*n,background:`transparent`,outline:l===e.id?`1px solid ${r}`:`none`,outlineOffset:`2px`,pointerEvents:`auto`,cursor:l===e.id?`pointer`:`default`},children:V(Cf,{rect:o,rects:e.rects,color:`transparent`,border:`1px solid red`,scale:n,onClick:t=>d(t,e.id)})}),a&&V(ec,{rect:{origin:{x:o.origin.x*n,y:o.origin.y*n},size:{width:o.size.width*n,height:o.size.height*n}},rotation:i,children:n=>a({...n,context:{type:`redaction`,item:e,pageIndex:t},selected:l===e.id,placement:{suggestTop:!1}})})]},e.id)})}):null}var Ef=({documentId:e,pageIndex:t,scale:n,rotation:r,selectionMenu:i})=>{let a=Tr(e),o=z(()=>n===void 0?a?.scale??1:n,[n,a?.scale]);return V(F,{children:[V(Tf,{documentId:e,pageIndex:t,scale:o,rotation:z(()=>r===void 0?a?.rotation??ot.Degree0:r,[r,a?.rotation]),selectionMenu:i}),V(Sf,{documentId:e,pageIndex:t,scale:o}),V(wf,{documentId:e,pageIndex:t,scale:o})]})},Df=class extends sr{constructor(e,t){super(e,t)}async initialize(e){}buildCapability(){return{getAttachments:()=>this.getAttachments(),downloadAttachment:e=>this.downloadAttachment(e),forDocument:e=>this.createAttachmentScope(e)}}createAttachmentScope(e){return{getAttachments:()=>this.getAttachments(e),downloadAttachment:t=>this.downloadAttachment(t,e)}}downloadAttachment(e,t){let n=t??this.getActiveDocumentId(),r=this.coreState.core.documents[n];return r?.document?this.engine.readAttachmentContent(r.document,e):q.reject({code:K.NotFound,message:`Document ${n} not found`})}getAttachments(e){let t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t];return n?.document?this.engine.getAttachments(n.document):q.reject({code:K.NotFound,message:`Document ${t} not found`})}};Df.id=`attachment`;var Of=Df,kf=`attachment`,Af={manifest:{id:kf,name:`Attachment Plugin`,version:`1.0.0`,provides:[`attachment`],requires:[],optional:[],defaultConfig:{}},create:e=>new Of(kf,e),reducer:()=>{},initialState:{}},jf=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),Mf=`-`,Nf=[],Pf=e=>{let t=Lf(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{if(e.startsWith(`[`)&&e.endsWith(`]`))return If(e);let n=e.split(Mf);return Ff(n,n[0]===``&&n.length>1?1:0,t)},getConflictingClassGroupIds:(e,t)=>{if(t){let t=r[e],i=n[e];return t?i?((e,t)=>{let n=Array(e.length+t.length);for(let t=0;t<e.length;t++)n[t]=e[t];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n})(i,t):t:i||Nf}return n[e]||Nf}}},Ff=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;let r=e[t],i=n.nextPart.get(r);if(i){let n=Ff(e,t+1,i);if(n)return n}let a=n.validators;if(a===null)return;let o=t===0?e.join(Mf):e.slice(t).join(Mf),s=a.length;for(let e=0;e<s;e++){let t=a[e];if(t.validator(o))return t.classGroupId}},If=e=>e.slice(1,-1).indexOf(`:`)===-1?void 0:(()=>{let t=e.slice(1,-1),n=t.indexOf(`:`),r=t.slice(0,n);return r?`arbitrary..`+r:void 0})(),Lf=e=>{let{theme:t,classGroups:n}=e;return Rf(n,t)},Rf=(e,t)=>{let n=jf();for(let r in e){let i=e[r];zf(i,n,r,t)}return n},zf=(e,t,n,r)=>{let i=e.length;for(let a=0;a<i;a++){let i=e[a];Bf(i,t,n,r)}},Bf=(e,t,n,r)=>{typeof e==`string`?Vf(e,t,n):typeof e==`function`?Hf(e,t,n,r):Uf(e,t,n,r)},Vf=(e,t,n)=>{(e===``?t:Wf(t,e)).classGroupId=n},Hf=(e,t,n,r)=>{Gf(e)?zf(e(r),t,n,r):(t.validators===null&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(n,e)))},Uf=(e,t,n,r)=>{let i=Object.entries(e),a=i.length;for(let e=0;e<a;e++){let[a,o]=i[e];zf(o,Wf(t,a),n,r)}},Wf=(e,t)=>{let n=e,r=t.split(Mf),i=r.length;for(let e=0;e<i;e++){let t=r[e],i=n.nextPart.get(t);i||(i=jf(),n.nextPart.set(t,i)),n=i}return n},Gf=e=>`isThemeGetter`in e&&!0===e.isThemeGetter,Kf=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null),i=(i,a)=>{n[i]=a,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(e){let t=n[e];return t===void 0?(t=r[e])===void 0?void 0:(i(e,t),t):t},set(e,t){e in n?n[e]=t:i(e,t)}}},qf=[],Jf=(e,t,n,r,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),Yf=e=>{let{prefix:t,experimentalParseClassName:n}=e,r=e=>{let t=[],n,r=0,i=0,a=0,o=e.length;for(let s=0;s<o;s++){let o=e[s];if(r===0&&i===0){if(o===`:`){t.push(e.slice(a,s)),a=s+1;continue}if(o===`/`){n=s;continue}}o===`[`?r++:o===`]`?r--:o===`(`?i++:o===`)`&&i--}let s=t.length===0?e:e.slice(a),c=s,l=!1;return s.endsWith(`!`)?(c=s.slice(0,-1),l=!0):s.startsWith(`!`)&&(c=s.slice(1),l=!0),Jf(t,l,c,n&&n>a?n-a:void 0)};if(t){let e=t+`:`,n=r;r=t=>t.startsWith(e)?n(t.slice(e.length)):Jf(qf,!1,t,void 0,!0)}if(n){let e=r;r=t=>n({className:t,parseClassName:e})}return r},Xf=e=>{let t=new Map;return e.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{let n=[],r=[];for(let i=0;i<e.length;i++){let a=e[i],o=a[0]===`[`,s=t.has(a);o||s?(r.length>0&&(r.sort(),n.push(...r),r=[]),n.push(a)):r.push(a)}return r.length>0&&(r.sort(),n.push(...r)),n}},Zf=/\s+/,Qf=e=>{if(typeof e==`string`)return e;let t,n=``;for(let r=0;r<e.length;r++)e[r]&&(t=Qf(e[r]))&&(n&&(n+=` `),n+=t);return n},$f=(e,...t)=>{let n,r,i,a,o=e=>{let t=r(e);if(t)return t;let a=((e,t)=>{let{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=t,o=[],s=e.trim().split(Zf),c=``;for(let e=s.length-1;e>=0;--e){let t=s[e],{isExternal:l,modifiers:u,hasImportantModifier:d,baseClassName:f,maybePostfixModifierPosition:p}=n(t);if(l){c=t+(c.length>0?` `+c:c);continue}let m=!!p,h=r(m?f.substring(0,p):f);if(!h){if(!m){c=t+(c.length>0?` `+c:c);continue}if(h=r(f),!h){c=t+(c.length>0?` `+c:c);continue}m=!1}let g=u.length===0?``:u.length===1?u[0]:a(u).join(`:`),_=d?g+`!`:g,v=_+h;if(o.indexOf(v)>-1)continue;o.push(v);let y=i(h,m);for(let e=0;e<y.length;++e){let t=y[e];o.push(_+t)}c=t+(c.length>0?` `+c:c)}return c})(e,n);return i(e,a),a};return a=s=>(n=(e=>({cache:Kf(e.cacheSize),parseClassName:Yf(e),sortModifiers:Xf(e),...Pf(e)}))(t.reduce((e,t)=>t(e),e())),r=n.cache.get,i=n.cache.set,a=o,o(s)),(...e)=>a(((...e)=>{let t,n,r=0,i=``;for(;r<e.length;)(t=e[r++])&&(n=Qf(t))&&(i&&(i+=` `),i+=n);return i})(...e))},ep=[],tp=e=>{let t=t=>t[e]||ep;return t.isThemeGetter=!0,t},np=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,rp=/^\((?:(\w[\w-]*):)?(.+)\)$/i,ip=/^\d+\/\d+$/,ap=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,op=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sp=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,cp=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lp=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,up=e=>ip.test(e),Z=e=>!!e&&!Number.isNaN(Number(e)),dp=e=>!!e&&Number.isInteger(Number(e)),fp=e=>e.endsWith(`%`)&&Z(e.slice(0,-1)),pp=e=>ap.test(e),mp=()=>!0,hp=e=>op.test(e)&&!sp.test(e),gp=()=>!1,_p=e=>cp.test(e),vp=e=>lp.test(e),yp=e=>!Q(e)&&!$(e),bp=e=>Mp(e,Ip,gp),Q=e=>np.test(e),xp=e=>Mp(e,Lp,hp),Sp=e=>Mp(e,Rp,Z),Cp=e=>Mp(e,Pp,gp),wp=e=>Mp(e,Fp,vp),Tp=e=>Mp(e,Bp,_p),$=e=>rp.test(e),Ep=e=>Np(e,Lp),Dp=e=>Np(e,zp),Op=e=>Np(e,Pp),kp=e=>Np(e,Ip),Ap=e=>Np(e,Fp),jp=e=>Np(e,Bp,!0),Mp=(e,t,n)=>{let r=np.exec(e);return!!r&&(r[1]?t(r[1]):n(r[2]))},Np=(e,t,n=!1)=>{let r=rp.exec(e);return!!r&&(r[1]?t(r[1]):n)},Pp=e=>e===`position`||e===`percentage`,Fp=e=>e===`image`||e===`url`,Ip=e=>e===`length`||e===`size`||e===`bg-size`,Lp=e=>e===`length`,Rp=e=>e===`number`,zp=e=>e===`family-name`,Bp=e=>e===`shadow`,Vp=$f(()=>{let e=tp(`color`),t=tp(`font`),n=tp(`text`),r=tp(`font-weight`),i=tp(`tracking`),a=tp(`leading`),o=tp(`breakpoint`),s=tp(`container`),c=tp(`spacing`),l=tp(`radius`),u=tp(`shadow`),d=tp(`inset-shadow`),f=tp(`text-shadow`),p=tp(`drop-shadow`),m=tp(`blur`),h=tp(`perspective`),g=tp(`aspect`),_=tp(`ease`),v=tp(`animate`),y=()=>[`center`,`top`,`bottom`,`left`,`right`,`top-left`,`left-top`,`top-right`,`right-top`,`bottom-right`,`right-bottom`,`bottom-left`,`left-bottom`,$,Q],b=()=>[$,Q,c],x=()=>[up,`full`,`auto`,...b()],S=()=>[dp,`none`,`subgrid`,$,Q],C=()=>[`auto`,{span:[`full`,dp,$,Q]},dp,$,Q],w=()=>[dp,`auto`,$,Q],T=()=>[`auto`,`min`,`max`,`fr`,$,Q],E=()=>[`auto`,...b()],D=()=>[up,`auto`,`full`,`dvw`,`dvh`,`lvw`,`lvh`,`svw`,`svh`,`min`,`max`,`fit`,...b()],O=()=>[e,$,Q],k=()=>[`center`,`top`,`bottom`,`left`,`right`,`top-left`,`left-top`,`top-right`,`right-top`,`bottom-right`,`right-bottom`,`bottom-left`,`left-bottom`,Op,Cp,{position:[$,Q]}],A=()=>[`auto`,`cover`,`contain`,kp,bp,{size:[$,Q]}],ee=()=>[fp,Ep,xp],j=()=>[``,`none`,`full`,l,$,Q],M=()=>[``,Z,Ep,xp],N=()=>[Z,fp,Op,Cp],te=()=>[``,`none`,m,$,Q],ne=()=>[`none`,Z,$,Q],re=()=>[`none`,Z,$,Q],ie=()=>[Z,$,Q],ae=()=>[up,`full`,...b()];return{cacheSize:500,theme:{animate:[`spin`,`ping`,`pulse`,`bounce`],aspect:[`video`],blur:[pp],breakpoint:[pp],color:[mp],container:[pp],"drop-shadow":[pp],ease:[`in`,`out`,`in-out`],font:[yp],"font-weight":[`thin`,`extralight`,`light`,`normal`,`medium`,`semibold`,`bold`,`extrabold`,`black`],"inset-shadow":[pp],leading:[`none`,`tight`,`snug`,`normal`,`relaxed`,`loose`],perspective:[`dramatic`,`near`,`normal`,`midrange`,`distant`,`none`],radius:[pp],shadow:[pp],spacing:[`px`,Z],text:[pp],"text-shadow":[pp],tracking:[`tighter`,`tight`,`normal`,`wide`,`wider`,`widest`]},classGroups:{aspect:[{aspect:[`auto`,`square`,up,Q,$,g]}],container:[`container`],columns:[{columns:[Z,Q,$,s]}],"break-after":[{"break-after":[`auto`,`avoid`,`all`,`avoid-page`,`page`,`left`,`right`,`column`]}],"break-before":[{"break-before":[`auto`,`avoid`,`all`,`avoid-page`,`page`,`left`,`right`,`column`]}],"break-inside":[{"break-inside":[`auto`,`avoid`,`avoid-page`,`avoid-column`]}],"box-decoration":[{"box-decoration":[`slice`,`clone`]}],box:[{box:[`border`,`content`]}],display:[`block`,`inline-block`,`inline`,`flex`,`inline-flex`,`table`,`inline-table`,`table-caption`,`table-cell`,`table-column`,`table-column-group`,`table-footer-group`,`table-header-group`,`table-row-group`,`table-row`,`flow-root`,`grid`,`inline-grid`,`contents`,`list-item`,`hidden`],sr:[`sr-only`,`not-sr-only`],float:[{float:[`right`,`left`,`none`,`start`,`end`]}],clear:[{clear:[`left`,`right`,`both`,`none`,`start`,`end`]}],isolation:[`isolate`,`isolation-auto`],"object-fit":[{object:[`contain`,`cover`,`fill`,`none`,`scale-down`]}],"object-position":[{object:y()}],overflow:[{overflow:[`auto`,`hidden`,`clip`,`visible`,`scroll`]}],"overflow-x":[{"overflow-x":[`auto`,`hidden`,`clip`,`visible`,`scroll`]}],"overflow-y":[{"overflow-y":[`auto`,`hidden`,`clip`,`visible`,`scroll`]}],overscroll:[{overscroll:[`auto`,`contain`,`none`]}],"overscroll-x":[{"overscroll-x":[`auto`,`contain`,`none`]}],"overscroll-y":[{"overscroll-y":[`auto`,`contain`,`none`]}],position:[`static`,`fixed`,`absolute`,`relative`,`sticky`],inset:[{inset:x()}],"inset-x":[{"inset-x":x()}],"inset-y":[{"inset-y":x()}],start:[{start:x()}],end:[{end:x()}],top:[{top:x()}],right:[{right:x()}],bottom:[{bottom:x()}],left:[{left:x()}],visibility:[`visible`,`invisible`,`collapse`],z:[{z:[dp,`auto`,$,Q]}],basis:[{basis:[up,`full`,`auto`,s,...b()]}],"flex-direction":[{flex:[`row`,`row-reverse`,`col`,`col-reverse`]}],"flex-wrap":[{flex:[`nowrap`,`wrap`,`wrap-reverse`]}],flex:[{flex:[Z,up,`auto`,`initial`,`none`,Q]}],grow:[{grow:[``,Z,$,Q]}],shrink:[{shrink:[``,Z,$,Q]}],order:[{order:[dp,`first`,`last`,`none`,$,Q]}],"grid-cols":[{"grid-cols":S()}],"col-start-end":[{col:C()}],"col-start":[{"col-start":w()}],"col-end":[{"col-end":w()}],"grid-rows":[{"grid-rows":S()}],"row-start-end":[{row:C()}],"row-start":[{"row-start":w()}],"row-end":[{"row-end":w()}],"grid-flow":[{"grid-flow":[`row`,`col`,`dense`,`row-dense`,`col-dense`]}],"auto-cols":[{"auto-cols":T()}],"auto-rows":[{"auto-rows":T()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:[`start`,`end`,`center`,`between`,`around`,`evenly`,`stretch`,`baseline`,`center-safe`,`end-safe`,`normal`]}],"justify-items":[{"justify-items":[`start`,`end`,`center`,`stretch`,`center-safe`,`end-safe`,`normal`]}],"justify-self":[{"justify-self":[`auto`,`start`,`end`,`center`,`stretch`,`center-safe`,`end-safe`]}],"align-content":[{content:[`normal`,`start`,`end`,`center`,`between`,`around`,`evenly`,`stretch`,`baseline`,`center-safe`,`end-safe`]}],"align-items":[{items:[`start`,`end`,`center`,`stretch`,`center-safe`,`end-safe`,{baseline:[``,`last`]}]}],"align-self":[{self:[`auto`,`start`,`end`,`center`,`stretch`,`center-safe`,`end-safe`,{baseline:[``,`last`]}]}],"place-content":[{"place-content":[`start`,`end`,`center`,`between`,`around`,`evenly`,`stretch`,`baseline`,`center-safe`,`end-safe`]}],"place-items":[{"place-items":[`start`,`end`,`center`,`stretch`,`center-safe`,`end-safe`,`baseline`]}],"place-self":[{"place-self":[`auto`,`start`,`end`,`center`,`stretch`,`center-safe`,`end-safe`]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:E()}],mx:[{mx:E()}],my:[{my:E()}],ms:[{ms:E()}],me:[{me:E()}],mt:[{mt:E()}],mr:[{mr:E()}],mb:[{mb:E()}],ml:[{ml:E()}],"space-x":[{"space-x":b()}],"space-x-reverse":[`space-x-reverse`],"space-y":[{"space-y":b()}],"space-y-reverse":[`space-y-reverse`],size:[{size:D()}],w:[{w:[s,`screen`,...D()]}],"min-w":[{"min-w":[s,`screen`,`none`,...D()]}],"max-w":[{"max-w":[s,`screen`,`none`,`prose`,{screen:[o]},...D()]}],h:[{h:[`screen`,`lh`,...D()]}],"min-h":[{"min-h":[`screen`,`lh`,`none`,...D()]}],"max-h":[{"max-h":[`screen`,`lh`,...D()]}],"font-size":[{text:[`base`,n,Ep,xp]}],"font-smoothing":[`antialiased`,`subpixel-antialiased`],"font-style":[`italic`,`not-italic`],"font-weight":[{font:[r,$,Sp]}],"font-stretch":[{"font-stretch":[`ultra-condensed`,`extra-condensed`,`condensed`,`semi-condensed`,`normal`,`semi-expanded`,`expanded`,`extra-expanded`,`ultra-expanded`,fp,Q]}],"font-family":[{font:[Dp,Q,t]}],"fvn-normal":[`normal-nums`],"fvn-ordinal":[`ordinal`],"fvn-slashed-zero":[`slashed-zero`],"fvn-figure":[`lining-nums`,`oldstyle-nums`],"fvn-spacing":[`proportional-nums`,`tabular-nums`],"fvn-fraction":[`diagonal-fractions`,`stacked-fractions`],tracking:[{tracking:[i,$,Q]}],"line-clamp":[{"line-clamp":[Z,`none`,$,Sp]}],leading:[{leading:[a,...b()]}],"list-image":[{"list-image":[`none`,$,Q]}],"list-style-position":[{list:[`inside`,`outside`]}],"list-style-type":[{list:[`disc`,`decimal`,`none`,$,Q]}],"text-alignment":[{text:[`left`,`center`,`right`,`justify`,`start`,`end`]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":[`underline`,`overline`,`line-through`,`no-underline`],"text-decoration-style":[{decoration:[`solid`,`dashed`,`dotted`,`double`,`wavy`]}],"text-decoration-thickness":[{decoration:[Z,`from-font`,`auto`,$,xp]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[Z,`auto`,$,Q]}],"text-transform":[`uppercase`,`lowercase`,`capitalize`,`normal-case`],"text-overflow":[`truncate`,`text-ellipsis`,`text-clip`],"text-wrap":[{text:[`wrap`,`nowrap`,`balance`,`pretty`]}],indent:[{indent:b()}],"vertical-align":[{align:[`baseline`,`top`,`middle`,`bottom`,`text-top`,`text-bottom`,`sub`,`super`,$,Q]}],whitespace:[{whitespace:[`normal`,`nowrap`,`pre`,`pre-line`,`pre-wrap`,`break-spaces`]}],break:[{break:[`normal`,`words`,`all`,`keep`]}],wrap:[{wrap:[`break-word`,`anywhere`,`normal`]}],hyphens:[{hyphens:[`none`,`manual`,`auto`]}],content:[{content:[`none`,$,Q]}],"bg-attachment":[{bg:[`fixed`,`local`,`scroll`]}],"bg-clip":[{"bg-clip":[`border`,`padding`,`content`,`text`]}],"bg-origin":[{"bg-origin":[`border`,`padding`,`content`]}],"bg-position":[{bg:k()}],"bg-repeat":[{bg:[`no-repeat`,{repeat:[``,`x`,`y`,`space`,`round`]}]}],"bg-size":[{bg:A()}],"bg-image":[{bg:[`none`,{linear:[{to:[`t`,`tr`,`r`,`br`,`b`,`bl`,`l`,`tl`]},dp,$,Q],radial:[``,$,Q],conic:[dp,$,Q]},Ap,wp]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:j()}],"rounded-s":[{"rounded-s":j()}],"rounded-e":[{"rounded-e":j()}],"rounded-t":[{"rounded-t":j()}],"rounded-r":[{"rounded-r":j()}],"rounded-b":[{"rounded-b":j()}],"rounded-l":[{"rounded-l":j()}],"rounded-ss":[{"rounded-ss":j()}],"rounded-se":[{"rounded-se":j()}],"rounded-ee":[{"rounded-ee":j()}],"rounded-es":[{"rounded-es":j()}],"rounded-tl":[{"rounded-tl":j()}],"rounded-tr":[{"rounded-tr":j()}],"rounded-br":[{"rounded-br":j()}],"rounded-bl":[{"rounded-bl":j()}],"border-w":[{border:M()}],"border-w-x":[{"border-x":M()}],"border-w-y":[{"border-y":M()}],"border-w-s":[{"border-s":M()}],"border-w-e":[{"border-e":M()}],"border-w-t":[{"border-t":M()}],"border-w-r":[{"border-r":M()}],"border-w-b":[{"border-b":M()}],"border-w-l":[{"border-l":M()}],"divide-x":[{"divide-x":M()}],"divide-x-reverse":[`divide-x-reverse`],"divide-y":[{"divide-y":M()}],"divide-y-reverse":[`divide-y-reverse`],"border-style":[{border:[`solid`,`dashed`,`dotted`,`double`,`hidden`,`none`]}],"divide-style":[{divide:[`solid`,`dashed`,`dotted`,`double`,`hidden`,`none`]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[`solid`,`dashed`,`dotted`,`double`,`none`,`hidden`]}],"outline-offset":[{"outline-offset":[Z,$,Q]}],"outline-w":[{outline:[``,Z,Ep,xp]}],"outline-color":[{outline:O()}],shadow:[{shadow:[``,`none`,u,jp,Tp]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":[`none`,d,jp,Tp]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:M()}],"ring-w-inset":[`ring-inset`],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[Z,xp]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":M()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":[`none`,f,jp,Tp]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[Z,$,Q]}],"mix-blend":[{"mix-blend":[`normal`,`multiply`,`screen`,`overlay`,`darken`,`lighten`,`color-dodge`,`color-burn`,`hard-light`,`soft-light`,`difference`,`exclusion`,`hue`,`saturation`,`color`,`luminosity`,`plus-darker`,`plus-lighter`]}],"bg-blend":[{"bg-blend":[`normal`,`multiply`,`screen`,`overlay`,`darken`,`lighten`,`color-dodge`,`color-burn`,`hard-light`,`soft-light`,`difference`,`exclusion`,`hue`,`saturation`,`color`,`luminosity`]}],"mask-clip":[{"mask-clip":[`border`,`padding`,`content`,`fill`,`stroke`,`view`]},`mask-no-clip`],"mask-composite":[{mask:[`add`,`subtract`,`intersect`,`exclude`]}],"mask-image-linear-pos":[{"mask-linear":[Z]}],"mask-image-linear-from-pos":[{"mask-linear-from":N()}],"mask-image-linear-to-pos":[{"mask-linear-to":N()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":N()}],"mask-image-t-to-pos":[{"mask-t-to":N()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":N()}],"mask-image-r-to-pos":[{"mask-r-to":N()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":N()}],"mask-image-b-to-pos":[{"mask-b-to":N()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":N()}],"mask-image-l-to-pos":[{"mask-l-to":N()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":N()}],"mask-image-x-to-pos":[{"mask-x-to":N()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":N()}],"mask-image-y-to-pos":[{"mask-y-to":N()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[$,Q]}],"mask-image-radial-from-pos":[{"mask-radial-from":N()}],"mask-image-radial-to-pos":[{"mask-radial-to":N()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":[`circle`,`ellipse`]}],"mask-image-radial-size":[{"mask-radial":[{closest:[`side`,`corner`],farthest:[`side`,`corner`]}]}],"mask-image-radial-pos":[{"mask-radial-at":[`center`,`top`,`bottom`,`left`,`right`,`top-left`,`left-top`,`top-right`,`right-top`,`bottom-right`,`right-bottom`,`bottom-left`,`left-bottom`]}],"mask-image-conic-pos":[{"mask-conic":[Z]}],"mask-image-conic-from-pos":[{"mask-conic-from":N()}],"mask-image-conic-to-pos":[{"mask-conic-to":N()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:[`alpha`,`luminance`,`match`]}],"mask-origin":[{"mask-origin":[`border`,`padding`,`content`,`fill`,`stroke`,`view`]}],"mask-position":[{mask:k()}],"mask-repeat":[{mask:[`no-repeat`,{repeat:[``,`x`,`y`,`space`,`round`]}]}],"mask-size":[{mask:A()}],"mask-type":[{"mask-type":[`alpha`,`luminance`]}],"mask-image":[{mask:[`none`,$,Q]}],filter:[{filter:[``,`none`,$,Q]}],blur:[{blur:te()}],brightness:[{brightness:[Z,$,Q]}],contrast:[{contrast:[Z,$,Q]}],"drop-shadow":[{"drop-shadow":[``,`none`,p,jp,Tp]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:[``,Z,$,Q]}],"hue-rotate":[{"hue-rotate":[Z,$,Q]}],invert:[{invert:[``,Z,$,Q]}],saturate:[{saturate:[Z,$,Q]}],sepia:[{sepia:[``,Z,$,Q]}],"backdrop-filter":[{"backdrop-filter":[``,`none`,$,Q]}],"backdrop-blur":[{"backdrop-blur":te()}],"backdrop-brightness":[{"backdrop-brightness":[Z,$,Q]}],"backdrop-contrast":[{"backdrop-contrast":[Z,$,Q]}],"backdrop-grayscale":[{"backdrop-grayscale":[``,Z,$,Q]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Z,$,Q]}],"backdrop-invert":[{"backdrop-invert":[``,Z,$,Q]}],"backdrop-opacity":[{"backdrop-opacity":[Z,$,Q]}],"backdrop-saturate":[{"backdrop-saturate":[Z,$,Q]}],"backdrop-sepia":[{"backdrop-sepia":[``,Z,$,Q]}],"border-collapse":[{border:[`collapse`,`separate`]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:[`auto`,`fixed`]}],caption:[{caption:[`top`,`bottom`]}],transition:[{transition:[``,`all`,`colors`,`opacity`,`shadow`,`transform`,`none`,$,Q]}],"transition-behavior":[{transition:[`normal`,`discrete`]}],duration:[{duration:[Z,`initial`,$,Q]}],ease:[{ease:[`linear`,`initial`,_,$,Q]}],delay:[{delay:[Z,$,Q]}],animate:[{animate:[`none`,v,$,Q]}],backface:[{backface:[`hidden`,`visible`]}],perspective:[{perspective:[h,$,Q]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:ne()}],"rotate-x":[{"rotate-x":ne()}],"rotate-y":[{"rotate-y":ne()}],"rotate-z":[{"rotate-z":ne()}],scale:[{scale:re()}],"scale-x":[{"scale-x":re()}],"scale-y":[{"scale-y":re()}],"scale-z":[{"scale-z":re()}],"scale-3d":[`scale-3d`],skew:[{skew:ie()}],"skew-x":[{"skew-x":ie()}],"skew-y":[{"skew-y":ie()}],transform:[{transform:[$,Q,``,`none`,`gpu`,`cpu`]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:[`3d`,`flat`]}],translate:[{translate:ae()}],"translate-x":[{"translate-x":ae()}],"translate-y":[{"translate-y":ae()}],"translate-z":[{"translate-z":ae()}],"translate-none":[`translate-none`],accent:[{accent:O()}],appearance:[{appearance:[`none`,`auto`]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:[`normal`,`dark`,`light`,`light-dark`,`only-dark`,`only-light`]}],cursor:[{cursor:[`auto`,`default`,`pointer`,`wait`,`text`,`move`,`help`,`not-allowed`,`none`,`context-menu`,`progress`,`cell`,`crosshair`,`vertical-text`,`alias`,`copy`,`no-drop`,`grab`,`grabbing`,`all-scroll`,`col-resize`,`row-resize`,`n-resize`,`e-resize`,`s-resize`,`w-resize`,`ne-resize`,`nw-resize`,`se-resize`,`sw-resize`,`ew-resize`,`ns-resize`,`nesw-resize`,`nwse-resize`,`zoom-in`,`zoom-out`,$,Q]}],"field-sizing":[{"field-sizing":[`fixed`,`content`]}],"pointer-events":[{"pointer-events":[`auto`,`none`]}],resize:[{resize:[`none`,``,`y`,`x`]}],"scroll-behavior":[{scroll:[`auto`,`smooth`]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:[`start`,`end`,`center`,`align-none`]}],"snap-stop":[{snap:[`normal`,`always`]}],"snap-type":[{snap:[`none`,`x`,`y`,`both`]}],"snap-strictness":[{snap:[`mandatory`,`proximity`]}],touch:[{touch:[`auto`,`none`,`manipulation`]}],"touch-x":[{"touch-pan":[`x`,`left`,`right`]}],"touch-y":[{"touch-pan":[`y`,`up`,`down`]}],"touch-pz":[`touch-pinch-zoom`],select:[{select:[`none`,`text`,`all`,`auto`]}],"will-change":[{"will-change":[`auto`,`scroll`,`contents`,`transform`,$,Q]}],fill:[{fill:[`none`,...O()]}],"stroke-w":[{stroke:[Z,Ep,xp,Sp]}],stroke:[{stroke:[`none`,...O()]}],"forced-color-adjust":[{"forced-color-adjust":[`auto`,`none`]}]},conflictingClassGroups:{overflow:[`overflow-x`,`overflow-y`],overscroll:[`overscroll-x`,`overscroll-y`],inset:[`inset-x`,`inset-y`,`start`,`end`,`top`,`right`,`bottom`,`left`],"inset-x":[`right`,`left`],"inset-y":[`top`,`bottom`],flex:[`basis`,`grow`,`shrink`],gap:[`gap-x`,`gap-y`],p:[`px`,`py`,`ps`,`pe`,`pt`,`pr`,`pb`,`pl`],px:[`pr`,`pl`],py:[`pt`,`pb`],m:[`mx`,`my`,`ms`,`me`,`mt`,`mr`,`mb`,`ml`],mx:[`mr`,`ml`],my:[`mt`,`mb`],size:[`w`,`h`],"font-size":[`leading`],"fvn-normal":[`fvn-ordinal`,`fvn-slashed-zero`,`fvn-figure`,`fvn-spacing`,`fvn-fraction`],"fvn-ordinal":[`fvn-normal`],"fvn-slashed-zero":[`fvn-normal`],"fvn-figure":[`fvn-normal`],"fvn-spacing":[`fvn-normal`],"fvn-fraction":[`fvn-normal`],"line-clamp":[`display`,`overflow`],rounded:[`rounded-s`,`rounded-e`,`rounded-t`,`rounded-r`,`rounded-b`,`rounded-l`,`rounded-ss`,`rounded-se`,`rounded-ee`,`rounded-es`,`rounded-tl`,`rounded-tr`,`rounded-br`,`rounded-bl`],"rounded-s":[`rounded-ss`,`rounded-es`],"rounded-e":[`rounded-se`,`rounded-ee`],"rounded-t":[`rounded-tl`,`rounded-tr`],"rounded-r":[`rounded-tr`,`rounded-br`],"rounded-b":[`rounded-br`,`rounded-bl`],"rounded-l":[`rounded-tl`,`rounded-bl`],"border-spacing":[`border-spacing-x`,`border-spacing-y`],"border-w":[`border-w-x`,`border-w-y`,`border-w-s`,`border-w-e`,`border-w-t`,`border-w-r`,`border-w-b`,`border-w-l`],"border-w-x":[`border-w-r`,`border-w-l`],"border-w-y":[`border-w-t`,`border-w-b`],"border-color":[`border-color-x`,`border-color-y`,`border-color-s`,`border-color-e`,`border-color-t`,`border-color-r`,`border-color-b`,`border-color-l`],"border-color-x":[`border-color-r`,`border-color-l`],"border-color-y":[`border-color-t`,`border-color-b`],translate:[`translate-x`,`translate-y`,`translate-none`],"translate-none":[`translate`,`translate-x`,`translate-y`,`translate-z`],"scroll-m":[`scroll-mx`,`scroll-my`,`scroll-ms`,`scroll-me`,`scroll-mt`,`scroll-mr`,`scroll-mb`,`scroll-ml`],"scroll-mx":[`scroll-mr`,`scroll-ml`],"scroll-my":[`scroll-mt`,`scroll-mb`],"scroll-p":[`scroll-px`,`scroll-py`,`scroll-ps`,`scroll-pe`,`scroll-pt`,`scroll-pr`,`scroll-pb`,`scroll-pl`],"scroll-px":[`scroll-pr`,`scroll-pl`],"scroll-py":[`scroll-pt`,`scroll-pb`],touch:[`touch-x`,`touch-y`,`touch-pz`],"touch-x":[`touch`],"touch-y":[`touch`],"touch-pz":[`touch`]},conflictingClassGroupModifiers:{"font-size":[`leading`]},orderSensitiveModifiers:[`*`,`**`,`after`,`backdrop`,`before`,`details-content`,`file`,`first-letter`,`first-line`,`marker`,`placeholder`,`selection`]}}),Hp=[`children`,`onClick`,`active`,`disabled`,`className`,`anchorRef`];function Up(e){var t=e.children,n=e.onClick,r=e.active,i=r!==void 0&&r,a=e.disabled,o=a!==void 0&&a,s=e.className,c=s===void 0?``:s,l=e.anchorRef,u=v(e,Hp);return P(`button`,_({ref:l,onClick:n,disabled:o,className:Vp(`flex h-[32px] w-auto min-w-[32px] items-center justify-center rounded-md p-[5px] transition-colors hover:bg-interactive-hover hover:ring hover:ring-accent cursor-pointer rounded-none px-2 py-1 text-sm hover:bg-transparent border-b-2 hover:border-b-fg-muted hover:ring-transparent`,i?`border-b-accent text-accent hover:border-b-accent`:`border-b-transparent`,o?`cursor-not-allowed opacity-50`:``,c)},u),t)}var Wp=function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M9 6l6 6l-6 6`}))},Gp=function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M15 6l-6 6l6 6`}))},Kp=function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M6 9l6 6l6 -6`}))},qp=function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0`}),P(`path`,{d:`M21 21l-6 -6`}))},Jp=function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M18 6l-12 12`}),P(`path`,{d:`M6 6l12 12`}))},Yp={download:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2`}),P(`path`,{d:`M7 11l5 5l5 -5`}),P(`path`,{d:`M12 4l0 12`}))},menu:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M4 8l16 0`}),P(`path`,{d:`M4 16l16 0`}))},fullscreen:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M4 8v-2a2 2 0 0 1 2 -2h2`}),P(`path`,{d:`M4 16v2a2 2 0 0 0 2 2h2`}),P(`path`,{d:`M16 4h2a2 2 0 0 1 2 2v2`}),P(`path`,{d:`M16 20h2a2 2 0 0 0 2 -2v-2`}))},fullscreenExit:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M4 8v-2c0 -.551 .223 -1.05 .584 -1.412`}),P(`path`,{d:`M4 16v2a2 2 0 0 0 2 2h2`}),P(`path`,{d:`M16 4h2a2 2 0 0 1 2 2v2`}),P(`path`,{d:`M16 20h2c.545 0 1.04 -.218 1.4 -.572`}),P(`path`,{d:`M3 3l18 18`}))},save:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2`}),P(`path`,{d:`M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0`}),P(`path`,{d:`M14 4l0 4l-6 0l0 -4`}))},print:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2`}),P(`path`,{d:`M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4`}),P(`path`,{d:`M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z`}))},settings:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z`}),P(`path`,{d:`M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0`}))},viewSettings:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0`}),P(`path`,{d:`M12 10.5v1.5`}),P(`path`,{d:`M12 16v1.5`}),P(`path`,{d:`M15.031 12.25l-1.299 .75`}),P(`path`,{d:`M10.268 15l-1.3 .75`}),P(`path`,{d:`M15 15.803l-1.285 -.773`}),P(`path`,{d:`M10.285 12.97l-1.285 -.773`}),P(`path`,{d:`M14 3v4a1 1 0 0 0 1 1h4`}),P(`path`,{d:`M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z`}))},rotateClockwise:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M4.05 11a8 8 0 1 1 .5 4m-.5 5v-5h5`}))},rotateCounterClockwise:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M19.95 11a8 8 0 1 0 -.5 4m.5 5v-5h-5`}))},singlePage:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M5 3m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z`}))},doublePage:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M3 3m0 1a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1zm9 -1v18`}))},zoomIn:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0`}),P(`path`,{d:`M9 12h6`}),P(`path`,{d:`M12 9v6`}))},zoomOut:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0`}),P(`path`,{d:`M9 12l6 0`}))},fitToWidth:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M4 12v-6a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v6`}),P(`path`,{d:`M10 18h-7`}),P(`path`,{d:`M21 18h-7`}),P(`path`,{d:`M6 15l-3 3l3 3`}),P(`path`,{d:`M18 15l3 3l-3 3`}))},fitToPage:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M12 20h-6a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h6`}),P(`path`,{d:`M18 14v7`}),P(`path`,{d:`M18 3v7`}),P(`path`,{d:`M15 18l3 3l3 -3`}),P(`path`,{d:`M15 6l3 -3l3 3`}))},chevronRight:Wp,chevronLeft:Gp,chevronDown:Kp,search:qp,comment:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M12 11v.01`}),P(`path`,{d:`M8 11v.01`}),P(`path`,{d:`M16 11v.01`}),P(`path`,{d:`M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3z`}))},sidebar:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M4 18v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z`}),P(`path`,{d:`M14 18v-12a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2 -2z`}))},dots:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0`}),P(`path`,{d:`M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0`}),P(`path`,{d:`M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0`}))},vertical:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M8 7l4 -4l4 4`}),P(`path`,{d:`M8 17l4 4l4 -4`}),P(`path`,{d:`M12 3l0 18`}))},horizontal:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M7 8l-4 4l4 4`}),P(`path`,{d:`M17 8l4 4l-4 4`}),P(`path`,{d:`M3 12l18 0`}))},book:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0`}),P(`path`,{d:`M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0`}),P(`path`,{d:`M3 6l0 13`}),P(`path`,{d:`M12 6l0 13`}),P(`path`,{d:`M21 6l0 13`}))},book2:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M19 4v16h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12z`}),P(`path`,{d:`M19 16h-12a2 2 0 0 0 -2 2`}),P(`path`,{d:`M9 8h6`}))},squares:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z`}),P(`path`,{d:`M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3`}))},listTree:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M9 6h11`}),P(`path`,{d:`M12 12h8`}),P(`path`,{d:`M15 18h5`}),P(`path`,{d:`M5 6v.01`}),P(`path`,{d:`M8 12v.01`}),P(`path`,{d:`M11 18v.01`}))},paperclip:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M15 7l-6.5 6.5a1.5 1.5 0 0 0 3 3l6.5 -6.5a3 3 0 0 0 -6 -6l-6.5 6.5a4.5 4.5 0 0 0 9 9l6.5 -6.5`}))},copy:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z`}),P(`path`,{d:`M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1`}))},underline:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor,o=a===void 0?`currentColor`:a;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M4 20h16`,stroke:o}),P(`path`,{d:`M8 16v-8a4 4 0 1 1 8 0v8`,stroke:`currentColor`}),P(`path`,{d:`M8 10h8`,stroke:`currentColor`}))},squiggly:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor,o=a===void 0?`currentColor`:a;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M8 16v-8a4 4 0 1 1 8 0v8`,stroke:`currentColor`}),P(`path`,{d:`M8 10h8`,stroke:`currentColor`}),P(`path`,{d:`M4 20c1.5 -1.5 3.5 -1.5 5 0s3.5 1.5 5 0 3.5 -1.5 5 0`,stroke:o}))},strikethrough:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor,o=a===void 0?`currentColor`:a;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M8 16v-8a4 4 0 1 1 8 0v8`,stroke:`currentColor`}),P(`path`,{d:`M4 10h16`,stroke:o}))},highlight:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor,o=a===void 0?`currentColor`:a;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`rect`,{x:`2`,y:`6`,width:`20`,height:`16`,rx:`2`,fill:o,stroke:`none`}),P(`path`,{d:`M8 16v-8a4 4 0 1 1 8 0v8`,stroke:`currentColor`}),P(`path`,{d:`M8 10h8`,stroke:`currentColor`}))},palette:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25`}),P(`path`,{d:`M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0`}),P(`path`,{d:`M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0`}),P(`path`,{d:`M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0`}))},x:Jp,fileImport:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M14 3v4a1 1 0 0 0 1 1h4`}),P(`path`,{d:`M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3`}))},hand:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5`}),P(`path`,{d:`M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5`}),P(`path`,{d:`M14 5.5a1.5 1.5 0 0 1 3 0v6.5`}),P(`path`,{d:`M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47`}))},zoomInArea:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M15 13v4`}),P(`path`,{d:`M13 15h4`}),P(`path`,{d:`M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0`}),P(`path`,{d:`M22 22l-3 -3`}),P(`path`,{d:`M6 18h-1a2 2 0 0 1 -2 -2v-1`}),P(`path`,{d:`M3 11v-1`}),P(`path`,{d:`M3 6v-1a2 2 0 0 1 2 -2h1`}),P(`path`,{d:`M10 3h1`}),P(`path`,{d:`M15 3h1a2 2 0 0 1 2 2v1`}))},screenshot:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M7 19a2 2 0 0 1 -2 -2`}),P(`path`,{d:`M5 13v-2`}),P(`path`,{d:`M5 7a2 2 0 0 1 2 -2`}),P(`path`,{d:`M11 5h2`}),P(`path`,{d:`M17 5a2 2 0 0 1 2 2`}),P(`path`,{d:`M19 11v2`}),P(`path`,{d:`M19 17v4`}),P(`path`,{d:`M21 19h-4`}),P(`path`,{d:`M13 19h-2`}))},arrowBackUp:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M9 14l-4 -4l4 -4`}),P(`path`,{d:`M5 10h11a4 4 0 1 1 0 8h-1`}))},arrowForwardUp:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M15 14l4 -4l-4 -4`}),P(`path`,{d:`M19 10h-11a4 4 0 1 0 0 8h1`}))},trash:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M4 7l16 0`}),P(`path`,{d:`M10 11l0 6`}),P(`path`,{d:`M14 11l0 6`}),P(`path`,{d:`M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12`}),P(`path`,{d:`M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3`}))},deviceFloppy:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2`}),P(`path`,{d:`M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0`}),P(`path`,{d:`M14 4l0 4l-6 0l0 -4`}))},pencilMarker:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor,o=a===void 0?`currentColor`:a;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,"stroke-linejoin":`round`,"stroke-linecap":`round`,"stroke-width":i,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{d:`m9.109 16.275 8.856-8.097c.812-.743.87-2.014.127-2.826s-2.014-.869-2.826-.127L6.41 13.322l-.127 2.826zM13.79 6.575l2.7 2.952`,stroke:`currentColor`}),P(`path`,{stroke:o,d:`M19.375 20.125c.569.063-4.05-.562-6.412-.437s-4.759 1.229-6.857 1.625c-1.764.687-3.404-.938-1.981-2.5`}))},circle:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor,o=a===void 0?`currentColor`:a,s=e.secondaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:s===void 0?`none`:s,stroke:o,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0`}))},square:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor,o=a===void 0?`currentColor`:a,s=e.secondaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:s===void 0?`none`:s,stroke:o,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z`}))},line:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2.2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M20 4l-16 16`}))},lineArrow:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2.2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M20 4l-16 16`}),P(`path`,{d:`M16 3h5v5`}))},polygon:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor,o=a===void 0?`currentColor`:a,s=e.secondaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:s===void 0?`none`:s,stroke:o,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M13.163 2.168l8.021 5.828c.694 .504 .984 1.397 .719 2.212l-3.064 9.43a1.978 1.978 0 0 1 -1.881 1.367h-9.916a1.978 1.978 0 0 1 -1.881 -1.367l-3.064 -9.43a1.978 1.978 0 0 1 .719 -2.212l8.021 -5.828a1.978 1.978 0 0 1 2.326 0z`}))},zigzag:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{d:`M12 2.4L21.36 11.76L2.64 12.24L12 21.6`}))},text:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M6.5 15.5m-3.5 0a3.5 3.5 0 1 0 7 0a3.5 3.5 0 1 0 -7 0`}),P(`path`,{d:`M14 19v-10.5a3.5 3.5 0 0 1 7 0v10.5`}),P(`path`,{d:`M14 13h7`}),P(`path`,{d:`M10 12v7`}))},italic:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M11 5l6 0`}),P(`path`,{d:`M7 19l6 0`}),P(`path`,{d:`M14 5l-4 14`}))},bold:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M7 5h6a3.5 3.5 0 0 1 0 7h-6z`}),P(`path`,{d:`M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7`}))},alignLeft:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M4 6l16 0`}),P(`path`,{d:`M4 12l10 0`}),P(`path`,{d:`M4 18l14 0`}))},alignCenter:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M4 6l16 0`}),P(`path`,{d:`M8 12l8 0`}),P(`path`,{d:`M6 18l12 0`}))},alignRight:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M4 6l16 0`}),P(`path`,{d:`M10 12l10 0`}),P(`path`,{d:`M6 18l14 0`}))},alignTop:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z`}),P(`path`,{d:`M11 13h2`}),P(`path`,{d:`M9 10h6`}),P(`path`,{d:`M10 7h4`}))},alignMiddle:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z`}),P(`path`,{d:`M11 15h2`}),P(`path`,{d:`M9 12h6`}),P(`path`,{d:`M10 9h4`}))},alignBottom:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z`}),P(`path`,{d:`M11 17h2`}),P(`path`,{d:`M9 14h6`}),P(`path`,{d:`M10 11h4`}))},photo:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M15 8h.01`}),P(`path`,{d:`M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z`}),P(`path`,{d:`M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5`}),P(`path`,{d:`M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3`}))},pointer:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z`}))},redact:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M7 4h10`}),P(`path`,{d:`M12 4v8`}),P(`defs`,null,P(`clipPath`,{id:`stripeClip`},P(`rect`,{x:`2`,y:`12`,width:`20`,height:`10`,rx:`2`}))),P(`rect`,{x:`2`,y:`12`,width:`20`,height:`10`,rx:`2`,fill:`none`}),P(`g`,{"clip-path":`url(#stripeClip)`},P(`path`,{d:`M-7 24l12 -12`}),P(`path`,{d:`M-3 24l12 -12`}),P(`path`,{d:`M1 24l12 -12`}),P(`path`,{d:`M5 24l12 -12`}),P(`path`,{d:`M9 24l12 -12`}),P(`path`,{d:`M13 24l12 -12`}),P(`path`,{d:`M17 24l12 -12`}),P(`path`,{d:`M21 24l12 -12`}),P(`path`,{d:`M25 24l12 -12`})))},redactArea:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M6 20h-1a2 2 0 0 1 -2 -2v-1`}),P(`path`,{d:`M3 13v-3`}),P(`path`,{d:`M3 6v-1a2 2 0 0 1 2 -2h1`}),P(`path`,{d:`M10 3h3`}),P(`path`,{d:`M17 3h1a2 2 0 0 1 2 2v1`}),P(`defs`,null,P(`clipPath`,{id:`redactClip`},P(`rect`,{x:`10`,y:`10`,width:`12`,height:`12`,rx:`2`}))),P(`rect`,{x:`10`,y:`10`,width:`12`,height:`12`,rx:`2`,fill:`none`}),P(`g`,{"clip-path":`url(#redactClip)`},P(`path`,{d:`M-2 24l14 -14`}),P(`path`,{d:`M2 24l14 -14`}),P(`path`,{d:`M6 24l14 -14`}),P(`path`,{d:`M10 24l15 -15`}),P(`path`,{d:`M14 24l15 -15`}),P(`path`,{d:`M18 24l15 -15`})))},check:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor;return P(`svg`,{width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:a===void 0?`currentColor`:a,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:e.className,role:`img`,"aria-label":e.title},P(`path`,{stroke:`none`,d:`M0 0h24v24H0z`,fill:`none`}),P(`path`,{d:`M5 12l5 5l10 -10`}))},file:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor,o=a===void 0?`currentColor`:a,s=e.className,c=e.title;return P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:o,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:s,"aria-hidden":!c,role:c?`img`:`presentation`},c&&P(`title`,null,c),P(`path`,{d:`M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z`}),P(`polyline`,{points:`14 2 14 8 20 8`}))},plus:function(e){var t=e.size,n=t===void 0?24:t,r=e.strokeWidth,i=r===void 0?2:r,a=e.primaryColor,o=a===void 0?`currentColor`:a,s=e.className,c=e.title;return P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:o,"stroke-width":i,"stroke-linecap":`round`,"stroke-linejoin":`round`,class:s,"aria-hidden":!c,role:c?`img`:`presentation`},c&&P(`title`,null,c),P(`line`,{x1:`12`,y1:`5`,x2:`12`,y2:`19`}),P(`line`,{x1:`5`,y1:`12`,x2:`19`,y2:`12`}))},lock:function(e){var t=e.size,n=t===void 0?24:t,r=e.className;return P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:r===void 0?``:r,style:e.style},P(`rect`,{x:`3`,y:`11`,width:`18`,height:`11`,rx:`2`,ry:`2`}),P(`path`,{d:`M7 11V7a5 5 0 0 1 10 0v4`}))},alertTriangle:function(e){var t=e.size,n=t===void 0?24:t,r=e.className;return P(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:n,height:n,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,className:r===void 0?``:r,style:e.style},P(`path`,{d:`M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z`}),P(`line`,{x1:`12`,y1:`9`,x2:`12`,y2:`13`}),P(`line`,{x1:`12`,y1:`17`,x2:`12.01`,y2:`17`}))}},Xp=new Map,Zp=/^[MmZzLlHhVvCcSsQqTtAa0-9\s,.\-eE]+$/;function Qp(e){return Zp.test(e.trim())}function $p(e,t){for(var n=function(e){return`path`in e?{viewBox:e.viewBox||`0 0 24 24`,paths:[{d:e.path,stroke:e.stroke??`primary`,fill:e.fill??`none`,strokeWidth:e.strokeWidth}],strokeLinecap:e.strokeLinecap||`round`,strokeLinejoin:e.strokeLinejoin||`round`,strokeWidth:e.strokeWidth}:{viewBox:e.viewBox||`0 0 24 24`,paths:e.paths,strokeLinecap:e.strokeLinecap||`round`,strokeLinejoin:e.strokeLinejoin||`round`,strokeWidth:e.strokeWidth}}(t),r=0;r<n.paths.length;r++){var i=n.paths[r];if(!i.d||!Qp(i.d))throw Error(`Invalid path data for icon "${e}" at path index ${r}. Path must only contain valid SVG path commands.`)}Xp.set(e,n)}function em(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=S(n[t],2);$p(r[0],r[1])}}function tm(e,t,n){return e&&e!==`none`?e===`primary`?t:e===`secondary`?n:e===`currentColor`?`currentColor`:e:`none`}function nm(e){var t,n=e.icon,r=e.title,i=e.size,a=i===void 0?24:i,o=e.strokeWidth,s=o===void 0?2:o,c=e.primaryColor,l=c===void 0?`currentColor`:c,u=e.secondaryColor,d=u===void 0?`none`:u,f=e.className,p=Yp[n];return p?P(p,{size:a,strokeWidth:s,primaryColor:l,secondaryColor:d,className:f,title:r}):(t=n,Xp.has(t)?function(e,t){var n=t.size,r=t.strokeWidth,i=t.primaryColor,a=t.secondaryColor,o=t.className,s=t.title,c=e.strokeWidth??r;return P(`svg`,{width:n,height:n,viewBox:e.viewBox,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,class:o,role:`img`,"aria-label":s},e.paths.map(function(e,t){var n=tm(e.stroke,i,a),r=tm(e.fill,i,a),o=e.strokeWidth??c;return P(`path`,{key:t,d:e.d,stroke:n,fill:r,"stroke-width":n===`none`?void 0:o,opacity:e.opacity})}))}(function(e){return Xp.get(e)}(n),{size:a,strokeWidth:s,primaryColor:l,secondaryColor:d,className:f,title:r}):(console.warn(`Icon not found: ${n}`),null))}var rm=[`id`,`children`,`onClick`,`active`,`disabled`,`className`,`tooltip`,`elementRef`];function im(e){var t=e.id,n=e.children,r=e.onClick,i=e.active,a=i!==void 0&&i,o=e.disabled,s=o!==void 0&&o,c=e.className,l=c===void 0?``:c,u=e.tooltip,d=e.elementRef,f=v(e,rm);return P(`button`,_({id:t,ref:d,onClick:r,className:`flex h-[32px] w-auto min-w-[32px] items-center justify-center rounded-md p-[5px] transition-colors ${a?`bg-interactive-selected text-accent ring-accent border-none shadow ring`:`hover:bg-interactive-hover hover:ring-accent hover:ring`} ${s?`cursor-not-allowed opacity-50 hover:bg-transparent hover:ring-0`:`cursor-pointer`} ${l}`,title:u},f),n)}var am=Math.min,om=Math.max,sm=Math.round,cm=Math.floor,lm=e=>({x:e,y:e}),um={left:`right`,right:`left`,bottom:`top`,top:`bottom`},dm={start:`end`,end:`start`};function fm(e,t,n){return om(e,am(t,n))}function pm(e,t){return typeof e==`function`?e(t):e}function mm(e){return e.split(`-`)[0]}function hm(e){return e.split(`-`)[1]}function gm(e){return e===`x`?`y`:`x`}function _m(e){return e===`y`?`height`:`width`}var vm=new Set([`top`,`bottom`]);function ym(e){return vm.has(mm(e))?`y`:`x`}function bm(e){return gm(ym(e))}function xm(e){return e.replace(/start|end/g,e=>dm[e])}var Sm=[`left`,`right`],Cm=[`right`,`left`],wm=[`top`,`bottom`],Tm=[`bottom`,`top`];function Em(e,t,n,r){let i=hm(e),a=function(e,t,n){switch(e){case`top`:case`bottom`:return n?t?Cm:Sm:t?Sm:Cm;case`left`:case`right`:return t?wm:Tm;default:return[]}}(mm(e),n===`start`,r);return i&&(a=a.map(e=>e+`-`+i),t&&(a=a.concat(a.map(xm)))),a}function Dm(e){return e.replace(/left|right|bottom|top/g,e=>um[e])}function Om(e){return typeof e==`number`?{top:e,right:e,bottom:e,left:e}:function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e)}function km(e){let{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Am(e,t,n){let{reference:r,floating:i}=e,a=ym(t),o=bm(t),s=_m(o),c=mm(t),l=a===`y`,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[s]/2-i[s]/2,p;switch(c){case`top`:p={x:u,y:r.y-i.height};break;case`bottom`:p={x:u,y:r.y+r.height};break;case`right`:p={x:r.x+r.width,y:d};break;case`left`:p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(hm(t)){case`start`:p[o]-=f*(n&&l?-1:1);break;case`end`:p[o]+=f*(n&&l?-1:1)}return p}async function jm(e,t){var n;t===void 0&&(t={});let{x:r,y:i,platform:a,rects:o,elements:s,strategy:c}=e,{boundary:l=`clippingAncestors`,rootBoundary:u=`viewport`,elementContext:d=`floating`,altBoundary:f=!1,padding:p=0}=pm(t,e),m=Om(p),h=s[f?d===`floating`?`reference`:`floating`:d],g=km(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(h)))==null||n?h:h.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:l,rootBoundary:u,strategy:c})),_=d===`floating`?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,v=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),y=await(a.isElement==null?void 0:a.isElement(v))&&await(a.getScale==null?void 0:a.getScale(v))||{x:1,y:1},b=km(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:_,offsetParent:v,strategy:c}):_);return{top:(g.top-b.top+m.top)/y.y,bottom:(b.bottom-g.bottom+m.bottom)/y.y,left:(g.left-b.left+m.left)/y.x,right:(b.right-g.right+m.right)/y.x}}var Mm=new Set([`left`,`top`]);function Nm(){return typeof window<`u`}function Pm(e){return Lm(e)?(e.nodeName||``).toLowerCase():`#document`}function Fm(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Im(e){return((Lm(e)?e.ownerDocument:e.document)||window.document)?.documentElement}function Lm(e){return!!Nm()&&(e instanceof Node||e instanceof Fm(e).Node)}function Rm(e){return!!Nm()&&(e instanceof Element||e instanceof Fm(e).Element)}function zm(e){return!!Nm()&&(e instanceof HTMLElement||e instanceof Fm(e).HTMLElement)}function Bm(e){return!(!Nm()||typeof ShadowRoot>`u`)&&(e instanceof ShadowRoot||e instanceof Fm(e).ShadowRoot)}var Vm=new Set([`inline`,`contents`]);function Hm(e){let{overflow:t,overflowX:n,overflowY:r,display:i}=eh(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Vm.has(i)}var Um=new Set([`table`,`td`,`th`]);function Wm(e){return Um.has(Pm(e))}var Gm=[`:popover-open`,`:modal`];function Km(e){return Gm.some(t=>{try{return e.matches(t)}catch{return!1}})}var qm=[`transform`,`translate`,`scale`,`rotate`,`perspective`],Jm=[`transform`,`translate`,`scale`,`rotate`,`perspective`,`filter`],Ym=[`paint`,`layout`,`strict`,`content`];function Xm(e){let t=Zm(),n=Rm(e)?eh(e):e;return qm.some(e=>!!n[e]&&n[e]!==`none`)||!!n.containerType&&n.containerType!==`normal`||!t&&!!n.backdropFilter&&n.backdropFilter!==`none`||!t&&!!n.filter&&n.filter!==`none`||Jm.some(e=>(n.willChange||``).includes(e))||Ym.some(e=>(n.contain||``).includes(e))}function Zm(){return!(typeof CSS>`u`||!CSS.supports)&&CSS.supports(`-webkit-backdrop-filter`,`none`)}var Qm=new Set([`html`,`body`,`#document`]);function $m(e){return Qm.has(Pm(e))}function eh(e){return Fm(e).getComputedStyle(e)}function th(e){return Rm(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function nh(e){if(Pm(e)===`html`)return e;let t=e.assignedSlot||e.parentNode||Bm(e)&&e.host||Im(e);return Bm(t)?t.host:t}function rh(e){let t=nh(e);return $m(t)?e.ownerDocument?e.ownerDocument.body:e.body:zm(t)&&Hm(t)?t:rh(t)}function ih(e,t,n){t===void 0&&(t=[]),n===void 0&&(n=!0);let r=rh(e),i=r===e.ownerDocument?.body,a=Fm(r);if(i){let e=ah(a);return t.concat(a,a.visualViewport||[],Hm(r)?r:[],e&&n?ih(e):[])}return t.concat(r,ih(r,[],n))}function ah(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function oh(e){let t=eh(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=zm(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,s=sm(n)!==a||sm(r)!==o;return s&&(n=a,r=o),{width:n,height:r,$:s}}function sh(e){return Rm(e)?e:e.contextElement}function ch(e){let t=sh(e);if(!zm(t))return lm(1);let n=t.getBoundingClientRect(),{width:r,height:i,$:a}=oh(t),o=(a?sm(n.width):n.width)/r,s=(a?sm(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),s&&Number.isFinite(s)||(s=1),{x:o,y:s}}var lh=lm(0);function uh(e){let t=Fm(e);return Zm()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:lh}function dh(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);let i=e.getBoundingClientRect(),a=sh(e),o=lm(1);t&&(r?Rm(r)&&(o=ch(r)):o=ch(e));let s=function(e,t,n){return t===void 0&&(t=!1),!(!n||t&&n!==Fm(e))&&t}(a,n,r)?uh(a):lm(0),c=(i.left+s.x)/o.x,l=(i.top+s.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(a){let e=Fm(a),t=r&&Rm(r)?Fm(r):r,n=e,i=ah(n);for(;i&&r&&t!==n;){let e=ch(i),t=i.getBoundingClientRect(),r=eh(i),a=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,l*=e.y,u*=e.x,d*=e.y,c+=a,l+=o,n=Fm(i),i=ah(n)}}return km({width:u,height:d,x:c,y:l})}function fh(e,t){let n=th(e).scrollLeft;return t?t.left+n:dh(Im(e)).left+n}function ph(e,t){let n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-fh(e,n),y:n.top+t.scrollTop}}var mh=new Set([`absolute`,`fixed`]);function hh(e,t,n){let r;if(t===`viewport`)r=function(e,t){let n=Fm(e),r=Im(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,c=0;if(i){a=i.width,o=i.height;let e=Zm();(!e||e&&t===`fixed`)&&(s=i.offsetLeft,c=i.offsetTop)}let l=fh(r);if(l<=0){let e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i=e.compatMode===`CSS1Compat`&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,o=Math.abs(r.clientWidth-t.clientWidth-i);o<=25&&(a-=o)}else l<=25&&(a+=l);return{width:a,height:o,x:s,y:c}}(e,n);else if(t===`document`)r=function(e){let t=Im(e),n=th(e),r=e.ownerDocument.body,i=om(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=om(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),o=-n.scrollLeft+fh(e),s=-n.scrollTop;return eh(r).direction===`rtl`&&(o+=om(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:s}}(Im(e));else if(Rm(t))r=function(e,t){let n=dh(e,!0,t===`fixed`),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=zm(e)?ch(e):lm(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:i*a.x,y:r*a.y}}(t,n);else{let n=uh(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return km(r)}function gh(e,t){let n=nh(e);return!(n===t||!Rm(n)||$m(n))&&(eh(n).position===`fixed`||gh(n,t))}function _h(e,t,n){let r=zm(t),i=Im(t),a=n===`fixed`,o=dh(e,!0,a,t),s={scrollLeft:0,scrollTop:0},c=lm(0);function l(){c.x=fh(i)}if(r||!r&&!a)if((Pm(t)!==`body`||Hm(i))&&(s=th(t)),r){let e=dh(t,!0,a,t);c.x=e.x+t.clientLeft,c.y=e.y+t.clientTop}else i&&l();a&&!r&&i&&l();let u=!i||r||a?lm(0):ph(i,s);return{x:o.left+s.scrollLeft-c.x-u.x,y:o.top+s.scrollTop-c.y-u.y,width:o.width,height:o.height}}function vh(e){return eh(e).position===`static`}function yh(e,t){if(!zm(e)||eh(e).position===`fixed`)return null;if(t)return t(e);let n=e.offsetParent;return Im(e)===n&&(n=n.ownerDocument.body),n}function bh(e,t){let n=Fm(e);if(Km(e))return n;if(!zm(e)){let t=nh(e);for(;t&&!$m(t);){if(Rm(t)&&!vh(t))return t;t=nh(t)}return n}let r=yh(e,t);for(;r&&Wm(r)&&vh(r);)r=yh(r,t);return r&&$m(r)&&vh(r)&&!Xm(r)?n:r||function(e){let t=nh(e);for(;zm(t)&&!$m(t);){if(Xm(t))return t;if(Km(t))return null;t=nh(t)}return null}(e)||n}var xh={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e,a=i===`fixed`,o=Im(r),s=!!t&&Km(t.floating);if(r===o||s&&a)return n;let c={scrollLeft:0,scrollTop:0},l=lm(1),u=lm(0),d=zm(r);if((d||!d&&!a)&&((Pm(r)!==`body`||Hm(o))&&(c=th(r)),zm(r))){let e=dh(r);l=ch(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}let f=!o||d||a?lm(0):ph(o,c);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:n.y*l.y-c.scrollTop*l.y+u.y+f.y}},getDocumentElement:Im,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e,a=[...n===`clippingAncestors`?Km(t)?[]:function(e,t){let n=t.get(e);if(n)return n;let r=ih(e,[],!1).filter(e=>Rm(e)&&Pm(e)!==`body`),i=null,a=eh(e).position===`fixed`,o=a?nh(e):e;for(;Rm(o)&&!$m(o);){let t=eh(o),n=Xm(o);n||t.position!==`fixed`||(i=null),(a?!n&&!i:!n&&t.position===`static`&&i&&mh.has(i.position)||Hm(o)&&!n&&gh(e,o))?r=r.filter(e=>e!==o):i=t,o=nh(o)}return t.set(e,r),r}(t,this._c):[].concat(n),r],o=a[0],s=a.reduce((e,n)=>{let r=hh(t,n,i);return e.top=om(r.top,e.top),e.right=am(r.right,e.right),e.bottom=am(r.bottom,e.bottom),e.left=om(r.left,e.left),e},hh(t,o,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:bh,getElementRects:async function(e){let t=this.getOffsetParent||bh,n=this.getDimensions,r=await n(e.floating);return{reference:_h(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:n}=oh(e);return{width:t,height:n}},getScale:ch,isElement:Rm,isRTL:function(e){return eh(e).direction===`rtl`}};function Sh(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ch(e,t,n,r){r===void 0&&(r={});let{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver==`function`,layoutShift:s=typeof IntersectionObserver==`function`,animationFrame:c=!1}=r,l=sh(e),u=i||a?[...l?ih(l):[],...ih(t)]:[];u.forEach(e=>{i&&e.addEventListener(`scroll`,n,{passive:!0}),a&&e.addEventListener(`resize`,n)});let d=l&&s?function(e,t){let n,r=null,i=Im(e);function a(){var e;clearTimeout(n),(e=r)==null||e.disconnect(),r=null}return function o(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),a();let l=e.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=l;if(s||t(),!f||!p)return;let m={rootMargin:-cm(d)+`px `+-cm(i.clientWidth-(u+f))+`px `+-cm(i.clientHeight-(d+p))+`px `+-cm(u)+`px`,threshold:om(0,am(1,c))||1},h=!0;function g(t){let r=t[0].intersectionRatio;if(r!==c){if(!h)return o();r?o(!1,r):n=setTimeout(()=>{o(!1,1e-7)},1e3)}r!==1||Sh(l,e.getBoundingClientRect())||o(),h=!1}try{r=new IntersectionObserver(g,{...m,root:i.ownerDocument})}catch{r=new IntersectionObserver(g,m)}r.observe(e)}(!0),a}(l,n):null,f,p=-1,m=null;o&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===l&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;(e=m)==null||e.observe(t)})),n()}),l&&!c&&m.observe(l),m.observe(t));let h=c?dh(e):null;return c&&function t(){let r=dh(e);h&&!Sh(h,r)&&n(),h=r,f=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach(e=>{i&&e.removeEventListener(`scroll`,n),a&&e.removeEventListener(`resize`,n)}),d?.(),(e=m)==null||e.disconnect(),m=null,c&&cancelAnimationFrame(f)}}var wh=function(e){return e===void 0&&(e=0),{name:`offset`,options:e,async fn(t){var n;let{x:r,y:i,placement:a,middlewareData:o}=t,s=await async function(e,t){let{placement:n,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=mm(n),s=hm(n),c=ym(n)===`y`,l=Mm.has(o)?-1:1,u=a&&c?-1:1,d=pm(t,e),{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof d==`number`?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof m==`number`&&(p=s===`end`?-1*m:m),c?{x:p*u,y:f*l}:{x:f*l,y:p*u}}(t,e);return a===o.offset?.placement&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:r+s.x,y:i+s.y,data:{...s,placement:a}}}}},Th=function(e){return e===void 0&&(e={}),{name:`shift`,options:e,async fn(t){let{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=pm(e,t),l={x:n,y:r},u=await jm(t,c),d=ym(mm(i)),f=gm(d),p=l[f],m=l[d];if(a){let e=f===`y`?`bottom`:`right`;p=fm(p+u[f===`y`?`top`:`left`],p,p-u[e])}if(o){let e=d===`y`?`bottom`:`right`;m=fm(m+u[d===`y`?`top`:`left`],m,m-u[e])}let h=s.fn({...t,[f]:p,[d]:m});return{...h,data:{x:h.x-n,y:h.y-r,enabled:{[f]:a,[d]:o}}}}}},Eh=function(e){return e===void 0&&(e={}),{name:`flip`,options:e,async fn(t){var n;let{placement:r,middlewareData:i,rects:a,initialPlacement:o,platform:s,elements:c}=t,{mainAxis:l=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:f=`bestFit`,fallbackAxisSideDirection:p=`none`,flipAlignment:m=!0,...h}=pm(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};let g=mm(r),_=ym(o),v=mm(o)===o,y=await(s.isRTL==null?void 0:s.isRTL(c.floating)),b=d||(v||!m?[Dm(o)]:function(e){let t=Dm(e);return[xm(e),t,xm(t)]}(o)),x=p!==`none`;!d&&x&&b.push(...Em(o,m,p,y));let S=[o,...b],C=await jm(t,h),w=[],T=i.flip?.overflows||[];if(l&&w.push(C[g]),u){let e=function(e,t,n){n===void 0&&(n=!1);let r=hm(e),i=bm(e),a=_m(i),o=i===`x`?r===(n?`end`:`start`)?`right`:`left`:r===`start`?`bottom`:`top`;return t.reference[a]>t.floating[a]&&(o=Dm(o)),[o,Dm(o)]}(r,a,y);w.push(C[e[0]],C[e[1]])}if(T=[...T,{placement:r,overflows:w}],!w.every(e=>e<=0)){let e=(i.flip?.index||0)+1,t=S[e];if(t&&(!(u===`alignment`&&_!==ym(t))||T.every(e=>ym(e.placement)!==_||e.overflows[0]>0)))return{data:{index:e,overflows:T},reset:{placement:t}};let n=T.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0]?.placement;if(!n)switch(f){case`bestFit`:{let e=T.filter(e=>{if(x){let t=ym(e.placement);return t===_||t===`y`}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0]?.[0];e&&(n=e);break}case`initialPlacement`:n=o}if(r!==n)return{reset:{placement:n}}}return{}}}},Dh=e=>({name:`arrow`,options:e,async fn(t){let{x:n,y:r,placement:i,rects:a,platform:o,elements:s,middlewareData:c}=t,{element:l,padding:u=0}=pm(e,t)||{};if(l==null)return{};let d=Om(u),f={x:n,y:r},p=bm(i),m=_m(p),h=await o.getDimensions(l),g=p===`y`,_=g?`top`:`left`,v=g?`bottom`:`right`,y=g?`clientHeight`:`clientWidth`,b=a.reference[m]+a.reference[p]-f[p]-a.floating[m],x=f[p]-a.reference[p],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l)),C=S?S[y]:0;C&&await(o.isElement==null?void 0:o.isElement(S))||(C=s.floating[y]||a.floating[m]);let w=b/2-x/2,T=C/2-h[m]/2-1,E=am(d[_],T),D=am(d[v],T),O=E,k=C-h[m]-D,A=C/2-h[m]/2+w,ee=fm(O,A,k),j=!c.arrow&&hm(i)!=null&&A!==ee&&a.reference[m]/2-(A<O?E:D)-h[m]/2<0,M=j?A<O?A-O:A-k:0;return{[p]:f[p]+M,data:{[p]:ee,centerOffset:A-ee-M,...j&&{alignmentOffset:M}},reset:j}}}),Oh=(e,t,n)=>{let r=new Map,i={platform:xh,...n},a={...i.platform,_c:r};return(async(e,t,n)=>{let{placement:r=`bottom`,strategy:i=`absolute`,middleware:a=[],platform:o}=n,s=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t)),l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=Am(l,r,c),f=r,p={},m=0;for(let n=0;n<s.length;n++){let{name:a,fn:h}=s[n],{x:g,y:_,data:v,reset:y}=await h({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:l,platform:o,elements:{reference:e,floating:t}});u=g??u,d=_??d,p={...p,[a]:{...p[a],...v}},y&&m<=50&&(m++,typeof y==`object`&&(y.placement&&(f=y.placement),y.rects&&(l=!0===y.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):y.rects),{x:u,y:d}=Am(l,f,c)),n=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:p}})(e,t,{...i,platform:a})},kh=function(){function e(){return c(this,e),s(this,e,arguments)}return m(e,fe),u(e,[{key:`render`,value:function(){return this.props.children}}])}();function Ah(e){var t=e.children,n=e.content,r=e.position,i=r===void 0?`top`:r,a=e.className,o=a===void 0?``:a,s=e.delay,c=s===void 0?200:s,l=e.style,u=l===void 0?`dark`:l,d=e.trigger,p=d===void 0?`hover`:d,m=R(null),h=R(null),g=R(null),_=S(I(!1),2),v=_[0],y=_[1],b=R(null);return L(function(){var e;if((e=m.current)!=null&&e.base&&h.current)return Ch(m.current.base,h.current,function(){Oh(m.current.base,h.current,{placement:i,middleware:[wh(8),Eh(),Th({padding:8}),Dh({element:g.current,padding:6})]}).then(function(e){var t=e.x,n=e.y,r=e.placement,i=e.middlewareData;Object.assign(h.current.style,{left:`${t}px`,top:`${n}px`});var a=i.arrow??{},o=a.x,s=a.y,c={top:`bottom`,bottom:`top`,left:`right`,right:`left`}[r.split(`-`)[0]];Object.assign(g.current.style,f({left:o==null?``:`${o}px`,top:s==null?``:`${s}px`,right:``,bottom:``},c,`-4px`))})})},[i,v]),L(function(){var e=m.current?.base,t=h.current;if(e&&t){var n=function(){b.current&&clearTimeout(b.current)},r=function(){n(),b.current=setTimeout(function(){return y(!0)},c)},i=function(){n(),y(!1)},a=function(){return y(function(e){return!e})};return p===`hover`?(e.addEventListener(`mouseenter`,r),e.addEventListener(`mouseleave`,i),t.addEventListener(`mouseenter`,r),t.addEventListener(`mouseleave`,i),e.addEventListener(`pointerdown`,i)):p===`click`&&e.addEventListener(`click`,a),p===`none`&&(b.current&&clearTimeout(b.current),y(!1)),function(){n(),p===`hover`?(e.removeEventListener(`mouseenter`,r),e.removeEventListener(`mouseleave`,i),t.removeEventListener(`mouseenter`,r),t.removeEventListener(`mouseleave`,i),e.removeEventListener(`pointerdown`,i)):p===`click`&&e.removeEventListener(`click`,a)}}},[p,c]),P(F,null,P(`div`,{ref:h,role:`tooltip`,className:`z-100 pointer-events-none absolute select-none whitespace-nowrap rounded-lg px-3 py-2 text-sm shadow-md transition-opacity duration-150 ${u===`dark`?`bg-tooltip-bg text-tooltip-fg`:`border-border-subtle bg-bg-elevated text-fg-primary border`} ${v?`opacity-100`:`opacity-0`} ${o} `,style:{visibility:v?`visible`:`hidden`}},n,P(`div`,{ref:g,className:`absolute h-2 w-2 rotate-45 bg-inherit ${u===`light`?`border-border-subtle border`:``} `})),P(kh,{ref:m},t))}function jh(e){var t=e.commandId,n=e.documentId,r=e.variant,i=r===void 0?`icon`:r,a=e.itemId,o=e.className,s=lo(t,n),c=Ra(n,a||t);if(!s||!s.visible)return null;var l=s.iconProps||{};return P(Ah,{content:s.label,position:`bottom`,delay:500,trigger:s.active?`none`:`hover`},P(im,{elementRef:c,onClick:function(){s.disabled||s.execute()},active:s.active,disabled:s.disabled,className:o||`p-1`,"aria-label":s.label},i===`text`?P(`span`,{className:`text-sm`},s.label):i===`icon-text`?P(F,null,s.icon&&P(nm,{icon:s.icon,className:`mr-2 h-5 w-5`,primaryColor:l.primaryColor,secondaryColor:l.secondaryColor}),P(`span`,null,s.label)):i===`tab`?P(`span`,{className:`px-3 py-1`},s.label):s.icon?P(nm,{icon:s.icon,className:Vp(`h-5 w-5`,l.className),primaryColor:l.primaryColor,secondaryColor:l.secondaryColor}):P(`span`,null,s.label)))}function Mh(e){var t=e.schema,n=e.documentId,r=e.isOpen,i=e.className,a=i===void 0?``:i;if(!r)return null;var o=t.position.slot===`secondary`;return P(`div`,_({className:Vp(`flex items-center gap-2`,function(e){switch(e){case`top`:return`border-b border-border-default bg-bg-surface px-4 py-2`;case`bottom`:return`border-t border-border-default bg-bg-surface px-4 py-2`;case`left`:return`border-r border-border-default bg-bg-surface px-2 py-3 flex-col`;case`right`:return`border-l border-border-default bg-bg-surface px-2 py-3 flex-col`}}(t.position.placement),o?`bg-bg-surface-alt`:``,a)},xa(t)),t.items.map(function(e){return P(Nh,{key:e.id,item:e,documentId:n})}))}function Nh(e){var t=e.item,n=e.documentId;switch(t.type){case`command-button`:return P(Ph,{item:t,documentId:n});case`tab-group`:return P(Fh,{item:t,documentId:n});case`divider`:return P(Rh,{item:t});case`spacer`:return P(zh,{item:t});case`group`:return P(Bh,{item:t,documentId:n});case`custom`:return P(Vh,{item:t,documentId:n});default:return console.warn(`Unknown toolbar item type:`,t),null}}function Ph(e){var t=e.item,n=e.documentId;return P(`div`,_({},xa(t)),P(jh,{commandId:t.commandId,documentId:n,itemId:t.id,variant:t.variant}))}function Fh(e){var t=e.item,n=e.documentId;return P(`div`,_(_({className:`flex items-center gap-2`},xa(t)),{},{role:`tablist`}),t.tabs.map(function(e){return P(Ih,{key:e.id,tab:e,documentId:n})}))}function Ih(e){var t=e.tab,n=e.documentId,r=lo(t.commandId,n),i=Ra(n,t.id);return!r||!r.visible?null:P(`div`,_({},xa(t)),P(Up,{anchorRef:i,active:r.active,onClick:function(){r.disabled||r.execute()},disabled:r.disabled},t.variant===`text`&&r.label,t.variant===`icon`&&r.icon&&P(Lh,{icon:r.icon,iconProps:r.iconProps}),t.variant===`icon-text`&&P(F,null,r.icon&&P(Lh,{icon:r.icon,iconProps:r.iconProps}),r.label)))}function Lh(e){var t=e.icon,n=e.iconProps;return P(nm,{icon:t,className:`h-5 w-5`,primaryColor:n?.primaryColor,secondaryColor:n?.secondaryColor})}function Rh(e){var t=e.item;return P(`div`,_({},xa(t)),P(`div`,{className:t.orientation===`vertical`?`bg-border-default h-6 w-px`:`bg-border-default h-px w-6`,"aria-hidden":`true`}))}function zh(e){var t=e.item;return P(`div`,_(_({className:t.flex?`flex-1`:`w-4`},xa(t)),{},{"aria-hidden":`true`}))}function Bh(e){var t=e.item,n=e.documentId;return P(`div`,_({className:Vp(`flex items-center`,t.gap?`gap-${t.gap}`:`gap-2`,function(e){switch(e){case`start`:default:return`justify-start`;case`center`:return`justify-center`;case`end`:return`justify-end`}}(t.alignment))},xa(t)),t.items.map(function(e){return P(Nh,{key:e.id,item:e,documentId:n})}))}function Vh(e){var t=e.item,n=e.documentId,r=Va().renderCustomComponent;return P(`div`,_({},xa(t)),r(t.componentId,n,t.props))}function Hh(e,t){for(var n in e)if(n!==`__source`&&!(n in t))return!0;for(var r in t)if(r!==`__source`&&e[r]!==t[r])return!0;return!1}function Uh(e,t){this.props=e,this.context=t}(Uh.prototype=new fe).isPureReactComponent=!0,Uh.prototype.shouldComponentUpdate=function(e,t){return Hh(this.props,e)||Hh(this.state,t)};var Wh=O.__b;O.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Wh&&Wh(e)};var Gh=O.__e;O.__e=function(e,t,n,r){if(e.then){for(var i,a=t;a=a.__;)if((i=a.__c)&&i.__c)return t.__e??(t.__e=n.__e,t.__k=n.__k),i.__c(e,t)}Gh(e,t,n,r)};var Kh=O.unmount;function qh(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(e){typeof e.__c==`function`&&e.__c()}),e.__c.__H=null),(e=function(e,t){for(var n in t)e[n]=t[n];return e}({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(e){return qh(e,t,n)})),e}function Jh(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(e){return Jh(e,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function Yh(){this.__u=0,this.o=null,this.__b=null}function Xh(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Zh(){this.i=null,this.l=null}O.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Kh&&Kh(e)},(Yh.prototype=new fe).__c=function(e,t){var n=t.__c,r=this;r.o??=[],r.o.push(n);var i=Xh(r.__v),a=!1,o=function(){a||(a=!0,n.__R=null,i?i(s):s())};n.__R=o;var s=function(){if(!--r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=Jh(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.o.pop();)t.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(o,o)},Yh.prototype.componentWillUnmount=function(){this.o=[]},Yh.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement(`div`),r=this.__v.__k[0].__c;this.__v.__k[0]=qh(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&P(F,null,e.fallback);return i&&(i.__u&=-33),[P(F,null,t.__a?null:e.children),i]};var Qh=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!==`t`||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function $h(e){return this.getChildContext=function(){return e.context},e.children}function eg(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){Me(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var r=t.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},insertBefore:function(e,n){this.childNodes.push(e),t.h.insertBefore(e,n)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.h.removeChild(e)}}}Me(P($h,{context:t.context},e.__v),t.v)}function tg(e,t){var n=P(eg,{__v:e,h:t});return n.containerInfo=t,n}(Zh.prototype=new fe).__a=function(e){var t=this,n=Xh(t.__v),r=t.l.get(e);return r[0]++,function(i){var a=function(){t.props.revealOrder?(r.push(i),Qh(t,e,r)):i()};n?n(a):a()}},Zh.prototype.render=function(e){this.i=null,this.l=new Map;var t=ye(e.children);e.revealOrder&&e.revealOrder[0]===`b`&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},Zh.prototype.componentDidUpdate=Zh.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){Qh(e,n,t)})};var ng=typeof Symbol<`u`&&Symbol.for&&Symbol.for(`react.element`)||60103,rg=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ig=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,ag=/[A-Z0-9]/g,og=typeof document<`u`,sg=function(e){return(typeof Symbol<`u`&&typeof Symbol()==`symbol`?/fil|che|rad/:/fil|che|ra/).test(e)};fe.prototype.isReactComponent={},[`componentWillMount`,`componentWillReceiveProps`,`componentWillUpdate`].forEach(function(e){Object.defineProperty(fe.prototype,e,{configurable:!0,get:function(){return this[`UNSAFE_`+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var cg=O.event;function lg(){}function ug(){return this.cancelBubble}function dg(){return this.defaultPrevented}O.event=function(e){return cg&&(e=cg(e)),e.persist=lg,e.isPropagationStopped=ug,e.isDefaultPrevented=dg,e.nativeEvent=e};var fg={enumerable:!1,configurable:!0,get:function(){return this.class}},pg=O.vnode;O.vnode=function(e){typeof e.type==`string`&&function(e){var t=e.props,n=e.type,r={},i=n.indexOf(`-`)===-1;for(var a in t){var o=t[a];if(!(a===`value`&&`defaultValue`in t&&o==null||og&&a===`children`&&n===`noscript`||a===`class`||a===`className`)){var s=a.toLowerCase();a===`defaultValue`&&`value`in t&&t.value==null?a=`value`:a===`download`&&!0===o?o=``:s===`translate`&&o===`no`?o=!1:s[0]===`o`&&s[1]===`n`?s===`ondoubleclick`?a=`ondblclick`:s!==`onchange`||n!==`input`&&n!==`textarea`||sg(t.type)?s===`onfocus`?a=`onfocusin`:s===`onblur`?a=`onfocusout`:ig.test(a)&&(a=s):s=a=`oninput`:i&&rg.test(a)?a=a.replace(ag,`-$&`).toLowerCase():o===null&&(o=void 0),s===`oninput`&&r[a=s]&&(a=`oninputCapture`),r[a]=o}}n==`select`&&r.multiple&&Array.isArray(r.value)&&(r.value=ye(t.children).forEach(function(e){e.props.selected=r.value.indexOf(e.props.value)!=-1})),n==`select`&&r.defaultValue!=null&&(r.value=ye(t.children).forEach(function(e){e.props.selected=r.multiple?r.defaultValue.indexOf(e.props.value)!=-1:r.defaultValue==e.props.value})),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,`className`,fg)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r}(e),e.$$typeof=ng,pg&&pg(e)};var mg=O.__r;O.__r=function(e){mg&&mg(e),e.__c};var hg=O.diffed;O.diffed=function(e){hg&&hg(e);var t=e.props,n=e.__e;n!=null&&e.type===`textarea`&&`value`in t&&t.value!==n.value&&(n.value=t.value==null?``:t.value)};function gg(e){var t=e.schema,n=e.documentId,r=e.isOpen,i=e.onClose,a=Pa().getContainer,o=S(I(function(){var e=a();return!!e&&e.clientWidth<768}),2),s=o[0],c=o[1];L(function(){var e=a();if(e){var t=new ResizeObserver(function(){var t=e.clientWidth;c(t<768)});return t.observe(e),function(){return t.disconnect()}}},[a]);var l=t.position,u=t.content,d=t.width,f=Va().renderCustomComponent,p=a();if(s&&p)return tg(P(_g,{schema:t,documentId:n,isOpen:r,onClose:i,renderCustomComponent:f,content:u,rootElement:p}),p);if(!r)return null;var m=function(e){switch(e){case`left`:return`border-r`;case`right`:return`border-l`;case`top`:return`border-b`;case`bottom`:return`border-t`}}(l.placement),h=d?{width:d}:void 0;return P(`div`,{className:`${m} border-border-default bg-bg-surface flex flex-col shadow-lg`,style:h,"data-sidebar-id":t.id},P(`div`,{className:`min-h-0 flex-1`},u.type===`tabs`&&P(vg,{content:u,documentId:n,renderCustomComponent:f}),u.type===`component`&&P(F,null,f(u.componentId,n,{}))))}function _g(e){var t=e.schema,n=e.documentId,r=e.isOpen,i=e.onClose,a=e.renderCustomComponent,o=e.content,s=e.rootElement,c=S(I(`closed`),2),l=c[0],u=c[1],d=S(I(!1),2),f=d[0],p=d[1],m=S(I(0),2),h=m[0],g=m[1],_=S(I(!1),2),v=_[0],y=_[1],b=R(null),x=R({y:0,height:0,time:0,state:`half`}),C=R({y:0,time:0});L(function(){if(!r){u(`closed`);var e=setTimeout(function(){y(!1)},300);return function(){return clearTimeout(e)}}y(!0),requestAnimationFrame(function(){requestAnimationFrame(function(){u(`half`)})})},[r]);var w=function(e){switch(e){case`closed`:return 0;case`half`:return 50;case`full`:return 100}},T=B(function(e){if(b.current){var t,n=s.clientHeight,r=b.current.offsetHeight/n*100;t=r>=75?`full`:r<=25?`closed`:`half`,x.current={y:e,height:r,time:Date.now(),state:t},C.current={y:e,time:Date.now()},g(0),t!==l&&u(t),p(!0)}},[s,l]),E=B(function(e){if(f){var t=s.clientHeight,n=(x.current.y-e)/t*100,r=Math.max(0,Math.min(100,x.current.height+n));C.current={y:e,time:Date.now()},g(r-w(x.current.state))}},[f,s]),D=B(function(){if(f){if(Math.abs(x.current.y-C.current.y)<5)return p(!1),void g(0);var e=w(x.current.state)+h,t=Date.now()-C.current.time,n=C.current.y-x.current.y,r=function(e,t){return Math.abs(t)>.5?t>0?e>50?`half`:`closed`:e<50?`half`:`full`:e>=75?`full`:e<=25?`closed`:`half`}(e,t>0?n/t:0);r===`closed`?(u(`closed`),p(!1),g(0),i()):(p(!1),g(0),u(r))}},[f,h,i]),O=B(function(e){T(e.touches[0].clientY)},[T]),k=B(function(e){f&&(e.cancelable&&e.preventDefault(),E(e.touches[0].clientY))},[f,E]),A=B(function(){D()},[D]),ee=B(function(e){e.preventDefault(),T(e.clientY)},[T]);if(L(function(){if(f){var e=function(e){E(e.clientY)},t=function(){D()};return document.addEventListener(`mousemove`,e),document.addEventListener(`mouseup`,t),function(){document.removeEventListener(`mousemove`,e),document.removeEventListener(`mouseup`,t)}}},[f,E,D]),!v)return null;var j=w(f?x.current.state:l),M=f?Math.max(0,Math.min(100,j+h)):j,N=.3*Math.min(M/50,1);return P(F,null,P(`div`,{className:`bg-bg-overlay absolute inset-0 z-40 transition-opacity duration-300 ${M===0?`pointer-events-none`:``}`,style:{opacity:N},onClick:i}),P(`div`,{ref:b,className:`bg-bg-surface absolute inset-x-0 bottom-0 z-50 flex flex-col rounded-t-2xl shadow-2xl ${f?``:`transition-[height] duration-300 ease-out`}`,style:{height:`${M}%`},"data-sidebar-id":t.id},P(`div`,{className:`flex flex-shrink-0 cursor-grab touch-none items-center justify-center py-3 active:cursor-grabbing`,onTouchStart:O,onTouchMove:k,onTouchEnd:A,onMouseDown:ee},P(`div`,{className:`bg-border-default h-1.5 w-12 rounded-full`})),P(`div`,{className:`min-h-0 flex-1 overflow-hidden`},o.type===`tabs`&&P(vg,{content:o,documentId:n,renderCustomComponent:a}),o.type===`component`&&P(F,null,a(o.componentId,n,{})))))}function vg(e){var t=e.content,n=e.documentId,r=e.renderCustomComponent,i=S(I(t.tabs[0]?.id||``),2),a=i[0],o=i[1];return P(`div`,{className:`flex h-full flex-1 flex-col`},P(`div`,{role:`tablist`,className:`bg-bg-surface mx-4 my-4 flex flex-shrink-0 overflow-hidden`},t.tabs.map(function(e,t,n){var r=a===e.id,i=t===0,s=t===n.length-1;return P(`button`,{key:e.id,role:`tab`,"aria-selected":r,tabIndex:r?0:-1,onClick:function(){return o(e.id)},className:`relative flex h-7 flex-1 cursor-pointer items-center justify-center border outline-none transition-colors ${i?`rounded-l-md`:``} ${s?`rounded-r-md`:``} ${s?``:`border-r-0`} ${r?`border-accent bg-accent text-fg-on-accent`:`border-border-default text-fg-secondary hover:bg-interactive-hover`}`},e.icon&&P(nm,{icon:e.icon,className:`h-5 w-5`}))})),P(`div`,{className:`min-h-0 flex-1 overflow-auto`},t.tabs.filter(function(e){return e.id===a}).map(function(e){return P(F,{key:e.id},r(e.componentId,n,{}))})))}function yg(e){var t=e.schema,n=e.documentId,r=e.anchorEl,i=e.onClose,a=Pa().getContainer,o=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:768,n=S(I(function(){var n=e();return!!n&&n.clientWidth<t}),2),r=n[0],i=n[1];return L(function(){var n=e();if(n){var r=new ResizeObserver(function(){i(n.clientWidth<t)});return r.observe(n),function(){return r.disconnect()}}},[e,t]),r}(a,768),s=a(),c=(()=>{let{provides:e}=ja();return e?.getSchema()??null})(),l=S(I([{menuId:t.id,schema:t,title:void 0}]),2),u=l[0],d=l[1];L(function(){d([{menuId:t.id,schema:t,title:void 0}])},[t]);var f=u[u.length-1],p=B(function(e,t){if(c){var n=c.menus[e];n?d(function(r){return[].concat(C(r),[{menuId:e,schema:n,title:t}])}):console.warn(`Submenu schema not found: ${e}`)}},[c]),m=B(function(){u.length>1&&d(function(e){return e.slice(0,-1)})},[u.length]);return f?o&&s?tg(P(bg,{currentMenu:f,menuStack:u,documentId:n,onClose:i,onNavigateBack:m,onNavigateToSubmenu:p,container:s}),s):P(xg,{currentMenu:f,documentId:n,anchorEl:r,onClose:i,onNavigateToSubmenu:p}):null}function bg(e){var t=e.currentMenu,n=e.menuStack,r=e.documentId,i=e.onClose,a=e.onNavigateBack,o=e.onNavigateToSubmenu,s=e.container,c=S(I(!1),2),l=c[0],u=c[1],d=S(I(!1),2),f=d[0],p=d[1],m=S(I(0),2),h=m[0],g=m[1],v=R(null),y=R(null),b=R({isDragging:!1,startY:0,currentY:0,startTime:0,sheetHeight:0});L(function(){u(!0),requestAnimationFrame(function(){requestAnimationFrame(function(){p(!0)})})},[]);var x=S(I(null),2),C=x[0],w=x[1];L(function(){if(y.current){var e=(n.length>1?60:0)+y.current.scrollHeight+24,t=.8*s.clientHeight;w(Math.min(e,t))}},[t,n.length,s]);var T=B(function(){p(!1),setTimeout(function(){u(!1),i()},300)},[i]),E=B(function(e){v.current&&(b.current={isDragging:!0,startY:e,currentY:e,startTime:Date.now(),sheetHeight:v.current.offsetHeight})},[]),D=B(function(e){if(b.current.isDragging){var t=e-b.current.startY,n=Math.max(0,t);b.current.currentY=e,g(n)}},[]),O=B(function(){if(b.current.isDragging){var e=b.current,t=e.startY,n=e.currentY,r=e.startTime,i=e.sheetHeight,a=Math.abs(t-n);if(b.current.isDragging=!1,a<5)g(0);else{var o=n-t,s=o/i*100,c=Date.now()-r;s>30||(c>0?o/c:0)>.5?T():g(0)}}},[T]),k=B(function(e){E(e.touches[0].clientY)},[E]),A=B(function(e){b.current.isDragging&&e.cancelable&&e.preventDefault(),D(e.touches[0].clientY)},[D]),ee=B(function(){O()},[O]),j=B(function(e){e.preventDefault(),E(e.clientY)},[E]);if(L(function(){if(b.current.isDragging){var e=function(e){return D(e.clientY)},t=function(){return O()};return document.addEventListener(`mousemove`,e),document.addEventListener(`mouseup`,t),function(){document.removeEventListener(`mousemove`,e),document.removeEventListener(`mouseup`,t)}}},[D,O]),L(function(){var e=function(e){e.key===`Escape`&&T()};return document.addEventListener(`keydown`,e),function(){return document.removeEventListener(`keydown`,e)}},[T]),!l)return null;var M=f?h:C||400;return P(F,null,P(`div`,{className:`bg-bg-overlay absolute inset-0 z-40 transition-opacity duration-300 ${f?`opacity-100`:`opacity-0`}`,onClick:T}),P(`div`,_({ref:v,className:`bg-bg-surface absolute inset-x-0 bottom-0 z-50 flex flex-col rounded-t-2xl shadow-2xl ${b.current.isDragging?``:`transition-transform duration-300 ease-out`}`,style:{maxHeight:`80%`,transform:`translateY(${M}px)`}},xa(t.schema)),P(`div`,{className:`flex flex-shrink-0 cursor-grab touch-none items-center justify-center py-3 active:cursor-grabbing`,onTouchStart:k,onTouchMove:A,onTouchEnd:ee,onMouseDown:j},P(`div`,{className:`bg-border-default h-1.5 w-12 rounded-full`})),n.length>1&&P(`div`,{className:`border-border-subtle flex items-center gap-3 border-b px-4 pb-3`},P(`button`,{onClick:a,className:`hover:bg-interactive-hover rounded-full p-1`},P(Gp,{className:`h-5 w-5`})),P(`h3`,{className:`text-fg-primary font-semibold`},t.title||`Menu`)),P(`div`,{ref:y,className:`flex-1 overflow-y-auto py-2`},t.schema.items.map(function(e){return P(Sg,{key:e.id,item:e,documentId:r,onClose:T,isMobile:!0,onNavigateToSubmenu:o})}))))}function xg(e){var t=e.currentMenu,n=e.documentId,r=e.anchorEl,i=e.onClose,a=e.onNavigateToSubmenu,o=R(null),s=S(I(null),2),c=s[0],l=s[1];L(function(){if(r){var e=function(){var e=r.getBoundingClientRect(),t=o.current?.offsetWidth||200,n=e.bottom+4,i=e.left;i+t>window.innerWidth&&(i=window.innerWidth-t-8),i<8&&(i=8),l({top:n,left:i})};return e(),window.addEventListener(`scroll`,e),window.addEventListener(`resize`,e),function(){window.removeEventListener(`scroll`,e),window.removeEventListener(`resize`,e)}}},[r]),L(function(){var e=function(e){if(o.current){var t=e.composedPath(),n=t.includes(o.current),a=r&&t.includes(r);n||a||i()}},t=setTimeout(function(){document.addEventListener(`mousedown`,e)},0);return function(){clearTimeout(t),document.removeEventListener(`mousedown`,e)}},[i,r]),L(function(){var e=function(e){e.key===`Escape`&&i()};return document.addEventListener(`keydown`,e),function(){return document.removeEventListener(`keydown`,e)}},[i]);var u=c?{position:`fixed`,top:`${c.top}px`,left:`${c.left}px`,zIndex:1e3}:{display:`none`};return P(`div`,_(_({ref:o},xa(t.schema)),{},{className:`border-border-default bg-bg-elevated min-w-[200px] rounded-lg border py-2 shadow-lg`,style:u}),t.schema.items.map(function(e){return P(Sg,{key:e.id,item:e,documentId:n,onClose:i,isMobile:!1,onNavigateToSubmenu:a})}))}function Sg(e){var t=e.item,n=e.documentId,r=e.onClose,i=e.isMobile,a=e.onNavigateToSubmenu;switch(t.type){case`command`:return P(Cg,{item:t,documentId:n,onClose:r,isMobile:i});case`submenu`:return P(wg,{item:t,documentId:n,isMobile:i,onNavigateToSubmenu:a});case`divider`:return P(`div`,_({},xa(t)),P(`hr`,{className:`border-border-subtle my-2`}));case`section`:return P(Tg,{item:t,documentId:n,onClose:r,isMobile:i,onNavigateToSubmenu:a});default:return null}}function Cg(e){var t=e.item,n=e.documentId,r=e.onClose,i=e.isMobile,a=lo(t.commandId,n);if(!a||!a.visible)return null;var o=function(){a.disabled||(a.execute(),r())};return i?P(`button`,_(_({},xa(t)),{},{onClick:o,disabled:a.disabled,className:`active:bg-interactive-active flex w-full items-center gap-3 px-4 py-3 text-left text-base transition-colors ${a.disabled?`cursor-not-allowed opacity-50`:`cursor-pointer`} ${a.active?`bg-interactive-selected text-accent`:`text-fg-secondary`}`,role:`menuitem`}),a.icon&&P(nm,{icon:a.icon,className:`h-5 w-5`,primaryColor:a.iconProps?.primaryColor,secondaryColor:a.iconProps?.secondaryColor}),P(`span`,{className:`flex-1`},a.label)):P(`button`,_(_({},xa(t)),{},{onClick:o,disabled:a.disabled,className:`flex w-full items-center justify-between gap-2 px-4 py-1 text-left ${a.disabled?`pointer-events-none cursor-not-allowed opacity-50`:`cursor-pointer`} ${a.active&&!a.disabled?`bg-accent text-fg-on-accent`:`text-fg-muted hover:bg-accent hover:text-fg-on-accent`}`,role:`menuitem`}),P(`div`,{className:`flex items-center gap-2`},P(`div`,{className:`flex h-6 w-6 items-center justify-center`},a.icon&&P(nm,{icon:a.icon,className:`h-6 w-6`,primaryColor:a.iconProps?.primaryColor,secondaryColor:a.iconProps?.secondaryColor})),P(`span`,{className:`text-sm`},a.label)))}function wg(e){var t=e.item,n=e.documentId,r=e.isMobile,i=e.onNavigateToSubmenu,a=So(n).translate,o=t.labelKey?a(t.labelKey):t.label||``,s=function(){return i(t.menuId,o)};return r?P(`button`,_(_({},xa(t)),{},{onClick:s,className:`text-fg-secondary active:bg-interactive-active flex w-full cursor-pointer items-center gap-3 px-4 py-3 text-left text-base transition-colors`,role:`menuitem`}),P(`span`,{className:`flex-1`},o),P(Wp,{className:`h-4 w-4`})):P(`button`,_(_({},xa(t)),{},{onClick:s,className:`text-fg-muted hover:bg-accent hover:text-fg-on-accent flex w-full cursor-pointer items-center justify-between gap-2 px-4 py-1 text-left`,role:`menuitem`}),P(`span`,{className:`text-sm`},o),P(Wp,{className:`h-6 w-6`}))}function Tg(e){var t=e.item,n=e.documentId,r=e.onClose,i=e.isMobile,a=e.onNavigateToSubmenu,o=So(n).translate,s=t.labelKey?o(t.labelKey):t.label||``;return P(`div`,_({},xa(t)),P(`div`,{className:`text-fg-secondary px-4 py-3 text-xs font-medium uppercase`},s),t.items.map(function(e){return P(Sg,{key:e.id,item:e,documentId:n,onClose:r,isMobile:i,onNavigateToSubmenu:a})}))}function Eg(e){var t=e.schema,n=e.documentId,r=e.isOpen,i=e.onClose,a=e.onExited,o=t.content,s=Va().renderCustomComponent;return o.type===`component`?P(F,null,s(o.componentId,n,{isOpen:r,onClose:i,onExited:a})):(console.warn(`SchemaModal only supports component content type, got: ${o.type}`),null)}function Dg(e){var t=e.documentId;e.onClose;var n=di(t),r=n.state,i=n.provides;return P(`div`,{className:`flex h-full flex-1 flex-col`},P(`div`,{className:`flex-1 overflow-hidden`},P(Lc,{documentId:t,style:{width:`100%`,height:`100%`}},function(e){return P(`div`,{key:e.pageIndex,style:{position:`absolute`,width:`100%`,height:e.wrapperHeight,top:e.top,display:`flex`,flexDirection:`column`,alignItems:`center`,cursor:`pointer`},onClick:function(){var t;i==null||(t=i.scrollToPage)==null||t.call(i,{pageNumber:e.pageIndex+1})}},P(`div`,{style:{width:e.width,height:e.height,border:`2px solid ${r.currentPage===e.pageIndex+1?`var(--ep-accent-primary)`:`var(--ep-border-default)`}`,borderRadius:`4px`,overflow:`hidden`,boxShadow:r.currentPage===e.pageIndex+1?`0 0 0 2px var(--ep-interactive-focus-ring)`:`none`}},P(Rc,{documentId:t,meta:e,style:{width:`100%`,height:`100%`}})),P(`div`,{style:{height:e.labelHeight,display:`flex`,alignItems:`center`,justifyContent:`center`,marginTop:`4px`}},P(`span`,{className:`text-fg-secondary text-xs`},e.pageIndex+1)))})))}function Og(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:300,n=S(I(e),2),r=n[0],i=n[1];return L(function(){var n=window.setTimeout(function(){return i(e)},t);return function(){return clearTimeout(n)}},[e,t]),r}var kg=function(e){var t=e.label,n=e.checked,r=e.onChange;return P(`label`,{className:`text-fg-secondary inline-flex cursor-pointer select-none items-center gap-2 text-xs font-medium`},P(`input`,{type:`checkbox`,checked:n,onChange:function(e){return r(e.target.checked)},className:`border-border-default bg-bg-input checked:border-accent checked:bg-accent peer h-4 w-4 shrink-0 appearance-none rounded-[3px] border transition-all`}),P(`svg`,{viewBox:`0 0 24 24`,className:`/* fine-tune centering */ text-fg-on-accent pointer-events-none absolute h-3.5 w-3.5 translate-x-[1px] translate-y-[1px] opacity-0 peer-checked:opacity-100`,fill:`none`,stroke:`currentColor`,strokeWidth:3,strokeLinecap:`round`,strokeLinejoin:`round`},P(`polyline`,{points:`20 6 9 17 4 12`})),t)},Ag=function(e){var t=e.hit,n=e.onClick,r=e.active,i=R(null);return L(function(){r&&i.current&&i.current.scrollIntoView({behavior:`smooth`,block:`nearest`})},[r]),P(`button`,{ref:i,onClick:n,className:`w-full rounded border p-2 text-left text-sm transition-colors ${r?`border-accent bg-accent-light text-fg-primary`:`border-border-subtle bg-bg-surface text-fg-secondary hover:bg-interactive-hover`}`},P(`span`,null,t.context.truncatedLeft&&` `,t.context.before,P(`span`,{className:`text-accent font-bold`},t.context.match),t.context.after,t.context.truncatedRight&&` `))};function jg(e){var t=e.documentId;e.onClose;var n=(e=>{let{provides:t}=Ss(),[n,r]=I(hs),i=z(()=>t?.forDocument(e),[t,e]);return L(()=>{if(i)return r(i.getState()),i.onStateChange(e=>r(e));r(hs)},[i]),{state:n,provides:i??null}})(t),r=n.state,i=n.provides,a=ui().provides,o=So(t).translate,s=R(null),c=S(I(``),2),l=c[0],u=c[1];L(function(){},[]),L(function(){r.query&&!l&&u(r.query)},[r.query]),L(function(){r.activeResultIndex!==void 0&&r.activeResultIndex>=0&&!r.loading&&p(r.activeResultIndex)});var d=Og(l,300);L(function(){d!==r.query&&i?.searchAllPages(d)},[d,i,r.query]);var f=function(e,t){t?i?.setFlags([].concat(C(r.flags),[e])):i?.setFlags(r.flags.filter(function(t){return t!==e}))},p=function(e){var n,i=r.results[e];if(i){var o=i.rects.reduce(function(e,t){return{x:Math.min(e.x,t.origin.x),y:Math.min(e.y,t.origin.y)}},{x:1/0,y:1/0});a==null||(n=a.forDocument(t))==null||n.scrollToPage({pageNumber:i.pageIndex+1,pageCoordinates:o,alignX:50,alignY:25})}},m=function(e){var t={};return e.forEach(function(e,n){t[e.pageIndex]||(t[e.pageIndex]=[]),t[e.pageIndex].push({hit:e,index:n})}),t}(r.results);return P(`div`,{className:`bg-bg-surface flex h-full flex-col`},P(`div`,{className:`p-4`},P(`div`,{className:`relative`},P(`div`,{className:`pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2`},P(qp,{className:`text-fg-muted h-4 w-4`})),P(`input`,{ref:s,type:`text`,placeholder:o(`search.placeholder`),value:l,onInput:function(e){var t=e.target;u(t.value)},className:`border-border-default bg-bg-input focus:border-accent focus:ring-accent w-full rounded-md border py-1 pl-8 pr-9 text-sm focus:outline-none focus:ring-1`}),l&&P(`div`,{className:`absolute inset-y-0 right-0 flex cursor-pointer items-center pr-3`,onClick:function(){u(``),s.current&&s.current.focus()}},P(Jp,{className:`text-fg-muted hover:text-fg-secondary h-4 w-4`}))),P(`div`,{className:`mt-3 flex flex-col gap-2`},P(kg,{label:o(`search.caseSensitive`),checked:r.flags.includes(Qt.MatchCase),onChange:function(e){return f(Qt.MatchCase,e)}}),P(kg,{label:o(`search.wholeWord`),checked:r.flags.includes(Qt.MatchWholeWord),onChange:function(e){return f(Qt.MatchWholeWord,e)}})),P(`hr`,{className:`border-border-subtle mb-2 mt-5`}),r.active&&P(`div`,{className:`flex h-[32px] flex-row items-center justify-between`},P(`div`,{className:`text-fg-muted text-xs`},o(`search.resultsFound`,{params:{count:r.total}})),r.total>1&&P(`div`,{className:`flex flex-row`},P(im,{onClick:function(){i?.previousResult()}},P(Gp,{className:`h-4 w-4`})),P(im,{onClick:function(){i?.nextResult()}},P(Wp,{className:`h-4 w-4`}))))),P(`div`,{className:`flex min-h-0 flex-1 flex-col gap-2 overflow-y-auto px-4`},Object.entries(m).map(function(e){var t=S(e,2),n=t[0],a=t[1];return P(`div`,{key:n,className:`mt-2 first:mt-0`},P(`div`,{className:`bg-bg-surface/80 text-fg-muted py-2 text-xs backdrop-blur`},o(`search.page`,{params:{page:Number(n)+1}})),P(`div`,{className:`flex flex-col gap-2`},a.map(function(e){var t=e.hit,n=e.index;return P(Ag,{key:n,hit:t,active:n===r.activeResultIndex,onClick:function(){i?.goToResult(n)}})})))}),P(`div`,null)))}function Mg(e){var t=e.documentId,n=Cr(yd.id).provides,r=ui().provides,i=So(t).translate,a=Tr(t),o=S(I([]),2),s=o[0],c=o[1],l=S(I(new Set),2),u=l[0],d=l[1],f=S(I(!0),2),p=f[0],m=f[1];L(function(){if(n&&a!=null&&a.document){m(!0);var e=n.getBookmarks();return e.wait(function(e){var t=e.bookmarks;c(t);var n=t.map(function(e,t){return`bookmark-${t}`});d(new Set(n)),m(!1)},function(){m(!1)}),function(){e.abort({code:K.Cancelled,message:`Bookmark task cancelled`})}}},[n,a?.document]);var h=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=`bookmark-${t}`,o=e.children&&e.children.length>0,s=u.has(i);return P(`div`,{key:i,className:`select-none`},P(`div`,{className:`hover:bg-interactive-hover flex cursor-pointer items-center gap-1 px-2 py-1`,style:{paddingLeft:`${16*n+8}px`},onClick:function(){return function(e){if(r&&e.target){var t;if(e.target.type===`action`){var n=e.target.action;if(n.type===Vt.Goto||n.type===Vt.RemoteGoto)t=n.destination;else if(n.type===Vt.URI)return void window.open(n.uri,`_blank`)}else e.target.type===`destination`&&(t=e.target.destination);if(t)if(t.zoom.mode===Ft.XYZ){var i,o=a==null||(i=a.document)==null?void 0:i.pages.find(function(e){return e.index===t.pageIndex});if(!o)return;r.scrollToPage({pageNumber:t.pageIndex+1,pageCoordinates:t.zoom.params?{x:t.zoom.params.x,y:o.size.height-t.zoom.params.y}:void 0,behavior:`smooth`})}else r.scrollToPage({pageNumber:t.pageIndex+1,behavior:`smooth`})}}(e)}},o&&P(`button`,{onClick:function(e){e.stopPropagation(),function(e){d(function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})}(i)},className:`flex h-4 w-4 items-center justify-center`},P(s?Kp:Wp,{className:`h-3 w-3`})),!o&&P(`div`,{className:`w-4`}),P(`span`,{className:`text-fg-secondary text-sm`},e.title)),o&&s&&P(`div`,null,e.children?.map(function(e,t){return h(e,t,n+1)})))};return a==null||!a.document||p?P(`div`,{className:`text-fg-secondary flex h-full flex-col gap-3 p-4 text-sm`},P(`div`,{className:`text-fg-primary font-medium`},i(`outline.title`)),P(`p`,null,i(`outline.loading`))):s.length===0?P(`div`,{className:`flex h-full items-center justify-center p-6`},P(`div`,{className:`text-fg-muted text-center`},P(`div`,{className:`text-sm`},i(`outline.noOutline`)),P(`div`,{className:`mt-1 text-xs`},i(`outline.noBookmarks`)))):P(`div`,{className:`bg-bg-surface flex h-full flex-col`},P(`div`,{className:`flex-1 overflow-y-auto`},P(`div`,{className:`outline-tree`},s.map(function(e,t){return h(e,t)}))))}function Ng(e){var t=e.size,n=t===void 0?`md`:t,r=e.text,i=e.className,a={sm:`w-6 h-6`,md:`w-10 h-10`,lg:`w-16 h-16`};return P(`div`,{className:`flex flex-col items-center justify-center gap-3 ${i===void 0?``:i}`},P(`div`,{className:`relative`},P(`div`,{className:`${a[n]} border-border-default animate-spin rounded-full border-4`}),P(`div`,{className:`${a[n]} border-r-accent border-t-accent absolute left-0 top-0 animate-spin rounded-full border-4 border-transparent`})),r&&P(`p`,{className:`${{sm:`text-sm`,md:`text-base`,lg:`text-lg`}[n]} text-fg-secondary animate-pulse font-medium`},r))}function Pg(e){var t=e.size,n=t===void 0?`md`:t,r=e.className,i=r===void 0?``:r;return P(`div`,{className:`${{sm:`w-4 h-4 border-2`,md:`w-6 h-6 border-2`,lg:`w-8 h-8 border-3`}[n]} border-border-default border-t-accent animate-spin rounded-full ${i}`})}var Fg,Ig=function(){var e=function(e){let{provides:t}=Eu(),[n,r]=I(Cu);return L(()=>{if(t)return t.forDocument(e).onStateChange(e=>{r(e)})},[t]),{provides:t?.forDocument(e)??null,state:n}}().provides,t=S(I({show:!1,mode:null,isAnimating:!1}),2),n=t[0],r=t[1];if(L(function(){if(e)return e.onModeChange(function(e){var t=e.activeMode;if(t===`marqueeZoom`||t===`marqueeCapture`){r({show:!0,mode:t,isAnimating:!0});var n=setTimeout(function(){r(function(e){return _(_({},e),{},{show:!1})})},3e3);return function(){return clearTimeout(n)}}r({show:!1,mode:null,isAnimating:!1})})},[e]),!n.show&&!n.isAnimating)return null;var i=n.mode===`marqueeZoom`?`Drag to select area to zoom`:`Drag to select area to capture`,a=n.mode===`marqueeZoom`?`rgba(33,150,243,0.8)`:`rgba(76,175,80,0.8)`;return P(`div`,{className:`hint-overlay ${n.show?`hint-show`:`hint-hide`}`,onAnimationEnd:function(){n.show||r(function(e){return _(_({},e),{},{isAnimating:!1,mode:null})})},style:{position:`absolute`,top:0,left:0,right:0,bottom:0,pointerEvents:`none`,zIndex:1e3,display:`flex`,alignItems:`center`,justifyContent:`center`,flexDirection:`column`,gap:`20px`}},P(`div`,{className:`hint-text`,style:{background:`rgba(0, 0, 0, 0.8)`,color:`white`,padding:`12px 20px`,borderRadius:`8px`,fontSize:`14px`,fontWeight:`500`,textAlign:`center`,maxWidth:`250px`}},i),P(`div`,{className:`drag-demo`,style:{position:`relative`,width:`150px`,height:`100px`}},P(`div`,{style:{position:`absolute`,top:`20px`,left:`20px`,width:`110px`,height:`60px`,border:`2px dashed ${a}`,borderRadius:`4px`,opacity:.6}}),P(`div`,{className:`animated-rect`,style:{position:`absolute`,top:`20px`,left:`20px`,border:`2px solid ${a}`,backgroundColor:`${a.replace(`0.8`,`0.15`)}`,borderRadius:`4px`}}),P(`div`,{className:`cursor-demo`,style:{position:`absolute`,width:`20px`,height:`20px`}},P(`svg`,{width:`20`,height:`20`,viewBox:`0 0 20 20`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`},P(`path`,{d:`M3.5 2.5L16.5 10L10 11.5L7.5 16.5L3.5 2.5Z`,fill:`rgba(0,0,0,0.3)`,transform:`translate(1,1)`}),P(`path`,{d:`M3 2L16 10L10 11.5L7.5 16L3 2Z`,fill:`white`,stroke:`black`,strokeWidth:`1`}),P(`path`,{d:`M4 3.5L13.5 9.5L9.5 10.5L7.5 14L4 3.5Z`,fill:`rgba(255,255,255,0.8)`})))),P(`style`,{jsx:!0},`
        .hint-overlay {
          animation-duration: 0.3s;
          animation-fill-mode: both;
        }

        .hint-show {
          animation-name: hintFadeIn;
        }

        .hint-hide {
          animation-name: hintFadeOut;
        }

        @keyframes hintFadeIn {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes hintFadeOut {
          from {
            opacity: 1;
            transform: translateY(0);
          }
          to {
            opacity: 0;
            transform: translateY(-10px);
          }
        }

        .animated-rect {
          animation: rectGrow 2s ease-in-out infinite;
        }

        @keyframes rectGrow {
          0% {
            width: 0;
            height: 0;
          }
          50% {
            width: 110px;
            height: 60px;
          }
          100% {
            width: 110px;
            height: 60px;
            opacity: 0.7;
          }
        }

        .cursor-demo {
          animation: cursorMove 2s ease-in-out infinite;
        }

        @keyframes cursorMove {
          0% {
            top: 20px;
            left: 20px;
          }
          50% {
            top: 50px;
            left: 80px;
          }
          100% {
            top: 80px;
            left: 130px;
          }
        }

        .hint-text {
          animation: textPulse 0.6s ease-in-out;
        }

        @keyframes textPulse {
          0% {
            transform: scale(0.9);
          }
          50% {
            transform: scale(1.05);
          }
          100% {
            transform: scale(1);
          }
        }
      `))},Lg=function(e){var t=e.placeholder,n=e.onSubmit,r=e.inputRef,i=e.isFocused,a=S(I(``),2),o=a[0],s=a[1];return P(`form`,{className:`border-border-subtle mt-4 flex items-end space-x-2 border-t pt-4`,onClick:function(e){return e.stopPropagation()},onSubmit:function(e){e?.preventDefault(),o.trim()&&(n(o),s(``))}},P(`input`,{ref:r,type:`text`,placeholder:t,value:o,onInput:function(e){return s(e.currentTarget.value)},className:`bg-bg-input text-fg-primary placeholder-fg-muted w-full rounded-lg border px-3 py-2 text-sm transition-colors focus:border-transparent focus:outline-none focus:ring-2 ${i?`border-accent focus:ring-accent`:`border-border-default focus:ring-accent`}`}),P(`button`,{type:`submit`,disabled:!o.trim(),className:`bg-accent text-fg-on-accent hover:bg-accent-hover disabled:bg-interactive-disabled rounded-lg p-2 transition-colors disabled:cursor-not-allowed`},P(`svg`,{className:`h-5 w-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`},P(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 19l9 2-9-18-9 18 9-2zm0 0v-8`}))))},Rg=[`bg-red-500`,`bg-blue-500`,`bg-green-500`,`bg-yellow-500`,`bg-purple-500`,`bg-pink-500`,`bg-indigo-500`,`bg-teal-500`],zg=function(e){return e?Rg[e.length>0?e.charCodeAt(0)%Rg.length:0]:Rg[0]},Bg=function(e){var t=e.name,n=e.className,r=n===void 0?``:n;return P(`div`,{className:`flex h-8 w-8 items-center justify-center rounded-full text-sm font-medium text-white ${zg(t)} ${r}`},function(e){return e?e.split(` `).map(function(e){return e[0]}).join(``).toUpperCase().slice(0,2):`G`}(t))},Vg=function(e){var t,n,r=e.onEdit,i=e.onDelete,a=e.onClose,o=e.documentId,s=R(null),c=So(o).translate;return L(function(){var e=function(e){t.current&&!t.current.contains(e.target)&&n()};return document.addEventListener(`click`,e),function(){document.removeEventListener(`click`,e)}},[t=s,n=a]),P(`div`,{ref:s,className:`bg-bg-elevated ring-border-default absolute right-0 top-6 z-10 w-32 rounded-md shadow-lg ring-1`},P(`div`,{className:`py-1`},P(`button`,{onClick:function(e){e.preventDefault(),e.stopPropagation(),r(),a()},className:`text-fg-secondary hover:bg-interactive-hover block w-full px-4 py-2 text-left text-sm`},c(`comments.edit`)),P(`button`,{onClick:function(e){e.preventDefault(),e.stopPropagation(),i(),a()},className:`text-state-error hover:bg-interactive-hover block w-full px-4 py-2 text-left text-sm`},c(`comments.delete`))))},Hg=function(e){var t=e.initialText,n=e.onSave,r=e.onCancel,i=e.autoFocus,a=i!==void 0&&i,o=e.documentId,s=S(I(t),2),c=s[0],l=s[1],u=R(null),d=So(o).translate;return L(function(){a&&u.current&&(u.current.focus(),u.current.setSelectionRange(c.length,c.length))},[a,c.length]),P(`div`,{className:`flex-1 space-y-2`},P(`textarea`,{ref:u,value:c,onInput:function(e){return l(e.currentTarget.value)},className:`border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-1`,rows:3}),P(`div`,{className:`flex flex-wrap gap-2`},P(`button`,{onClick:function(e){e.stopPropagation(),n(c)},className:`bg-accent text-fg-on-accent hover:bg-accent-hover whitespace-nowrap rounded-md px-3 py-1 text-sm`},d(`comments.save`)),P(`button`,{onClick:function(e){e.stopPropagation(),r()},className:`bg-interactive-hover text-fg-secondary hover:bg-border-default whitespace-nowrap rounded-md px-3 py-1 text-sm`},d(`comments.cancel`))))},Ug=function(e){if(!e)return`(no date)`;try{return(e instanceof Date?e:new Date(e)).toLocaleDateString(`en-US`,{month:`short`,day:`numeric`,hour:`numeric`,minute:`2-digit`})}catch{return typeof e==`string`?e:`(no date)`}},Wg=function(e){var t=e.annotation,n=e.onSave,r=e.onDelete,i=e.isReply,a=i!==void 0&&i,o=e.documentId,s=S(I(!1),2),c=s[0],l=s[1],u=S(I(!1),2),d=u[0],f=u[1],p=t.author||`Guest`;return d?P(`div`,{className:`flex w-full items-start space-x-3`,onClick:function(e){return e.stopPropagation()}},a&&P(Bg,{name:p,className:`h-8 w-8`}),P(Hg,{initialText:t.contents||``,onSave:function(e){n(e),f(!1)},onCancel:function(){f(!1)},autoFocus:!0,documentId:o})):P(`div`,{className:`flex items-start space-x-3`},a&&P(Bg,{name:p,className:`h-8 w-8`}),P(`div`,{className:`min-w-0 flex-1`},a&&P(`div`,{className:`flex items-center justify-between`},P(`div`,{className:`leading-none`},P(`h5`,{className:`text-fg-primary text-sm font-medium`},p),P(`span`,{className:`text-fg-muted text-xs`},Ug(t.modified||t.created))),P(`div`,{className:`relative`},P(`button`,{onClick:function(e){e.stopPropagation(),l(!0)},className:`text-fg-muted hover:bg-interactive-hover rounded-md p-1`},P(`svg`,{className:`h-4 w-4`,fill:`currentColor`,viewBox:`0 0 20 20`},P(`path`,{d:`M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z`}))),c&&P(Vg,{onEdit:function(){return f(!0)},onDelete:r,onClose:function(){return l(!1)},documentId:o}))),P(`p`,{className:`text-fg-primary mt-2 text-sm`},t.contents)))},Gg=(f(f(f(f(f(f(f(f(f(f(Fg={},U.HIGHLIGHT,{label:`Highlight`,icon:`highlight`,iconProps:function(e){return{primaryColor:e.color||`#ffff00`}}}),U.CIRCLE,{label:`Circle`,icon:`circle`,iconProps:function(e){return{primaryColor:e.strokeColor||`#000000`,secondaryColor:e.color}}}),U.SQUARE,{label:`Square`,icon:`square`,iconProps:function(e){return{primaryColor:e.strokeColor||`#000000`,secondaryColor:e.color}}}),U.LINE,{label:`Line`,icon:`line`,iconProps:function(e){return{primaryColor:e.strokeColor||`#000000`}}}),U.UNDERLINE,{label:`Underline`,icon:`underline`,iconProps:function(e){return{primaryColor:e.color||`#000000`}}}),U.SQUIGGLY,{label:`Squiggly`,icon:`squiggly`,iconProps:function(e){return{primaryColor:e.color||`#000000`}}}),U.STRIKEOUT,{label:`Strikethrough`,icon:`strikethrough`,iconProps:function(e){return{primaryColor:e.color||`#000000`}}}),U.INK,{label:`Ink`,icon:`pencilMarker`,iconProps:function(e){return{primaryColor:e.color||`#000000`}}}),U.FREETEXT,{label:`Text`,icon:`text`,iconProps:function(e){return{primaryColor:e.fontColor||`#000000`}}}),U.POLYGON,{label:`Polygon`,icon:`polygon`,iconProps:function(e){return{primaryColor:e.strokeColor||`#000000`,secondaryColor:e.color}}}),f(f(Fg,U.POLYLINE,{label:`Polyline`,icon:`zigzag`,iconProps:function(e){return{primaryColor:e.strokeColor||`#000000`}}}),U.STAMP,{label:`Stamp`,icon:`deviceFloppy`,iconProps:function(){return{primaryColor:`#dc2626`}}})),Kg=function(e){var t=e.text,n=e.maxWords,r=n===void 0?16:n,i=e.className,a=i===void 0?``:i,o=e.documentId,s=S(I(!1),2),c=s[0],l=s[1],u=So(o).translate,d=t.split(` `);return d.length>r?P(`div`,{className:a},c?t:d.slice(0,r).join(` `)+`...`,` `,P(`button`,{onClick:function(e){e.stopPropagation(),l(!c)},className:`text-accent hover:text-accent-hover text-sm font-medium focus:outline-none`},u(c?`comments.showLess`:`comments.showMore`))):P(`div`,{className:a},t)},qg=function(e){var t=e.annotation,n=e.config,r=e.className,i=r===void 0?``:r,a=n.iconProps(t.object);return P(`div`,{className:`bg-bg-surface-alt flex items-center justify-center rounded-full ${i}`,title:n.label},P(nm,_({icon:n.icon},a)))},Jg=function(e){var t=e.entry,n=e.isSelected,r=e.onSelect,i=e.onUpdate,a=e.onDelete,o=e.onReply,s=e.documentId,c=t.annotation,l=t.replies,u=S(I(!1),2),d=u[0],f=u[1],p=S(I(!1),2),m=p[0],h=p[1],g=So(s).translate,_=function(e){return yl(e)?Gg[e.object.type]:null}(c),v=!!c.object.contents,y=l.length>0,b=!v&&!y,x=R(null),C=c.object.author||`Guest`;return L(function(){var e;n&&((e=x.current)==null||e.focus({preventScroll:!0}))},[n,t]),_?P(`div`,{onClick:r,className:`bg-bg-surface cursor-pointer rounded-lg border shadow-sm transition-all hover:shadow-md ${n?`border-accent ring-interactive-focus-ring ring-2`:`border-border-subtle`}`},P(`div`,{className:`p-4`},P(`div`,{className:`flex items-start space-x-3`},P(qg,{annotation:c,config:_,className:`h-8 w-8`}),P(`div`,{className:`min-w-0 flex-1`},P(`div`,{className:`flex items-center justify-between`},P(`div`,{className:`leading-none`},P(`h4`,{className:`text-fg-primary text-sm font-medium`},C),P(`span`,{className:`text-fg-disabled text-xs`},Ug(c.object.modified||c.object.created))),P(`div`,{className:`relative`},P(`button`,{onClick:function(e){e.stopPropagation(),f(!0)},className:`text-fg-disabled hover:bg-interactive-hover hover:text-fg-secondary rounded-md p-1`},P(`svg`,{className:`h-4 w-4`,fill:`currentColor`,viewBox:`0 0 20 20`},P(`path`,{d:`M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z`}))),d&&P(Vg,{onEdit:function(){return h(!0)},onDelete:function(){return a(c)},onClose:function(){return f(!1)},documentId:s}))),c.object.custom?.text&&P(Kg,{text:c.object.custom.text,maxWords:14,className:`text-fg-muted mt-2 text-sm`,documentId:s}),P(`div`,{className:`mt-2`},m?P(Hg,{initialText:c.object.contents||``,onSave:function(e){i(c.object.id,e),h(!1)},onCancel:function(){h(!1)},autoFocus:!0,documentId:s}):v?P(`p`,{className:`text-fg-primary text-sm`},c.object.contents):null))),y&&P(`div`,{className:`border-border-subtle mt-4 space-y-4 border-t pt-4`},l.map(function(e){return P(Wg,{key:e.object.id,annotation:e.object,onSave:function(t){return i(e.object.id,t)},onDelete:function(){return a(e)},isReply:!0,documentId:s})})),!m&&P(Lg,{inputRef:x,isFocused:n,placeholder:g(b?`comments.addComment`:`comments.addReply`),onSubmit:function(e){b?i(c.object.id,e):o(c.object.id,e)}}))):null},Yg=function(e){var t=e.documentId,n=So(t).translate;return P(`div`,{class:`text-fg-muted flex flex-col items-center gap-2 p-4`},P(nm,{icon:`comment`,className:`h-18 w-18 text-fg-muted`}),P(`div`,{className:`text-fg-muted max-w-[150px] text-center text-sm`},n(`comments.emptyState`)))},Xg=function(e){var t=e.documentId,n=Fu().provides,r=Iu(t).state,i=ui().provides,a=So(t).translate,o=R({}),s=R(null),c=r.selectedUid?xl(r,r.selectedUid):null,l=(e=>{let t={};for(let n of Object.values(e.pages))for(let r of n){let n=e.byUid[r];if(n&&vl(n)){let e=n.object.inReplyToId;e&&(t[e]||(t[e]=[])).push(n)}}let n={};for(let[r,i]of Object.entries(e.pages)){let a=Number(r),o=[];for(let n of i){let r=e.byUid[n];r&&yl(r)&&o.push({page:a,annotation:r,replies:t[r.object.id]??[]})}o.length>0&&(n[a]=o)}return n})(r);L(function(){if(c&&s.current){var e=o.current[c.object.id];if(e&&s.current){var t=s.current,n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=r.top-n.top+t.scrollTop-t.clientHeight/2+r.height/2;t.scrollTo({top:i,behavior:`smooth`})}}},[c]);var u=function(e,t){var r=h(e);r&&n?.updateAnnotation(r.object.pageIndex,e,{contents:t,modified:new Date})},f=function(e){n?.deleteAnnotation(e.object.pageIndex,e.object.id)},p=function(e,t){var r=h(e);r&&n?.createAnnotation(r.object.pageIndex,{id:kn(),rect:{origin:{x:r.object.rect.origin.x,y:r.object.rect.origin.y},size:{width:24,height:24}},pageIndex:r.object.pageIndex,created:new Date,modified:new Date,type:U.TEXT,contents:t,inReplyToId:r.object.id,flags:[`noRotate`,`noZoom`,`print`],icon:Ut.Comment})},m=Object.keys(l).map(Number).sort(function(e,t){return e-t}),h=function(e){var t,n=d(m);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,a=d(l[i]);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.annotation.object.id===e)return o.annotation;var s=o.replies.find(function(t){return t.object.id===e});if(s)return s}}catch(e){a.e(e)}finally{a.f()}}}catch(e){n.e(e)}finally{n.f()}};return m.length===0?P(Yg,{documentId:t}):P(`div`,{ref:s,className:`h-full overflow-y-auto`},P(`div`,{className:`space-y-6 p-3`},m.map(function(e){return P(`div`,{key:e,className:`space-y-3`},P(`div`,{className:`bg-bg-surface sticky top-0 z-10 px-1`},P(`div`,{className:`border-border-subtle border-b py-2`},P(`h3`,{className:`text-md text-fg-primary font-semibold`},a(`comments.page`,{params:{page:e+1}})),P(`p`,{className:`text-fg-muted text-sm`},l[e].length===1?a(`comments.commentCount`,{params:{count:1}}):a(`comments.commentCountPlural`,{params:{count:l[e].length}})))),P(`div`,{className:`space-y-3 px-1`},l[e].map(function(e){return P(`div`,{key:e.annotation.object.id,ref:function(t){t&&(o.current[e.annotation.object.id]=t)}},P(Jg,{entry:e,isSelected:c?.object.id===e.annotation.object.id,onSelect:function(){t=e.annotation,n?.selectAnnotation(t.object.pageIndex,t.object.id),i?.scrollToPage({pageNumber:t.object.pageIndex+1,pageCoordinates:{x:t.object.rect.origin.x,y:t.object.rect.origin.y},alignX:50,alignY:25,behavior:`smooth`});return;var t},onUpdate:u,onDelete:f,onReply:p,documentId:t}))})))})))};function Zg(e){var t=e.documentId,n=(e=>{let{provides:t}=Io(),[n,r]=I(jo);return L(()=>{if(!t)return;let n=t.forDocument(e);return r(n.getState()),n.onStateChange(e=>{r(e)})},[t,e]),{state:n,provides:t?.forDocument(e)??null}})(t),r=n.state,i=n.provides,a=S(I(``),2),o=a[0],s=a[1];if(!i)return null;var c=Math.round(100*r.currentZoomLevel);return L(function(){s(c.toString())},[c]),P(`div`,{className:`relative`},P(`div`,{className:`bg-interactive-hover flex items-center rounded`},P(`form`,{onSubmit:function(e){e.preventDefault();var t=e.target,n=new FormData(t),r=parseFloat(n.get(`zoom`)||o);!isNaN(r)&&r>0&&i.requestZoom(r/100)},className:`block`},P(`input`,{name:`zoom`,type:`text`,inputMode:`numeric`,pattern:`\\d*`,className:`h-6 w-8 border-0 bg-transparent p-0 text-right text-sm outline-none focus:outline-none`,"aria-label":`Set zoom`,autoFocus:!1,value:o,onInput:function(e){s(e.target.value.replace(/[^0-9]/g,``))},onBlur:function(){(!o||parseFloat(o)<=0)&&s(c.toString())}}),P(`span`,{className:`text-sm`},`%`)),P(jh,{commandId:`zoom:toggle-menu`,documentId:t,itemId:`zoom-menu-button`}),P(jh,{commandId:`zoom:out`,documentId:t}),P(jh,{commandId:`zoom:in`,documentId:t})))}var Qg,$g=[`position`],e_=function(){var e=S(I(!1),2),t=e[0],n=e[1],r=R(null),i=R(null);return L(function(){if(t){var e=function(e){r.current&&!r.current.contains(e.target)&&n(!1)};return document.addEventListener(`click`,e),function(){return document.removeEventListener(`click`,e)}}},[t]),L(function(){t&&i.current&&i.current.scrollIntoView({block:`center`,inline:`start`})},[t]),{open:t,setOpen:n,rootRef:r,selectedItemRef:i}},t_=function(e){var t=e.value,n=e.onChange,r=e.options,i=e.getOptionKey,a=e.renderValue,o=e.renderOption,s=e.triggerClass,c=s===void 0?`px-3 py-2`:s,l=e_(),u=l.open,d=l.setOpen,f=l.rootRef,p=l.selectedItemRef;return P(`div`,{ref:f,class:`relative inline-block w-full`},P(`button`,{type:`button`,class:`border-border-default bg-bg-input flex w-full items-center justify-between gap-2 rounded border ${c}`,onClick:function(){return d(function(e){return!e})}},a(t),P(`svg`,{class:`text-fg-secondary h-4 w-4`,viewBox:`0 0 20 20`,fill:`currentColor`},P(`path`,{fillRule:`evenodd`,d:`M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z`,clipRule:`evenodd`}))),u&&P(`div`,{class:`border-border-default bg-bg-elevated absolute z-10 mt-1 max-h-60 w-full overflow-y-auto rounded border p-1 shadow-lg`},r.map(function(e){var r=i(e)===i(t);return P(`button`,{ref:r?p:null,key:i(e),class:`hover:bg-interactive-hover block w-full rounded text-left ${r?`bg-interactive-hover`:``}`,onClick:function(){n(e),d(!1)}},o(e,r))})))},n_=function(e){var t=e.children,n=e.className;return P(`label`,{class:`text-fg-primary mb-2 block text-sm font-medium ${n===void 0?``:n}`},t)},r_=function(e){var t=e.children,n=e.className;return P(`span`,{class:`text-fg-muted text-xs ${n===void 0?``:n}`},t)},i_=function(e){var t=e.children,n=e.className;return P(`section`,{class:`mb-6 ${n===void 0?``:n}`},t)},a_=function(e){var t=e.value,n=e.min,r=n===void 0?0:n,i=e.max,a=i===void 0?1:i,o=e.step,s=o===void 0?.1:o,c=e.onChange;return P(`input`,{type:`range`,class:`range-sm bg-border-subtle mb-2 h-1 w-full cursor-pointer appearance-none rounded-lg`,value:t,min:r,max:a,step:s,onInput:function(e){return c(parseFloat(e.target.value))}})},o_=function(e){var t=e.color,n=e.active,r=e.onSelect,i=function(e){return e===`transparent`||/^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*0\s*\)$/i.test(e)||/^#([0-9a-f]{8})$/i.test(e)&&e.slice(-2).toLowerCase()===`00`||/^#([0-9a-f]{4})$/i.test(e)&&e.slice(-1).toLowerCase()===`0`}(t)?{backgroundColor:`#fff`,backgroundImage:`linear-gradient(45deg, transparent 40%, red 40%, red 60%, transparent 60%)`,backgroundSize:`100% 100%`}:{backgroundColor:t};return P(`button`,{title:t,class:`border-border-strong h-5 w-5 rounded-full border ${n?`outline-accent outline outline-2 outline-offset-2`:``}`,style:i,onClick:function(){return r(t)}})},s_=[{id:G.SOLID},{id:G.DASHED,dash:[6,2]},{id:G.DASHED,dash:[8,4]},{id:G.DASHED,dash:[3,3]},{id:G.DASHED,dash:[1,2]},{id:G.DASHED,dash:[4,2,1,2]},{id:G.DASHED,dash:[8,4,1,4]}],c_=function(e){return P(`svg`,{width:`80`,height:`8`,viewBox:`0 0 80 8`},P(`line`,{x1:`0`,y1:`4`,x2:`80`,y2:`4`,style:{strokeDasharray:e?.join(` `),stroke:`currentColor`,strokeWidth:`2`}}))},l_=function(e){return P(t_,_(_({},e),{},{options:s_,getOptionKey:function(e){return e.id+(e.dash?.join(`-`)||``)},renderValue:function(e){return c_(e.dash)},renderOption:function(e){return P(`div`,{class:`px-1 py-2`},c_(e.dash))}}))},u_=[W.None,W.Square,W.Circle,W.Diamond,W.OpenArrow,W.ClosedArrow,W.ROpenArrow,W.RClosedArrow,W.Butt,W.Slash],d_=function(e){var t=e.ending,n=e.position,r=f(f(f(f(f(f(f(f(f({},W.Square,P(`path`,{d:`M68 -4 L76 -4 L76 4 L68 4 Z`})),W.Circle,P(`circle`,{cx:`72`,cy:`0`,r:`4`})),W.Diamond,P(`path`,{d:`M72 -5 L77 0 L72 5 L67 0 Z`})),W.OpenArrow,P(`path`,{d:`M67 -5 L77 0 L67 5`,fill:`none`})),W.ClosedArrow,P(`path`,{d:`M67 -5 L77 0 L67 5 Z`})),W.ROpenArrow,P(`path`,{d:`M77 -5 L67 0 L77 5`,fill:`none`})),W.RClosedArrow,P(`path`,{d:`M77 -5 L67 0 L77 5 Z`})),W.Butt,P(`path`,{d:`M72 -5 L72 5`,fill:`none`})),W.Slash,P(`path`,{d:`M67 -5 L77 5`,fill:`none`})),i=f(f(f(f(f(f(f(f(f({},W.Square,68),W.Circle,68),W.Diamond,67),W.OpenArrow,76),W.ClosedArrow,67),W.ROpenArrow,67),W.RClosedArrow,67),W.Butt,72),W.Slash,72),a=r[t];return P(`svg`,{width:`80`,height:`20`,viewBox:`0 0 80 20`,class:`text-fg-primary`},P(`g`,{transform:n===`start`?`rotate(180 40 10)`:``},P(`line`,{x1:`4`,y1:`10`,x2:i[t]??77,y2:`10`,stroke:`currentColor`,"stroke-width":`1.5`}),a&&P(`g`,{transform:`translate(0, 10)`,fill:`currentColor`,stroke:`currentColor`,"stroke-width":`1.5`},a)))},f_=function(e){var t=e.position;return P(t_,_(_({},v(e,$g)),{},{options:u_,getOptionKey:function(e){return e},triggerClass:`px-3 py-1`,renderValue:function(e){return P(d_,{ending:e,position:t})},renderOption:function(e){return P(`div`,{class:`px-1 py-1`},P(d_,{ending:e,position:t}))}}))},p_=function(e){return P(t_,_(_({},e),{},{options:bn,getOptionKey:function(e){return e},triggerClass:`px-2 py-1 text-sm`,renderValue:function(e){return P(`span`,null,xn(e))},renderOption:function(e){return P(`div`,{class:`px-2 py-1`},xn(e))}}))},m_=function(e){var t=e.value,n=e.onChange,r=e.options,i=r===void 0?[8,9,10,11,12,14,16,18,24,36,48,72]:r,a=e_(),o=a.open,s=a.setOpen,c=a.rootRef,l=a.selectedItemRef;return P(`div`,{ref:c,class:`relative w-full`},P(`input`,{type:`number`,min:`1`,class:`border-border-default bg-bg-input w-full rounded border px-2 py-1 pr-7 text-sm`,value:t,onInput:function(e){var t=parseInt(e.target.value,10);Number.isFinite(t)&&t>0&&n(t)},onClick:function(){return s(!0)}}),P(`button`,{type:`button`,class:`absolute inset-y-0 right-1 flex items-center`,onClick:function(){return s(function(e){return!e})},tabIndex:-1},P(`svg`,{class:`text-fg-secondary h-4 w-4`,viewBox:`0 0 20 20`,fill:`currentColor`},P(`path`,{"fill-rule":`evenodd`,d:`M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z`,"clip-rule":`evenodd`}))),o&&P(`div`,{class:`border-border-default bg-bg-elevated absolute z-10 mt-1 max-h-48 w-full overflow-y-auto rounded border shadow-lg`},i.map(function(e){var r=e===t;return P(`button`,{ref:r?l:null,key:e,class:`hover:bg-interactive-hover block w-full px-2 py-1 text-left text-sm ${r?`bg-interactive-hover`:``}`,onClick:function(){n(e),s(!1)}},e)})))},h_=(f(f(f(f(f(f(f(f(f(f(Qg={},H.Normal,`blendMode.normal`),H.Multiply,`blendMode.multiply`),H.Screen,`blendMode.screen`),H.Overlay,`blendMode.overlay`),H.Darken,`blendMode.darken`),H.Lighten,`blendMode.lighten`),H.ColorDodge,`blendMode.colorDodge`),H.ColorBurn,`blendMode.colorBurn`),H.HardLight,`blendMode.hardLight`),H.SoftLight,`blendMode.softLight`),f(f(f(f(f(f(Qg,H.Difference,`blendMode.difference`),H.Exclusion,`blendMode.exclusion`),H.Hue,`blendMode.hue`),H.Saturation,`blendMode.saturation`),H.Color,`blendMode.color`),H.Luminosity,`blendMode.luminosity`)),g_=function(e){var t=e.documentId,n=e.selected,r=e.activeTool,i=e.colorPresets,a=Fu().provides,o=So(t).translate;if(!a)return null;var s=n?.object,c=r?.defaults,l=!!s,u=l?s.color:c?.color??`#FFFF00`,d=l?s.opacity:c?.opacity??1,f=l?s.blendMode??H.Normal:c?.blendMode??H.Normal,p=S(I(u),2),m=p[0],h=p[1],g=S(I(d),2),_=g[0],v=g[1],y=S(I(f),2),b=y[0],x=y[1];L(function(){return h(u)},[u]),L(function(){return v(d)},[d]),L(function(){return x(f)},[f]);var C=Og(_,300);L(function(){return T({opacity:C})},[C]);var w=function(e){h(e),T({color:e})};function T(e){a&&(l?a.updateAnnotation(s.pageIndex,s.id,e):r&&a.setToolDefaults(r.id,e))}return P(F,null,P(i_,null,P(n_,{className:`mb-3`},o(`annotation.color`)),P(`div`,{class:`grid grid-cols-6 gap-x-1 gap-y-4`},i.map(function(e){return P(o_,{key:e,color:e,active:e===m,onSelect:w})}))),P(i_,null,P(n_,null,o(`annotation.opacity`)),P(a_,{value:_,min:.1,max:1,step:.05,onChange:v}),P(r_,null,Math.round(100*_),`%`)),P(i_,null,P(n_,null,o(`annotation.blendMode`)),P(`select`,{class:`border-border-default bg-bg-input text-fg-primary w-full rounded border px-2 py-1 text-sm`,value:b,onChange:function(e){t=parseInt(e.target.value,10),x(n=t),T({blendMode:n});return;var t,n}},Tn.map(function(e){return P(`option`,{key:e,value:e},o(h_[e]))}))))},__=function(e){var t=e.documentId,n=e.selected,r=e.activeTool,i=e.colorPresets,a=Fu().provides,o=So(t).translate;if(!a)return null;var s=n?.object,c=r?.defaults,l=!!s,u=l?s.color:c?.color??`#000000`,d=l?s.strokeColor:c?.strokeColor??`#000000`,f=l?s.opacity:c?.opacity??1,p=l?s.strokeWidth:c?.strokeWidth??2,m=l?{id:s.strokeStyle,dash:s.strokeDashArray}:{id:c?.strokeStyle??G.SOLID,dash:c?.strokeDashArray},h=S(I(u),2),g=h[0],_=h[1],v=S(I(d),2),y=v[0],b=v[1],x=S(I(f),2),C=x[0],w=x[1],T=S(I(p),2),E=T[0],D=T[1],O=S(I(m),2),k=O[0],A=O[1];L(function(){return _(u)},[u]),L(function(){return b(d)},[d]),L(function(){return w(f)},[f]),L(function(){return D(p)},[p]),L(function(){return A(m)},[m]);var ee=Og(C,300),j=Og(E,300);L(function(){return te({opacity:ee})},[ee]),L(function(){return te({strokeWidth:j})},[j]);var M=function(e){_(e),te({color:e})},N=function(e){b(e),te({strokeColor:e})};function te(e){a&&(l?a.updateAnnotation(s.pageIndex,s.id,e):r&&a.setToolDefaults(r.id,e))}return P(F,null,P(i_,null,P(n_,{className:`mb-3`},o(`annotation.fillColor`)),P(`div`,{class:`grid grid-cols-6 gap-x-1 gap-y-4`},i.map(function(e){return P(o_,{key:e,color:e,active:e===g,onSelect:M})}),P(o_,{color:`transparent`,active:g===`transparent`,onSelect:M}))),P(i_,null,P(n_,null,o(`annotation.opacity`)),P(a_,{value:C,min:.1,max:1,step:.05,onChange:w}),P(r_,null,Math.round(100*C),`%`)),P(i_,null,P(n_,{className:`mb-3`},o(`annotation.strokeColor`)),P(`div`,{class:`grid grid-cols-6 gap-x-1 gap-y-4`},i.map(function(e){return P(o_,{key:e,color:e,active:e===y,onSelect:N})}))),P(i_,null,P(n_,{className:`mb-3`},o(`annotation.borderStyle`)),P(l_,{value:k,onChange:function(e){A(e),te({strokeStyle:e.id,strokeDashArray:e.dash})}})),P(i_,null,P(n_,null,o(`annotation.strokeWidth`)),P(a_,{value:E,min:1,max:30,step:1,onChange:D}),P(r_,null,E,`px`)))},v_=function(e){var t=e.documentId,n=e.selected,r=e.activeTool,i=e.colorPresets,a=Fu().provides,o=So(t).translate;if(!a)return null;var s=n?.object,c=r?.defaults,l=!!s,u=l?s.color:c?.color??`#000000`,d=l?s.strokeColor:c?.strokeColor??`#000000`,f=l?s.opacity:c?.opacity??1,p=l?s.strokeWidth:c?.strokeWidth??2,m=l?s.lineEndings??{start:W.None,end:W.None}:c?.lineEndings??{start:W.None,end:W.None},h=l?{id:s.strokeStyle,dash:s.strokeDashArray}:{id:c?.strokeStyle??G.SOLID,dash:c?.strokeDashArray},g=S(I(u),2),_=g[0],v=g[1],y=S(I(d),2),b=y[0],x=y[1],C=S(I(f),2),w=C[0],T=C[1],E=S(I(p),2),D=E[0],O=E[1],k=S(I(h),2),A=k[0],ee=k[1],j=S(I(m.start),2),M=j[0],N=j[1],te=S(I(m.end),2),ne=te[0],re=te[1];L(function(){return v(u)},[u]),L(function(){return x(d)},[d]),L(function(){return T(f)},[f]),L(function(){return O(p)},[p]),L(function(){return ee(h)},[h]),L(function(){return N(m.start)},[m.start]),L(function(){return re(m.end)},[m.end]);var ie=Og(w,300),ae=Og(D,300);L(function(){return ce({opacity:ie})},[ie]),L(function(){return ce({strokeWidth:ae})},[ae]);var oe=function(e){v(e),ce({color:e})},se=function(e){x(e),ce({strokeColor:e})};function ce(e){a&&(l?a.updateAnnotation(s.pageIndex,s.id,e):r&&a.setToolDefaults(r.id,e))}return P(F,null,P(i_,null,P(n_,{className:`mb-3`},o(`annotation.strokeColor`)),P(`div`,{class:`grid grid-cols-6 gap-x-1 gap-y-4`},i.map(function(e){return P(o_,{key:e,color:e,active:e===b,onSelect:se})}),P(o_,{color:`transparent`,active:b===`transparent`,onSelect:se}))),P(i_,null,P(n_,null,o(`annotation.opacity`)),P(a_,{value:w,min:.1,max:1,step:.05,onChange:T}),P(r_,null,Math.round(100*w),`%`)),P(i_,null,P(n_,{className:`mb-3`},o(`annotation.borderStyle`)),P(l_,{value:A,onChange:function(e){ee(e),ce({strokeStyle:e.id,strokeDashArray:e.dash})}})),P(i_,null,P(n_,null,o(`annotation.strokeWidth`)),P(a_,{value:D,min:1,max:10,step:1,onChange:O}),P(r_,null,D)),P(i_,null,P(`div`,{class:`grid grid-cols-2 gap-4`},P(`div`,null,P(n_,{className:`mb-3`},o(`annotation.lineStart`)),P(f_,{value:M,onChange:function(e){N(e),ce({lineEndings:{start:e,end:ne}})},position:`start`})),P(`div`,null,P(n_,{className:`mb-3`},o(`annotation.lineEnd`)),P(f_,{value:ne,onChange:function(e){re(e),ce({lineEndings:{start:M,end:e}})},position:`end`})))),P(i_,null,P(n_,{className:`mb-3`},o(`annotation.fillColor`)),P(`div`,{class:`grid grid-cols-6 gap-x-1 gap-y-4`},i.map(function(e){return P(o_,{key:e,color:e,active:e===_,onSelect:oe})}),P(o_,{color:`transparent`,active:_===`transparent`,onSelect:oe}))))};function y_(e){var t=e.active,n=t!==void 0&&t,r=e.disabled,i=r!==void 0&&r,a=e.onClick,o=e.title,s=e.children,c=e.className;return P(`button`,{type:`button`,title:o,disabled:i,onClick:a,className:`h-9 w-9 rounded border px-2 py-1 text-sm transition-colors ${n?`border-accent bg-accent text-fg-on-accent`:`border-border-default bg-bg-input text-fg-primary hover:bg-interactive-hover`} disabled:cursor-not-allowed disabled:opacity-40 ${c===void 0?``:c}`},s)}var b_,x_=(f(f(f(f(f(f(f(f(f(f(b_={},U.INK,{component:function(e){var t=e.documentId,n=e.selected,r=e.activeTool,i=e.colorPresets,a=Fu().provides,o=So(t).translate;if(!a)return null;var s=n?.object,c=r?.defaults,l=s?.color??c?.color??`#000000`,u=s?.opacity??c?.opacity??1,d=s?.strokeWidth??c?.strokeWidth??2,f=S(I(l),2),p=f[0],m=f[1],h=S(I(u),2),g=h[0],_=h[1],v=S(I(d),2),y=v[0],b=v[1];L(function(){return m(l)},[l]),L(function(){return _(u)},[u]),L(function(){return b(d)},[d]);var x=Og(g,300),C=Og(y,300);L(function(){return T({opacity:x})},[x]),L(function(){return T({strokeWidth:C})},[C]);var w=function(e){m(e),T({color:e})};function T(e){a&&(s?a.updateAnnotation(s.pageIndex,s.id,e):r&&a.setToolDefaults(r.id,e))}return P(F,null,P(i_,null,P(n_,{className:`mb-3`},o(`annotation.color`)),P(`div`,{class:`grid grid-cols-6 gap-x-1 gap-y-4`},i.map(function(e){return P(o_,{key:e,color:e,active:e===p,onSelect:w})}))),P(i_,null,P(n_,null,o(`annotation.opacity`)),P(a_,{value:g,min:.1,max:1,step:.05,onChange:_}),P(r_,null,Math.round(100*g),`%`)),P(i_,null,P(n_,null,o(`annotation.strokeWidth`)),P(a_,{value:y,min:1,max:30,step:1,onChange:b}),P(r_,null,y,`px`)))},titleKey:`annotation.ink`}),U.POLYGON,{component:function(e){var t=e.documentId,n=e.selected,r=e.activeTool,i=e.colorPresets,a=Fu().provides,o=So(t).translate;if(!a)return null;var s=n?.object,c=r?.defaults,l=!!s,u=l?s.color:c?.color??`#000000`,d=l?s.strokeColor:c?.strokeColor??`#000000`,f=l?s.opacity:c?.opacity??1,p=l?s.strokeWidth:c?.strokeWidth??2,m=l?{id:s.strokeStyle,dash:s.strokeDashArray}:{id:c?.strokeStyle??G.SOLID,dash:c?.strokeDashArray},h=S(I(u),2),g=h[0],_=h[1],v=S(I(d),2),y=v[0],b=v[1],x=S(I(f),2),C=x[0],w=x[1],T=S(I(p),2),E=T[0],D=T[1],O=S(I(m),2),k=O[0],A=O[1];L(function(){return _(u)},[u]),L(function(){return b(d)},[d]),L(function(){return w(f)},[f]),L(function(){return D(p)},[p]),L(function(){return A(m)},[m]);var ee=Og(C,300),j=Og(E,300);L(function(){return te({opacity:ee})},[ee]),L(function(){return te({strokeWidth:j})},[j]);var M=function(e){_(e),te({color:e})},N=function(e){b(e),te({strokeColor:e})};function te(e){a&&(l?a.updateAnnotation(s.pageIndex,s.id,e):r&&a.setToolDefaults(r.id,e))}return P(F,null,P(i_,null,P(n_,{className:`mb-3`},o(`annotation.strokeColor`)),P(`div`,{class:`grid grid-cols-6 gap-x-1 gap-y-4`},i.map(function(e){return P(o_,{key:e,color:e,active:e===y,onSelect:N})}),P(o_,{color:`transparent`,active:y===`transparent`,onSelect:N}))),P(i_,null,P(n_,null,o(`annotation.opacity`)),P(a_,{value:C,min:.1,max:1,step:.05,onChange:w}),P(r_,null,Math.round(100*C),`%`)),P(i_,null,P(n_,{className:`mb-3`},o(`annotation.borderStyle`)),P(l_,{value:k,onChange:function(e){A(e),te({strokeStyle:e.id,strokeDashArray:e.dash})}})),P(i_,null,P(n_,null,o(`annotation.strokeWidth`)),P(a_,{value:E,min:1,max:10,step:1,onChange:D}),P(r_,null,E)),P(i_,null,P(n_,{className:`mb-3`},o(`annotation.fillColor`)),P(`div`,{class:`grid grid-cols-6 gap-x-1 gap-y-4`},i.map(function(e){return P(o_,{key:e,color:e,active:e===g,onSelect:M})}),P(o_,{color:`transparent`,active:g===`transparent`,onSelect:M}))))},titleKey:`annotation.polygon`}),U.SQUARE,{component:__,titleKey:`annotation.square`}),U.CIRCLE,{component:__,titleKey:`annotation.circle`}),U.LINE,{component:v_,titleKey:function(e){return e.activeTool?.id===`lineArrow`?`annotation.arrow`:`annotation.line`}}),U.POLYLINE,{component:v_,titleKey:`annotation.polyline`}),U.HIGHLIGHT,{component:g_,titleKey:`annotation.highlight`}),U.UNDERLINE,{component:g_,titleKey:`annotation.underline`}),U.STRIKEOUT,{component:g_,titleKey:`annotation.strikeout`}),U.SQUIGGLY,{component:g_,titleKey:`annotation.squiggly`}),f(f(b_,U.FREETEXT,{component:function(e){var t=e.documentId,n=e.selected,r=e.activeTool,i=e.colorPresets,a=Fu().provides,o=So(t).translate;if(!a)return null;var s=n?.object,c=r?.defaults,l=!!s,u=l?s.fontFamily:c?.fontFamily??Lt.Helvetica,d=gn(u).family,f=_n(u),p=vn(u),m=l?s.fontColor:c?.fontColor??`#000000`,h=l?s.opacity:c?.opacity??1,g=l?s.backgroundColor:c?.backgroundColor??`#000000`,_=l?s.fontSize:c?.fontSize??12,v=l?s.textAlign:c?.textAlign??Rt.Left,y=l?s.verticalAlign:c?.verticalAlign??zt.Top,b=S(I(d),2),x=b[0],C=b[1],w=S(I(_),2),T=w[0],E=w[1],D=S(I(f),2),O=D[0],k=D[1],A=S(I(p),2),ee=A[0],j=A[1],M=S(I(v),2),N=M[0],te=M[1],ne=S(I(y),2),re=ne[0],ie=ne[1],ae=S(I(m),2),oe=ae[0],se=ae[1],ce=S(I(h),2),le=ce[0],ue=ce[1],de=S(I(g),2),fe=de[0],pe=de[1];function me(e){a&&(l?a.updateAnnotation(s.pageIndex,s.id,e):r&&a.setToolDefaults(r.id,e))}L(function(){C(d),k(f),j(p)},[d,f,p]),L(function(){return se(m)},[m]),L(function(){return ue(h)},[h]),L(function(){return pe(g)},[g]),L(function(){return E(_)},[_]),L(function(){return te(v)},[v]),L(function(){return ie(y)},[y]);var he=Og(le,300),ge=Og(fe,300);L(function(){return me({opacity:he})},[he]),L(function(){return me({backgroundColor:ge})},[ge]);var _e=function(e){se(e),me({fontColor:e})},ve=function(e){pe(e),me({backgroundColor:e})},ye=function(e,t,n){me({fontFamily:yn(e,{bold:t,italic:n})})},be=function(e){te(e),me({textAlign:e})},xe=function(e){ie(e),me({verticalAlign:e})};return P(F,null,P(i_,null,P(n_,null,o(`annotation.font`)),P(`div`,{class:`mb-3 flex gap-2`},P(p_,{value:x,onChange:function(e){var t=_n(yn(e,{bold:!0,italic:!1})),n=vn(yn(e,{bold:!1,italic:!0})),r=!!t&&O,i=!!n&&ee;C(e),k(r),j(i),ye(e,r,i)}}),P(`div`,{class:`w-36`},P(m_,{value:T,onChange:function(e){!Number.isFinite(e)||e<=0||(E(e),me({fontSize:e}))}}))),P(`div`,{class:`flex gap-2`},P(y_,{title:`Bold`,active:O,disabled:!_n(yn(x,{bold:!0,italic:!1})),onClick:function(){if(_n(yn(x,{bold:!0,italic:!1}))){var e=!O;k(e),ye(x,e,ee)}},className:`font-bold`},P(nm,{icon:`bold`,size:18})),P(y_,{title:`Italic`,active:ee,disabled:!vn(yn(x,{bold:!1,italic:!0})),onClick:function(){if(vn(yn(x,{bold:!1,italic:!0}))){var e=!ee;j(e),ye(x,O,e)}},className:`italic`},P(nm,{icon:`italic`,size:18})))),P(i_,null,P(n_,null,o(`annotation.textAlign`)),P(`div`,{class:`flex gap-2`},P(y_,{title:`Align left`,active:N===Rt.Left,onClick:function(){return be(Rt.Left)}},P(nm,{icon:`alignLeft`,size:18})),P(y_,{title:`Align center`,active:N===Rt.Center,onClick:function(){return be(Rt.Center)}},P(nm,{icon:`alignCenter`,size:18})),P(y_,{title:`Align right`,active:N===Rt.Right,onClick:function(){return be(Rt.Right)}},P(nm,{icon:`alignRight`,size:18})))),P(i_,null,P(n_,null,o(`annotation.verticalAlign`)),P(`div`,{class:`flex gap-2`},P(y_,{title:`Align top`,active:re===zt.Top,onClick:function(){return xe(zt.Top)}},P(nm,{icon:`alignTop`,size:18})),P(y_,{title:`Align middle`,active:re===zt.Middle,onClick:function(){return xe(zt.Middle)}},P(nm,{icon:`alignMiddle`,size:18})),P(y_,{title:`Align bottom`,active:re===zt.Bottom,onClick:function(){return xe(zt.Bottom)}},P(nm,{icon:`alignBottom`,size:18})))),P(i_,null,P(n_,{className:`mb-3`},o(`annotation.fontColor`)),P(`div`,{class:`grid grid-cols-6 gap-x-1 gap-y-4`},i.map(function(e){return P(o_,{key:e,color:e,active:e===oe,onSelect:_e})}))),P(i_,null,P(n_,{className:`mb-3`},o(`annotation.backgroundColor`)),P(`div`,{class:`grid grid-cols-6 gap-x-1 gap-y-4`},i.map(function(e){return P(o_,{key:e,color:e,active:e===fe,onSelect:ve})}),P(o_,{color:`transparent`,active:fe===`transparent`,onSelect:ve}))),P(i_,null,P(n_,null,o(`annotation.opacity`)),P(a_,{value:le,min:.1,max:1,step:.05,onChange:ue}),P(r_,null,Math.round(100*le),`%`)))},titleKey:`annotation.freeText`}),U.STAMP,{component:function(e){var t=e.documentId;return P(`div`,{className:`text-fg-muted text-sm`},(0,So(t).translate)(`annotation.noStylesStamp`))},titleKey:`annotation.stamp`})),S_=function(e){var t=e.documentId,n=So(t).translate;return P(`div`,{class:`text-fg-muted flex flex-col items-center gap-2 p-4`},P(nm,{icon:`palette`,className:`h-18 w-18 text-fg-muted`}),P(`div`,{className:`text-fg-muted max-w-[150px] text-center text-sm`},n(`annotation.selectAnnotation`)))};function C_(e){var t=e.documentId,n=Fu().provides,r=Iu(t),i=r.provides,a=r.state,o=So(t).translate;if(!n||!i)return null;var s=n?.getColorPresets()??[],c=null,l=null,u=a.selectedUid?xl(a,a.selectedUid):null;if(u?(c=i.findToolForAnnotation(u.object),l=u.object.type):a.activeToolId&&(l=(c=i.getActiveTool()??null)?.defaults.type??null),l===null)return V(S_,{documentId:t});var d=x_[l];if(!d)return V(S_,{documentId:t});var f=d.component,p=d.titleKey,m={documentId:t,selected:u,activeTool:c,colorPresets:s},h=typeof p==`function`?p(m):p,g=h?o(h):``,v=g?o(u?`annotation.styles`:`annotation.defaults`,{params:{type:g}}):``;return V(`div`,{class:`h-full overflow-y-auto p-4`,children:[v&&V(`h2`,{class:`text-md mb-4 font-medium`,children:v}),V(f,_({},m))]})}function w_(e){var t=e.schema,n=e.documentId,r=e.props,i=r.menuWrapperProps,a=r.rect,o=r.placement,s={position:`absolute`,pointerEvents:`auto`,cursor:`default`,left:`50%`,transform:`translateX(-50%)`};return o!=null&&o.suggestTop?s.top=-48:s.top=a.size.height+8,P(`div`,_(_({},i),xa(t)),P(`div`,{style:s,className:`border-border-subtle bg-bg-elevated rounded-lg border shadow-lg`},P(`div`,{className:`flex items-center gap-1 p-1`},t.items.map(function(e){return P(T_,{key:e.id,item:e,documentId:n,props:r})}))))}function T_(e){var t=e.item,n=e.documentId,r=e.props;switch(t.type){case`command-button`:return P(`div`,_({},xa(t)),P(jh,{commandId:t.commandId,documentId:n,variant:t.variant}));case`divider`:return P(`div`,_({},xa(t)),P(`div`,{className:`bg-border-default h-6 w-px`,"aria-hidden":`true`}));case`group`:return P(`div`,_({className:`flex items-center gap-${t.gap??1}`},xa(t)),t.items.map(function(e){return P(T_,{key:e.id,item:e,documentId:n,props:r})}));default:return null}}function E_(e){var t,n,r=e.schema,i=e.documentId,a=e.className,o=r.content,s=r.position,c=Va().renderCustomComponent,l=(t=s.anchor,(n={"top-left":`top-0 left-0`,"top-center":`top-0 left-1/2 -translate-x-1/2`,"top-right":`top-0 right-0`,"center-left":`top-1/2 left-0 -translate-y-1/2`,center:`top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2`,"center-right":`top-1/2 right-0 -translate-y-1/2`,"bottom-left":`bottom-0 left-0`,"bottom-center":`bottom-0 left-1/2 -translate-x-1/2`,"bottom-right":`bottom-0 right-0`})[t]||n[`bottom-center`]),u=function(e){if(e){var t={};return e.top&&(t.top=e.top),e.right&&(t.right=e.right),e.bottom&&(t.bottom=e.bottom),e.left&&(t.left=e.left),Object.keys(t).length>0?t:void 0}}(s.offset);return P(`div`,{className:`absolute ${l} ${a||``}`,style:u,"data-overlay-id":r.id},c(o.componentId,i,{}))}function D_(e){var t=e.open,n=e.title,r=e.children,i=e.onClose,a=e.onExited,o=e.className,s=e.showCloseButton,c=s===void 0||s;e.maxWidth;var l=R(null),u=S(I(t),2),d=u[0],f=u[1],p=S(I(!1),2),m=p[0],h=p[1];return L(function(){if(t)f(!0),requestAnimationFrame(function(){h(!0)});else if(d){h(!1);var e=setTimeout(function(){f(!1),a?.()},200);return function(){return clearTimeout(e)}}},[t,d,a]),L(function(){if(t){var e=function(e){e.key===`Escape`&&i?.()};return document.addEventListener(`keydown`,e),function(){return document.removeEventListener(`keydown`,e)}}},[t,i]),L(function(){return document.body.style.overflow=d?`hidden`:``,function(){document.body.style.overflow=``}},[d]),d?V(`div`,{ref:l,className:`fixed inset-0 z-50 transition-opacity duration-200 md:flex md:items-center md:justify-center ${m&&t?`bg-bg-overlay`:`bg-transparent`}`,onClick:function(e){e.target===l.current&&i?.()},children:V(`div`,{className:`bg-bg-surface md:border-border-subtle relative flex h-full w-full flex-col transition-all duration-200 md:h-auto md:w-[28rem] md:max-w-[90vw] md:rounded-lg md:border md:shadow-lg ${m&&t?`scale-100 opacity-100`:`scale-95 opacity-0`} ${o}`,onClick:function(e){return e.stopPropagation()},children:[(n||c)&&V(`div`,{className:`border-border-subtle flex flex-shrink-0 items-center justify-between border-b px-6 py-4`,children:[n&&V(`h2`,{className:`text-fg-primary text-lg font-semibold`,children:n}),c&&V(im,{onClick:i,className:`hover:bg-interactive-hover p-1`,children:V(nm,{icon:`x`,className:`h-5 w-5`})})]}),V(`div`,{className:`flex-1 overflow-y-auto px-6 py-4 md:max-h-[80vh] md:flex-none`,children:r})]})}):null}function O_(e){var t=e.documentId,n=e.isOpen,r=e.onClose,i=e.onExited,a=ui().provides,o=od().provides,s=S(I(`all`),2),c=s[0],l=s[1],u=S(I(``),2),d=u[0],f=u[1],p=S(I(!0),2),m=p[0],h=p[1],g=S(I(!1),2),_=g[0],v=g[1],y=S(I(``),2),b=y[0],x=y[1],C=a?.forDocument(t).getMetrics()?.currentPage||1,w=a?.forDocument(t).getTotalPages()||0;L(function(){n&&(l(`all`),f(``),h(!0),v(!1),x(``))},[n]);var T=(c!==`custom`||d.trim().length>0)&&!_;return P(D_,{open:n!=null&&n,title:`Print Settings`,onClose:r,onExited:i,maxWidth:`32rem`},P(`div`,{className:`space-y-6`},P(`div`,null,P(`label`,{className:`text-fg-secondary mb-3 block text-sm font-medium`},`Pages to print`),P(`div`,{className:`space-y-2`},P(`label`,{className:`flex items-center`},P(`input`,{type:`radio`,name:`pageRange`,value:`all`,checked:c===`all`,onChange:function(){return l(`all`)},disabled:_,className:`accent-accent mr-2`}),P(`span`,{className:`text-fg-primary text-sm`},`All pages`)),P(`label`,{className:`flex items-center`},P(`input`,{type:`radio`,name:`pageRange`,value:`current`,checked:c===`current`,onChange:function(){return l(`current`)},disabled:_,className:`accent-accent mr-2`}),P(`span`,{className:`text-fg-primary text-sm`},`Current page (`,C,`)`)),P(`label`,{className:`flex items-start`},P(`input`,{type:`radio`,name:`pageRange`,value:`custom`,checked:c===`custom`,onChange:function(){return l(`custom`)},disabled:_,className:`accent-accent mr-2 mt-0.5`}),P(`div`,{className:`flex-1`},P(`span`,{className:`text-fg-primary mb-1 block text-sm`},`Specify pages`),P(`input`,{type:`text`,placeholder:`e.g., 1-3, 5, 8-10`,value:d,onInput:function(e){return f(e.target.value)},disabled:c!==`custom`||_,className:`w-full rounded-md border px-3 py-1 text-sm ${c!==`custom`||_?`bg-interactive-disabled text-fg-muted`:`border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent`} focus:outline-none focus:ring-1`}),c===`custom`&&d.trim()&&w>0&&P(`p`,{className:`text-fg-muted mt-1 text-xs`},`Total pages in document: `,w))))),P(`div`,null,P(`label`,{className:`flex items-center`},P(`input`,{type:`checkbox`,checked:m,onChange:function(e){return h(e.target.checked)},disabled:_,className:`accent-accent mr-2`}),P(`span`,{className:`text-fg-secondary text-sm font-medium`},`Include annotations`))),_&&P(`div`,{className:`bg-state-info-light flex items-center space-x-3 rounded-md p-3`},P(Pg,{className:`text-accent`}),P(`span`,{className:`text-accent text-sm`},b)),P(`div`,{className:`border-border-subtle flex justify-end space-x-3 border-t pt-4`},P(im,{onClick:r,disabled:_,className:`border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50`},`Cancel`),P(im,{onClick:function(){var e;c===`current`?e=String(C):c===`custom`&&(e=d.trim()||void 0);var n={includeAnnotations:m,pageRange:e};try{v(!0),x(`Preparing document...`);var i=o?.forDocument(t).print(n);i&&(i.onProgress(function(e){x(e.message)}),i.wait(function(){v(!1),x(``),r?.()},function(e){console.error(`Print failed:`,e),v(!1),x(``)}))}catch(e){console.error(`Print failed:`,e),v(!1),x(``)}},disabled:!T,className:`bg-accent text-fg-on-accent hover:!bg-accent-hover flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50`},_&&P(Pg,{size:`sm`}),P(`span`,null,_?`Printing...`:`Print`)))))}function k_(e){var t=e.documentId,n=qr().provides,r=di(t),i=r.provides,a=r.state,o=a.currentPage,s=a.totalPages,c=S(I(!1),2),l=c[0],u=c[1],d=S(I(!1),2),f=d[0],p=d[1],m=R(null),h=S(I(o.toString()),2),g=h[0],_=h[1],v=R(null);L(function(){_(o.toString())},[o]);var y=B(function(){m.current&&clearTimeout(m.current),m.current=setTimeout(function(){f||u(!1)},4e3)},[f]);return L(function(){if(n)return n.onScrollActivity(function(e){e.documentId===t&&(u(!0),y())})},[n,t,y]),L(function(){return function(){m.current&&clearTimeout(m.current)}},[]),s<=1?null:P(`div`,{onMouseEnter:function(){p(!0),u(!0),m.current&&clearTimeout(m.current)},onMouseLeave:function(){p(!1),y()},className:`pointer-events-auto`},P(`div`,{className:`border-border-default bg-bg-surface flex items-center gap-1 rounded-lg border p-1 shadow-lg transition-opacity duration-300 ${l?`opacity-100`:`opacity-0`}`},P(jh,{commandId:`scroll:previous-page`,documentId:t,variant:`icon`}),P(`div`,{className:`flex items-center gap-1 px-1`},P(`input`,{ref:v,type:`text`,inputMode:`numeric`,pattern:`[0-9]*`,value:g,onChange:function(e){_(e.target.value.replace(/[^0-9]/g,``))},onFocus:function(){setTimeout(function(){return v.current?.select()},0)},onBlur:function(){var e,t=parseInt(g,10);!isNaN(t)&&t>=1&&t<=s?i==null||(e=i.scrollToPage)==null||e.call(i,{pageNumber:t}):_(o.toString())},onKeyDown:function(e){e.key===`Enter`?e.target.blur():e.key===`Escape`&&(_(o.toString()),e.target.blur())},className:`border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent h-7 w-10 rounded border px-1 text-center text-sm focus:outline-none focus:ring-1`}),P(`span`,{className:`text-fg-secondary text-sm`},`\xA0 `,s)),P(jh,{commandId:`scroll:next-page`,documentId:t,variant:`icon`})))}var A_={colors:{background:{app:`#f3f4f6`,surface:`#ffffff`,surfaceAlt:`#f1f3f5`,elevated:`#ffffff`,overlay:`rgba(0, 0, 0, 0.5)`,input:`#ffffff`},foreground:{primary:`#111827`,secondary:`#374151`,muted:`#6b7280`,disabled:`#9ca3af`,onAccent:`#ffffff`},border:{default:`#d1d5db`,subtle:`#e5e7eb`,strong:`#9ca3af`},accent:{primary:`#3b82f6`,primaryHover:`#2563eb`,primaryActive:`#1d4ed8`,primaryLight:`#eff6ff`,primaryForeground:`#ffffff`},interactive:{hover:`#f3f4f6`,active:`#e5e7eb`,selected:`#eff6ff`,focus:`#3b82f6`,focusRing:`#bfdbfe`},state:{error:`#ef4444`,errorLight:`#fef2f2`,warning:`#f59e0b`,warningLight:`#fffbeb`,success:`#22c55e`,successLight:`#f0fdf4`,info:`#3b82f6`,infoLight:`#eff6ff`},tooltip:{background:`#111827`,foreground:`#ffffff`},scrollbar:{track:`#f3f4f6`,thumb:`#d1d5db`,thumbHover:`#9ca3af`}}},j_={colors:{background:{app:`#111827`,surface:`#1f2937`,surfaceAlt:`#374151`,elevated:`#1f2937`,overlay:`rgba(0, 0, 0, 0.7)`,input:`#374151`},foreground:{primary:`#f9fafb`,secondary:`#e5e7eb`,muted:`#9ca3af`,disabled:`#6b7280`,onAccent:`#111827`},border:{default:`#4b5563`,subtle:`#374151`,strong:`#6b7280`},accent:{primary:`#60a5fa`,primaryHover:`#3b82f6`,primaryActive:`#2563eb`,primaryLight:`#1e3a5f`,primaryForeground:`#111827`},interactive:{hover:`#374151`,active:`#4b5563`,selected:`#1e3a5f`,focus:`#60a5fa`,focusRing:`#1e40af`},state:{error:`#f87171`,errorLight:`#7f1d1d`,warning:`#fbbf24`,warningLight:`#78350f`,success:`#4ade80`,successLight:`#14532d`,info:`#60a5fa`,infoLight:`#1e3a5f`},tooltip:{background:`#f9fafb`,foreground:`#111827`},scrollbar:{track:`#1f2937`,thumb:`#4b5563`,thumbHover:`#6b7280`}}};function M_(e,t){var n=_({},e);for(var r in t){var i=t[r];i&&T(i)===`object`&&!Array.isArray(i)?n[r]=M_(e[r]||{},i):i!==void 0&&(n[r]=i)}return n}function N_(e,t){return{colors:M_(e.colors,t)}}function P_(e){return e===`system`?typeof window>`u`?`light`:window.matchMedia(`(prefers-color-scheme: dark)`).matches?`dark`:`light`:e}function F_(e){return e.replace(/([a-z])([A-Z])/g,`$1-$2`).toLowerCase()}function I_(e){return`:host {
${function(e){var t=[];return function e(n,r){for(var i=0,a=Object.entries(n);i<a.length;i++){var o=S(a[i],2),s=o[0],c=o[1];c&&T(c)===`object`?e(c,`${r}-${F_(s)}`):c!==void 0&&t.push(`  --ep${r}-${F_(s)}: ${c};`)}}(e.colors,``),t.join(`
`)}(e)}
}`}function L_(e){var t=e.documentStates,n=e.activeDocumentId,r=e.visibility,i=r===void 0?`multiple`:r,a=e.allowOpenFile,o=a===void 0||a,s=$a().provides,c=B(function(e){s?.setActiveDocument(e)},[s]),l=B(function(e){s?.closeDocument(e)},[s]),u=B(function(){s?.openFileDialog()},[s]);return i===`always`||i===`multiple`&&t.length>1?P(`div`,{className:`bg-bg-surface-alt flex items-end pr-2 pt-2`},P(`div`,{className:`flex flex-1 items-end overflow-x-auto pl-4`},t.map(function(e){var t=n===e.id;return P(`div`,{key:e.id,onClick:function(){return c(e.id)},role:`tab`,tabIndex:0,"aria-selected":t,onKeyDown:function(t){t.key!==`Enter`&&t.key!==` `||(t.preventDefault(),c(e.id))},className:`group relative flex min-w-[120px] max-w-[240px] cursor-pointer items-center gap-2 rounded-t-lg px-4 py-2 text-sm font-medium transition-all ${t?`bg-bg-surface text-fg-primary z-10`:`bg-bg-surface-alt text-fg-secondary hover:bg-interactive-hover hover:text-fg-primary`}`},P(`span`,{className:`min-w-0 flex-1 truncate`},e.name??`Document ${e.id.slice(0,8)}`),t&&P(`button`,{onClick:function(t){t.stopPropagation(),l(e.id)},"aria-label":`Close ${e.name??`document`}`,className:`hover:bg-interactive-hover flex-shrink-0 cursor-pointer rounded-full p-1 transition-all ${t?`opacity-100`:`opacity-0 group-hover:opacity-100`}`},P(nm,{icon:`x`,size:14})))}),o&&P(`button`,{onClick:u,className:`text-fg-secondary hover:bg-interactive-hover hover:text-fg-primary mb-1.5 ml-1 flex-shrink-0 cursor-pointer rounded p-1.5 transition-colors`,"aria-label":`Open File`,title:`Open File`},P(nm,{icon:`plus`,size:14})))):null}function R_(){var e=$a().provides,t=So().translate;return P(`div`,{className:`bg-bg-app flex h-full w-full items-center justify-center`},P(`div`,{className:`flex max-w-sm flex-col items-center text-center`},P(`div`,{className:`bg-accent-light mb-6 rounded-full p-5`},P(nm,{icon:`file`,size:48,className:`text-accent`})),P(`h2`,{className:`text-fg-primary mb-2 text-xl font-semibold`},t(`emptyState.title`)),P(`p`,{className:`text-fg-secondary mb-6 text-sm leading-relaxed`},t(`emptyState.description`),P(`br`,null),t(`emptyState.descriptionMulti`)),P(`button`,{onClick:function(){e?.openFileDialog()},className:`bg-accent hover:bg-accent-hover text-accent-fg inline-flex cursor-pointer items-center gap-2 rounded-md px-5 py-2.5 text-sm font-medium shadow-sm transition-all`},P(nm,{icon:`plus`,size:16}),t(`emptyState.openButton`)),P(`p`,{className:`text-fg-muted mt-4 text-xs`},t(`emptyState.supportedFormats`))))}function z_(e){var t=e.documentState,n=$a().provides,r=So().translate,i=S(I(``),2),a=i[0],s=i[1],c=S(I(!1),2),l=c[0],u=c[1];if(!t)return null;var d=t.name,f=t.errorCode,p=t.passwordProvided,m=f===K.Password,h=m&&!p,g=m&&p;if(!m)return P(`div`,{className:`bg-bg-app flex h-full items-center justify-center p-8`},P(`div`,{className:`bg-bg-surface border-border-default flex max-w-sm flex-col items-center rounded-xl border p-6 text-center shadow-lg`},P(`div`,{className:`bg-state-error-light mb-4 rounded-full p-4`},P(nm,{icon:`alertTriangle`,size:28,className:`text-state-error`})),P(`h3`,{className:`text-fg-primary text-lg font-semibold`},r(`documentError.title`)),P(`p`,{className:`text-fg-secondary mt-2 text-sm`},t.error||r(`documentError.unknown`)),f&&P(`p`,{className:`text-fg-muted mt-1 text-xs`},r(`documentError.errorCode`,{params:{code:String(f)}})),P(`button`,{onClick:function(){return n?.closeDocument(t.id)},className:`bg-accent hover:bg-accent-hover text-accent-fg mt-5 w-full cursor-pointer rounded-md px-4 py-2.5 text-sm font-medium transition-colors`},r(`documentError.close`))));var _=function(){var e=o(y().m(function e(){return y().w(function(e){for(;;)switch(e.n){case 0:if(n&&a.trim()){e.n=1;break}return e.a(2);case 1:u(!0),n.retryDocument(t.id,{password:a}).wait(function(){s(``),u(!1)},function(e){console.error(`Retry failed:`,e),u(!1)});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return P(`div`,{className:`bg-bg-app flex h-full items-center justify-center p-8`},P(`div`,{className:`bg-bg-surface border-border-default w-full max-w-sm rounded-xl border p-6 shadow-lg`},P(`div`,{className:`flex flex-col items-center text-center`},P(`div`,{className:`bg-accent-light mb-4 rounded-full p-4`},P(nm,{icon:`lock`,size:28,className:`text-accent`})),P(`h3`,{className:`text-fg-primary text-lg font-semibold`},r(`passwordPrompt.title`)),d&&P(`p`,{className:`text-fg-muted mt-1 text-sm`},d)),P(`p`,{className:`text-fg-secondary mt-4 text-center text-sm`},h&&r(`passwordPrompt.required`),g&&r(`passwordPrompt.incorrect`)),P(`div`,{className:`mt-5`},P(`label`,{className:`text-fg-primary mb-1.5 block text-sm font-medium`},r(`passwordPrompt.label`)),P(`input`,{type:`password`,value:a,onInput:function(e){return s(e.target.value)},onKeyDown:function(e){return e.key===`Enter`&&!l&&a.trim()&&_()},disabled:l,placeholder:r(`passwordPrompt.placeholder`),className:`bg-bg-input border-border-default focus:border-accent focus:ring-accent text-fg-primary placeholder:text-fg-muted block w-full rounded-md border px-3 py-2.5 text-sm focus:outline-none focus:ring-1 disabled:opacity-50`,autoFocus:!0})),g&&P(`div`,{className:`bg-state-error-light border-state-error mt-3 flex items-center gap-2 rounded-md border p-3`},P(nm,{icon:`alertTriangle`,size:16,className:`text-state-error flex-shrink-0`}),P(`p`,{className:`text-state-error text-sm`},r(`passwordPrompt.incorrectWarning`))),P(`div`,{className:`mt-6 flex gap-3`},P(`button`,{onClick:function(){return n?.closeDocument(t.id)},disabled:l,className:`border-border-default text-fg-secondary hover:bg-interactive-hover flex-1 cursor-pointer rounded-md border px-4 py-2.5 text-sm font-medium transition-colors disabled:opacity-50`},r(`passwordPrompt.cancel`)),P(`button`,{onClick:_,disabled:l||!a.trim(),className:`bg-accent hover:bg-accent-hover text-accent-fg flex-1 cursor-pointer rounded-md px-4 py-2.5 text-sm font-medium transition-colors disabled:cursor-not-allowed disabled:opacity-50`},r(l?`passwordPrompt.opening`:`passwordPrompt.open`)))))}function B_(e){var t=e.documentId,n=e.className,r=lo(`mode:view`,t),i=lo(`mode:annotate`,t),a=lo(`mode:shapes`,t),o=lo(`mode:redact`,t),s=lo(`tabs:overflow-menu`,t),c=z(function(){return[r,i,a,o].find(function(e){return e?.active})||r},[r,i,a,o]),l=B(function(e){e.preventDefault(),e.stopPropagation(),s&&!s.disabled&&s.execute()},[s]);if(!s||!s.visible)return null;var u=s.active;return P(`div`,{style:{maxWidth:`100px`,width:`100px`},className:n},P(im,{className:`bg-bg-surface col-start-1 row-start-1 !w-full appearance-none rounded-md py-1.5 pl-3 pr-2 text-[13px] ${u?`bg-interactive-selected ring-accent border-none shadow ring`:`border-border-default outline-border-default hover:bg-interactive-hover hover:ring-accent outline outline-1 -outline-offset-1 hover:ring`} flex flex-row items-center justify-between gap-2`,onClick:l,disabled:s.disabled,style:{height:34}},P(`span`,{className:`min-w-0 flex-1 truncate text-left ${u?`text-accent`:`text-fg-primary`}`},c?.label),P(nm,{icon:`chevronDown`,className:`h-4 w-4 ${u?`text-accent`:`text-fg-secondary`}`})))}var V_={documentManager:{},commands:{commands:{"zoom:in":{id:`zoom:in`,labelKey:`zoom.in`,icon:`zoomIn`,shortcuts:[`Ctrl+=`,`Meta+=`,`Ctrl+NumpadAdd`,`Meta+NumpadAdd`],categories:[`zoom`,`zoom-in`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).zoomIn()}},"zoom:out":{id:`zoom:out`,labelKey:`zoom.out`,icon:`zoomOut`,shortcuts:[`Ctrl+-`,`Meta+-`,`Ctrl+NumpadSubtract`,`Meta+NumpadSubtract`],categories:[`zoom`,`zoom-out`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).zoomOut()}},"zoom:fit-page":{id:`zoom:fit-page`,labelKey:`zoom.fitPage`,icon:`fitToPage`,shortcuts:[`Ctrl+0`,`Meta+0`],categories:[`zoom`,`zoom-fit-page`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).requestZoom(Co.FitPage)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.zoom)==null||(t=t.documents[r])==null?void 0:t.zoomLevel)===Co.FitPage}},"zoom:fit-width":{id:`zoom:fit-width`,labelKey:`zoom.fitWidth`,icon:`fitToWidth`,shortcuts:[`Ctrl+1`,`Meta+1`],categories:[`zoom`,`zoom-fit-width`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).requestZoom(Co.FitWidth)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.zoom)==null||(t=t.documents[r])==null?void 0:t.zoomLevel)===Co.FitWidth}},"zoom:marquee":{id:`zoom:marquee`,labelKey:`zoom.marquee`,icon:`zoomInArea`,shortcuts:[`Ctrl+M`,`Meta+M`],categories:[`zoom`,`zoom-marquee`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).toggleMarqueeZoom()},active:function(e){var t,n,r=e.state,i=e.documentId;return(t=(n=r.plugins.zoom)==null||(n=n.documents[i])==null?void 0:n.isMarqueeZoomActive)!=null&&t}},"zoom:25":{id:`zoom:25`,label:`25%`,categories:[`zoom`,`zoom-level`,`zoom-level-25`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).requestZoom(.25)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.zoom)==null||(t=t.documents[r])==null?void 0:t.zoomLevel)===.25}},"zoom:50":{id:`zoom:50`,label:`50%`,categories:[`zoom`,`zoom-level`,`zoom-level-50`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).requestZoom(.5)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.zoom)==null||(t=t.documents[r])==null?void 0:t.zoomLevel)===.5}},"zoom:100":{id:`zoom:100`,label:`100%`,categories:[`zoom`,`zoom-level`,`zoom-level-100`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).requestZoom(1)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.zoom)==null||(t=t.documents[r])==null?void 0:t.zoomLevel)===1}},"zoom:125":{id:`zoom:125`,label:`125%`,categories:[`zoom`,`zoom-level`,`zoom-level-125`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).requestZoom(1.25)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.zoom)==null||(t=t.documents[r])==null?void 0:t.zoomLevel)===1.25}},"zoom:150":{id:`zoom:150`,label:`150%`,categories:[`zoom`,`zoom-level`,`zoom-level-150`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).requestZoom(1.5)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.zoom)==null||(t=t.documents[r])==null?void 0:t.zoomLevel)===1.5}},"zoom:200":{id:`zoom:200`,label:`200%`,categories:[`zoom`,`zoom-level`,`zoom-level-200`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).requestZoom(2)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.zoom)==null||(t=t.documents[r])==null?void 0:t.zoomLevel)===2}},"zoom:400":{id:`zoom:400`,label:`400%`,categories:[`zoom`,`zoom-level`,`zoom-level-400`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).requestZoom(4)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.zoom)==null||(t=t.documents[r])==null?void 0:t.zoomLevel)===4}},"zoom:800":{id:`zoom:800`,label:`800%`,categories:[`zoom`,`zoom-level`,`zoom-level-800`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).requestZoom(8)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.zoom)==null||(t=t.documents[r])==null?void 0:t.zoomLevel)===8}},"zoom:1600":{id:`zoom:1600`,label:`1600%`,categories:[`zoom`,`zoom-level`,`zoom-level-1600`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`zoom`)?.provides();r&&r.forDocument(n).requestZoom(16)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.zoom)==null||(t=t.documents[r])==null?void 0:t.zoomLevel)===16}},"zoom:toggle-menu":{id:`zoom:toggle-menu`,labelKey:`zoom.menu`,icon:`chevronDown`,iconProps:{className:`h-3.5 w-3.5`},categories:[`zoom`,`zoom-menu`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`ui`)?.provides();r&&r.forDocument(n).toggleMenu(`zoom-menu`,`zoom:toggle-menu`,`zoom-menu-button`)},active:function(e){var t=e.state,n=e.documentId;return(t.plugins.ui?.documents[n])?.openMenus[`zoom-menu`]!==void 0}},"zoom:toggle-menu-mobile":{id:`zoom:toggle-menu-mobile`,labelKey:`zoom.menu`,icon:`zoomIn`,categories:[`zoom`,`zoom-menu`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`ui`)?.provides();r&&r.forDocument(n).toggleMenu(`zoom-menu`,`zoom:toggle-menu-mobile`,`zoom-menu-button`)},active:function(e){var t=e.state,n=e.documentId;return(t.plugins.ui?.documents[n])?.openMenus[`zoom-menu`]!==void 0}},"pan:toggle":{id:`pan:toggle`,labelKey:`pan.toggle`,icon:`hand`,shortcuts:[`h`],categories:[`tools`,`pan`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`pan`)?.provides();r&&r.forDocument(n).togglePan()},active:function(e){var t,n,r=e.state,i=e.documentId;return(t=(n=r.plugins.pan)==null||(n=n.documents[i])==null?void 0:n.isPanMode)!=null&&t}},"pointer:toggle":{id:`pointer:toggle`,labelKey:`pointer.toggle`,icon:`pointer`,shortcuts:[`p`],categories:[`tools`,`pointer`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`interaction-manager`)?.provides();r&&r.forDocument(n).activate(`pointerMode`)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins[`interaction-manager`])==null||(t=t.documents[r])==null?void 0:t.activeMode)===`pointerMode`}},"left-action-menu:overflow-menu":{id:`left-action-menu:overflow-menu`,labelKey:`menu.moreOptions`,icon:`dots`,categories:[`ui`,`ui-menu`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`ui`)?.provides();r&&r.toggleMenu(`left-action-menu`,`left-action-menu:overflow-menu`,`overflow-left-action-menu-button`,n)},active:function(e){var t=e.state,n=e.documentId;return(t.plugins.ui?.documents[n])?.openMenus[`left-action-menu`]!==void 0}},"capture:screenshot":{id:`capture:screenshot`,labelKey:`capture.screenshot`,icon:`screenshot`,shortcuts:[`Ctrl+Shift+S`,`Meta+Shift+S`],categories:[`tools`,`capture`,`capture-screenshot`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`capture`)?.provides();if(r){var i=r.forDocument(n);i.isMarqueeCaptureActive()?i.disableMarqueeCapture():i.enableMarqueeCapture()}},active:function(e){var t=e.state,n=e.documentId;return t.plugins[`interaction-manager`].documents[n]?.activeMode===`marqueeCapture`}},"document:menu":{id:`document:menu`,labelKey:`document.menu`,icon:`menu`,categories:[`document`,`document-menu`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(Ti);if(r&&r.provides){var i=r.provides();i&&i.forDocument(n).toggleMenu(`document-menu`,`document:menu`,`document-menu-button`)}},active:function(e){var t=e.state,n=e.documentId;return(t.plugins.ui?.documents[n])?.openMenus[`document-menu`]!==void 0}},"document:open":{id:`document:open`,labelKey:`document.open`,icon:`fileImport`,shortcuts:[`Ctrl+O`,`Meta+O`],categories:[`document`,`document-open`],action:function(e){(e.registry.getPlugin(`document-manager`)?.provides())?.openFileDialog()}},"document:close":{id:`document:close`,labelKey:`document.close`,icon:`x`,shortcuts:[`Ctrl+W`,`Meta+W`],categories:[`document`,`document-close`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`document-manager`)?.provides())?.closeDocument(n)}},"document:print":{id:`document:print`,labelKey:`document.print`,icon:`print`,shortcuts:[`Ctrl+P`,`Meta+P`],categories:[`document`,`document-print`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(Ti);if(r&&r.provides){var i=r.provides();i&&i.forDocument(n).openModal(`print-modal`)}}},"document:export":{id:`document:export`,labelKey:`document.export`,icon:`download`,categories:[`document`,`document-export`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`export`)?.provides())?.forDocument(n).download()}},"document:fullscreen":{id:`document:fullscreen`,labelKey:`document.fullscreen`,icon:`fullscreen`,shortcuts:[`F11`],categories:[`document`,`document-fullscreen`],action:function(e){var t=e.registry.getPlugin(`fullscreen`)?.provides();t&&(t.isFullscreen()?t.exitFullscreen():t.enableFullscreen())},active:function(e){var t;return(t=e.state.plugins.fullscreen?.isFullscreen)!=null&&t}},"panel:toggle-sidebar":{id:`panel:toggle-sidebar`,labelKey:`panel.sidebar`,icon:`sidebar`,categories:[`panel`,`panel-sidebar`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(Ti);if(r&&r.provides){var i=r.provides();i&&i.forDocument(n).toggleSidebar(`left`,`main`,`sidebar-panel`)}},active:function(e){var t=e.state,n=e.documentId;return ka(t.plugins,n,`left`,`main`,`sidebar-panel`)}},"panel:toggle-search":{id:`panel:toggle-search`,labelKey:`panel.search`,icon:`search`,shortcuts:[`Ctrl+F`,`Meta+F`],categories:[`panel`,`panel-search`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(Ti);if(r&&r.provides){var i=r.provides();i&&i.forDocument(n).toggleSidebar(`right`,`main`,`search-panel`)}},active:function(e){var t=e.state,n=e.documentId;return ka(t.plugins,n,`right`,`main`,`search-panel`)}},"panel:toggle-comment":{id:`panel:toggle-comment`,labelKey:`panel.comment`,icon:`comment`,categories:[`panel`,`panel-comment`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(Ti);if(r&&r.provides){var i=r.provides();i&&i.forDocument(n).toggleSidebar(`right`,`main`,`comment-panel`)}},active:function(e){var t=e.state,n=e.documentId;return ka(t.plugins,n,`right`,`main`,`comment-panel`)}},"panel:toggle-annotation-style":{id:`panel:toggle-annotation-style`,labelKey:`panel.annotationStyle`,icon:`palette`,categories:[`panel`,`panel-annotation-style`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(Ti);if(r&&r.provides){var i=r.provides();i&&i.forDocument(n).toggleSidebar(`left`,`main`,`annotation-panel`)}},active:function(e){var t=e.state,n=e.documentId;return ka(t.plugins,n,`left`,`main`,`annotation-panel`)}},"page:settings":{id:`page:settings`,labelKey:`page.settings`,icon:`viewSettings`,categories:[`page`,`page-settings`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(Ti);if(r&&r.provides){var i=r.provides();i&&i.forDocument(n).toggleMenu(`page-settings-menu`,`page:settings`,`page-settings-button`)}},active:function(e){var t=e.state,n=e.documentId;return(t.plugins.ui?.documents[n])?.openMenus[`page-settings-menu`]!==void 0}},"spread:none":{id:`spread:none`,labelKey:`page.single`,icon:`singlePage`,categories:[`page`,`spread`,`spread-none`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`spread`)?.provides())?.forDocument(n).setSpreadMode(pi.None)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.spread)==null||(t=t.documents[r])==null?void 0:t.spreadMode)===pi.None}},"spread:odd":{id:`spread:odd`,labelKey:`page.twoOdd`,icon:`doublePage`,categories:[`page`,`spread`,`spread-odd`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`spread`)?.provides())?.forDocument(n).setSpreadMode(pi.Odd)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.spread)==null||(t=t.documents[r])==null?void 0:t.spreadMode)===pi.Odd}},"spread:even":{id:`spread:even`,labelKey:`page.twoEven`,icon:`book2`,categories:[`page`,`spread`,`spread-even`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`spread`)?.provides())?.forDocument(n).setSpreadMode(pi.Even)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.spread)==null||(t=t.documents[r])==null?void 0:t.spreadMode)===pi.Even}},"rotate:clockwise":{id:`rotate:clockwise`,labelKey:`rotate.clockwise`,icon:`rotateClockwise`,shortcuts:[`Ctrl+]`,`Meta+]`],categories:[`page`,`rotate`,`rotate-clockwise`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`rotate`)?.provides())?.forDocument(n).rotateForward()}},"rotate:counter-clockwise":{id:`rotate:counter-clockwise`,labelKey:`rotate.counterClockwise`,icon:`rotateCounterClockwise`,shortcuts:[`Ctrl+[`,`Meta+[`],categories:[`page`,`rotate`,`rotate-counter-clockwise`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`rotate`)?.provides())?.forDocument(n).rotateBackward()}},"scroll:vertical":{id:`scroll:vertical`,labelKey:`page.vertical`,icon:`vertical`,categories:[`page`,`scroll`,`scroll-vertical`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`scroll`)?.provides())?.forDocument(n).setScrollStrategy(Xr.Vertical)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.scroll)==null||(t=t.documents[r])==null?void 0:t.strategy)===Xr.Vertical}},"scroll:horizontal":{id:`scroll:horizontal`,labelKey:`page.horizontal`,icon:`horizontal`,categories:[`page`,`scroll`,`scroll-horizontal`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`scroll`)?.provides())?.forDocument(n).setScrollStrategy(Xr.Horizontal)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.scroll)==null||(t=t.documents[r])==null?void 0:t.strategy)===Xr.Horizontal}},"scroll:next-page":{id:`scroll:next-page`,labelKey:`page.next`,icon:`chevronRight`,categories:[`page`,`navigation`,`navigation-next`],shortcuts:[`Ctrl+]`,`Meta+]`,`ArrowRight`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`scroll`)?.provides())?.forDocument(n).scrollToNextPage()},disabled:function(e){var t,n,r=e.state,i=e.documentId;return((t=r.plugins.scroll)==null||(t=t.documents[i])==null?void 0:t.currentPage)>=((n=r.plugins.scroll)==null||(n=n.documents[i])==null?void 0:n.totalPages)}},"scroll:previous-page":{id:`scroll:previous-page`,labelKey:`page.previous`,icon:`chevronLeft`,categories:[`page`,`navigation`,`navigation-previous`],shortcuts:[`Ctrl+[`,`Meta+[`,`ArrowLeft`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`scroll`)?.provides())?.forDocument(n).scrollToPreviousPage()},disabled:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.scroll)==null||(t=t.documents[r])==null?void 0:t.currentPage)<=1}},"mode:view":{id:`mode:view`,labelKey:`mode.view`,categories:[`mode`,`mode-view`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`ui`)?.provides(),i=t.getPlugin(`interaction-manager`)?.provides();if(r&&i){var a=i.forDocument(n);a&&(a.activate(`pointerMode`),r.forDocument(n).closeToolbarSlot(`top`,`secondary`))}},active:function(e){var t=e.state,n=e.documentId;return!Oa(t.plugins,n,`top`,`secondary`)}},"mode:annotate":{id:`mode:annotate`,labelKey:`mode.annotate`,categories:[`mode`,`mode-annotate`,`annotation`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`ui`)?.provides();r&&r.setActiveToolbar(`top`,`secondary`,`annotation-toolbar`,n)},active:function(e){var t=e.state,n=e.documentId;return Oa(t.plugins,n,`top`,`secondary`,`annotation-toolbar`)}},"mode:shapes":{id:`mode:shapes`,labelKey:`mode.shapes`,categories:[`mode`,`mode-shapes`,`annotation`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`ui`)?.provides();r&&r.setActiveToolbar(`top`,`secondary`,`shapes-toolbar`,n)},active:function(e){var t=e.state,n=e.documentId;return Oa(t.plugins,n,`top`,`secondary`,`shapes-toolbar`)}},"mode:redact":{id:`mode:redact`,labelKey:`mode.redact`,categories:[`mode`,`mode-redact`,`redaction`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`ui`)?.provides();r&&r.setActiveToolbar(`top`,`secondary`,`redaction-toolbar`,n)},active:function(e){var t=e.state,n=e.documentId;return Oa(t.plugins,n,`top`,`secondary`,`redaction-toolbar`)}},"tabs:overflow-menu":{id:`tabs:overflow-menu`,labelKey:`tabs.overflowMenu`,icon:`dots`,categories:[`ui`,`ui-menu`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`ui`)?.provides();r&&r.toggleMenu(`mode-tabs-overflow-menu`,`tabs:overflow-menu`,`overflow-tabs-button`,n)},active:function(e){var t,n=e.state,r=e.documentId;return((t=n.plugins.ui)==null||(t=t.documents[r])==null?void 0:t.openMenus[`mode-tabs-overflow-menu`])!==void 0}},"annotation:add-highlight":{id:`annotation:add-highlight`,labelKey:`annotation.highlight`,icon:`highlight`,iconProps:function(e){return{primaryColor:Cl(e.state.plugins.annotation,`highlight`)?.color}},categories:[`annotation`,`annotation-markup`,`annotation-highlight`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(X)?.provides(),i=t.getPlugin(ws)?.provides(),a=t.getPlugin(`ui`)?.provides();if(i&&r&&a){var o=r?.forDocument(n),s=i?.forDocument(n);if(o&&s){var c=r.getTool(`highlight`);if(c&&$l(c)){var l=c.defaults,u=s.getFormattedSelection(),f=s.getSelectedText();if(u.length>0){var p,m=d(u);try{var h=function(){var e=p.value;f.wait(function(t){var n=kn();o.createAnnotation(e.pageIndex,{id:n,created:new Date,flags:[`print`],type:U.HIGHLIGHT,blendMode:H.Multiply,color:l.color,opacity:l.opacity,pageIndex:e.pageIndex,rect:e.rect,segmentRects:e.segmentRects,custom:{text:t.join(`
`)}}),o.selectAnnotation(e.pageIndex,n)},jn)};for(m.s();!(p=m.n()).done;)h()}catch(e){m.e(e)}finally{m.f()}s.clear(),o.setActiveTool(`highlight`),a.setActiveToolbar(`top`,`secondary`,`annotation-toolbar`,n)}else o.getActiveTool()?.id===`highlight`?o.setActiveTool(null):o.setActiveTool(`highlight`)}}}},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`highlight`}},"annotation:add-underline":{id:`annotation:add-underline`,labelKey:`annotation.underline`,icon:`underline`,iconProps:function(e){return{primaryColor:Cl(e.state.plugins.annotation,`underline`)?.color}},categories:[`annotation`,`annotation-markup`,`annotation-underline`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(X)?.provides(),i=t.getPlugin(ws)?.provides(),a=t.getPlugin(`ui`)?.provides();if(i&&r&&a){var o=r?.forDocument(n),s=i?.forDocument(n);if(o&&s){var c=r.getTool(`underline`);if(c&&tu(c)){var l=c.defaults,u=s.getFormattedSelection(),f=s.getSelectedText();if(u.length>0){var p,m=d(u);try{var h=function(){var e=p.value;f.wait(function(t){var n=kn();o.createAnnotation(e.pageIndex,{id:n,created:new Date,flags:[`print`],type:U.UNDERLINE,color:l.color,opacity:l.opacity,pageIndex:e.pageIndex,rect:e.rect,segmentRects:e.segmentRects,custom:{text:t.join(`
`)}}),o.selectAnnotation(e.pageIndex,n)},jn)};for(m.s();!(p=m.n()).done;)h()}catch(e){m.e(e)}finally{m.f()}s.clear(),o.setActiveTool(`underline`),a.setActiveToolbar(`top`,`secondary`,`annotation-toolbar`,n)}else o.getActiveTool()?.id===`underline`?o.setActiveTool(null):o.setActiveTool(`underline`)}}}},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`underline`}},"annotation:add-strikeout":{id:`annotation:add-strikeout`,labelKey:`annotation.strikeout`,icon:`strikethrough`,iconProps:function(e){return{primaryColor:Cl(e.state.plugins.annotation,`strikeout`)?.color}},categories:[`annotation`,`annotation-markup`,`annotation-strikeout`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(X)?.provides(),i=t.getPlugin(ws)?.provides(),a=t.getPlugin(`ui`)?.provides();if(i&&r&&a){var o=r?.forDocument(n),s=i?.forDocument(n);if(o&&s){var c=r.getTool(`strikeout`);if(c&&nu(c)){var l=c.defaults,u=s.getFormattedSelection(),f=s.getSelectedText();if(u.length>0){var p,m=d(u);try{var h=function(){var e=p.value;f.wait(function(t){var n=kn();o.createAnnotation(e.pageIndex,{id:n,created:new Date,flags:[`print`],type:U.STRIKEOUT,color:l.color,opacity:l.opacity,pageIndex:e.pageIndex,rect:e.rect,segmentRects:e.segmentRects,custom:{text:t.join(`
`)}}),o.selectAnnotation(e.pageIndex,n)},jn)};for(m.s();!(p=m.n()).done;)h()}catch(e){m.e(e)}finally{m.f()}s.clear(),o.setActiveTool(`strikeout`),a.setActiveToolbar(`top`,`secondary`,`annotation-toolbar`,n)}else o.getActiveTool()?.id===`strikeout`?o.setActiveTool(null):o.setActiveTool(`strikeout`)}}}},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`strikeout`}},"annotation:add-squiggly":{id:`annotation:add-squiggly`,labelKey:`annotation.squiggly`,icon:`squiggly`,iconProps:function(e){return{primaryColor:Cl(e.state.plugins.annotation,`squiggly`)?.color}},categories:[`annotation`,`annotation-markup`,`annotation-squiggly`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(X)?.provides(),i=t.getPlugin(ws)?.provides(),a=t.getPlugin(`ui`)?.provides();if(i&&r&&a){var o=r?.forDocument(n),s=i?.forDocument(n);if(o&&s){var c=r.getTool(`squiggly`);if(c&&eu(c)){var l=c.defaults,u=s.getFormattedSelection(),f=s.getSelectedText();if(u.length>0){var p,m=d(u);try{var h=function(){var e=p.value;f.wait(function(t){var n=kn();o.createAnnotation(e.pageIndex,{id:n,created:new Date,flags:[`print`],type:U.SQUIGGLY,color:l.color,opacity:l.opacity,pageIndex:e.pageIndex,rect:e.rect,segmentRects:e.segmentRects,custom:{text:t.join(`
`)}}),o.selectAnnotation(e.pageIndex,n)},jn)};for(m.s();!(p=m.n()).done;)h()}catch(e){m.e(e)}finally{m.f()}s.clear(),o.setActiveTool(`squiggly`),a.setActiveToolbar(`top`,`secondary`,`annotation-toolbar`,n)}else o.getActiveTool()?.id===`squiggly`?o.setActiveTool(null):o.setActiveTool(`squiggly`)}}}},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`squiggly`}},"annotation:add-ink":{id:`annotation:add-ink`,labelKey:`annotation.ink`,icon:`pencilMarker`,iconProps:function(e){return{primaryColor:Cl(e.state.plugins.annotation,`ink`)?.color}},categories:[`annotation`,`annotation-ink`],action:function(e){var t=e.registry,n=e.documentId,r=(t.getPlugin(X)?.provides())?.forDocument(n);r&&(r.getActiveTool()?.id===`ink`?r.setActiveTool(null):r.setActiveTool(`ink`))},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`ink`}},"annotation:add-text":{id:`annotation:add-text`,labelKey:`annotation.text`,icon:`text`,iconProps:function(e){return{primaryColor:Cl(e.state.plugins.annotation,`freeText`)?.fontColor}},categories:[`annotation`,`annotation-text`],action:function(e){var t=e.registry,n=e.documentId,r=(t.getPlugin(X)?.provides())?.forDocument(n);r&&(r.getActiveTool()?.id===`freeText`?r.setActiveTool(null):r.setActiveTool(`freeText`))},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`freeText`}},"annotation:add-stamp":{id:`annotation:add-stamp`,labelKey:`annotation.stamp`,icon:`photo`,categories:[`annotation`,`annotation-stamp`],action:function(e){var t=e.registry,n=e.documentId,r=(t.getPlugin(X)?.provides())?.forDocument(n);r&&(r.getActiveTool()?.id===`stamp`?r.setActiveTool(null):r.setActiveTool(`stamp`))},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`stamp`}},"annotation:add-rectangle":{id:`annotation:add-rectangle`,labelKey:`annotation.rectangle`,icon:`square`,iconProps:function(e){var t=e.state;return{primaryColor:Cl(t.plugins.annotation,`square`)?.strokeColor,secondaryColor:Cl(t.plugins.annotation,`square`)?.color}},categories:[`annotation`,`annotation-shape`,`annotation-rectangle`],action:function(e){var t=e.registry,n=e.documentId,r=(t.getPlugin(X)?.provides())?.forDocument(n);r&&(r.getActiveTool()?.id===`square`?r.setActiveTool(null):r.setActiveTool(`square`))},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`square`}},"annotation:add-circle":{id:`annotation:add-circle`,labelKey:`annotation.circle`,icon:`circle`,iconProps:function(e){var t=e.state;return{primaryColor:Cl(t.plugins.annotation,`circle`)?.strokeColor,secondaryColor:Cl(t.plugins.annotation,`circle`)?.color}},categories:[`annotation`,`annotation-shape`,`annotation-circle`],action:function(e){var t=e.registry,n=e.documentId,r=(t.getPlugin(X)?.provides())?.forDocument(n);r&&(r.getActiveTool()?.id===`circle`?r.setActiveTool(null):r.setActiveTool(`circle`))},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`circle`}},"annotation:add-line":{id:`annotation:add-line`,labelKey:`annotation.line`,icon:`line`,iconProps:function(e){return{primaryColor:Cl(e.state.plugins.annotation,`line`)?.strokeColor}},categories:[`annotation`,`annotation-shape`,`annotation-line`],action:function(e){var t=e.registry,n=e.documentId,r=(t.getPlugin(X)?.provides())?.forDocument(n);r&&(r.getActiveTool()?.id===`line`?r.setActiveTool(null):r.setActiveTool(`line`))},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`line`}},"annotation:add-arrow":{id:`annotation:add-arrow`,labelKey:`annotation.arrow`,icon:`lineArrow`,iconProps:function(e){return{primaryColor:Cl(e.state.plugins.annotation,`line`)?.strokeColor}},categories:[`annotation`,`annotation-shape`,`annotation-arrow`],action:function(e){var t=e.registry,n=e.documentId,r=(t.getPlugin(X)?.provides())?.forDocument(n);r&&(r.getActiveTool()?.id===`lineArrow`?r.setActiveTool(null):r.setActiveTool(`lineArrow`))},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`lineArrow`}},"annotation:add-polygon":{id:`annotation:add-polygon`,labelKey:`annotation.polygon`,icon:`polygon`,iconProps:function(e){var t=e.state;return{primaryColor:Cl(t.plugins.annotation,`polygon`)?.strokeColor,secondaryColor:Cl(t.plugins.annotation,`polygon`)?.color}},categories:[`annotation`,`annotation-shape`,`annotation-polygon`],action:function(e){var t=e.registry,n=e.documentId,r=(t.getPlugin(X)?.provides())?.forDocument(n);r&&(r.getActiveTool()?.id===`polygon`?r.setActiveTool(null):r.setActiveTool(`polygon`))},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`polygon`}},"annotation:add-polyline":{id:`annotation:add-polyline`,labelKey:`annotation.polyline`,icon:`zigzag`,iconProps:function(e){return{primaryColor:Cl(e.state.plugins.annotation,`polyline`)?.strokeColor}},categories:[`annotation`,`annotation-shape`,`annotation-polyline`],action:function(e){var t=e.registry,n=e.documentId,r=(t.getPlugin(X)?.provides())?.forDocument(n);r&&(r.getActiveTool()?.id===`polyline`?r.setActiveTool(null):r.setActiveTool(`polyline`))},active:function(e){var t=e.state,n=e.documentId;return t.plugins[X]?.documents[n]?.activeToolId===`polyline`}},"annotation:delete-selected":{id:`annotation:delete-selected`,labelKey:`annotation.deleteSelected`,icon:`trash`,categories:[`annotation`,`annotation-delete`],action:function(e){var t=e.registry,n=e.documentId,r=(t.getPlugin(X)?.provides())?.forDocument(n);if(r){var i=r.getSelectedAnnotation();i&&r.deleteAnnotation(i.object.pageIndex,i.object.id)}}},"annotation:overflow-tools":{id:`annotation:overflow-tools`,labelKey:`annotation.moreTools`,icon:`dots`,categories:[`annotation`,`annotation-overflow`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`ui`)?.provides();if(r){var i=r.forDocument(n);i&&i.toggleMenu(`annotation-tools-menu`,`annotation:overflow-tools`,`overflow-annotation-tools`)}},active:function(e){var t=e.state,n=e.documentId;return(t.plugins.ui?.documents[n])?.openMenus[`annotation-tools-menu`]!==void 0}},"annotation:overflow-shapes":{id:`annotation:overflow-shapes`,labelKey:`annotation.moreTools`,icon:`dots`,categories:[`annotation`,`annotation-shape`,`annotation-overflow`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`ui`)?.provides();if(r){var i=r.forDocument(n);i&&i.toggleMenu(`shapes-tools-menu`,`annotation:overflow-shapes`,`overflow-shapes-tools`)}},active:function(e){var t=e.state,n=e.documentId;return(t.plugins.ui?.documents[n])?.openMenus[`shapes-tools-menu`]!==void 0}},"redaction:redact-area":{id:`redaction:redact-area`,labelKey:`redaction.area`,icon:`redactArea`,categories:[`redaction`,`redaction-area`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`redaction`)?.provides())?.forDocument(n).toggleMarqueeRedact()},active:function(e){var t=e.state,n=e.documentId;return t.plugins[yf]?.documents[n]?.activeType===$d.MarqueeRedact}},"redaction:redact-text":{id:`redaction:redact-text`,labelKey:`redaction.text`,icon:`redact`,categories:[`redaction`,`redaction-text`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`redaction`)?.provides(),i=t.getPlugin(ws)?.provides(),a=t.getPlugin(`ui`)?.provides();if(r&&i&&a){var o=r.forDocument(n);((i?.forDocument(n))?.getFormattedSelection()??[]).length>0?(o.queueCurrentSelectionAsPending(),a.setActiveToolbar(`top`,`secondary`,`redaction-toolbar`,n)):o.toggleRedactSelection()}},active:function(e){var t=e.state,n=e.documentId;return t.plugins[yf]?.documents[n]?.activeType===$d.RedactSelection}},"redaction:apply-all":{id:`redaction:apply-all`,labelKey:`redaction.applyAll`,icon:`check`,categories:[`redaction`,`redaction-apply`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`redaction`)?.provides())?.forDocument(n).commitAllPending()},disabled:function(e){var t=e.state,n=e.documentId;return t.plugins[yf]?.documents[n]?.pendingCount===0}},"redaction:clear-all":{id:`redaction:clear-all`,labelKey:`redaction.clearAll`,icon:`x`,categories:[`redaction`,`redaction-clear`],action:function(e){var t=e.registry,n=e.documentId;(t.getPlugin(`redaction`)?.provides())?.forDocument(n).clearPending()},disabled:function(e){var t=e.state,n=e.documentId;return t.plugins[yf]?.documents[n]?.pendingCount===0}},"redaction:delete-selected":{id:`redaction:delete-selected`,labelKey:`redaction.deleteSelected`,icon:`trash`,categories:[`redaction`,`redaction-delete`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`redaction`)?.provides(),i=r?.forDocument(n).getSelectedPending();i&&r?.forDocument(n).removePending(i.page,i.id)}},"redaction:commit-selected":{id:`redaction:commit-selected`,labelKey:`redaction.commitSelected`,icon:`check`,categories:[`redaction`,`redaction-commit`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`redaction`)?.provides(),i=r?.forDocument(n).getSelectedPending();i&&r?.forDocument(n).commitPending(i.page,i.id)}},"selection:copy":{id:`selection:copy`,labelKey:`selection.copy`,icon:`copy`,categories:[`selection`,`selection-copy`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(`selection`)?.provides().forDocument(n);r?.copyToClipboard(),r?.clear()}},"history:undo":{id:`history:undo`,labelKey:`history.undo`,icon:`arrowBackUp`,shortcuts:[`Ctrl+Z`,`Meta+Z`],categories:[`history`,`history-undo`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(Ud)?.provides();r&&r.forDocument(n).undo()},disabled:function(e){var t=e.state,n=e.documentId,r=t.plugins[Ud]?.documents[n];return!(r!=null&&r.global.canUndo)}},"history:redo":{id:`history:redo`,labelKey:`history.redo`,icon:`arrowForwardUp`,shortcuts:[`Ctrl+Y`,`Meta+Shift+Z`],categories:[`history`,`history-redo`],action:function(e){var t=e.registry,n=e.documentId,r=t.getPlugin(Ud)?.provides();r&&r.forDocument(n).redo()},disabled:function(e){var t=e.state,n=e.documentId,r=t.plugins[Ud]?.documents[n];return!(r!=null&&r.global.canRedo)}}}},i18n:{defaultLocale:`en`,locales:[{code:`en`,name:`English`,translations:{search:{placeholder:`Search`,caseSensitive:`Case sensitive`,wholeWord:`Whole word`,resultsFound:`{count} results found`,page:`Page {page}`},zoom:{in:`Zoom In`,out:`Zoom Out`,fitWidth:`Fit to Width`,fitPage:`Fit to Page`,marquee:`Marquee Zoom`,menu:`Zoom Menu`,level:`Zoom Level ({level}%)`},pan:{toggle:`Toggle Pan Mode`},pointer:{toggle:`Toggle Pointer Mode`},capture:{screenshot:`Screenshot`},document:{menu:`Document Menu`,open:`Open`,close:`Close`,print:`Print`,export:`Export`,fullscreen:`Fullscreen`,loading:`Loading document...`},emptyState:{title:`No Documents Open`,description:`Open a PDF document to get started.`,descriptionMulti:`You can view multiple documents using tabs.`,openButton:`Open Document`,supportedFormats:`Supported format: PDF`},passwordPrompt:{title:`Password Required`,required:`This document is password protected. Please enter the password to open it.`,incorrect:`The password you entered was incorrect. Please try again.`,incorrectWarning:`Incorrect password. Please check and try again.`,label:`Password`,placeholder:`Enter document password`,open:`Open`,opening:`Opening...`,cancel:`Cancel`,close:`Close`},documentError:{title:`Error loading document`,unknown:`An unknown error occurred`,errorCode:`Error Code: {code}`,close:`Close Document`},panel:{sidebar:`Sidebar`,search:`Search`,comment:`Comment`,thumbnails:`Thumbnails`,outline:`Outline`,annotationStyle:`Annotation Style`},menu:{viewControls:`View Controls`,zoomControls:`Zoom Controls`,moreOptions:`More Options`},outline:{title:`Outline`,loading:`Loading outline...`,noOutline:`No outline available`,noBookmarks:`This document doesn't contain bookmarks`},page:{settings:`Page Settings`,single:`Single Page`,twoOdd:`Two Page (Odd)`,twoEven:`Two Page (Even)`,vertical:`Vertical`,horizontal:`Horizontal`,spreadMode:`Spread Mode`,scrollLayout:`Scroll Layout`,rotation:`Page Rotation`,next:`Next Page`,previous:`Previous Page`},rotate:{clockwise:`Rotate Clockwise`,counterClockwise:`Rotate Counter-Clockwise`},selection:{copy:`Copy Selection`},mode:{view:`View`,annotate:`Annotate`,shapes:`Shapes`,redact:`Redact`},annotation:{text:`Text`,highlight:`Highlight`,strikeout:`Strikethrough`,underline:`Underline`,squiggly:`Squiggly`,rectangle:`Rectangle`,circle:`Circle`,line:`Line`,arrow:`Arrow`,polygon:`Polygon`,polyline:`Polyline`,ink:`Ink`,stamp:`Stamp`,freeText:`Free Text`,square:`Square`,styles:`{type} Styles`,defaults:`{type} Defaults`,color:`Color`,opacity:`Opacity`,blendMode:`Blend mode`,strokeWidth:`Stroke width`,strokeColor:`Stroke color`,borderStyle:`Border style`,fillColor:`Fill color`,fontSize:`Font size`,fontFamily:`Font`,textAlign:`Text alignment`,verticalAlign:`Vertical alignment`,lineEnding:`Line ending`,lineStart:`Line start`,lineEnd:`Line end`,font:`Font`,fontColor:`Font color`,backgroundColor:`Background color`,noStyles:`There are no styles for this annotation.`,noStylesStamp:`There are no styles for stamps.`,selectAnnotation:`Select an annotation to see styles`,deleteSelected:`Delete selected annotation`,moreTools:`More Tools`},redaction:{area:`Redact Area`,text:`Redact Text`,applyAll:`Apply All`,clearAll:`Clear All`},history:{undo:`Undo`,redo:`Redo`},comments:{page:`Page {page}`,commentCount:`{count} comment`,commentCountPlural:`{count} comments`,addComment:`Add comment...`,addReply:`Add reply...`,save:`Save`,cancel:`Cancel`,edit:`Edit`,delete:`Delete`,showMore:`more`,showLess:`less`,emptyState:`Add annotations to be able to comment on them.`},blendMode:{normal:`Normal`,multiply:`Multiply`,screen:`Screen`,overlay:`Overlay`,darken:`Darken`,lighten:`Lighten`,colorDodge:`Color Dodge`,colorBurn:`Color Burn`,hardLight:`Hard Light`,softLight:`Soft Light`,difference:`Difference`,exclusion:`Exclusion`,hue:`Hue`,saturation:`Saturation`,color:`Color`,luminosity:`Luminosity`}}},{code:`nl`,name:`Nederlands`,translations:{search:{placeholder:`Zoeken`,caseSensitive:`Hoofdlettergevoelig`,wholeWord:`Heel woord`,resultsFound:`{count} resultaten gevonden`,page:`Pagina {page}`},zoom:{in:`Inzoomen`,out:`Uitzoomen`,fitWidth:`Aanbreedte aanpassen`,fitPage:`Aan pagina aanpassen`,marquee:`Lijstzoom`,menu:`Zoommenu`,level:`Zoomniveau ({level}%)`},pan:{toggle:`Pan-modus wisselen`},pointer:{toggle:`Aanwijzermodus wisselen`},capture:{screenshot:`Schermafbeelding`},document:{menu:`Documentmenu`,open:`Openen`,close:`Sluiten`,print:`Afdrukken`,export:`Exporteren`,fullscreen:`Volledig scherm`,loading:`Document laden...`},emptyState:{title:`Geen documenten geopend`,description:`Open een PDF-document om te beginnen.`,descriptionMulti:`U kunt meerdere documenten bekijken met tabs.`,openButton:`Document openen`,supportedFormats:`Ondersteund formaat: PDF`},passwordPrompt:{title:`Wachtwoord vereist`,required:`Dit document is beveiligd met een wachtwoord. Voer het wachtwoord in om te openen.`,incorrect:`Het ingevoerde wachtwoord was onjuist. Probeer het opnieuw.`,incorrectWarning:`Onjuist wachtwoord. Controleer en probeer opnieuw.`,label:`Wachtwoord`,placeholder:`Voer documentwachtwoord in`,open:`Openen`,opening:`Openen...`,cancel:`Annuleren`,close:`Sluiten`},documentError:{title:`Fout bij laden van document`,unknown:`Er is een onbekende fout opgetreden`,errorCode:`Foutcode: {code}`,close:`Document sluiten`},panel:{sidebar:`Zijbalk`,search:`Zoeken`,comment:`Opmerking`,thumbnails:`Miniaturen`,outline:`Overzicht`,annotationStyle:`Annotatiestijl`},menu:{viewControls:`Weergave-instellingen`,zoomControls:`Zoom-instellingen`,moreOptions:`Meer opties`},outline:{title:`Overzicht`,loading:`Overzicht laden...`,noOutline:`Geen overzicht beschikbaar`,noBookmarks:`Dit document bevat geen bladwijzers`},page:{settings:`Pagina-instellingen`,single:`Enkele pagina`,twoOdd:`Twee pagina's (Oneven)`,twoEven:`Twee pagina's (Even)`,vertical:`Verticaal`,horizontal:`Horizontaal`,spreadMode:`Spreidingsmodus`,scrollLayout:`Scrollindeling`,rotation:`Paginarotatie`,next:`Volgende pagina`,previous:`Vorige pagina`},rotate:{clockwise:`Met de klok mee draaien`,counterClockwise:`Tegen de klok in draaien`},selection:{copy:`Selectie kopiren`},mode:{view:`Weergave`,annotate:`Annoteren`,shapes:`Vormen`,redact:`Redigeren`},annotation:{text:`Tekst`,highlight:`Markeren`,strikeout:`Doorhalen`,underline:`Onderstrepen`,squiggly:`Golflijn`,rectangle:`Rechthoek`,circle:`Cirkel`,line:`Lijn`,arrow:`Pijl`,polygon:`Veelhoek`,polyline:`Polylijn`,ink:`Inkt`,stamp:`Stempel`,freeText:`Vrije tekst`,square:`Vierkant`,styles:`{type} stijlen`,defaults:`{type} standaardwaarden`,color:`Kleur`,opacity:`Dekking`,blendMode:`Overvloeimodus`,strokeWidth:`Lijndikte`,strokeColor:`Lijnkleur`,borderStyle:`Randstijl`,fillColor:`Vulkleur`,fontSize:`Lettergrootte`,fontFamily:`Lettertype`,textAlign:`Tekstuitlijning`,verticalAlign:`Verticale uitlijning`,lineEnding:`Lijneinde`,lineStart:`Lijnbegin`,lineEnd:`Lijneinde`,font:`Lettertype`,fontColor:`Tekstkleur`,backgroundColor:`Achtergrondkleur`,noStyles:`Er zijn geen stijlen voor deze annotatie.`,noStylesStamp:`Er zijn geen stijlen voor stempels.`,selectAnnotation:`Selecteer een annotatie om stijlen te zien`,deleteSelected:`Geselecteerde annotatie verwijderen`,moreTools:`Meer gereedschappen`},redaction:{area:`Gebied redigeren`,text:`Tekst redigeren`,applyAll:`Alles toepassen`,clearAll:`Alles wissen`},history:{undo:`Ongedaan maken`,redo:`Opnieuw doen`},comments:{page:`Pagina {page}`,commentCount:`{count} opmerking`,commentCountPlural:`{count} opmerkingen`,addComment:`Opmerking toevoegen...`,addReply:`Antwoord toevoegen...`,save:`Opslaan`,cancel:`Annuleren`,edit:`Bewerken`,delete:`Verwijderen`,showMore:`meer`,showLess:`minder`,emptyState:`Voeg annotaties toe om erop te kunnen reageren.`},blendMode:{normal:`Normaal`,multiply:`Vermenigvuldigen`,screen:`Bleken`,overlay:`Bedekken`,darken:`Donkerder`,lighten:`Lichter`,colorDodge:`Kleur tegenhouden`,colorBurn:`Kleur doordrukken`,hardLight:`Hard licht`,softLight:`Zacht licht`,difference:`Verschil`,exclusion:`Uitsluiting`,hue:`Kleurtoon`,saturation:`Verzadiging`,color:`Kleur`,luminosity:`Helderheid`}}},{code:`de`,name:`Deutsch`,translations:{search:{placeholder:`Suchen`,caseSensitive:`Gro-/Kleinschreibung`,wholeWord:`Ganzes Wort`,resultsFound:`{count} Ergebnisse gefunden`,page:`Seite {page}`},zoom:{in:`Vergrern`,out:`Verkleinern`,fitWidth:`An Breite anpassen`,fitPage:`An Seite anpassen`,marquee:`Laufrahmen-Zoom`,menu:`Zoom-Men`,level:`Zoomstufe ({level}%)`},pan:{toggle:`Verschieben-Modus umschalten`},pointer:{toggle:`Zeiger-Modus umschalten`},capture:{screenshot:`Screenshot`},document:{menu:`Dokument-Men`,open:`ffnen`,close:`Schlieen`,print:`Drucken`,export:`Exportieren`,fullscreen:`Vollbild`,loading:`Dokument wird geladen...`},emptyState:{title:`Keine Dokumente geffnet`,description:`ffnen Sie ein PDF-Dokument, um zu beginnen.`,descriptionMulti:`Sie knnen mehrere Dokumente mit Tabs anzeigen.`,openButton:`Dokument ffnen`,supportedFormats:`Untersttztes Format: PDF`},passwordPrompt:{title:`Passwort erforderlich`,required:`Dieses Dokument ist passwortgeschtzt. Bitte geben Sie das Passwort ein.`,incorrect:`Das eingegebene Passwort war falsch. Bitte versuchen Sie es erneut.`,incorrectWarning:`Falsches Passwort. Bitte berprfen und erneut versuchen.`,label:`Passwort`,placeholder:`Dokumentpasswort eingeben`,open:`ffnen`,opening:`ffnen...`,cancel:`Abbrechen`,close:`Schlieen`},documentError:{title:`Fehler beim Laden des Dokuments`,unknown:`Ein unbekannter Fehler ist aufgetreten`,errorCode:`Fehlercode: {code}`,close:`Dokument schlieen`},panel:{sidebar:`Seitenleiste`,search:`Suchen`,comment:`Kommentar`,thumbnails:`Miniaturansichten`,outline:`Gliederung`,annotationStyle:`Anmerkungsstil`},menu:{viewControls:`Ansichtseinstellungen`,zoomControls:`Zoom-Einstellungen`,moreOptions:`Weitere Optionen`},outline:{title:`Gliederung`,loading:`Gliederung wird geladen...`,noOutline:`Keine Gliederung verfgbar`,noBookmarks:`Dieses Dokument enthlt keine Lesezeichen`},page:{settings:`Seiteneinstellungen`,single:`Einzelseite`,twoOdd:`Zwei Seiten (Ungerade)`,twoEven:`Zwei Seiten (Gerade)`,vertical:`Vertikal`,horizontal:`Horizontal`,spreadMode:`Doppelseiten-Modus`,scrollLayout:`Scroll-Layout`,rotation:`Seitendrehung`,next:`Nchste Seite`,previous:`Vorherige Seite`},rotate:{clockwise:`Im Uhrzeigersinn drehen`,counterClockwise:`Gegen den Uhrzeigersinn drehen`},selection:{copy:`Auswahl kopieren`},mode:{view:`Ansicht`,annotate:`Annotieren`,shapes:`Formen`,redact:`Schwrzen`},annotation:{text:`Text`,highlight:`Markieren`,strikeout:`Durchstreichen`,underline:`Unterstreichen`,squiggly:`Wellenlinie`,rectangle:`Rechteck`,circle:`Kreis`,line:`Linie`,arrow:`Pfeil`,polygon:`Polygon`,polyline:`Polylinie`,ink:`Freihand`,stamp:`Stempel`,freeText:`Freitext`,square:`Quadrat`,styles:`{type}-Stile`,defaults:`{type}-Standardwerte`,color:`Farbe`,opacity:`Deckkraft`,blendMode:`Mischmodus`,strokeWidth:`Strichstrke`,strokeColor:`Strichfarbe`,borderStyle:`Rahmenstil`,fillColor:`Fllfarbe`,fontSize:`Schriftgre`,fontFamily:`Schriftart`,textAlign:`Textausrichtung`,verticalAlign:`Vertikale Ausrichtung`,lineEnding:`Linienende`,lineStart:`Linienanfang`,lineEnd:`Linienende`,font:`Schriftart`,fontColor:`Schriftfarbe`,backgroundColor:`Hintergrundfarbe`,noStyles:`Fr diese Anmerkung gibt es keine Stile.`,noStylesStamp:`Fr Stempel gibt es keine Stile.`,selectAnnotation:`Whlen Sie eine Anmerkung aus, um Stile anzuzeigen`,deleteSelected:`Ausgewhlte Anmerkung lschen`,moreTools:`Weitere Werkzeuge`},redaction:{area:`Bereich schwrzen`,text:`Text schwrzen`,applyAll:`Alle anwenden`,clearAll:`Alle lschen`},history:{undo:`Rckgngig`,redo:`Wiederholen`},comments:{page:`Seite {page}`,commentCount:`{count} Kommentar`,commentCountPlural:`{count} Kommentare`,addComment:`Kommentar hinzufgen...`,addReply:`Antwort hinzufgen...`,save:`Speichern`,cancel:`Abbrechen`,edit:`Bearbeiten`,delete:`Lschen`,showMore:`mehr`,showLess:`weniger`,emptyState:`Fgen Sie Anmerkungen hinzu, um sie kommentieren zu knnen.`},blendMode:{normal:`Normal`,multiply:`Multiplizieren`,screen:`Negativ multiplizieren`,overlay:`Ineinanderkopieren`,darken:`Abdunkeln`,lighten:`Aufhellen`,colorDodge:`Farbig abwedeln`,colorBurn:`Farbig nachbelichten`,hardLight:`Hartes Licht`,softLight:`Weiches Licht`,difference:`Differenz`,exclusion:`Ausschluss`,hue:`Farbton`,saturation:`Sttigung`,color:`Farbe`,luminosity:`Luminanz`}}},{code:`fr`,name:`Franais`,translations:{search:{placeholder:`Rechercher`,caseSensitive:`Respecter la casse`,wholeWord:`Mot entier`,resultsFound:`{count} rsultats trouvs`,page:`Page {page}`},zoom:{in:`Zoom avant`,out:`Zoom arrire`,fitWidth:`Ajuster  la largeur`,fitPage:`Ajuster  la page`,marquee:`Zoom de slection`,menu:`Menu Zoom`,level:`Niveau de zoom ({level}%)`},pan:{toggle:`Basculer le mode dplacement`},pointer:{toggle:`Basculer le mode pointeur`},capture:{screenshot:`Capture d'cran`},document:{menu:`Menu Document`,open:`Ouvrir`,close:`Fermer`,print:`Imprimer`,export:`Exporter`,fullscreen:`Plein cran`,loading:`Chargement du document...`},emptyState:{title:`Aucun document ouvert`,description:`Ouvrez un document PDF pour commencer.`,descriptionMulti:`Vous pouvez afficher plusieurs documents avec des onglets.`,openButton:`Ouvrir un document`,supportedFormats:`Format pris en charge : PDF`},passwordPrompt:{title:`Mot de passe requis`,required:`Ce document est protg par mot de passe. Veuillez entrer le mot de passe.`,incorrect:`Le mot de passe saisi est incorrect. Veuillez ressayer.`,incorrectWarning:`Mot de passe incorrect. Veuillez vrifier et ressayer.`,label:`Mot de passe`,placeholder:`Entrer le mot de passe du document`,open:`Ouvrir`,opening:`Ouverture...`,cancel:`Annuler`,close:`Fermer`},documentError:{title:`Erreur lors du chargement du document`,unknown:`Une erreur inconnue est survenue`,errorCode:`Code erreur : {code}`,close:`Fermer le document`},panel:{sidebar:`Barre latrale`,search:`Rechercher`,comment:`Commentaire`,thumbnails:`Miniatures`,outline:`Plan`,annotationStyle:`Style d'annotation`},menu:{viewControls:`Contrles d'affichage`,zoomControls:`Contrles de zoom`,moreOptions:`Plus d'options`},outline:{title:`Plan`,loading:`Chargement du plan...`,noOutline:`Aucun plan disponible`,noBookmarks:`Ce document ne contient pas de signets`},page:{settings:`Paramtres de page`,single:`Page unique`,twoOdd:`Deux pages (Impair)`,twoEven:`Deux pages (Pair)`,vertical:`Vertical`,horizontal:`Horizontal`,spreadMode:`Mode double page`,scrollLayout:`Disposition de dfilement`,rotation:`Rotation de page`,next:`Page suivante`,previous:`Page prcdente`},rotate:{clockwise:`Tourner dans le sens horaire`,counterClockwise:`Tourner dans le sens antihoraire`},selection:{copy:`Copier la slection`},mode:{view:`Affichage`,annotate:`Annoter`,shapes:`Formes`,redact:`Caviarder`},annotation:{text:`Texte`,highlight:`Surligner`,strikeout:`Barrer`,underline:`Souligner`,squiggly:`Ondul`,rectangle:`Rectangle`,circle:`Cercle`,line:`Ligne`,arrow:`Flche`,polygon:`Polygone`,polyline:`Polyligne`,ink:`Encre`,stamp:`Tampon`,freeText:`Texte libre`,square:`Carr`,styles:`Styles de {type}`,defaults:`Valeurs par dfaut de {type}`,color:`Couleur`,opacity:`Opacit`,blendMode:`Mode de fusion`,strokeWidth:`paisseur du trait`,strokeColor:`Couleur du trait`,borderStyle:`Style de bordure`,fillColor:`Couleur de remplissage`,fontSize:`Taille de police`,fontFamily:`Police`,textAlign:`Alignement du texte`,verticalAlign:`Alignement vertical`,lineEnding:`Fin de ligne`,lineStart:`Dbut de ligne`,lineEnd:`Fin de ligne`,font:`Police`,fontColor:`Couleur du texte`,backgroundColor:`Couleur de fond`,noStyles:`Il n'y a pas de styles pour cette annotation.`,noStylesStamp:`Il n'y a pas de styles pour les tampons.`,selectAnnotation:`Slectionnez une annotation pour voir les styles`,deleteSelected:`Supprimer l'annotation slectionne`,moreTools:`Plus d'outils`},redaction:{area:`Caviarder la zone`,text:`Caviarder le texte`,applyAll:`Tout appliquer`,clearAll:`Tout effacer`},history:{undo:`Annuler`,redo:`Refaire`},comments:{page:`Page {page}`,commentCount:`{count} commentaire`,commentCountPlural:`{count} commentaires`,addComment:`Ajouter un commentaire...`,addReply:`Ajouter une rponse...`,save:`Enregistrer`,cancel:`Annuler`,edit:`Modifier`,delete:`Supprimer`,showMore:`plus`,showLess:`moins`,emptyState:`Ajoutez des annotations pour pouvoir les commenter.`},blendMode:{normal:`Normal`,multiply:`Produit`,screen:`Superposition`,overlay:`Incrustation`,darken:`Obscurcir`,lighten:`claircir`,colorDodge:`Densit couleur -`,colorBurn:`Densit couleur +`,hardLight:`Lumire crue`,softLight:`Lumire tamise`,difference:`Diffrence`,exclusion:`Exclusion`,hue:`Teinte`,saturation:`Saturation`,color:`Couleur`,luminosity:`Luminosit`}}},{code:`es`,name:`Espaol`,translations:{search:{placeholder:`Buscar`,caseSensitive:`Distinguir maysculas`,wholeWord:`Palabra completa`,resultsFound:`{count} resultados encontrados`,page:`Pgina {page}`},zoom:{in:`Acercar`,out:`Alejar`,fitWidth:`Ajustar al ancho`,fitPage:`Ajustar a la pgina`,marquee:`Zoom de seleccin`,menu:`Men de zoom`,level:`Nivel de zoom ({level}%)`},pan:{toggle:`Alternar modo desplazamiento`},pointer:{toggle:`Alternar modo puntero`},capture:{screenshot:`Captura de pantalla`},document:{menu:`Men del documento`,open:`Abrir`,close:`Cerrar`,print:`Imprimir`,export:`Exportar`,fullscreen:`Pantalla completa`,loading:`Cargando documento...`},emptyState:{title:`No hay documentos abiertos`,description:`Abra un documento PDF para comenzar.`,descriptionMulti:`Puede ver varios documentos usando pestaas.`,openButton:`Abrir documento`,supportedFormats:`Formato compatible: PDF`},passwordPrompt:{title:`Contrasea requerida`,required:`Este documento est protegido con contrasea. Por favor, ingrese la contrasea para abrirlo.`,incorrect:`La contrasea ingresada es incorrecta. Por favor, intntelo de nuevo.`,incorrectWarning:`Contrasea incorrecta. Por favor, verifique e intntelo de nuevo.`,label:`Contrasea`,placeholder:`Ingrese la contrasea del documento`,open:`Abrir`,opening:`Abriendo...`,cancel:`Cancelar`,close:`Cerrar`},documentError:{title:`Error al cargar el documento`,unknown:`Ha ocurrido un error desconocido`,errorCode:`Cdigo de error: {code}`,close:`Cerrar documento`},panel:{sidebar:`Barra lateral`,search:`Buscar`,comment:`Comentario`,thumbnails:`Miniaturas`,outline:`Esquema`,annotationStyle:`Estilo de anotacin`},menu:{viewControls:`Controles de vista`,zoomControls:`Controles de zoom`,moreOptions:`Ms opciones`},outline:{title:`Esquema`,loading:`Cargando esquema...`,noOutline:`No hay esquema disponible`,noBookmarks:`Este documento no contiene marcadores`},page:{settings:`Configuracin de pgina`,single:`Pgina nica`,twoOdd:`Dos pginas (Impar)`,twoEven:`Dos pginas (Par)`,vertical:`Vertical`,horizontal:`Horizontal`,spreadMode:`Modo de doble pgina`,scrollLayout:`Diseo de desplazamiento`,rotation:`Rotacin de pgina`,next:`Pgina siguiente`,previous:`Pgina anterior`},rotate:{clockwise:`Rotar en sentido horario`,counterClockwise:`Rotar en sentido antihorario`},selection:{copy:`Copiar seleccin`},mode:{view:`Ver`,annotate:`Anotar`,shapes:`Formas`,redact:`Redactar`},annotation:{text:`Texto`,highlight:`Resaltar`,strikeout:`Tachar`,underline:`Subrayar`,squiggly:`Ondulado`,rectangle:`Rectngulo`,circle:`Crculo`,line:`Lnea`,arrow:`Flecha`,polygon:`Polgono`,polyline:`Polilnea`,ink:`Tinta`,stamp:`Sello`,freeText:`Texto libre`,square:`Cuadrado`,styles:`Estilos de {type}`,defaults:`Valores predeterminados de {type}`,color:`Color`,opacity:`Opacidad`,blendMode:`Modo de fusin`,strokeWidth:`Grosor del trazo`,strokeColor:`Color del trazo`,borderStyle:`Estilo del borde`,fillColor:`Color de relleno`,fontSize:`Tamao de fuente`,fontFamily:`Fuente`,textAlign:`Alineacin del texto`,verticalAlign:`Alineacin vertical`,lineEnding:`Final de lnea`,lineStart:`Inicio de lnea`,lineEnd:`Final de lnea`,font:`Fuente`,fontColor:`Color de fuente`,backgroundColor:`Color de fondo`,noStyles:`No hay estilos para esta anotacin.`,noStylesStamp:`No hay estilos para los sellos.`,selectAnnotation:`Seleccione una anotacin para ver los estilos`,deleteSelected:`Eliminar anotacin seleccionada`,moreTools:`Ms herramientas`},redaction:{area:`Redactar rea`,text:`Redactar texto`,applyAll:`Aplicar todo`,clearAll:`Borrar todo`},history:{undo:`Deshacer`,redo:`Rehacer`},comments:{page:`Pgina {page}`,commentCount:`{count} comentario`,commentCountPlural:`{count} comentarios`,addComment:`Aadir comentario...`,addReply:`Aadir respuesta...`,save:`Guardar`,cancel:`Cancelar`,edit:`Editar`,delete:`Eliminar`,showMore:`ms`,showLess:`menos`,emptyState:`Aada anotaciones para poder comentarlas.`},blendMode:{normal:`Normal`,multiply:`Multiplicar`,screen:`Trama`,overlay:`Superponer`,darken:`Oscurecer`,lighten:`Aclarar`,colorDodge:`Sobreexponer color`,colorBurn:`Subexponer color`,hardLight:`Luz fuerte`,softLight:`Luz suave`,difference:`Diferencia`,exclusion:`Exclusin`,hue:`Tono`,saturation:`Saturacin`,color:`Color`,luminosity:`Luminosidad`}}}],paramResolvers:{"zoom.level":function(e){var t,n,r=e.state,i=e.documentId,a=i&&(t=(n=r.plugins[To])==null||(n=n.documents[i])==null?void 0:n.currentZoomLevel)!=null?t:1;return{level:Math.round(100*a)}}}},ui:{schema:{id:`pdf-viewer-ui`,version:`1.0.0`,toolbars:{"main-toolbar":{id:`main-toolbar`,position:{placement:`top`,slot:`main`,order:0},permanent:!0,responsive:{localeOverrides:{groups:[{id:`germanic-languages`,locales:[`de`,`nl`],breakpoints:{md:{replaceShow:[`view-mode`,`annotate-mode`,`zoom-toolbar`,`pan-button`,`pointer-button`,`divider-3`,`overflow-tabs-button`]}}}]},breakpoints:{xxxs:{maxWidth:400,hide:[`annotate-mode`,`view-mode`,`shapes-mode`,`redact-mode`,`zoom-toolbar`,`pan-button`,`pointer-button`,`divider-3`,`page-settings-button`,`zoom-menu-button`,`divider-2`,`overflow-tabs-button`],show:[`mode-select-button`]},xxs:{minWidth:400,show:[`page-settings-button`,`zoom-menu-button`,`divider-2`],hide:[`overflow-left-action-menu-button`]},xs:{minWidth:500,maxWidth:640,show:[`pan-button`,`pointer-button`,`divider-3`]},sm:{minWidth:640,maxWidth:768,hide:[`shapes-mode`,`redact-mode`,`zoom-toolbar`,`mode-select-button`],show:[`view-mode`,`annotate-mode`,`overflow-tabs-button`,`pan-button`,`pointer-button`,`divider-3`]},md:{minWidth:768,show:[`view-mode`,`annotate-mode`,`shapes-mode`,`zoom-toolbar`,`pan-button`,`pointer-button`,`divider-3`,`overflow-tabs-button`],hide:[`zoom-menu-button`,`mode-select-button`]},lg:{minWidth:1024,show:[`shapes-mode`,`redact-mode`],hide:[`overflow-tabs-button`]}}},items:[{type:`group`,id:`left-group`,alignment:`start`,gap:2,items:[{type:`command-button`,id:`document-menu-button`,commandId:`document:menu`,variant:`icon`,categories:[`document`,`document-menu`]},{type:`divider`,id:`divider-1`,orientation:`vertical`},{type:`command-button`,id:`sidebar-button`,commandId:`panel:toggle-sidebar`,variant:`icon`,categories:[`panel`,`panel-sidebar`]},{type:`command-button`,id:`overflow-left-action-menu-button`,commandId:`left-action-menu:overflow-menu`,variant:`icon`,categories:[`ui`,`ui-menu`]},{type:`command-button`,id:`page-settings-button`,commandId:`page:settings`,variant:`icon`,categories:[`page`,`page-settings`]}]},{type:`divider`,id:`divider-2`,orientation:`vertical`},{type:`group`,id:`center-group`,alignment:`center`,gap:2,items:[{type:`command-button`,id:`zoom-menu-button`,commandId:`zoom:toggle-menu-mobile`,variant:`icon`,categories:[`zoom`,`zoom-menu`]},{type:`custom`,id:`zoom-toolbar`,componentId:`zoom-toolbar`,categories:[`zoom`]},{type:`divider`,id:`divider-3`,orientation:`vertical`,visibilityDependsOn:{itemIds:[`zoom-toolbar`,`zoom-menu-button`]}},{type:`command-button`,id:`pan-button`,commandId:`pan:toggle`,variant:`icon`,categories:[`tools`,`pan`]},{type:`command-button`,id:`pointer-button`,commandId:`pointer:toggle`,variant:`icon`,categories:[`tools`,`pointer`]}]},{type:`spacer`,id:`spacer-1`,flex:!0},{type:`custom`,id:`mode-select-button`,componentId:`mode-select-button`,categories:[`mode`],visibilityDependsOn:{menuId:`mode-tabs-overflow-menu`}},{type:`tab-group`,id:`mode-tabs`,tabs:[{id:`view-mode`,commandId:`mode:view`,variant:`text`,categories:[`mode`,`mode-view`],visibilityDependsOn:{itemIds:[`annotate-mode`,`shapes-mode`,`redact-mode`]}},{id:`annotate-mode`,commandId:`mode:annotate`,variant:`text`,categories:[`mode`,`mode-annotate`,`annotation`]},{id:`shapes-mode`,commandId:`mode:shapes`,variant:`text`,categories:[`mode`,`mode-shapes`,`annotation`]},{id:`redact-mode`,commandId:`mode:redact`,variant:`text`,categories:[`mode`,`mode-redact`,`redaction`]},{id:`overflow-tabs-button`,commandId:`tabs:overflow-menu`,variant:`icon`,categories:[`ui`,`ui-menu`],visibilityDependsOn:{menuId:`mode-tabs-overflow-menu`}}]},{type:`spacer`,id:`spacer-2`,flex:!0},{type:`group`,id:`right-group`,alignment:`end`,gap:2,items:[{type:`command-button`,id:`search-button`,commandId:`panel:toggle-search`,variant:`icon`,categories:[`panel`,`panel-search`]},{type:`command-button`,id:`comment-button`,commandId:`panel:toggle-comment`,variant:`icon`,categories:[`panel`,`panel-comment`]}]}]},"annotation-toolbar":{id:`annotation-toolbar`,position:{placement:`top`,slot:`secondary`,order:0},responsive:{breakpoints:{sm:{maxWidth:640,hide:[`add-text`,`add-stamp`],show:[`overflow-annotation-tools`]},md:{minWidth:640,hide:[`overflow-annotation-tools`],show:[`add-text`,`add-stamp`]}}},permanent:!1,categories:[`annotation`],items:[{type:`spacer`,id:`spacer-3`,flex:!0},{type:`group`,id:`annotation-tools`,alignment:`start`,gap:2,items:[{type:`command-button`,id:`add-highlight`,commandId:`annotation:add-highlight`,variant:`icon`,categories:[`annotation`,`annotation-markup`,`annotation-highlight`]},{type:`command-button`,id:`add-strikeout`,commandId:`annotation:add-strikeout`,variant:`icon`,categories:[`annotation`,`annotation-markup`,`annotation-strikeout`]},{type:`command-button`,id:`add-underline`,commandId:`annotation:add-underline`,variant:`icon`,categories:[`annotation`,`annotation-markup`,`annotation-underline`]},{type:`command-button`,id:`add-ink`,commandId:`annotation:add-ink`,variant:`icon`,categories:[`annotation`,`annotation-ink`]},{type:`command-button`,id:`add-text`,commandId:`annotation:add-text`,variant:`icon`,categories:[`annotation`,`annotation-text`]},{type:`command-button`,id:`add-stamp`,commandId:`annotation:add-stamp`,variant:`icon`,categories:[`annotation`,`annotation-stamp`]},{type:`command-button`,id:`overflow-annotation-tools`,commandId:`annotation:overflow-tools`,variant:`icon`,categories:[`annotation`,`annotation-overflow`]},{type:`divider`,id:`annotation-tools-divider-1`,orientation:`vertical`},{type:`command-button`,id:`toggle-annotation-style`,commandId:`panel:toggle-annotation-style`,variant:`icon`,categories:[`panel`,`panel-annotation-style`]},{type:`divider`,id:`annotation-tools-divider-2`,orientation:`vertical`,visibilityDependsOn:{itemIds:[`toggle-annotation-style`]}},{type:`command-button`,id:`undo-button`,commandId:`history:undo`,variant:`icon`,categories:[`history`,`history-undo`]},{type:`command-button`,id:`redo-button`,commandId:`history:redo`,variant:`icon`,categories:[`history`,`history-redo`]}]},{type:`spacer`,id:`spacer-4`,flex:!0}]},"shapes-toolbar":{id:`shapes-toolbar`,position:{placement:`top`,slot:`secondary`,order:0},responsive:{breakpoints:{sm:{maxWidth:640,hide:[`add-polygon`,`add-polyline`],show:[`overflow-shapes-tools`]},md:{minWidth:640,hide:[`overflow-shapes-tools`],show:[`add-polygon`,`add-polyline`]}}},permanent:!1,categories:[`annotation`,`annotation-shape`],items:[{type:`spacer`,id:`spacer-5`,flex:!0},{type:`group`,id:`shapes-tools`,alignment:`start`,gap:2,items:[{type:`command-button`,id:`add-rectangle`,commandId:`annotation:add-rectangle`,variant:`icon`,categories:[`annotation`,`annotation-shape`,`annotation-rectangle`]},{type:`command-button`,id:`add-circle`,commandId:`annotation:add-circle`,variant:`icon`,categories:[`annotation`,`annotation-shape`,`annotation-circle`]},{type:`command-button`,id:`add-line`,commandId:`annotation:add-line`,variant:`icon`,categories:[`annotation`,`annotation-shape`,`annotation-line`]},{type:`command-button`,id:`add-arrow`,commandId:`annotation:add-arrow`,variant:`icon`,categories:[`annotation`,`annotation-shape`,`annotation-arrow`]},{type:`command-button`,id:`add-polygon`,commandId:`annotation:add-polygon`,variant:`icon`,categories:[`annotation`,`annotation-shape`,`annotation-polygon`]},{type:`command-button`,id:`add-polyline`,commandId:`annotation:add-polyline`,variant:`icon`,categories:[`annotation`,`annotation-shape`,`annotation-polyline`]},{type:`command-button`,id:`overflow-shapes-tools`,commandId:`annotation:overflow-shapes`,variant:`icon`,categories:[`annotation`,`annotation-shape`,`annotation-overflow`]},{type:`divider`,id:`shapes-tools-divider-1`,orientation:`vertical`},{type:`command-button`,id:`toggle-annotation-style`,commandId:`panel:toggle-annotation-style`,variant:`icon`,categories:[`panel`,`panel-annotation-style`]},{type:`divider`,id:`shapes-tools-divider-2`,orientation:`vertical`,visibilityDependsOn:{itemIds:[`toggle-annotation-style`]}},{type:`command-button`,id:`undo-button`,commandId:`history:undo`,variant:`icon`,categories:[`history`,`history-undo`]},{type:`command-button`,id:`redo-button`,commandId:`history:redo`,variant:`icon`,categories:[`history`,`history-redo`]}]},{type:`spacer`,id:`spacer-6`,flex:!0}]},"redaction-toolbar":{id:`redaction-toolbar`,position:{placement:`top`,slot:`secondary`,order:0},permanent:!1,categories:[`redaction`],items:[{type:`spacer`,id:`spacer-7`,flex:!0},{type:`group`,id:`redaction-tools`,alignment:`start`,gap:2,items:[{type:`command-button`,id:`redact-text`,commandId:`redaction:redact-text`,variant:`icon`,categories:[`redaction`,`redaction-text`]},{type:`command-button`,id:`redact-area`,commandId:`redaction:redact-area`,variant:`icon`,categories:[`redaction`,`redaction-area`]},{type:`divider`,id:`divider-5`,orientation:`vertical`},{type:`command-button`,id:`apply-redactions`,commandId:`redaction:apply-all`,variant:`icon`,categories:[`redaction`,`redaction-apply`]},{type:`command-button`,id:`clear-redactions`,commandId:`redaction:clear-all`,variant:`icon`,categories:[`redaction`,`redaction-clear`]}]},{type:`spacer`,id:`spacer-8`,flex:!0}]}},menus:{"left-action-menu":{id:`left-action-menu`,categories:[`ui`],items:[{type:`submenu`,id:`page-settings-submenu`,labelKey:`menu.viewControls`,label:`View Controls`,icon:`viewSettings`,menuId:`page-settings-menu`,categories:[`page`]},{type:`submenu`,id:`zoom-submenu`,labelKey:`menu.zoomControls`,label:`Zoom Controls`,icon:`zoomIn`,menuId:`zoom-menu`,categories:[`zoom`]},{type:`divider`,id:`divider-15`},{type:`command`,id:`pan-button-menu`,commandId:`pan:toggle`,categories:[`tools`,`pan`]},{type:`command`,id:`pointer-button-menu`,commandId:`pointer:toggle`,categories:[`tools`,`pointer`]}]},"mode-tabs-overflow-menu":{id:`mode-tabs-overflow-menu`,items:[{type:`command`,id:`mode:view`,commandId:`mode:view`,categories:[`mode`,`mode-view`]},{type:`command`,id:`mode:annotate`,commandId:`mode:annotate`,categories:[`mode`,`mode-annotate`,`annotation`]},{type:`command`,id:`mode:shapes`,commandId:`mode:shapes`,categories:[`mode`,`mode-shapes`,`annotation`]},{type:`command`,id:`mode:redact`,commandId:`mode:redact`,categories:[`mode`,`mode-redact`,`redaction`]}],responsive:{breakpoints:{xs:{maxWidth:640,show:[`mode:view`,`mode:annotate`,`mode:shapes`,`mode:redact`]},sm:{minWidth:640,maxWidth:768,hide:[`mode:view`,`mode:annotate`]},md:{minWidth:768,hide:[`mode:view`,`mode:annotate`,`mode:shapes`]}},localeOverrides:{groups:[{id:`germanic-languages`,locales:[`de`,`nl`],breakpoints:{md:{replaceHide:[`mode:view`,`mode:annotate`]}}}]}}},"zoom-levels-menu":{id:`zoom-levels-menu`,categories:[`zoom`,`zoom-level`],items:[{type:`command`,id:`zoom:25`,commandId:`zoom:25`,categories:[`zoom`,`zoom-level`,`zoom-level-25`]},{type:`command`,id:`zoom:50`,commandId:`zoom:50`,categories:[`zoom`,`zoom-level`,`zoom-level-50`]},{type:`command`,id:`zoom:100`,commandId:`zoom:100`,categories:[`zoom`,`zoom-level`,`zoom-level-100`]},{type:`command`,id:`zoom:125`,commandId:`zoom:125`,categories:[`zoom`,`zoom-level`,`zoom-level-125`]},{type:`command`,id:`zoom:150`,commandId:`zoom:150`,categories:[`zoom`,`zoom-level`,`zoom-level-150`]},{type:`command`,id:`zoom:200`,commandId:`zoom:200`,categories:[`zoom`,`zoom-level`,`zoom-level-200`]},{type:`command`,id:`zoom:400`,commandId:`zoom:400`,categories:[`zoom`,`zoom-level`,`zoom-level-400`]},{type:`command`,id:`zoom:800`,commandId:`zoom:800`,categories:[`zoom`,`zoom-level`,`zoom-level-800`]},{type:`command`,id:`zoom:1600`,commandId:`zoom:1600`,categories:[`zoom`,`zoom-level`,`zoom-level-1600`]}]},"zoom-menu":{id:`zoom-menu`,categories:[`zoom`],items:[{type:`submenu`,id:`zoom-levels-submenu`,labelKey:`zoom.level`,label:`Zoom Levels`,menuId:`zoom-levels-menu`,categories:[`zoom`,`zoom-level`]},{type:`divider`,id:`divider-zoom-in-out`},{type:`command`,id:`zoom:in`,commandId:`zoom:in`,categories:[`zoom`,`zoom-in`]},{type:`command`,id:`zoom:out`,commandId:`zoom:out`,categories:[`zoom`,`zoom-out`]},{type:`divider`,id:`divider-8`},{type:`command`,id:`zoom:fit-page`,commandId:`zoom:fit-page`,categories:[`zoom`,`zoom-fit-page`]},{type:`command`,id:`zoom:fit-width`,commandId:`zoom:fit-width`,categories:[`zoom`,`zoom-fit-width`]},{type:`divider`,id:`divider-9`},{type:`command`,id:`zoom:marquee`,commandId:`zoom:marquee`,categories:[`zoom`,`zoom-marquee`]}],responsive:{breakpoints:{xs:{maxWidth:640,show:[`zoom-levels-submenu`,`divider-zoom-in-out`]},md:{minWidth:768,hide:[`zoom-levels-submenu`,`divider-zoom-in-out`]}}}},"document-menu":{id:`document-menu`,categories:[`document`],items:[{type:`command`,id:`document:open`,commandId:`document:open`,categories:[`document`,`document-open`]},{type:`command`,id:`document:close`,commandId:`document:close`,categories:[`document`,`document-close`]},{type:`divider`,id:`divider-10`},{type:`command`,id:`document:print`,commandId:`document:print`,categories:[`document`,`document-print`]},{type:`command`,id:`document:export`,commandId:`document:export`,categories:[`document`,`document-export`]},{type:`divider`,id:`divider-11`,visibilityDependsOn:{itemIds:[`document:export`,`document:print`]}},{type:`command`,id:`document:fullscreen`,commandId:`document:fullscreen`,categories:[`document`,`document-fullscreen`]}]},"annotation-tools-menu":{id:`annotation-tools-menu`,categories:[`annotation`],items:[{type:`command`,id:`annotation:add-text`,commandId:`annotation:add-text`,categories:[`annotation`,`annotation-text`]},{type:`command`,id:`annotation:add-stamp`,commandId:`annotation:add-stamp`,categories:[`annotation`,`annotation-stamp`]}]},"shapes-tools-menu":{id:`shapes-tools-menu`,categories:[`annotation`,`annotation-shape`],items:[{type:`command`,id:`annotation:add-polygon`,commandId:`annotation:add-polygon`,categories:[`annotation`,`annotation-shape`,`annotation-polygon`]},{type:`command`,id:`annotation:add-polyline`,commandId:`annotation:add-polyline`,categories:[`annotation`,`annotation-shape`,`annotation-polyline`]}]},"page-settings-menu":{id:`page-settings-menu`,categories:[`page`],items:[{type:`section`,id:`spread-mode-section`,labelKey:`page.spreadMode`,label:`Spread Mode`,categories:[`page`,`spread`],items:[{type:`command`,id:`spread:none`,commandId:`spread:none`,categories:[`page`,`spread`,`spread-none`]},{type:`command`,id:`spread:odd`,commandId:`spread:odd`,categories:[`page`,`spread`,`spread-odd`]},{type:`command`,id:`spread:even`,commandId:`spread:even`,categories:[`page`,`spread`,`spread-even`]}]},{type:`divider`,id:`divider-13`},{type:`section`,id:`scroll-layout-section`,labelKey:`page.scrollLayout`,label:`Scroll Layout`,categories:[`page`,`scroll`],items:[{type:`command`,id:`scroll:vertical`,commandId:`scroll:vertical`,categories:[`page`,`scroll`,`scroll-vertical`]},{type:`command`,id:`scroll:horizontal`,commandId:`scroll:horizontal`,categories:[`page`,`scroll`,`scroll-horizontal`]}]},{type:`divider`,id:`divider-14`},{type:`section`,id:`page-rotation-section`,labelKey:`page.rotation`,label:`Page Rotation`,categories:[`page`,`rotate`],items:[{type:`command`,id:`rotate:clockwise`,commandId:`rotate:clockwise`,categories:[`page`,`rotate`,`rotate-clockwise`]},{type:`command`,id:`rotate:counter-clockwise`,commandId:`rotate:counter-clockwise`,categories:[`page`,`rotate`,`rotate-counter-clockwise`]}]},{type:`divider`,id:`divider-15`},{type:`command`,id:`document:fullscreen`,commandId:`document:fullscreen`,categories:[`document`,`document-fullscreen`]}]}},sidebars:{"sidebar-panel":{id:`sidebar-panel`,position:{placement:`left`,slot:`main`,order:0},content:{type:`tabs`,tabs:[{id:`thumbnails`,labelKey:`panel.thumbnails`,label:`Thumbnails`,icon:`squares`,componentId:`thumbnails-sidebar`},{id:`outline`,labelKey:`panel.outline`,label:`Outline`,icon:`listTree`,componentId:`outline-sidebar`}]},width:`250px`,collapsible:!0,defaultOpen:!1},"annotation-panel":{id:`annotation-panel`,position:{placement:`left`,slot:`main`,order:0},content:{type:`component`,componentId:`annotation-sidebar`},width:`250px`,collapsible:!0,defaultOpen:!1},"search-panel":{id:`search-panel`,position:{placement:`right`,slot:`main`,order:0},content:{type:`component`,componentId:`search-sidebar`},width:`250px`,collapsible:!0,defaultOpen:!1},"comment-panel":{id:`comment-panel`,position:{placement:`right`,slot:`main`,order:0},content:{type:`component`,componentId:`comment-sidebar`},width:`250px`,collapsible:!0,defaultOpen:!1}},modals:{"print-modal":{id:`print-modal`,content:{type:`component`,componentId:`print-modal`},maxWidth:`28rem`,closeOnClickOutside:!0,closeOnEscape:!0}},overlays:{"page-controls":{id:`page-controls`,position:{anchor:`bottom-center`,offset:{bottom:`1.5rem`}},content:{type:`component`,componentId:`page-controls`},defaultEnabled:!0}},selectionMenus:{annotation:{id:`annotation`,categories:[`annotation`],items:[{type:`command-button`,id:`delete-annotation`,commandId:`annotation:delete-selected`,variant:`icon`,categories:[`annotation`,`annotation-delete`]},{type:`command-button`,id:`toggle-annotation-style`,commandId:`panel:toggle-annotation-style`,variant:`icon`,categories:[`panel`,`panel-annotation-style`]},{type:`command-button`,id:`comment-button`,commandId:`panel:toggle-comment`,variant:`icon`,categories:[`panel`,`panel-comment`]}]},redaction:{id:`redaction`,categories:[`redaction`],items:[{type:`command-button`,id:`delete-redaction`,commandId:`redaction:delete-selected`,variant:`icon`,categories:[`redaction`,`redaction-delete`]},{type:`command-button`,id:`commit-redaction`,commandId:`redaction:commit-selected`,variant:`icon`,categories:[`redaction`,`redaction-commit`]}]},selection:{id:`selection`,visibilityDependsOn:{itemIds:[`copy-selection`,`add-highlight`,`add-strikeout`,`add-underline`,`add-squiggly`,`redact-text`]},items:[{type:`command-button`,id:`copy-selection`,commandId:`selection:copy`,variant:`icon`,categories:[`selection`,`selection-copy`]},{type:`command-button`,id:`add-highlight`,commandId:`annotation:add-highlight`,variant:`icon`,categories:[`annotation`,`annotation-markup`,`annotation-highlight`]},{type:`command-button`,id:`add-strikeout`,commandId:`annotation:add-strikeout`,variant:`icon`,categories:[`annotation`,`annotation-markup`,`annotation-strikeout`]},{type:`command-button`,id:`add-underline`,commandId:`annotation:add-underline`,variant:`icon`,categories:[`annotation`,`annotation-markup`,`annotation-underline`]},{type:`command-button`,id:`add-squiggly`,commandId:`annotation:add-squiggly`,variant:`icon`,categories:[`annotation`,`annotation-markup`,`annotation-squiggly`]},{type:`command-button`,id:`redact-text`,commandId:`redaction:redact-text`,variant:`icon`,categories:[`redaction`,`redaction-text`]}]}}}},viewport:{viewportGap:10},scroll:{defaultStrategy:Xr.Vertical},zoom:{defaultZoomLevel:Co.FitPage},spread:{defaultSpreadMode:pi.None},rotation:{defaultRotation:ot.Degree0},pan:{},render:{defaultImageType:`image/png`},tiling:{tileSize:768,overlapPx:2.5,extraRings:0},thumbnails:{width:150,gap:10,buffer:3,labelHeight:30},annotations:{},search:{},selection:{},bookmarks:{},attachments:{},capture:{scale:2,imageType:`image/png`},redaction:{drawBlackBoxes:!0},print:{},export:{defaultFileName:`document.pdf`},fullscreen:{},history:{},interactionManager:{}};function H_(e){var t=e.documentId,n=e.tabBarVisibility,r=n===void 0?`multiple`:n,i=function(e){let t=Wa(),{provides:n}=ja(),r=n?.getSchema(),i=Ma(e);return{renderToolbar:(a,o)=>{if(!r||!n||!i)return null;let s=`${a}-${o}`,c=i.activeToolbars[s];if(!c)return null;let l=r.toolbars[c.toolbarId];if(!l)return console.warn(`Toolbar "${c.toolbarId}" not found in schema`),null;let u=l.permanent?void 0:()=>{n.forDocument(e).closeToolbarSlot(a,o)};return V(t.toolbar,{schema:l,documentId:e,isOpen:c.isOpen,onClose:u},c.toolbarId)},renderSidebar:(a,o)=>{if(!r||!n||!i)return null;let s=`${a}-${o}`,c=i.activeSidebars[s];if(!c)return null;let l=r.sidebars?.[c.sidebarId];return l?V(t.sidebar,{schema:l,documentId:e,isOpen:c.isOpen,onClose:()=>{n.forDocument(e).closeSidebarSlot(a,o)}},c.sidebarId):(console.warn(`Sidebar "${c.sidebarId}" not found in schema`),null)},renderModal:()=>{if(!r||!n||!i?.activeModal)return null;let{modalId:a,isOpen:o}=i.activeModal,s=r.modals?.[a];if(!s)return console.warn(`Modal "${a}" not found in schema`),null;let c=t.modal;return c?V(c,{schema:s,documentId:e,isOpen:o,onClose:()=>{n.forDocument(e).closeModal()},onExited:()=>{n.forDocument(e).clearModal()}},a):(console.warn(`No modal renderer registered`),null)},getActiveToolbars:()=>i?Object.entries(i.activeToolbars).map(([e,t])=>{let[n,r]=e.split(`-`);return{placement:n,slot:r,toolbarId:t.toolbarId,isOpen:t.isOpen}}):[],getActiveSidebars:()=>i?Object.entries(i.activeSidebars).map(([e,t])=>{let[n,r]=e.split(`-`);return{placement:n,slot:r,sidebarId:t.sidebarId,isOpen:t.isOpen}}):[],renderOverlays:()=>{if(!r?.overlays||!n)return null;let i=t.overlay;if(!i)return null;let a=Object.values(r.overlays);return a.length===0?null:V(F,{children:a.map(t=>V(i,{schema:t,documentId:e},t.id))})}}}(t),a=i.renderToolbar,o=i.renderSidebar,s=i.renderModal,c=i.renderOverlays,l=So(t).translate,u=Ga(`selection`,t),d=Ga(`annotation`,t),f=Ga(`redaction`,t);return P(F,null,P(L_,{documentStates:(e=>{let t=wr();return z(()=>t?e?e.map(e=>t.documents[e]).filter(e=>e!=null):t.documentOrder.map(e=>t.documents[e]).filter(e=>e!=null):[],[t,e])})(),activeDocumentId:(()=>{let e=wr();return z(()=>{if(!e)return{activeDocumentId:null,activeDocument:null};let t=e.activeDocumentId;return{activeDocumentId:t,activeDocument:t?e.documents[t]??null:null}},[e])})().activeDocumentId,visibility:r}),a(`top`,`main`),a(`top`,`secondary`),P(`div`,{id:`document-content`,className:`bg-bg-surface flex flex-1 overflow-hidden`},o(`left`,`main`),P(`div`,{className:`flex-1 overflow-hidden`},P(Qa,{documentId:t},function(e){var n=e.documentState,r=e.isLoading,i=e.isError,a=e.isLoaded;return P(F,null,r&&P(`div`,{className:`flex h-full items-center justify-center`},P(Ng,{size:`lg`,text:l(`document.loading`)})),i&&P(z_,{documentState:n}),a&&P(`div`,{className:`relative h-full w-full`},P(Mu,{documentId:t},P(Yr,{className:`bg-bg-app`,documentId:t},P(zo,{documentId:t},P(fi,{documentId:t,renderPage:function(e){var n=e.pageIndex;return P(ts,{documentId:t,pageIndex:n,style:{backgroundColor:`#fff`}},P(Nu,{documentId:t,pageIndex:n},P(Go,{documentId:t,pageIndex:n,scale:.5,style:{pointerEvents:`none`}}),P(Cc,{documentId:t,pageIndex:n,style:{pointerEvents:`none`}}),P(Cs,{documentId:t,pageIndex:n}),P(Bo,{documentId:t,pageIndex:n}),P(Hd,{documentId:t,pageIndex:n}),P(oc,{documentId:t,pageIndex:n,selectionMenu:u}),P(Ef,{documentId:t,pageIndex:n,selectionMenu:f}),P(td,{documentId:t,pageIndex:n,selectionMenu:d}),P(Ig,null)))}})))),c()))})),o(`right`,`main`)),s())}var U_=new Dt([new wt,new Et]);function W_(e){var t,r=e.config,i=e.onRegistryReady,a=function(e){let{wasmUrl:t=Er,worker:r=!0,logger:i,encoderPoolSize:a}=e??{},[o,s]=I(null),[c,l]=I(!0),[u,d]=I(null),f=R(null);return L(()=>{let e=!1;return(async()=>{try{let{createPdfiumEngine:e}=r?await n(()=>import(`./worker-engine-bd76f3e1-D9X6k-bW.js`),__vite__mapDeps([0,1,2])):await n(()=>import(`./direct-engine-3d50b393-Dh3RUDMg.js`),__vite__mapDeps([3,1,2])),o=await e(t,{logger:i,encoderPoolSize:a});f.current=o,s(o),l(!1)}catch(t){e||(d(t),l(!1))}})(),()=>{var t,n;e=!0,(n=(t=f.current)?.closeAllDocuments)==null||n.call(t).wait(()=>{var e,t;(t=(e=f.current)?.destroy)==null||t.call(e),f.current=null},jn)}},[t,r,i]),{engine:o,isLoading:c,error:u}}(_(_({},r.wasmUrl&&{wasmUrl:r.wasmUrl}),{},{worker:r.worker,logger:r.log?U_:void 0})),s=a.engine,c=a.isLoading,l=z(function(){return{"thumbnails-sidebar":Dg,"annotation-sidebar":C_,"zoom-toolbar":Zg,"search-sidebar":jg,"outline-sidebar":Mg,"comment-sidebar":Xg,"print-modal":O_,"page-controls":k_,"mode-select-button":B_}},[]),u=z(function(){return{toolbar:Mh,sidebar:gg,modal:Eg,overlay:E_,menu:yg,selectionMenu:w_}},[]);return P(F,null,P(`style`,null,it),!s||c?P(`div`,{className:`flex h-full w-full items-center justify-center`},P(Ng,{size:`lg`,text:`Initializing PDF engine...`})):P(xr,{logger:r.log?U_:void 0,onInitialized:(t=o(y().m(function e(t){return y().w(function(e){for(;;)switch(e.n){case 0:i&&t&&i(t);case 1:return e.a(2)}},e)})),function(e){return t.apply(this,arguments)}),engine:s,plugins:[ar(eo,_(_(_({},V_.documentManager),r.src&&{initialDocuments:[{url:r.src}]}),r.documentManager)),ar(uo,_(_(_({},V_.commands),r.disabledCategories&&{disabledCategories:r.disabledCategories}),r.commands)),ar(xo,_(_({},V_.i18n),r.i18n)),ar(Aa,_(_(_({},V_.ui),r.disabledCategories&&{disabledCategories:r.disabledCategories}),r.ui)),ar(Gr,_(_({},V_.viewport),r.viewport)),ar(li,_(_({},V_.scroll),r.scroll)),ar(Fo,_(_({},V_.zoom),r.zoom)),ar(wi,_(_({},V_.spread),r.spread)),ar(es,_(_({},V_.rotation),r.rotation)),ar(jd,_(_({},V_.pan),r.pan)),ar(Wo,_(_({},V_.render),r.render)),ar(bc,_(_({},V_.tiling),r.tiling)),ar(Fc,_(_({},V_.thumbnails),r.thumbnails)),ar(ru,_(_({},V_.annotations),r.annotations)),ar(xs,_(_({},V_.search),r.search)),ar(sc,_(_({},V_.selection),r.selection)),ar(bd,_(_({},V_.bookmarks),r.bookmarks)),ar(Af,_(_({},V_.attachments),r.attachments)),ar(Vd,_(_({},V_.capture),r.capture)),ar(bf,_(_({},V_.redaction),r.redaction)),ar(sd,_(_({},V_.print),r.print)),ar(wd,_(_({},V_.export),r.export)),ar(hd,_(_({},V_.fullscreen),r.fullscreen)),ar(Qd,_(_({},V_.history),r.history)),ar(Tu,_(_({},V_.interactionManager),r.interactionManager))]},function(e){var t=e.pluginsReady,n=e.activeDocumentId;return P(F,null,t?P(F,null,n?P(Ja,{documentId:n,components:l,renderers:u,className:`relative flex h-full w-full select-none flex-col`},P(H_,{documentId:n,tabBarVisibility:r.tabBar})):P(R_,null)):P(`div`,{className:`flex h-full items-center justify-center`},P(Ng,{size:`lg`,text:`Initializing plugins...`})))}))}var G_=typeof HTMLElement<`u`?HTMLElement:u(function e(){c(this,e)}),K_=function(){function e(){var t;return c(this,e),f(t=s(this,e),`_resolveRegistry`,null),f(t,`themeStyleEl`,null),f(t,`systemPreferenceCleanup`,null),f(t,`handleRegistryReady`,function(e){t._resolveRegistry&&=(t._resolveRegistry(e),null)}),t.root=t.attachShadow({mode:`open`}),t._registryPromise=new Promise(function(e){t._resolveRegistry=e}),t}return m(e,G_),u(e,[{key:`connectedCallback`,value:function(){this._config||={src:this.getAttribute(`src`)||`/demo.pdf`,worker:this.getAttribute(`worker`)!==`false`,theme:this.parseThemeAttribute()},this.setupTheme(),this.renderViewer()}},{key:`disconnectedCallback`,value:function(){var e;(e=this.systemPreferenceCleanup)==null||e.call(this),this.systemPreferenceCleanup=null}},{key:`parseThemeAttribute`,value:function(){var e=this.getAttribute(`theme`);if(e)return[`light`,`dark`,`system`].includes(e)?{preference:e}:void 0}},{key:`config`,get:function(){return this._config},set:function(e){this._config=e,e.icons&&em(e.icons),this.isConnected&&(this.setupTheme(),this.renderViewer())}},{key:`registry`,get:function(){return this._registryPromise}},{key:`themePreference`,get:function(){var e;return((e=this._config)==null||(e=e.theme)==null?void 0:e.preference)||`system`}},{key:`activeColorScheme`,get:function(){return P_(this.themePreference)}},{key:`activeTheme`,get:function(){return this.resolveActiveTheme()}},{key:`resolveActiveTheme`,value:function(){var e,t,n=this._config?.theme,r=P_(n?.preference||`system`),i=r===`dark`?j_:A_,a=n?.[r];return t=i,(e=a)?N_(t,e):t}},{key:`setupTheme`,value:function(){var e,t,n=this;(e=this.systemPreferenceCleanup)==null||e.call(this),this.systemPreferenceCleanup=null,(((t=this._config)==null||(t=t.theme)==null?void 0:t.preference)||`system`)===`system`&&(this.systemPreferenceCleanup=function(e){if(typeof window>`u`)return function(){};var t=window.matchMedia(`(prefers-color-scheme: dark)`),n=function(t){return e(t.matches?`dark`:`light`)};return t.addEventListener(`change`,n),function(){return t.removeEventListener(`change`,n)}}(function(e){n.injectTheme(),n.dispatchEvent(new CustomEvent(`themechange`,{detail:{preference:`system`,colorScheme:e,theme:n.activeTheme},bubbles:!0}))})),this.injectTheme()}},{key:`injectTheme`,value:function(){var e=I_(this.resolveActiveTheme()),t=this.root.querySelector(`style[data-embedpdf-theme]`);t||((t=document.createElement(`style`)).setAttribute(`data-embedpdf-theme`,``),this.root.appendChild(t)),this.themeStyleEl=t,this.themeStyleEl.textContent=e,this.setAttribute(`data-color-scheme`,this.activeColorScheme)}},{key:`setTheme`,value:function(e){this._config&&(this._config.theme=typeof e==`string`?_(_({},this._config.theme),{},{preference:e}):_(_({},this._config.theme),e),this.setupTheme(),this.dispatchEvent(new CustomEvent(`themechange`,{detail:{preference:this.themePreference,colorScheme:this.activeColorScheme,theme:this.activeTheme},bubbles:!0})))}},{key:`registerIcon`,value:function(e,t){$p(e,t)}},{key:`registerIcons`,value:function(e){em(e)}},{key:`renderViewer`,value:function(){this._config&&(Me(P(W_,{config:this._config,onRegistryReady:this.handleRegistryReady}),this.root),this.injectTheme())}}])}(),q_=[`type`,`target`],J_=`2.0.0`;typeof customElements>`u`||customElements.get(`embedpdf-container`)||customElements.define(`embedpdf-container`,K_);var Y_={version:J_,init:function(e){if(e.type===`container`)return function(e){e.type,e.target;var t=v(e,q_),n=document.createElement(`embedpdf-container`);return n.config=t,e.target.appendChild(n),n}(e)}};export{Y_ as A,G as C,bt as D,Ft as E,It as F,Lt as I,On as L,Ct as M,En as N,Bt as O,An as P,Pt as R,an as S,kn as T,lt as _,Vt as a,pt as b,nn as c,Yt as d,U as f,K as g,W as h,en as i,tn as j,jt as k,$t as l,Kt as m,Ut as n,Gt as o,Ht as p,ot as r,Zt as s,Xt as t,on as u,rn as v,St as w,ft as x,q as y,Wt as z};