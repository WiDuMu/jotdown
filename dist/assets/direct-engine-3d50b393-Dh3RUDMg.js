import"./preload-helper-D015MH5X.js";import{C as e,D as t,E as n,F as r,I as i,L as a,M as o,O as s,R as c,S as l,T as u,_ as d,a as f,b as p,c as m,d as h,f as g,g as _,h as v,i as y,j as b,k as x,l as S,m as C,n as w,o as T,p as E,r as D,t as O,u as k,v as ee,w as te,x as ne,y as A,z as j}from"./embedpdf-a6523bfa-CXllhlcf.js";import{n as re,t as ie}from"./browser-awZxztMA-34e61bde-CDfG22U3.js";var ae,M=(ae=import.meta.url,async function(e={}){var t,n,r,i=e,a=new Promise((e,t)=>{n=e,r=t});`_EPDF_GetMetaKeyCount._EPDF_GetMetaKeyName._EPDF_GetMetaTrapped._EPDF_GetPageRotationByIndex._EPDF_HasMetaText._EPDF_PNG_EncodeRGBA._EPDF_RenderAnnotBitmap._EPDF_SetMetaText._EPDF_SetMetaTrapped._EPDFAction_CreateGoTo._EPDFAction_CreateGoToNamed._EPDFAction_CreateLaunch._EPDFAction_CreateRemoteGoToByName._EPDFAction_CreateRemoteGoToDest._EPDFAction_CreateURI._EPDFAnnot_ClearColor._EPDFAnnot_GenerateAppearance._EPDFAnnot_GenerateAppearanceWithBlend._EPDFAnnot_GetBlendMode._EPDFAnnot_GetBorderDashPattern._EPDFAnnot_GetBorderDashPatternCount._EPDFAnnot_GetBorderEffect._EPDFAnnot_GetBorderStyle._EPDFAnnot_GetColor._EPDFAnnot_GetDefaultAppearance._EPDFAnnot_GetIcon._EPDFAnnot_GetIntent._EPDFAnnot_GetLineEndings._EPDFAnnot_GetOpacity._EPDFAnnot_GetRectangleDifferences._EPDFAnnot_GetRichContent._EPDFAnnot_GetTextAlignment._EPDFAnnot_GetVerticalAlignment._EPDFAnnot_SetBorderDashPattern._EPDFAnnot_SetBorderStyle._EPDFAnnot_SetColor._EPDFAnnot_SetDefaultAppearance._EPDFAnnot_SetIcon._EPDFAnnot_SetIntent._EPDFAnnot_SetLine._EPDFAnnot_SetLineEndings._EPDFAnnot_SetLinkedAnnot._EPDFAnnot_SetOpacity._EPDFAnnot_SetTextAlignment._EPDFAnnot_SetVerticalAlignment._EPDFAnnot_SetVertices._EPDFAnnot_UpdateAppearanceToRect._EPDFAttachment_GetDescription._EPDFAttachment_GetIntegerValue._EPDFAttachment_SetDescription._EPDFAttachment_SetSubtype._EPDFBookmark_AppendChild._EPDFBookmark_Clear._EPDFBookmark_ClearTarget._EPDFBookmark_Create._EPDFBookmark_Delete._EPDFBookmark_InsertAfter._EPDFBookmark_SetAction._EPDFBookmark_SetDest._EPDFBookmark_SetTitle._EPDFCatalog_GetLanguage._EPDFDest_CreateRemoteView._EPDFDest_CreateRemoteXYZ._EPDFDest_CreateView._EPDFDest_CreateXYZ._EPDFNamedDest_Remove._EPDFNamedDest_SetDest._EPDFPage_CreateAnnot._EPDFPage_GetAnnotByName._EPDFPage_GetAnnotCountRaw._EPDFPage_GetAnnotRaw._EPDFPage_RemoveAnnotByName._EPDFPage_RemoveAnnotRaw._EPDFText_RedactInQuads._EPDFText_RedactInRect._FORM_CanRedo._FORM_CanUndo._FORM_DoDocumentAAction._FORM_DoDocumentJSAction._FORM_DoDocumentOpenAction._FORM_DoPageAAction._FORM_ForceToKillFocus._FORM_GetFocusedAnnot._FORM_GetFocusedText._FORM_GetSelectedText._FORM_IsIndexSelected._FORM_OnAfterLoadPage._FORM_OnBeforeClosePage._FORM_OnChar._FORM_OnFocus._FORM_OnKeyDown._FORM_OnKeyUp._FORM_OnLButtonDoubleClick._FORM_OnLButtonDown._FORM_OnLButtonUp._FORM_OnMouseMove._FORM_OnMouseWheel._FORM_OnRButtonDown._FORM_OnRButtonUp._FORM_Redo._FORM_ReplaceAndKeepSelection._FORM_ReplaceSelection._FORM_SelectAllText._FORM_SetFocusedAnnot._FORM_SetIndexSelected._FORM_Undo._FPDF_AddInstalledFont._FPDF_CloseDocument._FPDF_ClosePage._FPDF_CloseXObject._FPDF_CopyViewerPreferences._FPDF_CountNamedDests._FPDF_CreateClipPath._FPDF_CreateNewDocument._FPDF_DestroyClipPath._FPDF_DestroyLibrary._FPDF_DeviceToPage._FPDF_DocumentHasValidCrossReferenceTable._FPDF_FFLDraw._FPDF_FreeDefaultSystemFontInfo._FPDF_GetDefaultSystemFontInfo._FPDF_GetDefaultTTFMap._FPDF_GetDefaultTTFMapCount._FPDF_GetDefaultTTFMapEntry._FPDF_GetDocPermissions._FPDF_GetDocUserPermissions._FPDF_GetFileIdentifier._FPDF_GetFileVersion._FPDF_GetFormType._FPDF_GetLastError._FPDF_GetMetaText._FPDF_GetNamedDest._FPDF_GetNamedDestByName._FPDF_GetPageAAction._FPDF_GetPageBoundingBox._FPDF_GetPageCount._FPDF_GetPageHeight._FPDF_GetPageHeightF._FPDF_GetPageLabel._FPDF_GetPageSizeByIndex._FPDF_GetPageSizeByIndexF._FPDF_GetPageWidth._FPDF_GetPageWidthF._FPDF_GetSecurityHandlerRevision._FPDF_GetSignatureCount._FPDF_GetSignatureObject._FPDF_GetTrailerEnds._FPDF_GetXFAPacketContent._FPDF_GetXFAPacketCount._FPDF_GetXFAPacketName._FPDF_ImportNPagesToOne._FPDF_ImportPages._FPDF_ImportPagesByIndex._FPDF_InitLibrary._FPDF_InitLibraryWithConfig._FPDF_LoadCustomDocument._FPDF_LoadDocument._FPDF_LoadMemDocument._FPDF_LoadMemDocument64._FPDF_LoadPage._FPDF_LoadXFA._FPDF_MovePages._FPDF_NewFormObjectFromXObject._FPDF_NewXObjectFromPage._FPDF_PageToDevice._FPDF_RemoveFormFieldHighlight._FPDF_RenderPage_Close._FPDF_RenderPage_Continue._FPDF_RenderPageBitmap._FPDF_RenderPageBitmap_Start._FPDF_RenderPageBitmapWithColorScheme_Start._FPDF_RenderPageBitmapWithMatrix._FPDF_SaveAsCopy._FPDF_SaveWithVersion._FPDF_SetFormFieldHighlightAlpha._FPDF_SetFormFieldHighlightColor._FPDF_SetSandBoxPolicy._FPDF_SetSystemFontInfo._FPDF_StructElement_Attr_CountChildren._FPDF_StructElement_Attr_GetBlobValue._FPDF_StructElement_Attr_GetBooleanValue._FPDF_StructElement_Attr_GetChildAtIndex._FPDF_StructElement_Attr_GetCount._FPDF_StructElement_Attr_GetName._FPDF_StructElement_Attr_GetNumberValue._FPDF_StructElement_Attr_GetStringValue._FPDF_StructElement_Attr_GetType._FPDF_StructElement_Attr_GetValue._FPDF_StructElement_CountChildren._FPDF_StructElement_GetActualText._FPDF_StructElement_GetAltText._FPDF_StructElement_GetAttributeAtIndex._FPDF_StructElement_GetAttributeCount._FPDF_StructElement_GetChildAtIndex._FPDF_StructElement_GetChildMarkedContentID._FPDF_StructElement_GetID._FPDF_StructElement_GetLang._FPDF_StructElement_GetMarkedContentID._FPDF_StructElement_GetMarkedContentIdAtIndex._FPDF_StructElement_GetMarkedContentIdCount._FPDF_StructElement_GetObjType._FPDF_StructElement_GetParent._FPDF_StructElement_GetStringAttribute._FPDF_StructElement_GetTitle._FPDF_StructElement_GetType._FPDF_StructTree_Close._FPDF_StructTree_CountChildren._FPDF_StructTree_GetChildAtIndex._FPDF_StructTree_GetForPage._FPDF_VIEWERREF_GetDuplex._FPDF_VIEWERREF_GetName._FPDF_VIEWERREF_GetNumCopies._FPDF_VIEWERREF_GetPrintPageRange._FPDF_VIEWERREF_GetPrintPageRangeCount._FPDF_VIEWERREF_GetPrintPageRangeElement._FPDF_VIEWERREF_GetPrintScaling._FPDFAction_GetDest._FPDFAction_GetFilePath._FPDFAction_GetType._FPDFAction_GetURIPath._FPDFAnnot_AddFileAttachment._FPDFAnnot_AddInkStroke._FPDFAnnot_AppendAttachmentPoints._FPDFAnnot_AppendObject._FPDFAnnot_CountAttachmentPoints._FPDFAnnot_GetAP._FPDFAnnot_GetAttachmentPoints._FPDFAnnot_GetBorder._FPDFAnnot_GetColor._FPDFAnnot_GetFileAttachment._FPDFAnnot_GetFlags._FPDFAnnot_GetFocusableSubtypes._FPDFAnnot_GetFocusableSubtypesCount._FPDFAnnot_GetFontColor._FPDFAnnot_GetFontSize._FPDFAnnot_GetFormAdditionalActionJavaScript._FPDFAnnot_GetFormControlCount._FPDFAnnot_GetFormControlIndex._FPDFAnnot_GetFormFieldAlternateName._FPDFAnnot_GetFormFieldAtPoint._FPDFAnnot_GetFormFieldExportValue._FPDFAnnot_GetFormFieldFlags._FPDFAnnot_GetFormFieldName._FPDFAnnot_GetFormFieldType._FPDFAnnot_GetFormFieldValue._FPDFAnnot_GetInkListCount._FPDFAnnot_GetInkListPath._FPDFAnnot_GetLine._FPDFAnnot_GetLink._FPDFAnnot_GetLinkedAnnot._FPDFAnnot_GetNumberValue._FPDFAnnot_GetObject._FPDFAnnot_GetObjectCount._FPDFAnnot_GetOptionCount._FPDFAnnot_GetOptionLabel._FPDFAnnot_GetRect._FPDFAnnot_GetStringValue._FPDFAnnot_GetSubtype._FPDFAnnot_GetValueType._FPDFAnnot_GetVertices._FPDFAnnot_HasAttachmentPoints._FPDFAnnot_HasKey._FPDFAnnot_IsChecked._FPDFAnnot_IsObjectSupportedSubtype._FPDFAnnot_IsOptionSelected._FPDFAnnot_IsSupportedSubtype._FPDFAnnot_RemoveInkList._FPDFAnnot_RemoveObject._FPDFAnnot_SetAP._FPDFAnnot_SetAttachmentPoints._FPDFAnnot_SetBorder._FPDFAnnot_SetColor._FPDFAnnot_SetFlags._FPDFAnnot_SetFocusableSubtypes._FPDFAnnot_SetFontColor._FPDFAnnot_SetFormFieldFlags._FPDFAnnot_SetRect._FPDFAnnot_SetStringValue._FPDFAnnot_SetURI._FPDFAnnot_UpdateObject._FPDFAttachment_GetFile._FPDFAttachment_GetName._FPDFAttachment_GetStringValue._FPDFAttachment_GetSubtype._FPDFAttachment_GetValueType._FPDFAttachment_HasKey._FPDFAttachment_SetFile._FPDFAttachment_SetStringValue._FPDFAvail_Create._FPDFAvail_Destroy._FPDFAvail_GetDocument._FPDFAvail_GetFirstPageNum._FPDFAvail_IsDocAvail._FPDFAvail_IsFormAvail._FPDFAvail_IsLinearized._FPDFAvail_IsPageAvail._FPDFBitmap_Create._FPDFBitmap_CreateEx._FPDFBitmap_Destroy._FPDFBitmap_FillRect._FPDFBitmap_GetBuffer._FPDFBitmap_GetFormat._FPDFBitmap_GetHeight._FPDFBitmap_GetStride._FPDFBitmap_GetWidth._FPDFBookmark_Find._FPDFBookmark_GetAction._FPDFBookmark_GetCount._FPDFBookmark_GetDest._FPDFBookmark_GetFirstChild._FPDFBookmark_GetNextSibling._FPDFBookmark_GetTitle._FPDFCatalog_IsTagged._FPDFCatalog_SetLanguage._FPDFClipPath_CountPaths._FPDFClipPath_CountPathSegments._FPDFClipPath_GetPathSegment._FPDFDest_GetDestPageIndex._FPDFDest_GetLocationInPage._FPDFDest_GetView._FPDFDoc_AddAttachment._FPDFDoc_CloseJavaScriptAction._FPDFDoc_DeleteAttachment._FPDFDOC_ExitFormFillEnvironment._FPDFDoc_GetAttachment._FPDFDoc_GetAttachmentCount._FPDFDoc_GetJavaScriptAction._FPDFDoc_GetJavaScriptActionCount._FPDFDoc_GetPageMode._FPDFDOC_InitFormFillEnvironment._FPDFFont_Close._FPDFFont_GetAscent._FPDFFont_GetBaseFontName._FPDFFont_GetDescent._FPDFFont_GetFamilyName._FPDFFont_GetFlags._FPDFFont_GetFontData._FPDFFont_GetGlyphPath._FPDFFont_GetGlyphWidth._FPDFFont_GetIsEmbedded._FPDFFont_GetItalicAngle._FPDFFont_GetWeight._FPDFFormObj_CountObjects._FPDFFormObj_GetObject._FPDFFormObj_RemoveObject._FPDFGlyphPath_CountGlyphSegments._FPDFGlyphPath_GetGlyphPathSegment._FPDFImageObj_GetBitmap._FPDFImageObj_GetIccProfileDataDecoded._FPDFImageObj_GetImageDataDecoded._FPDFImageObj_GetImageDataRaw._FPDFImageObj_GetImageFilter._FPDFImageObj_GetImageFilterCount._FPDFImageObj_GetImageMetadata._FPDFImageObj_GetImagePixelSize._FPDFImageObj_GetRenderedBitmap._FPDFImageObj_LoadJpegFile._FPDFImageObj_LoadJpegFileInline._FPDFImageObj_SetBitmap._FPDFImageObj_SetMatrix._FPDFJavaScriptAction_GetName._FPDFJavaScriptAction_GetScript._FPDFLink_CloseWebLinks._FPDFLink_CountQuadPoints._FPDFLink_CountRects._FPDFLink_CountWebLinks._FPDFLink_Enumerate._FPDFLink_GetAction._FPDFLink_GetAnnot._FPDFLink_GetAnnotRect._FPDFLink_GetDest._FPDFLink_GetLinkAtPoint._FPDFLink_GetLinkZOrderAtPoint._FPDFLink_GetQuadPoints._FPDFLink_GetRect._FPDFLink_GetTextRange._FPDFLink_GetURL._FPDFLink_LoadWebLinks._FPDFPage_CloseAnnot._FPDFPage_CountObjects._FPDFPage_CreateAnnot._FPDFPage_Delete._FPDFPage_Flatten._FPDFPage_FormFieldZOrderAtPoint._FPDFPage_GenerateContent._FPDFPage_GetAnnot._FPDFPage_GetAnnotCount._FPDFPage_GetAnnotIndex._FPDFPage_GetArtBox._FPDFPage_GetBleedBox._FPDFPage_GetCropBox._FPDFPage_GetDecodedThumbnailData._FPDFPage_GetMediaBox._FPDFPage_GetObject._FPDFPage_GetRawThumbnailData._FPDFPage_GetRotation._FPDFPage_GetThumbnailAsBitmap._FPDFPage_GetTrimBox._FPDFPage_HasFormFieldAtPoint._FPDFPage_HasTransparency._FPDFPage_InsertClipPath._FPDFPage_InsertObject._FPDFPage_InsertObjectAtIndex._FPDFPage_New._FPDFPage_RemoveAnnot._FPDFPage_RemoveObject._FPDFPage_SetArtBox._FPDFPage_SetBleedBox._FPDFPage_SetCropBox._FPDFPage_SetMediaBox._FPDFPage_SetRotation._FPDFPage_SetTrimBox._FPDFPage_TransformAnnots._FPDFPage_TransFormWithClip._FPDFPageObj_AddMark._FPDFPageObj_CountMarks._FPDFPageObj_CreateNewPath._FPDFPageObj_CreateNewRect._FPDFPageObj_CreateTextObj._FPDFPageObj_Destroy._FPDFPageObj_GetBounds._FPDFPageObj_GetClipPath._FPDFPageObj_GetDashArray._FPDFPageObj_GetDashCount._FPDFPageObj_GetDashPhase._FPDFPageObj_GetFillColor._FPDFPageObj_GetIsActive._FPDFPageObj_GetLineCap._FPDFPageObj_GetLineJoin._FPDFPageObj_GetMark._FPDFPageObj_GetMarkedContentID._FPDFPageObj_GetMatrix._FPDFPageObj_GetRotatedBounds._FPDFPageObj_GetStrokeColor._FPDFPageObj_GetStrokeWidth._FPDFPageObj_GetType._FPDFPageObj_HasTransparency._FPDFPageObj_NewImageObj._FPDFPageObj_NewTextObj._FPDFPageObj_RemoveMark._FPDFPageObj_SetBlendMode._FPDFPageObj_SetDashArray._FPDFPageObj_SetDashPhase._FPDFPageObj_SetFillColor._FPDFPageObj_SetIsActive._FPDFPageObj_SetLineCap._FPDFPageObj_SetLineJoin._FPDFPageObj_SetMatrix._FPDFPageObj_SetStrokeColor._FPDFPageObj_SetStrokeWidth._FPDFPageObj_Transform._FPDFPageObj_TransformClipPath._FPDFPageObj_TransformF._FPDFPageObjMark_CountParams._FPDFPageObjMark_GetName._FPDFPageObjMark_GetParamBlobValue._FPDFPageObjMark_GetParamIntValue._FPDFPageObjMark_GetParamKey._FPDFPageObjMark_GetParamStringValue._FPDFPageObjMark_GetParamValueType._FPDFPageObjMark_RemoveParam._FPDFPageObjMark_SetBlobParam._FPDFPageObjMark_SetIntParam._FPDFPageObjMark_SetStringParam._FPDFPath_BezierTo._FPDFPath_Close._FPDFPath_CountSegments._FPDFPath_GetDrawMode._FPDFPath_GetPathSegment._FPDFPath_LineTo._FPDFPath_MoveTo._FPDFPath_SetDrawMode._FPDFPathSegment_GetClose._FPDFPathSegment_GetPoint._FPDFPathSegment_GetType._FPDFSignatureObj_GetByteRange._FPDFSignatureObj_GetContents._FPDFSignatureObj_GetDocMDPPermission._FPDFSignatureObj_GetReason._FPDFSignatureObj_GetSubFilter._FPDFSignatureObj_GetTime._FPDFText_ClosePage._FPDFText_CountChars._FPDFText_CountRects._FPDFText_FindClose._FPDFText_FindNext._FPDFText_FindPrev._FPDFText_FindStart._FPDFText_GetBoundedText._FPDFText_GetCharAngle._FPDFText_GetCharBox._FPDFText_GetCharIndexAtPos._FPDFText_GetCharIndexFromTextIndex._FPDFText_GetCharOrigin._FPDFText_GetFillColor._FPDFText_GetFontInfo._FPDFText_GetFontSize._FPDFText_GetFontWeight._FPDFText_GetLooseCharBox._FPDFText_GetMatrix._FPDFText_GetRect._FPDFText_GetSchCount._FPDFText_GetSchResultIndex._FPDFText_GetStrokeColor._FPDFText_GetText._FPDFText_GetTextIndexFromCharIndex._FPDFText_GetTextObject._FPDFText_GetUnicode._FPDFText_HasUnicodeMapError._FPDFText_IsGenerated._FPDFText_IsHyphen._FPDFText_LoadCidType2Font._FPDFText_LoadFont._FPDFText_LoadPage._FPDFText_LoadStandardFont._FPDFText_SetCharcodes._FPDFText_SetText._FPDFTextObj_GetFont._FPDFTextObj_GetFontSize._FPDFTextObj_GetRenderedBitmap._FPDFTextObj_GetText._FPDFTextObj_GetTextRenderMode._FPDFTextObj_SetTextRenderMode._PDFiumExt_CloseFileWriter._PDFiumExt_CloseFormFillInfo._PDFiumExt_ExitFormFillEnvironment._PDFiumExt_GetFileWriterData._PDFiumExt_GetFileWriterSize._PDFiumExt_Init._PDFiumExt_InitFormFillEnvironment._PDFiumExt_OpenFileWriter._PDFiumExt_OpenFormFillInfo._PDFiumExt_SaveAsCopy._malloc._free._memory.___indirect_function_table.onRuntimeInitialized`.split(`.`).forEach(e=>{Object.getOwnPropertyDescriptor(a,e)||Object.defineProperty(a,e,{get:()=>F(`You are getting `+e+` on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js`),set:()=>F(`You are setting `+e+` on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js`)})});var o=typeof window==`object`,s=typeof importScripts==`function`;typeof process==`object`&&typeof process.versions==`object`&&typeof process.versions.node==`string`&&process.type;var c,l,u=!o&&!s,d=Object.assign({},i),f=`./this.program`,p=``;if(u){if(typeof window==`object`||typeof importScripts==`function`)throw Error(`not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)`);l=e=>{if(typeof readbuffer==`function`)return new Uint8Array(readbuffer(e));let t=read(e,`binary`);return O(typeof t==`object`),t},c=e=>new Promise((t,n)=>{setTimeout(()=>t(l(e)))}),globalThis.clearTimeout??=e=>{},globalThis.setTimeout??=e=>typeof e==`function`?e():F(),typeof print<`u`&&(globalThis.console??={},console.log=print,console.warn=console.error=globalThis.printErr??print)}else{if(!o&&!s)throw Error(`environment detection error`);if(s?p=self.location.href:typeof document<`u`&&document.currentScript&&(p=document.currentScript.src),ae&&(p=ae),p=p.startsWith(`blob:`)?``:p.substr(0,p.replace(/[?#].*/,``).lastIndexOf(`/`)+1),typeof window!=`object`&&typeof importScripts!=`function`)throw Error(`not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)`);s&&(l=e=>{var t=new XMLHttpRequest;return t.open(`GET`,e,!1),t.responseType=`arraybuffer`,t.send(null),new Uint8Array(t.response)}),c=e=>(O(!fe(e),`readAsync does not work with file:// URLs`),fetch(e,{credentials:`same-origin`}).then(e=>e.ok?e.arrayBuffer():Promise.reject(Error(e.status+` : `+e.url))))}var m,h=i.print||console.log.bind(console),g=i.printErr||console.error.bind(console);Object.assign(i,d),d=null,m=`fetchSettings`,Object.getOwnPropertyDescriptor(i,m)&&F(`\`Module.${m}\` was supplied but \`${m}\` not included in INCOMING_MODULE_JS_API`),i.arguments&&i.arguments,B(`arguments`,`arguments_`),i.thisProgram&&(f=i.thisProgram),B(`thisProgram`,`thisProgram`),O(i.memoryInitializerPrefixURL===void 0,`Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead`),O(i.pthreadMainPrefixURL===void 0,`Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead`),O(i.cdInitializerPrefixURL===void 0,`Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead`),O(i.filePackagePrefixURL===void 0,`Module.filePackagePrefixURL option was removed, use Module.locateFile instead`),O(i.read===void 0,`Module.read option was removed`),O(i.readAsync===void 0,`Module.readAsync option was removed (modify readAsync in JS)`),O(i.readBinary===void 0,`Module.readBinary option was removed (modify readBinary in JS)`),O(i.setWindowTitle===void 0,`Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)`),O(i.TOTAL_MEMORY===void 0,`Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY`),B(`asm`,`wasmExports`),B(`readAsync`,`readAsync`),B(`readBinary`,`readBinary`),B(`setWindowTitle`,`setWindowTitle`);var _,v=i.wasmBinary;B(`wasmBinary`,`wasmBinary`),typeof WebAssembly!=`object`&&g(`no native wasm support detected`);var y,b,x,S,C,w,T,E,D=!1;function O(e,t){e||F(`Assertion failed`+(t?`: `+t:``))}function k(){var e=_.buffer;i.HEAP8=y=new Int8Array(e),i.HEAP16=x=new Int16Array(e),i.HEAPU8=b=new Uint8Array(e),i.HEAPU16=S=new Uint16Array(e),i.HEAP32=C=new Int32Array(e),i.HEAPU32=w=new Uint32Array(e),i.HEAPF32=T=new Float32Array(e),i.HEAPF64=E=new Float64Array(e)}function ee(){if(!D){var e=ot();e==0&&(e+=4);var t=w[e>>2],n=w[e+4>>2];t==34821223&&n==2310721022||F(`Stack overflow! Stack cookie has been overwritten at ${be(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${be(n)} ${be(t)}`),w[0]!=1668509029&&F(`Runtime error: The application has corrupted its heap memory area (address zero)!`)}}O(!i.STACK_SIZE,`STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time`),O(typeof Int32Array<`u`&&typeof Float64Array<`u`&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,`JS engine does not provide full typed array support`),O(!i.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),O(!i.INITIAL_MEMORY,`Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically`);var te=[],ne=[],A=[],j=!1;function re(e){te.unshift(e)}function ie(e){A.unshift(e)}O(Math.imul,`This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill`),O(Math.fround,`This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill`),O(Math.clz32,`This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill`),O(Math.trunc,`This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill`);var M=0,N=null,oe=null,P={};function se(e){for(var t=e;;){if(!P[e])return e;e=t+Math.random()}}function ce(e){M++,i.monitorRunDependencies?.(M),e?(O(!P[e]),P[e]=1,N===null&&typeof setInterval<`u`&&(N=setInterval(()=>{if(D)return clearInterval(N),void(N=null);var e=!1;for(var t in P)e||(e=!0,g(`still waiting on run dependencies:`)),g(`dependency: ${t}`);e&&g(`(end of list)`)},1e4))):g(`warning: run dependency added without ID`)}function le(e){if(M--,i.monitorRunDependencies?.(M),e?(O(P[e]),delete P[e]):g(`warning: run dependency removed without ID`),M==0&&(N!==null&&(clearInterval(N),N=null),oe)){var t=oe;oe=null,t()}}function F(e){i.onAbort?.(e),g(e=`Aborted(`+e+`)`),D=!0;var t=new WebAssembly.RuntimeError(e);throw r(t),t}var ue,I,L,de=e=>e.startsWith(`data:application/octet-stream;base64,`),fe=e=>e.startsWith(`file://`);function R(e,t){return(...n)=>{O(j,`native function \`${e}\` called before runtime initialization`);var r=Q[e];return O(r,`exported native function \`${e}\` not found`),O(n.length<=t,`native function \`${e}\` called with ${n.length} args but expects ${t}`),r(...n)}}function pe(){if(i.locateFile){var e=`pdfium.wasm`;return de(e)?e:(t=e,i.locateFile?i.locateFile(t,p):p+t)}var t;return u?`pdfium.wasm`:new URL(`/assets/pdfium-B8f0vBaD.wasm`,``+import.meta.url).href}function me(e){if(e==ue&&v)return new Uint8Array(v);if(l)return l(e);throw`both async and sync fetching of the wasm failed`}function z(e,t,n){return function(e){return v?Promise.resolve().then(()=>me(e)):c(e).then(e=>new Uint8Array(e),()=>me(e))}(e).then(e=>WebAssembly.instantiate(e,t)).then(n,e=>{g(`failed to asynchronously prepare wasm: ${e}`),fe(ue)&&g(`warning: Loading from a file URI (${ue}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),F(e)})}if((()=>{var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,t[0]!==115||t[1]!==99)throw`Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)`})(),i.ENVIRONMENT)throw Error(`Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)`);function B(e,t,n=!0){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){F(`\`Module.${e}\` has been replaced by \`${t}\``+(n?` (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)`:``))}})}function he(e){return e===`FS_createPath`||e===`FS_createDataFile`||e===`FS_createPreloadedFile`||e===`FS_unlink`||e===`addRunDependency`||e===`FS_createLazyFile`||e===`FS_createDevice`||e===`removeRunDependency`}function ge(e,t){typeof globalThis>`u`||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get(){t()}})}function _e(e,t){ge(e,()=>{U(`\`${e}\` is not longer defined by emscripten. ${t}`)})}function ve(e){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){var t=`'${e}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;he(e)&&(t+=`. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you`),F(t)}})}_e(`buffer`,`Please use HEAP8.buffer or wasmMemory.buffer`),_e(`asm`,`Please use wasmExports instead`);var ye=e=>{e.forEach(e=>e(i))};i.noExitRuntime;var be=e=>(O(typeof e==`number`),`0x`+(e>>>=0).toString(16).padStart(8,`0`)),V=e=>st(e),H=()=>lt(),U=e=>{U.shown||={},U.shown[e]||(U.shown[e]=1,g(e))},xe=typeof TextDecoder<`u`?new TextDecoder:void 0,Se=(e,t=0,n=NaN)=>{for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&xe)return xe.decode(e.subarray(t,i));for(var a=``;t<i;){var o=e[t++];if(128&o){var s=63&e[t++];if((224&o)!=192){var c=63&e[t++];if((240&o)==224?o=(15&o)<<12|s<<6|c:((248&o)!=240&&U(`Invalid UTF-8 leading byte `+be(o)+` encountered when deserializing a UTF-8 string in wasm memory to a JS string!`),o=(7&o)<<18|s<<12|c<<6|63&e[t++]),o<65536)a+=String.fromCharCode(o);else{var l=o-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&o)<<6|s)}else a+=String.fromCharCode(o)}return a},W=(e,t)=>(O(typeof e==`number`,`UTF8ToString expects a number (got ${typeof e})`),e?Se(b,e,t):``);function Ce(){O(X.varargs!=null);var e=C[X.varargs>>2];return X.varargs+=4,e}var we=Ce,G={isAbs:e=>e.charAt(0)===`/`,splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];i===`.`?e.splice(r,1):i===`..`?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift(`..`);return e},normalize:e=>{var t=G.isAbs(e),n=e.substr(-1)===`/`;return(e=G.normalizeArray(e.split(`/`).filter(e=>!!e),!t).join(`/`))||t||(e=`.`),e&&n&&(e+=`/`),(t?`/`:``)+e},dirname:e=>{var t=G.splitPath(e),n=t[0],r=t[1];return n||r?(r&&=r.substr(0,r.length-1),n+r):`.`},basename:e=>{if(e===`/`)return`/`;var t=(e=(e=G.normalize(e)).replace(/\/$/,``)).lastIndexOf(`/`);return t===-1?e:e.substr(t+1)},join:(...e)=>G.normalize(e.join(`/`)),join2:(e,t)=>G.normalize(e+`/`+t)},Te=e=>(Te=(()=>{if(typeof crypto==`object`&&typeof crypto.getRandomValues==`function`)return e=>crypto.getRandomValues(e);F(`no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: (array) => { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };`)})())(e),K={resolve:(...e)=>{for(var t=``,n=!1,r=e.length-1;r>=-1&&!n;r--){var i=r>=0?e[r]:Y.cwd();if(typeof i!=`string`)throw TypeError(`Arguments to path.resolve must be strings`);if(!i)return``;t=i+`/`+t,n=G.isAbs(i)}return(n?`/`:``)+(t=G.normalizeArray(t.split(`/`).filter(e=>!!e),!n).join(`/`))||`.`},relative:(e,t)=>{function n(e){for(var t=0;t<e.length&&e[t]===``;t++);for(var n=e.length-1;n>=0&&e[n]===``;n--);return t>n?[]:e.slice(t,n-t+1)}e=K.resolve(e).substr(1),t=K.resolve(t).substr(1);for(var r=n(e.split(`/`)),i=n(t.split(`/`)),a=Math.min(r.length,i.length),o=a,s=0;s<a;s++)if(r[s]!==i[s]){o=s;break}var c=[];for(s=o;s<r.length;s++)c.push(`..`);return(c=c.concat(i.slice(o))).join(`/`)}},Ee=[],De=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t},Oe=(e,t,n,r)=>{if(O(typeof e==`string`,`stringToUTF8Array expects a string (got ${typeof e})`),!(r>0))return 0;for(var i=n,a=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=a)break;t[n++]=s}else if(s<=2047){if(n+1>=a)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=a)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=a)break;s>1114111&&U(`Invalid Unicode code point `+be(s)+` encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF).`),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-i};function ke(e,t,n){var r=n>0?n:De(e)+1,i=Array(r),a=Oe(e,i,0,i.length);return t&&(i.length=a),i}var q,Ae,je={ttys:[],init(){},shutdown(){},register(e,t){je.ttys[e]={input:[],output:[],ops:t},Y.registerDevice(e,je.stream_ops)},stream_ops:{open(e){var t=je.ttys[e.node.rdev];if(!t)throw new Y.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,r,i){if(!e.tty||!e.tty.ops.get_char)throw new Y.ErrnoError(60);for(var a=0,o=0;o<r;o++){var s;try{s=e.tty.ops.get_char(e.tty)}catch{throw new Y.ErrnoError(29)}if(s===void 0&&a===0)throw new Y.ErrnoError(6);if(s==null)break;a++,t[n+o]=s}return a&&(e.node.timestamp=Date.now()),a},write(e,t,n,r,i){if(!e.tty||!e.tty.ops.put_char)throw new Y.ErrnoError(60);try{for(var a=0;a<r;a++)e.tty.ops.put_char(e.tty,t[n+a])}catch{throw new Y.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:e=>(()=>{if(!Ee.length){var e=null;if(typeof window<`u`&&typeof window.prompt==`function`?(e=window.prompt(`Input: `))!==null&&(e+=`
`):typeof readline==`function`&&(e=readline())&&(e+=`
`),!e)return null;Ee=ke(e,!0)}return Ee.shift()})(),put_char(e,t){t===null||t===10?(h(Se(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(h(Se(e.output)),e.output=[])},ioctl_tcgets:e=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(e,t,n)=>0,ioctl_tiocgwinsz:e=>[24,80]},default_tty1_ops:{put_char(e,t){t===null||t===10?(g(Se(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(g(Se(e.output)),e.output=[])}}},Me=(e,t)=>(O(t,`alignment argument is required`),Math.ceil(e/t)*t),Ne=e=>{e=Me(e,65536);var t=rt(65536,e);return t&&((e,t)=>{b.fill(0,e,e+t)})(t,e),t},J={ops_table:null,mount:e=>J.createNode(null,`/`,16895,0),createNode(e,t,n,r){if(Y.isBlkdev(n)||Y.isFIFO(n))throw new Y.ErrnoError(63);J.ops_table||={dir:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr,lookup:J.node_ops.lookup,mknod:J.node_ops.mknod,rename:J.node_ops.rename,unlink:J.node_ops.unlink,rmdir:J.node_ops.rmdir,readdir:J.node_ops.readdir,symlink:J.node_ops.symlink},stream:{llseek:J.stream_ops.llseek}},file:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr},stream:{llseek:J.stream_ops.llseek,read:J.stream_ops.read,write:J.stream_ops.write,allocate:J.stream_ops.allocate,mmap:J.stream_ops.mmap,msync:J.stream_ops.msync}},link:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr,readlink:J.node_ops.readlink},stream:{}},chrdev:{node:{getattr:J.node_ops.getattr,setattr:J.node_ops.setattr},stream:Y.chrdev_stream_ops}};var i=Y.createNode(e,t,n,r);return Y.isDir(i.mode)?(i.node_ops=J.ops_table.dir.node,i.stream_ops=J.ops_table.dir.stream,i.contents={}):Y.isFile(i.mode)?(i.node_ops=J.ops_table.file.node,i.stream_ops=J.ops_table.file.stream,i.usedBytes=0,i.contents=null):Y.isLink(i.mode)?(i.node_ops=J.ops_table.link.node,i.stream_ops=J.ops_table.link.stream):Y.isChrdev(i.mode)&&(i.node_ops=J.ops_table.chrdev.node,i.stream_ops=J.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i,e.timestamp=i.timestamp),i},getFileDataAsTypedArray:e=>e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array,expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),n!=0&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=Y.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Y.isDir(e.mode)?t.size=4096:Y.isFile(e.mode)?t.size=e.usedBytes:Y.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&J.resizeFileStorage(e,t.size)},lookup(e,t){throw Y.genericErrors[44]},mknod:(e,t,n,r)=>J.createNode(e,t,n,r),rename(e,t,n){if(Y.isDir(e.mode)){var r;try{r=Y.lookupNode(t,n)}catch{}if(r)for(var i in r.contents)throw new Y.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){for(var n in Y.lookupNode(e,t).contents)throw new Y.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[`.`,`..`];for(var n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var r=J.createNode(e,t,41471,0);return r.link=n,r},readlink(e){if(!Y.isLink(e.mode))throw new Y.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,r,i){var a=e.node.contents;if(i>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-i,r);if(O(o>=0),o>8&&a.subarray)t.set(a.subarray(i,i+o),n);else for(var s=0;s<o;s++)t[n+s]=a[i+s];return o},write(e,t,n,r,i,a){if(O(!(t instanceof ArrayBuffer)),t.buffer===y.buffer&&(a=!1),!r)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(a)return O(i===0,`canOwn must imply no weird position inside the file`),o.contents=t.subarray(n,n+r),o.usedBytes=r,r;if(o.usedBytes===0&&i===0)return o.contents=t.slice(n,n+r),o.usedBytes=r,r;if(i+r<=o.usedBytes)return o.contents.set(t.subarray(n,n+r),i),r}if(J.expandFileStorage(o,i+r),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(n,n+r),i);else for(var s=0;s<r;s++)o.contents[i+s]=t[n+s];return o.usedBytes=Math.max(o.usedBytes,i+r),r},llseek(e,t,n){var r=t;if(n===1?r+=e.position:n===2&&Y.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new Y.ErrnoError(28);return r},allocate(e,t,n){J.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,r,i){if(!Y.isFile(e.node.mode))throw new Y.ErrnoError(43);var a,o,s=e.node.contents;if(2&i||!s||s.buffer!==y.buffer){if(o=!0,!(a=Ne(t)))throw new Y.ErrnoError(48);s&&((n>0||n+t<s.length)&&(s=s.subarray?s.subarray(n,n+t):Array.prototype.slice.call(s,n,n+t)),y.set(s,a))}else o=!1,a=s.byteOffset;return{ptr:a,allocated:o}},msync:(e,t,n,r,i)=>(J.stream_ops.write(e,t,0,r,n,!1),0)}},Pe=i.preloadPlugins||[],Fe=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},Ie={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},Y={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:`/`,initialized:!1,ignorePermissions:!0,ErrnoError:class extends Error{constructor(e){for(var t in super(j?(e=>W(it(e)))(e):``),this.name=`ErrnoError`,this.errno=e,Ie)if(Ie[t]===e){this.code=t;break}}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return(2097155&this.flags)!=1}get isWrite(){return!!(2097155&this.flags)}get isAppend(){return 1024&this.flags}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,n,r){e||=this,this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Y.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return Y.isDir(this.mode)}get isDevice(){return Y.isChrdev(this.mode)}},lookupPath(e,t={}){if(!(e=K.resolve(e)))return{path:``,node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new Y.ErrnoError(32);for(var n=e.split(`/`).filter(e=>!!e),r=Y.root,i=`/`,a=0;a<n.length;a++){var o=a===n.length-1;if(o&&t.parent)break;if(r=Y.lookupNode(r,n[a]),i=G.join2(i,n[a]),Y.isMountpoint(r)&&(!o||o&&t.follow_mount)&&(r=r.mounted.root),!o||t.follow)for(var s=0;Y.isLink(r.mode);){var c=Y.readlink(i);if(i=K.resolve(G.dirname(i),c),r=Y.lookupPath(i,{recurse_count:t.recurse_count+1}).node,s++>40)throw new Y.ErrnoError(32)}}return{path:i,node:r}},getPath(e){for(var t;;){if(Y.isRoot(e)){var n=e.mount.mountpoint;return t?n[n.length-1]===`/`?n+t:`${n}/${t}`:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%Y.nameTable.length},hashAddNode(e){var t=Y.hashName(e.parent.id,e.name);e.name_next=Y.nameTable[t],Y.nameTable[t]=e},hashRemoveNode(e){var t=Y.hashName(e.parent.id,e.name);if(Y.nameTable[t]===e)Y.nameTable[t]=e.name_next;else for(var n=Y.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=Y.mayLookup(e);if(n)throw new Y.ErrnoError(n);for(var r=Y.hashName(e.id,t),i=Y.nameTable[r];i;i=i.name_next){var a=i.name;if(i.parent.id===e.id&&a===t)return i}return Y.lookup(e,t)},createNode(e,t,n,r){O(typeof e==`object`);var i=new Y.FSNode(e,t,n,r);return Y.hashAddNode(i),i},destroyNode(e){Y.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(61440&e)==32768,isDir:e=>(61440&e)==16384,isLink:e=>(61440&e)==40960,isChrdev:e=>(61440&e)==8192,isBlkdev:e=>(61440&e)==24576,isFIFO:e=>(61440&e)==4096,isSocket:e=>!(49152&~e),flagsToPermissionString(e){var t=[`r`,`w`,`rw`][3&e];return 512&e&&(t+=`w`),t},nodePermissions:(e,t)=>Y.ignorePermissions||(!t.includes(`r`)||292&e.mode)&&(!t.includes(`w`)||146&e.mode)&&(!t.includes(`x`)||73&e.mode)?0:2,mayLookup(e){return Y.isDir(e.mode)?Y.nodePermissions(e,`x`)||(e.node_ops.lookup?0:2):54},mayCreate(e,t){try{return Y.lookupNode(e,t),20}catch{}return Y.nodePermissions(e,`wx`)},mayDelete(e,t,n){var r;try{r=Y.lookupNode(e,t)}catch(e){return e.errno}var i=Y.nodePermissions(e,`wx`);if(i)return i;if(n){if(!Y.isDir(r.mode))return 54;if(Y.isRoot(r)||Y.getPath(r)===Y.cwd())return 10}else if(Y.isDir(r.mode))return 31;return 0},mayOpen:(e,t)=>e?Y.isLink(e.mode)?32:Y.isDir(e.mode)&&(Y.flagsToPermissionString(t)!==`r`||512&t)?31:Y.nodePermissions(e,Y.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=Y.MAX_OPEN_FDS;e++)if(!Y.streams[e])return e;throw new Y.ErrnoError(33)},getStreamChecked(e){var t=Y.getStream(e);if(!t)throw new Y.ErrnoError(8);return t},getStream:e=>Y.streams[e],createStream:(e,t=-1)=>(O(t>=-1),e=Object.assign(new Y.FSStream,e),t==-1&&(t=Y.nextfd()),e.fd=t,Y.streams[t]=e,e),closeStream(e){Y.streams[e]=null},dupStream(e,t=-1){var n=Y.createStream(e,t);return n.stream_ops?.dup?.(n),n},chrdev_stream_ops:{open(e){e.stream_ops=Y.getDevice(e.node.rdev).stream_ops,e.stream_ops.open?.(e)},llseek(){throw new Y.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice(e,t){Y.devices[e]={stream_ops:t}},getDevice:e=>Y.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push(...r.mounts)}return t},syncfs(e,t){typeof e==`function`&&(t=e,e=!1),Y.syncFSRequests++,Y.syncFSRequests>1&&g(`warning: ${Y.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=Y.getMounts(Y.root.mount),r=0;function i(e){return O(Y.syncFSRequests>0),Y.syncFSRequests--,t(e)}function a(e){if(e)return a.errored?void 0:(a.errored=!0,i(e));++r>=n.length&&i(null)}n.forEach(t=>{if(!t.type.syncfs)return a(null);t.type.syncfs(t,e,a)})},mount(e,t,n){if(typeof e==`string`)throw e;var r,i=n===`/`,a=!n;if(i&&Y.root)throw new Y.ErrnoError(10);if(!i&&!a){var o=Y.lookupPath(n,{follow_mount:!1});if(n=o.path,r=o.node,Y.isMountpoint(r))throw new Y.ErrnoError(10);if(!Y.isDir(r.mode))throw new Y.ErrnoError(54)}var s={type:e,opts:t,mountpoint:n,mounts:[]},c=e.mount(s);return c.mount=s,s.root=c,i?Y.root=c:r&&(r.mounted=s,r.mount&&r.mount.mounts.push(s)),c},unmount(e){var t=Y.lookupPath(e,{follow_mount:!1});if(!Y.isMountpoint(t.node))throw new Y.ErrnoError(28);var n=t.node,r=n.mounted,i=Y.getMounts(r);Object.keys(Y.nameTable).forEach(e=>{for(var t=Y.nameTable[e];t;){var n=t.name_next;i.includes(t.mount)&&Y.destroyNode(t),t=n}}),n.mounted=null;var a=n.mount.mounts.indexOf(r);O(a!==-1),n.mount.mounts.splice(a,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod(e,t,n){var r=Y.lookupPath(e,{parent:!0}).node,i=G.basename(e);if(!i||i===`.`||i===`..`)throw new Y.ErrnoError(28);var a=Y.mayCreate(r,i);if(a)throw new Y.ErrnoError(a);if(!r.node_ops.mknod)throw new Y.ErrnoError(63);return r.node_ops.mknod(r,i,t,n)},create:(e,t)=>(t=t===void 0?438:t,t&=4095,t|=32768,Y.mknod(e,t,0)),mkdir:(e,t)=>(t=t===void 0?511:t,t&=1023,t|=16384,Y.mknod(e,t,0)),mkdirTree(e,t){for(var n=e.split(`/`),r=``,i=0;i<n.length;++i)if(n[i]){r+=`/`+n[i];try{Y.mkdir(r,t)}catch(e){if(e.errno!=20)throw e}}},mkdev:(e,t,n)=>(n===void 0&&(n=t,t=438),t|=8192,Y.mknod(e,t,n)),symlink(e,t){if(!K.resolve(e))throw new Y.ErrnoError(44);var n=Y.lookupPath(t,{parent:!0}).node;if(!n)throw new Y.ErrnoError(44);var r=G.basename(t),i=Y.mayCreate(n,r);if(i)throw new Y.ErrnoError(i);if(!n.node_ops.symlink)throw new Y.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename(e,t){var n,r,i=G.dirname(e),a=G.dirname(t),o=G.basename(e),s=G.basename(t);if(n=Y.lookupPath(e,{parent:!0}).node,r=Y.lookupPath(t,{parent:!0}).node,!n||!r)throw new Y.ErrnoError(44);if(n.mount!==r.mount)throw new Y.ErrnoError(75);var c,l=Y.lookupNode(n,o),u=K.relative(e,a);if(u.charAt(0)!==`.`)throw new Y.ErrnoError(28);if((u=K.relative(t,i)).charAt(0)!==`.`)throw new Y.ErrnoError(55);try{c=Y.lookupNode(r,s)}catch{}if(l!==c){var d=Y.isDir(l.mode),f=Y.mayDelete(n,o,d);if(f||=c?Y.mayDelete(r,s,d):Y.mayCreate(r,s))throw new Y.ErrnoError(f);if(!n.node_ops.rename)throw new Y.ErrnoError(63);if(Y.isMountpoint(l)||c&&Y.isMountpoint(c))throw new Y.ErrnoError(10);if(r!==n&&(f=Y.nodePermissions(n,`w`)))throw new Y.ErrnoError(f);Y.hashRemoveNode(l);try{n.node_ops.rename(l,r,s),l.parent=r}catch(e){throw e}finally{Y.hashAddNode(l)}}},rmdir(e){var t=Y.lookupPath(e,{parent:!0}).node,n=G.basename(e),r=Y.lookupNode(t,n),i=Y.mayDelete(t,n,!0);if(i)throw new Y.ErrnoError(i);if(!t.node_ops.rmdir)throw new Y.ErrnoError(63);if(Y.isMountpoint(r))throw new Y.ErrnoError(10);t.node_ops.rmdir(t,n),Y.destroyNode(r)},readdir(e){var t=Y.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Y.ErrnoError(54);return t.node_ops.readdir(t)},unlink(e){var t=Y.lookupPath(e,{parent:!0}).node;if(!t)throw new Y.ErrnoError(44);var n=G.basename(e),r=Y.lookupNode(t,n),i=Y.mayDelete(t,n,!1);if(i)throw new Y.ErrnoError(i);if(!t.node_ops.unlink)throw new Y.ErrnoError(63);if(Y.isMountpoint(r))throw new Y.ErrnoError(10);t.node_ops.unlink(t,n),Y.destroyNode(r)},readlink(e){var t=Y.lookupPath(e).node;if(!t)throw new Y.ErrnoError(44);if(!t.node_ops.readlink)throw new Y.ErrnoError(28);return K.resolve(Y.getPath(t.parent),t.node_ops.readlink(t))},stat(e,t){var n=Y.lookupPath(e,{follow:!t}).node;if(!n)throw new Y.ErrnoError(44);if(!n.node_ops.getattr)throw new Y.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>Y.stat(e,!0),chmod(e,t,n){var r;if(!(r=typeof e==`string`?Y.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new Y.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod(e,t){Y.chmod(e,t,!0)},fchmod(e,t){var n=Y.getStreamChecked(e);Y.chmod(n.node,t)},chown(e,t,n,r){var i;if(!(i=typeof e==`string`?Y.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new Y.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown(e,t,n){Y.chown(e,t,n,!0)},fchown(e,t,n){var r=Y.getStreamChecked(e);Y.chown(r.node,t,n)},truncate(e,t){if(t<0)throw new Y.ErrnoError(28);var n;if(!(n=typeof e==`string`?Y.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Y.ErrnoError(63);if(Y.isDir(n.mode))throw new Y.ErrnoError(31);if(!Y.isFile(n.mode))throw new Y.ErrnoError(28);var r=Y.nodePermissions(n,`w`);if(r)throw new Y.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate(e,t){var n=Y.getStreamChecked(e);if(!(2097155&n.flags))throw new Y.ErrnoError(28);Y.truncate(n.node,t)},utime(e,t,n){var r=Y.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open(e,t,n){if(e===``)throw new Y.ErrnoError(44);var r;if(n=64&(t=typeof t==`string`?(e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(t===void 0)throw Error(`Unknown file open mode: ${e}`);return t})(t):t)?4095&(n=n===void 0?438:n)|32768:0,typeof e==`object`)r=e;else{e=G.normalize(e);try{r=Y.lookupPath(e,{follow:!(131072&t)}).node}catch{}}var a=!1;if(64&t)if(r){if(128&t)throw new Y.ErrnoError(20)}else r=Y.mknod(e,n,0),a=!0;if(!r)throw new Y.ErrnoError(44);if(Y.isChrdev(r.mode)&&(t&=-513),65536&t&&!Y.isDir(r.mode))throw new Y.ErrnoError(54);if(!a){var o=Y.mayOpen(r,t);if(o)throw new Y.ErrnoError(o)}512&t&&!a&&Y.truncate(r,0),t&=-131713;var s=Y.createStream({node:r,path:Y.getPath(r),flags:t,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return s.stream_ops.open&&s.stream_ops.open(s),!i.logReadFiles||1&t||e in Y.readFiles||(Y.readFiles[e]=1),s},close(e){if(Y.isClosed(e))throw new Y.ErrnoError(8);e.getdents&&=null;try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Y.closeStream(e.fd)}e.fd=null},isClosed:e=>e.fd===null,llseek(e,t,n){if(Y.isClosed(e))throw new Y.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Y.ErrnoError(70);if(n!=0&&n!=1&&n!=2)throw new Y.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,r,i){if(O(n>=0),r<0||i<0)throw new Y.ErrnoError(28);if(Y.isClosed(e)||(2097155&e.flags)==1)throw new Y.ErrnoError(8);if(Y.isDir(e.node.mode))throw new Y.ErrnoError(31);if(!e.stream_ops.read)throw new Y.ErrnoError(28);var a=i!==void 0;if(a){if(!e.seekable)throw new Y.ErrnoError(70)}else i=e.position;var o=e.stream_ops.read(e,t,n,r,i);return a||(e.position+=o),o},write(e,t,n,r,i,a){if(O(n>=0),r<0||i<0)throw new Y.ErrnoError(28);if(Y.isClosed(e)||!(2097155&e.flags))throw new Y.ErrnoError(8);if(Y.isDir(e.node.mode))throw new Y.ErrnoError(31);if(!e.stream_ops.write)throw new Y.ErrnoError(28);e.seekable&&1024&e.flags&&Y.llseek(e,0,2);var o=i!==void 0;if(o){if(!e.seekable)throw new Y.ErrnoError(70)}else i=e.position;var s=e.stream_ops.write(e,t,n,r,i,a);return o||(e.position+=s),s},allocate(e,t,n){if(Y.isClosed(e))throw new Y.ErrnoError(8);if(t<0||n<=0)throw new Y.ErrnoError(28);if(!(2097155&e.flags))throw new Y.ErrnoError(8);if(!Y.isFile(e.node.mode)&&!Y.isDir(e.node.mode))throw new Y.ErrnoError(43);if(!e.stream_ops.allocate)throw new Y.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap(e,t,n,r,i){if(2&r&&!(2&i)&&(2097155&e.flags)!=2||(2097155&e.flags)==1)throw new Y.ErrnoError(2);if(!e.stream_ops.mmap)throw new Y.ErrnoError(43);if(!t)throw new Y.ErrnoError(28);return e.stream_ops.mmap(e,t,n,r,i)},msync:(e,t,n,r,i)=>(O(n>=0),e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,i):0),ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new Y.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||`binary`,t.encoding!==`utf8`&&t.encoding!==`binary`)throw Error(`Invalid encoding type "${t.encoding}"`);var n,r=Y.open(e,t.flags),i=Y.stat(e).size,a=new Uint8Array(i);return Y.read(r,a,0,i,0),t.encoding===`utf8`?n=Se(a):t.encoding===`binary`&&(n=a),Y.close(r),n},writeFile(e,t,n={}){n.flags=n.flags||577;var r=Y.open(e,n.flags,n.mode);if(typeof t==`string`){var i=new Uint8Array(De(t)+1),a=Oe(t,i,0,i.length);Y.write(r,i,0,a,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw Error(`Unsupported data type`);Y.write(r,t,0,t.byteLength,void 0,n.canOwn)}Y.close(r)},cwd:()=>Y.currentPath,chdir(e){var t=Y.lookupPath(e,{follow:!0});if(t.node===null)throw new Y.ErrnoError(44);if(!Y.isDir(t.node.mode))throw new Y.ErrnoError(54);var n=Y.nodePermissions(t.node,`x`);if(n)throw new Y.ErrnoError(n);Y.currentPath=t.path},createDefaultDirectories(){Y.mkdir(`/tmp`),Y.mkdir(`/home`),Y.mkdir(`/home/web_user`)},createDefaultDevices(){Y.mkdir(`/dev`),Y.registerDevice(Y.makedev(1,3),{read:()=>0,write:(e,t,n,r,i)=>r}),Y.mkdev(`/dev/null`,Y.makedev(1,3)),je.register(Y.makedev(5,0),je.default_tty_ops),je.register(Y.makedev(6,0),je.default_tty1_ops),Y.mkdev(`/dev/tty`,Y.makedev(5,0)),Y.mkdev(`/dev/tty1`,Y.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(t===0&&(t=Te(e).byteLength),e[--t]);Y.createDevice(`/dev`,`random`,n),Y.createDevice(`/dev`,`urandom`,n),Y.mkdir(`/dev/shm`),Y.mkdir(`/dev/shm/tmp`)},createSpecialDirectories(){Y.mkdir(`/proc`);var e=Y.mkdir(`/proc/self`);Y.mkdir(`/proc/self/fd`),Y.mount({mount(){var t=Y.createNode(e,`fd`,16895,73);return t.node_ops={lookup(e,t){var n=+t,r=Y.getStreamChecked(n),i={parent:null,mount:{mountpoint:`fake`},node_ops:{readlink:()=>r.path}};return i.parent=i,i}},t}},{},`/proc/self/fd`)},createStandardStreams(e,t,n){e?Y.createDevice(`/dev`,`stdin`,e):Y.symlink(`/dev/tty`,`/dev/stdin`),t?Y.createDevice(`/dev`,`stdout`,null,t):Y.symlink(`/dev/tty`,`/dev/stdout`),n?Y.createDevice(`/dev`,`stderr`,null,n):Y.symlink(`/dev/tty1`,`/dev/stderr`);var r=Y.open(`/dev/stdin`,0),i=Y.open(`/dev/stdout`,1),a=Y.open(`/dev/stderr`,1);O(r.fd===0,`invalid handle for stdin (${r.fd})`),O(i.fd===1,`invalid handle for stdout (${i.fd})`),O(a.fd===2,`invalid handle for stderr (${a.fd})`)},staticInit(){[44].forEach(e=>{Y.genericErrors[e]=new Y.ErrnoError(e),Y.genericErrors[e].stack=`<generic error, no stack>`}),Y.nameTable=Array(4096),Y.mount(J,{},`/`),Y.createDefaultDirectories(),Y.createDefaultDevices(),Y.createSpecialDirectories(),Y.filesystems={MEMFS:J}},init(e,t,n){O(!Y.initialized,`FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)`),Y.initialized=!0,e??=i.stdin,t??=i.stdout,n??=i.stderr,Y.createStandardStreams(e,t,n)},quit(){Y.initialized=!1,nt(0);for(var e=0;e<Y.streams.length;e++){var t=Y.streams[e];t&&Y.close(t)}},findObject(e,t){var n=Y.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{e=(r=Y.lookupPath(e,{follow:!t})).path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=Y.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=G.basename(e),r=Y.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot=r.path===`/`}catch(e){n.error=e.errno}return n},createPath(e,t,n,r){e=typeof e==`string`?e:Y.getPath(e);for(var i=t.split(`/`).reverse();i.length;){var a=i.pop();if(a){var o=G.join2(e,a);try{Y.mkdir(o)}catch{}e=o}}return o},createFile(e,t,n,r,i){var a=G.join2(typeof e==`string`?e:Y.getPath(e),t),o=Fe(r,i);return Y.create(a,o)},createDataFile(e,t,n,r,i,a){var o=t;e&&(e=typeof e==`string`?e:Y.getPath(e),o=t?G.join2(e,t):e);var s=Fe(r,i),c=Y.create(o,s);if(n){if(typeof n==`string`){for(var l=Array(n.length),u=0,d=n.length;u<d;++u)l[u]=n.charCodeAt(u);n=l}Y.chmod(c,146|s);var f=Y.open(c,577);Y.write(f,n,0,n.length,0,a),Y.close(f),Y.chmod(c,s)}},createDevice(e,t,n,r){var i=G.join2(typeof e==`string`?e:Y.getPath(e),t),a=Fe(!!n,!!r);Y.createDevice.major??=64;var o=Y.makedev(Y.createDevice.major++,0);return Y.registerDevice(o,{open(e){e.seekable=!1},close(e){r?.buffer?.length&&r(10)},read(e,t,r,i,a){for(var o=0,s=0;s<i;s++){var c;try{c=n()}catch{throw new Y.ErrnoError(29)}if(c===void 0&&o===0)throw new Y.ErrnoError(6);if(c==null)break;o++,t[r+s]=c}return o&&(e.node.timestamp=Date.now()),o},write(e,t,n,i,a){for(var o=0;o<i;o++)try{r(t[n+o])}catch{throw new Y.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),o}}),Y.mkdev(i,a,o)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<`u`)throw Error(`Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.`);try{e.contents=l(e.url),e.usedBytes=e.contents.length}catch{throw new Y.ErrnoError(29)}},createLazyFile(e,t,n,r,i){class a{constructor(){this.lengthKnown=!1,this.chunks=[]}get(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}}setDataGetter(e){this.getter=e}cacheLength(){var e=new XMLHttpRequest;if(e.open(`HEAD`,n,!1),e.send(null),!(e.status>=200&&e.status<300||e.status===304))throw Error(`Couldn't load `+n+`. Status: `+e.status);var t,r=Number(e.getResponseHeader(`Content-length`)),i=(t=e.getResponseHeader(`Accept-Ranges`))&&t===`bytes`,a=(t=e.getResponseHeader(`Content-Encoding`))&&t===`gzip`,o=1048576;i||(o=r);var s=this;s.setDataGetter(e=>{var t=e*o,i=(e+1)*o-1;if(i=Math.min(i,r-1),s.chunks[e]===void 0&&(s.chunks[e]=((e,t)=>{if(e>t)throw Error(`invalid range (`+e+`, `+t+`) or no bytes requested!`);if(t>r-1)throw Error(`only `+r+` bytes available! programmer error!`);var i=new XMLHttpRequest;if(i.open(`GET`,n,!1),r!==o&&i.setRequestHeader(`Range`,`bytes=`+e+`-`+t),i.responseType=`arraybuffer`,i.overrideMimeType&&i.overrideMimeType(`text/plain; charset=x-user-defined`),i.send(null),!(i.status>=200&&i.status<300||i.status===304))throw Error(`Couldn't load `+n+`. Status: `+i.status);return i.response===void 0?ke(i.responseText||``,!0):new Uint8Array(i.response||[])})(t,i)),s.chunks[e]===void 0)throw Error(`doXHR failed!`);return s.chunks[e]}),!a&&r||(o=r=1,r=this.getter(0).length,o=r,h(`LazyFiles on gzip forces download of the whole file when length is accessed`)),this._length=r,this._chunkSize=o,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<`u`){if(!s)throw`Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc`;var o={isDevice:!1,contents:new a}}else o={isDevice:!1,url:n};var c=Y.createFile(e,t,o,r,i);o.contents?c.contents=o.contents:o.url&&(c.contents=null,c.url=o.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var l={};function u(e,t,n,r,i){var a=e.node.contents;if(i>=a.length)return 0;var o=Math.min(a.length-i,r);if(O(o>=0),a.slice)for(var s=0;s<o;s++)t[n+s]=a[i+s];else for(s=0;s<o;s++)t[n+s]=a.get(i+s);return o}return Object.keys(c.stream_ops).forEach(e=>{var t=c.stream_ops[e];l[e]=(...e)=>(Y.forceLoadFile(c),t(...e))}),l.read=(e,t,n,r,i)=>(Y.forceLoadFile(c),u(e,t,n,r,i)),l.mmap=(e,t,n,r,i)=>{Y.forceLoadFile(c);var a=Ne(t);if(!a)throw new Y.ErrnoError(48);return u(e,y,a,t,n),{ptr:a,allocated:!0}},c.stream_ops=l,c},absolutePath(){F(`FS.absolutePath has been removed; use PATH_FS.resolve instead`)},createFolder(){F(`FS.createFolder has been removed; use FS.mkdir instead`)},createLink(){F(`FS.createLink has been removed; use FS.symlink instead`)},joinPath(){F(`FS.joinPath has been removed; use PATH.join instead`)},mmapAlloc(){F(`FS.mmapAlloc has been replaced by the top level function mmapAlloc`)},standardizePath(){F(`FS.standardizePath has been removed; use PATH.normalize instead`)}},X={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if(G.isAbs(t))return t;var r;if(r=e===-100?Y.cwd():X.getStreamFromFD(e).path,t.length==0){if(!n)throw new Y.ErrnoError(44);return r}return G.join2(r,t)},doStat(e,t,n){var r=e(t);C[n>>2]=r.dev,C[n+4>>2]=r.mode,w[n+8>>2]=r.nlink,C[n+12>>2]=r.uid,C[n+16>>2]=r.gid,C[n+20>>2]=r.rdev,L=[r.size>>>0,(I=r.size,+Math.abs(I)>=1?I>0?Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],C[n+24>>2]=L[0],C[n+28>>2]=L[1],C[n+32>>2]=4096,C[n+36>>2]=r.blocks;var i=r.atime.getTime(),a=r.mtime.getTime(),o=r.ctime.getTime();return L=[Math.floor(i/1e3)>>>0,(I=Math.floor(i/1e3),+Math.abs(I)>=1?I>0?Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],C[n+40>>2]=L[0],C[n+44>>2]=L[1],w[n+48>>2]=i%1e3*1e3*1e3,L=[Math.floor(a/1e3)>>>0,(I=Math.floor(a/1e3),+Math.abs(I)>=1?I>0?Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],C[n+56>>2]=L[0],C[n+60>>2]=L[1],w[n+64>>2]=a%1e3*1e3*1e3,L=[Math.floor(o/1e3)>>>0,(I=Math.floor(o/1e3),+Math.abs(I)>=1?I>0?Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],C[n+72>>2]=L[0],C[n+76>>2]=L[1],w[n+80>>2]=o%1e3*1e3*1e3,L=[r.ino>>>0,(I=r.ino,+Math.abs(I)>=1?I>0?Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],C[n+88>>2]=L[0],C[n+92>>2]=L[1],0},doMsync(e,t,n,r,i){if(!Y.isFile(t.node.mode))throw new Y.ErrnoError(43);if(2&r)return 0;var a=b.slice(e,e+n);Y.msync(t,a,i,n,r)},getStreamFromFD:e=>Y.getStreamChecked(e),varargs:void 0,getStr:e=>W(e)},Le=(e,t)=>(O(e==e>>>0||e==(0|e)),O(t===(0|t)),t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN),Re=(e,t,n)=>(O(typeof n==`number`,`stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!`),Oe(e,b,t,n)),ze=[0,31,60,91,121,152,182,213,244,274,305,335],Be=[0,31,59,90,120,151,181,212,243,273,304,334],Ve=e=>{var t=_.buffer,n=(e-t.byteLength+65535)/65536|0;try{return _.grow(n),k(),1}catch(n){g(`growMemory: Attempted to grow heap from ${t.byteLength} bytes to ${e} bytes, but got error: ${n}`)}},He={},Ue=()=>{if(!Ue.strings){var e={USER:`web_user`,LOGNAME:`web_user`,PATH:`/`,PWD:`/`,HOME:`/home/web_user`,LANG:(typeof navigator==`object`&&navigator.languages&&navigator.languages[0]||`C`).replace(`-`,`_`)+`.UTF-8`,_:f||`./this.program`};for(var t in He)He[t]===void 0?delete e[t]:e[t]=He[t];var n=[];for(var t in e)n.push(`${t}=${e[t]}`);Ue.strings=n}return Ue.strings},We=[],Z=e=>{var t=We[e];return t||(e>=We.length&&(We.length=e+1),We[e]=t=q.get(e)),O(q.get(e)==t,`JavaScript-side Wasm function table mirror is out of date!`),t},Ge=typeof TextDecoder<`u`?new TextDecoder(`utf-16le`):void 0,Ke=(e,t)=>{O(e<16384),e<128?t.push(e):t.push(e%128|128,e>>7)},qe=(e,t)=>{if(O(!t.includes(`j`),`i64 not permitted in function signatures when WASM_BIGINT is disabled`),typeof WebAssembly.Function==`function`)return new WebAssembly.Function((e=>{O(!e.includes(`j`),`i64 not permitted in function signatures when WASM_BIGINT is disabled`);for(var t={i:`i32`,j:`i64`,f:`f32`,d:`f64`,e:`externref`,p:`i32`},n={parameters:[],results:e[0]==`v`?[]:[t[e[0]]]},r=1;r<e.length;++r)O(e[r]in t,`invalid signature char: `+e[r]),n.parameters.push(t[e[r]]);return n})(t),e);var n=[1];((e,t)=>{var n=e.slice(0,1),r=e.slice(1),i={i:127,p:127,j:126,f:125,d:124,e:111};t.push(96),Ke(r.length,t);for(var a=0;a<r.length;++a)O(r[a]in i,`invalid signature char: `+r[a]),t.push(i[r[a]]);n==`v`?t.push(0):t.push(1,i[n])})(t,n);var r=[0,97,115,109,1,0,0,0,1];Ke(n.length,r),r.push(...n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(i,{e:{f:e}}).exports.f},Je=e=>(Ae||(Ae=new WeakMap,((e,t)=>{if(Ae)for(var n=e;n<e+t;n++){var r=Z(n);r&&Ae.set(r,n)}})(0,q.length)),Ae.get(e)||0),Ye=[],Xe=(e,t)=>{q.set(e,t),We[e]=q.get(e)},Ze=e=>ct(e),Qe=(e,t,n,r,a)=>{var o={string:e=>{var t=0;return e!=null&&e!==0&&(t=(e=>{var t=De(e)+1,n=Ze(t);return Re(e,n,t),n})(e)),t},array:e=>{var t,n,r=Ze(e.length);return n=r,O((t=e).length>=0,`writeArrayToMemory array must have a length (should be an array or typed array)`),y.set(t,n),r}},s=(e=>{var t=i[`_`+e];return O(t,`Cannot call unknown function `+e+`, make sure it is exported`),t})(e),c=[],l=0;if(O(t!==`array`,`Return type should not be "array".`),r)for(var u=0;u<r.length;u++){var d=o[n[u]];d?(l===0&&(l=H()),c[u]=d(r[u])):c[u]=r[u]}var f=s(...c);return f=function(e){return l!==0&&V(l),function(e){return t===`string`?W(e):t===`boolean`?!!e:e}(e)}(f)};Y.createPreloadedFile=(e,t,n,r,i,a,o,s,l,u)=>{var d=t?K.resolve(G.join2(e,t)):e,f=se(`cp ${d}`);function p(n){function c(n){u?.(),s||((e,t,n,r,i,a)=>{Y.createDataFile(e,t,n,r,i,a)})(e,t,n,r,i,l),a?.(),le(f)}((e,t,n,r)=>{typeof Browser<`u`&&Browser.init();var i=!1;return Pe.forEach(a=>{i||a.canHandle(t)&&(a.handle(e,t,n,r),i=!0)}),i})(n,d,c,()=>{o?.(),le(f)})||c(n)}ce(f),typeof n==`string`?((e,t,n,r)=>{var i=r?``:se(`al ${e}`);c(e).then(n=>{O(n,`Loading data file "${e}" failed (no arrayBuffer).`),t(new Uint8Array(n)),i&&le(i)},t=>{if(!n)throw`Loading data file "${e}" failed.`;n()}),i&&ce(i)})(n,p,o):p(n)},Y.staticInit();var $e={__assert_fail:(e,t,n,r)=>{F(`Assertion failed: ${W(e)}, at: `+[t?W(t):`unknown filename`,n,r?W(r):`unknown function`])},__syscall_fcntl64:function(e,t,n){X.varargs=n;try{var r=X.getStreamFromFD(e);switch(t){case 0:if((i=Ce())<0)return-28;for(;Y.streams[i];)i++;return Y.dupStream(r,i).fd;case 1:case 2:case 13:case 14:return 0;case 3:return r.flags;case 4:var i=Ce();return r.flags|=i,0;case 12:return i=we(),x[i+0>>1]=2,0}return-28}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}},__syscall_fstat64:function(e,t){try{var n=X.getStreamFromFD(e);return X.doStat(Y.stat,n.path,t)}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}},__syscall_ftruncate64:function(e,t,n){var r=Le(t,n);try{return isNaN(r)?61:(Y.ftruncate(e,r),0)}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}},__syscall_getdents64:function(e,t,n){try{var r=X.getStreamFromFD(e);r.getdents||=Y.readdir(r.path);for(var i=280,a=0,o=Y.llseek(r,0,1),s=Math.floor(o/i);s<r.getdents.length&&a+i<=n;){var c,l,u=r.getdents[s];if(u===`.`)c=r.node.id,l=4;else if(u===`..`)c=Y.lookupPath(r.path,{parent:!0}).node.id,l=4;else{var d=Y.lookupNode(r.node,u);c=d.id,l=Y.isChrdev(d.mode)?2:Y.isDir(d.mode)?4:Y.isLink(d.mode)?10:8}O(c),L=[c>>>0,(I=c,+Math.abs(I)>=1?I>0?Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],C[t+a>>2]=L[0],C[t+a+4>>2]=L[1],L=[(s+1)*i>>>0,(I=(s+1)*i,+Math.abs(I)>=1?I>0?Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],C[t+a+8>>2]=L[0],C[t+a+12>>2]=L[1],x[t+a+16>>1]=280,y[t+a+18]=l,Re(u,t+a+19,256),a+=i,s+=1}return Y.llseek(r,s*i,0),a}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}},__syscall_ioctl:function(e,t,n){X.varargs=n;try{var r=X.getStreamFromFD(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return r.tty?0:-59;case 21505:if(!r.tty)return-59;if(r.tty.ops.ioctl_tcgets){var i=r.tty.ops.ioctl_tcgets(r),a=we();C[a>>2]=i.c_iflag||0,C[a+4>>2]=i.c_oflag||0,C[a+8>>2]=i.c_cflag||0,C[a+12>>2]=i.c_lflag||0;for(var o=0;o<32;o++)y[a+o+17]=i.c_cc[o]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!r.tty)return-59;if(r.tty.ops.ioctl_tcsets){a=we();var s=C[a>>2],c=C[a+4>>2],l=C[a+8>>2],u=C[a+12>>2],d=[];for(o=0;o<32;o++)d.push(y[a+o+17]);return r.tty.ops.ioctl_tcsets(r.tty,t,{c_iflag:s,c_oflag:c,c_cflag:l,c_lflag:u,c_cc:d})}return 0;case 21519:return r.tty?(a=we(),C[a>>2]=0,0):-59;case 21520:return r.tty?-28:-59;case 21531:return a=we(),Y.ioctl(r,t,a);case 21523:if(!r.tty)return-59;if(r.tty.ops.ioctl_tiocgwinsz){var f=r.tty.ops.ioctl_tiocgwinsz(r.tty);a=we(),x[a>>1]=f[0],x[a+2>>1]=f[1]}return 0;default:return-28}}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}},__syscall_lstat64:function(e,t){try{return e=X.getStr(e),X.doStat(Y.lstat,e,t)}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}},__syscall_newfstatat:function(e,t,n,r){try{t=X.getStr(t);var i=256&r,a=4096&r;return O(!(r&=-6401),`unknown flags in __syscall_newfstatat: ${r}`),t=X.calculateAt(e,t,a),X.doStat(i?Y.lstat:Y.stat,t,n)}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}},__syscall_openat:function(e,t,n,r){X.varargs=r;try{t=X.getStr(t),t=X.calculateAt(e,t);var i=r?Ce():0;return Y.open(t,n,i).fd}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}},__syscall_rmdir:function(e){try{return e=X.getStr(e),Y.rmdir(e),0}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}},__syscall_stat64:function(e,t){try{return e=X.getStr(e),X.doStat(Y.stat,e,t)}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}},__syscall_unlinkat:function(e,t,n){try{return t=X.getStr(t),t=X.calculateAt(e,t),n===0?Y.unlink(t):n===512?Y.rmdir(t):F(`Invalid flags passed to unlinkat`),0}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return-e.errno}},_abort_js:()=>{F(`native code called abort()`)},_emscripten_memcpy_js:(e,t,n)=>b.copyWithin(e,t,t+n),_emscripten_throw_longjmp:()=>{throw 1/0},_gmtime_js:function(e,t,n){var r=Le(e,t),i=new Date(1e3*r);C[n>>2]=i.getUTCSeconds(),C[n+4>>2]=i.getUTCMinutes(),C[n+8>>2]=i.getUTCHours(),C[n+12>>2]=i.getUTCDate(),C[n+16>>2]=i.getUTCMonth(),C[n+20>>2]=i.getUTCFullYear()-1900,C[n+24>>2]=i.getUTCDay();var a=Date.UTC(i.getUTCFullYear(),0,1,0,0,0,0),o=(i.getTime()-a)/864e5|0;C[n+28>>2]=o},_localtime_js:function(e,t,n){var r=Le(e,t),i=new Date(1e3*r);C[n>>2]=i.getSeconds(),C[n+4>>2]=i.getMinutes(),C[n+8>>2]=i.getHours(),C[n+12>>2]=i.getDate(),C[n+16>>2]=i.getMonth(),C[n+20>>2]=i.getFullYear()-1900,C[n+24>>2]=i.getDay();var a=0|(e=>{var t;return((t=e.getFullYear())%4!=0||t%100==0&&t%400!=0?Be:ze)[e.getMonth()]+e.getDate()-1})(i);C[n+28>>2]=a,C[n+36>>2]=-60*i.getTimezoneOffset();var o=new Date(i.getFullYear(),0,1),s=new Date(i.getFullYear(),6,1).getTimezoneOffset(),c=o.getTimezoneOffset(),l=0|(s!=c&&i.getTimezoneOffset()==Math.min(c,s));C[n+32>>2]=l},_tzset_js:(e,t,n,r)=>{var i=new Date().getFullYear(),a=new Date(i,0,1),o=new Date(i,6,1),s=a.getTimezoneOffset(),c=o.getTimezoneOffset(),l=Math.max(s,c);w[e>>2]=60*l,C[t>>2]=Number(s!=c);var u=e=>{var t=e>=0?`-`:`+`,n=Math.abs(e);return`UTC${t}${String(Math.floor(n/60)).padStart(2,`0`)}${String(n%60).padStart(2,`0`)}`},d=u(s),f=u(c);O(d),O(f),O(De(d)<=16,`timezone name truncated to fit in TZNAME_MAX (${d})`),O(De(f)<=16,`timezone name truncated to fit in TZNAME_MAX (${f})`),c<s?(Re(d,n,17),Re(f,r,17)):(Re(d,r,17),Re(f,n,17))},emscripten_date_now:()=>Date.now(),emscripten_resize_heap:e=>{var t=b.length;O((e>>>=0)>t);var n=2147483648;if(e>n)return g(`Cannot enlarge memory, requested ${e} bytes, but the limit is 2147483648 bytes!`),!1;for(var r=1;r<=4;r*=2){var i=t*(1+.2/r);i=Math.min(i,e+100663296);var a=Math.min(n,Me(Math.max(e,i),65536));if(Ve(a))return!0}return g(`Failed to grow the heap from ${t} bytes to ${a} bytes, not enough memory!`),!1},environ_get:(e,t)=>{var n=0;return Ue().forEach((r,i)=>{var a=t+n;w[e+4*i>>2]=a,((e,t)=>{for(var n=0;n<e.length;++n)O(e.charCodeAt(n)===(255&e.charCodeAt(n))),y[t++]=e.charCodeAt(n);y[t]=0})(r,a),n+=r.length+1}),0},environ_sizes_get:(e,t)=>{var n=Ue();w[e>>2]=n.length;var r=0;return n.forEach(e=>r+=e.length+1),w[t>>2]=r,0},fd_close:function(e){try{var t=X.getStreamFromFD(e);return Y.close(t),0}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return e.errno}},fd_read:function(e,t,n,r){try{var i=((e,t,n,r)=>{for(var i=0,a=0;a<n;a++){var o=w[t>>2],s=w[t+4>>2];t+=8;var c=Y.read(e,y,o,s,r);if(c<0)return-1;if(i+=c,c<s)break;r!==void 0&&(r+=c)}return i})(X.getStreamFromFD(e),t,n);return w[r>>2]=i,0}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return e.errno}},fd_seek:function(e,t,n,r,i){var a=Le(t,n);try{if(isNaN(a))return 61;var o=X.getStreamFromFD(e);return Y.llseek(o,a,r),L=[o.position>>>0,(I=o.position,+Math.abs(I)>=1?I>0?Math.floor(I/4294967296)>>>0:~~+Math.ceil((I-+(~~I>>>0))/4294967296)>>>0:0)],C[i>>2]=L[0],C[i+4>>2]=L[1],o.getdents&&a===0&&r===0&&(o.getdents=null),0}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return e.errno}},fd_sync:function(e){try{var t=X.getStreamFromFD(e);return t.stream_ops?.fsync?t.stream_ops.fsync(t):0}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return e.errno}},fd_write:function(e,t,n,r){try{var i=((e,t,n,r)=>{for(var i=0,a=0;a<n;a++){var o=w[t>>2],s=w[t+4>>2];t+=8;var c=Y.write(e,y,o,s,r);if(c<0)return-1;if(i+=c,c<s)break;r!==void 0&&(r+=c)}return i})(X.getStreamFromFD(e),t,n);return w[r>>2]=i,0}catch(e){if(Y===void 0||e.name!==`ErrnoError`)throw e;return e.errno}},invoke_ii:function(e,t){var n=H();try{return Z(e)(t)}catch(e){if(V(n),e!==e+0)throw e;$(1,0)}},invoke_iii:function(e,t,n){var r=H();try{return Z(e)(t,n)}catch(e){if(V(r),e!==e+0)throw e;$(1,0)}},invoke_iiii:function(e,t,n,r){var i=H();try{return Z(e)(t,n,r)}catch(e){if(V(i),e!==e+0)throw e;$(1,0)}},invoke_iiiii:function(e,t,n,r,i){var a=H();try{return Z(e)(t,n,r,i)}catch(e){if(V(a),e!==e+0)throw e;$(1,0)}},invoke_v:function(e){var t=H();try{Z(e)()}catch(e){if(V(t),e!==e+0)throw e;$(1,0)}},invoke_vii:function(e,t,n){var r=H();try{Z(e)(t,n)}catch(e){if(V(r),e!==e+0)throw e;$(1,0)}},invoke_viii:function(e,t,n,r){var i=H();try{Z(e)(t,n,r)}catch(e){if(V(i),e!==e+0)throw e;$(1,0)}},invoke_viiii:function(e,t,n,r,i){var a=H();try{Z(e)(t,n,r,i)}catch(e){if(V(a),e!==e+0)throw e;$(1,0)}},invoke_viiiiiiiii:function(e,t,n,r,i,a,o,s,c,l){var u=H();try{Z(e)(t,n,r,i,a,o,s,c,l)}catch(e){if(V(u),e!==e+0)throw e;$(1,0)}}},Q=function(){var e={env:$e,wasi_snapshot_preview1:$e};function t(e,t){var n;return Q=e.exports,i.wasmExports=Q,O(_=Q.memory,`memory not found in wasm exports`),k(),O(q=Q.__indirect_function_table,`table not found in wasm exports`),n=Q.__wasm_call_ctors,ne.unshift(n),le(`wasm-instantiate`),Q}ce(`wasm-instantiate`);var n,a,o,s,c=i;if(i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){g(`Module.instantiateWasm callback failed with error: ${e}`),r(e)}return ue??=pe(),(n=v,a=ue,o=e,s=function(e){O(i===c,`the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?`),c=null,t(e.instance)},n||typeof WebAssembly.instantiateStreaming!=`function`||de(a)||typeof fetch!=`function`?z(a,o,s):fetch(a,{credentials:`same-origin`}).then(e=>WebAssembly.instantiateStreaming(e,o).then(s,function(e){return g(`wasm streaming compile failed: ${e}`),g(`falling back to ArrayBuffer instantiation`),z(a,o,s)}))).catch(r),{}}();i._PDFiumExt_Init=R(`PDFiumExt_Init`,0),i._FPDF_InitLibraryWithConfig=R(`FPDF_InitLibraryWithConfig`,1),i._PDFiumExt_OpenFileWriter=R(`PDFiumExt_OpenFileWriter`,0),i._PDFiumExt_GetFileWriterSize=R(`PDFiumExt_GetFileWriterSize`,1),i._PDFiumExt_GetFileWriterData=R(`PDFiumExt_GetFileWriterData`,3),i._PDFiumExt_CloseFileWriter=R(`PDFiumExt_CloseFileWriter`,1),i._PDFiumExt_SaveAsCopy=R(`PDFiumExt_SaveAsCopy`,2),i._FPDF_SaveAsCopy=R(`FPDF_SaveAsCopy`,3),i._PDFiumExt_OpenFormFillInfo=R(`PDFiumExt_OpenFormFillInfo`,0),i._PDFiumExt_CloseFormFillInfo=R(`PDFiumExt_CloseFormFillInfo`,1),i._PDFiumExt_InitFormFillEnvironment=R(`PDFiumExt_InitFormFillEnvironment`,2),i._FPDFDOC_InitFormFillEnvironment=R(`FPDFDOC_InitFormFillEnvironment`,2),i._PDFiumExt_ExitFormFillEnvironment=R(`PDFiumExt_ExitFormFillEnvironment`,1),i._FPDFDOC_ExitFormFillEnvironment=R(`FPDFDOC_ExitFormFillEnvironment`,1),i._EPDFNamedDest_SetDest=R(`EPDFNamedDest_SetDest`,3),i._EPDFNamedDest_Remove=R(`EPDFNamedDest_Remove`,2),i._EPDFDest_CreateView=R(`EPDFDest_CreateView`,4),i._EPDFDest_CreateXYZ=R(`EPDFDest_CreateXYZ`,7),i._EPDFDest_CreateRemoteView=R(`EPDFDest_CreateRemoteView`,5),i._EPDFDest_CreateRemoteXYZ=R(`EPDFDest_CreateRemoteXYZ`,8),i._EPDFAction_CreateGoTo=R(`EPDFAction_CreateGoTo`,2),i._EPDFAction_CreateGoToNamed=R(`EPDFAction_CreateGoToNamed`,2),i._EPDFAction_CreateLaunch=R(`EPDFAction_CreateLaunch`,2),i._EPDFAction_CreateRemoteGoToByName=R(`EPDFAction_CreateRemoteGoToByName`,3),i._EPDFAction_CreateRemoteGoToDest=R(`EPDFAction_CreateRemoteGoToDest`,3),i._EPDFAction_CreateURI=R(`EPDFAction_CreateURI`,2),i._EPDFBookmark_Create=R(`EPDFBookmark_Create`,2),i._EPDFBookmark_Delete=R(`EPDFBookmark_Delete`,2),i._EPDFBookmark_AppendChild=R(`EPDFBookmark_AppendChild`,3),i._EPDFBookmark_InsertAfter=R(`EPDFBookmark_InsertAfter`,4),i._EPDFBookmark_Clear=R(`EPDFBookmark_Clear`,1),i._EPDFBookmark_SetTitle=R(`EPDFBookmark_SetTitle`,2),i._EPDFBookmark_SetDest=R(`EPDFBookmark_SetDest`,3),i._EPDFBookmark_SetAction=R(`EPDFBookmark_SetAction`,3),i._EPDFBookmark_ClearTarget=R(`EPDFBookmark_ClearTarget`,1),i._EPDF_PNG_EncodeRGBA=R(`EPDF_PNG_EncodeRGBA`,6),i._FPDFAnnot_IsSupportedSubtype=R(`FPDFAnnot_IsSupportedSubtype`,1),i._FPDFPage_CreateAnnot=R(`FPDFPage_CreateAnnot`,2),i._FPDFPage_GetAnnotCount=R(`FPDFPage_GetAnnotCount`,1),i._FPDFPage_GetAnnot=R(`FPDFPage_GetAnnot`,2),i._FPDFPage_GetAnnotIndex=R(`FPDFPage_GetAnnotIndex`,2),i._FPDFPage_CloseAnnot=R(`FPDFPage_CloseAnnot`,1),i._FPDFPage_RemoveAnnot=R(`FPDFPage_RemoveAnnot`,2),i._FPDFAnnot_GetSubtype=R(`FPDFAnnot_GetSubtype`,1),i._FPDFAnnot_IsObjectSupportedSubtype=R(`FPDFAnnot_IsObjectSupportedSubtype`,1),i._FPDFAnnot_UpdateObject=R(`FPDFAnnot_UpdateObject`,2),i._FPDFAnnot_AddInkStroke=R(`FPDFAnnot_AddInkStroke`,3),i._FPDFAnnot_RemoveInkList=R(`FPDFAnnot_RemoveInkList`,1),i._FPDFAnnot_AppendObject=R(`FPDFAnnot_AppendObject`,2),i._FPDFAnnot_GetObjectCount=R(`FPDFAnnot_GetObjectCount`,1),i._FPDFAnnot_GetObject=R(`FPDFAnnot_GetObject`,2),i._FPDFAnnot_RemoveObject=R(`FPDFAnnot_RemoveObject`,2),i._FPDFAnnot_SetColor=R(`FPDFAnnot_SetColor`,6),i._FPDFAnnot_GetColor=R(`FPDFAnnot_GetColor`,6),i._FPDFAnnot_HasAttachmentPoints=R(`FPDFAnnot_HasAttachmentPoints`,1),i._FPDFAnnot_SetAttachmentPoints=R(`FPDFAnnot_SetAttachmentPoints`,3),i._FPDFAnnot_AppendAttachmentPoints=R(`FPDFAnnot_AppendAttachmentPoints`,2),i._FPDFAnnot_CountAttachmentPoints=R(`FPDFAnnot_CountAttachmentPoints`,1),i._FPDFAnnot_GetAttachmentPoints=R(`FPDFAnnot_GetAttachmentPoints`,3),i._FPDFAnnot_SetRect=R(`FPDFAnnot_SetRect`,2),i._FPDFAnnot_GetRect=R(`FPDFAnnot_GetRect`,2),i._FPDFAnnot_GetVertices=R(`FPDFAnnot_GetVertices`,3),i._FPDFAnnot_GetInkListCount=R(`FPDFAnnot_GetInkListCount`,1),i._FPDFAnnot_GetInkListPath=R(`FPDFAnnot_GetInkListPath`,4),i._FPDFAnnot_GetLine=R(`FPDFAnnot_GetLine`,3),i._FPDFAnnot_SetBorder=R(`FPDFAnnot_SetBorder`,4),i._FPDFAnnot_GetBorder=R(`FPDFAnnot_GetBorder`,4),i._FPDFAnnot_HasKey=R(`FPDFAnnot_HasKey`,2),i._FPDFAnnot_GetValueType=R(`FPDFAnnot_GetValueType`,2),i._FPDFAnnot_SetStringValue=R(`FPDFAnnot_SetStringValue`,3),i._FPDFAnnot_GetStringValue=R(`FPDFAnnot_GetStringValue`,4),i._FPDFAnnot_GetNumberValue=R(`FPDFAnnot_GetNumberValue`,3),i._FPDFAnnot_SetAP=R(`FPDFAnnot_SetAP`,3),i._FPDFAnnot_GetAP=R(`FPDFAnnot_GetAP`,4),i._FPDFAnnot_GetLinkedAnnot=R(`FPDFAnnot_GetLinkedAnnot`,2),i._FPDFAnnot_GetFlags=R(`FPDFAnnot_GetFlags`,1),i._FPDFAnnot_SetFlags=R(`FPDFAnnot_SetFlags`,2),i._FPDFAnnot_GetFormFieldFlags=R(`FPDFAnnot_GetFormFieldFlags`,2),i._FPDFAnnot_SetFormFieldFlags=R(`FPDFAnnot_SetFormFieldFlags`,3),i._FPDFAnnot_GetFormFieldAtPoint=R(`FPDFAnnot_GetFormFieldAtPoint`,3),i._FPDFAnnot_GetFormFieldName=R(`FPDFAnnot_GetFormFieldName`,4),i._FPDFAnnot_GetFormFieldType=R(`FPDFAnnot_GetFormFieldType`,2),i._FPDFAnnot_GetFormAdditionalActionJavaScript=R(`FPDFAnnot_GetFormAdditionalActionJavaScript`,5),i._FPDFAnnot_GetFormFieldAlternateName=R(`FPDFAnnot_GetFormFieldAlternateName`,4),i._FPDFAnnot_GetFormFieldValue=R(`FPDFAnnot_GetFormFieldValue`,4),i._FPDFAnnot_GetOptionCount=R(`FPDFAnnot_GetOptionCount`,2),i._FPDFAnnot_GetOptionLabel=R(`FPDFAnnot_GetOptionLabel`,5),i._FPDFAnnot_IsOptionSelected=R(`FPDFAnnot_IsOptionSelected`,3),i._FPDFAnnot_GetFontSize=R(`FPDFAnnot_GetFontSize`,3),i._FPDFAnnot_SetFontColor=R(`FPDFAnnot_SetFontColor`,5),i._FPDFAnnot_GetFontColor=R(`FPDFAnnot_GetFontColor`,5),i._FPDFAnnot_IsChecked=R(`FPDFAnnot_IsChecked`,2),i._FPDFAnnot_SetFocusableSubtypes=R(`FPDFAnnot_SetFocusableSubtypes`,3),i._FPDFAnnot_GetFocusableSubtypesCount=R(`FPDFAnnot_GetFocusableSubtypesCount`,1),i._FPDFAnnot_GetFocusableSubtypes=R(`FPDFAnnot_GetFocusableSubtypes`,3),i._FPDFAnnot_GetLink=R(`FPDFAnnot_GetLink`,1),i._FPDFAnnot_GetFormControlCount=R(`FPDFAnnot_GetFormControlCount`,2),i._FPDFAnnot_GetFormControlIndex=R(`FPDFAnnot_GetFormControlIndex`,2),i._FPDFAnnot_GetFormFieldExportValue=R(`FPDFAnnot_GetFormFieldExportValue`,4),i._FPDFAnnot_SetURI=R(`FPDFAnnot_SetURI`,2),i._FPDFAnnot_GetFileAttachment=R(`FPDFAnnot_GetFileAttachment`,1),i._FPDFAnnot_AddFileAttachment=R(`FPDFAnnot_AddFileAttachment`,2),i._EPDFAnnot_SetColor=R(`EPDFAnnot_SetColor`,5),i._EPDFAnnot_GetColor=R(`EPDFAnnot_GetColor`,5),i._EPDFAnnot_ClearColor=R(`EPDFAnnot_ClearColor`,2),i._EPDFAnnot_SetOpacity=R(`EPDFAnnot_SetOpacity`,2),i._EPDFAnnot_GetOpacity=R(`EPDFAnnot_GetOpacity`,2),i._EPDFAnnot_GetBorderEffect=R(`EPDFAnnot_GetBorderEffect`,2),i._EPDFAnnot_GetRectangleDifferences=R(`EPDFAnnot_GetRectangleDifferences`,5),i._EPDFAnnot_GetBorderDashPatternCount=R(`EPDFAnnot_GetBorderDashPatternCount`,1),i._EPDFAnnot_GetBorderDashPattern=R(`EPDFAnnot_GetBorderDashPattern`,3),i._EPDFAnnot_SetBorderDashPattern=R(`EPDFAnnot_SetBorderDashPattern`,3),i._EPDFAnnot_GetBorderStyle=R(`EPDFAnnot_GetBorderStyle`,2),i._EPDFAnnot_SetBorderStyle=R(`EPDFAnnot_SetBorderStyle`,3),i._EPDFAnnot_GenerateAppearance=R(`EPDFAnnot_GenerateAppearance`,1),i._EPDFAnnot_GenerateAppearanceWithBlend=R(`EPDFAnnot_GenerateAppearanceWithBlend`,2),i._EPDFAnnot_GetBlendMode=R(`EPDFAnnot_GetBlendMode`,1),i._EPDFAnnot_SetIntent=R(`EPDFAnnot_SetIntent`,2),i._EPDFAnnot_GetIntent=R(`EPDFAnnot_GetIntent`,3),i._EPDFAnnot_GetRichContent=R(`EPDFAnnot_GetRichContent`,3),i._EPDFAnnot_SetLineEndings=R(`EPDFAnnot_SetLineEndings`,3),i._EPDFAnnot_GetLineEndings=R(`EPDFAnnot_GetLineEndings`,3),i._EPDFAnnot_SetVertices=R(`EPDFAnnot_SetVertices`,3),i._EPDFAnnot_SetLine=R(`EPDFAnnot_SetLine`,3),i._EPDFAnnot_SetDefaultAppearance=R(`EPDFAnnot_SetDefaultAppearance`,6),i._EPDFAnnot_GetDefaultAppearance=R(`EPDFAnnot_GetDefaultAppearance`,6),i._EPDFAnnot_SetTextAlignment=R(`EPDFAnnot_SetTextAlignment`,2),i._EPDFAnnot_GetTextAlignment=R(`EPDFAnnot_GetTextAlignment`,1),i._EPDFAnnot_SetVerticalAlignment=R(`EPDFAnnot_SetVerticalAlignment`,2),i._EPDFAnnot_GetVerticalAlignment=R(`EPDFAnnot_GetVerticalAlignment`,1),i._EPDFPage_GetAnnotByName=R(`EPDFPage_GetAnnotByName`,2),i._EPDFPage_RemoveAnnotByName=R(`EPDFPage_RemoveAnnotByName`,2),i._EPDFAnnot_SetLinkedAnnot=R(`EPDFAnnot_SetLinkedAnnot`,3),i._EPDFPage_GetAnnotCountRaw=R(`EPDFPage_GetAnnotCountRaw`,2),i._EPDFPage_GetAnnotRaw=R(`EPDFPage_GetAnnotRaw`,3),i._EPDFPage_RemoveAnnotRaw=R(`EPDFPage_RemoveAnnotRaw`,3),i._EPDFAnnot_SetIcon=R(`EPDFAnnot_SetIcon`,2),i._EPDFAnnot_GetIcon=R(`EPDFAnnot_GetIcon`,1),i._EPDFAnnot_UpdateAppearanceToRect=R(`EPDFAnnot_UpdateAppearanceToRect`,2),i._EPDFPage_CreateAnnot=R(`EPDFPage_CreateAnnot`,2),i._FPDFDoc_GetAttachmentCount=R(`FPDFDoc_GetAttachmentCount`,1),i._FPDFDoc_AddAttachment=R(`FPDFDoc_AddAttachment`,2),i._FPDFDoc_GetAttachment=R(`FPDFDoc_GetAttachment`,2),i._FPDFDoc_DeleteAttachment=R(`FPDFDoc_DeleteAttachment`,2),i._FPDFAttachment_GetName=R(`FPDFAttachment_GetName`,3),i._FPDFAttachment_HasKey=R(`FPDFAttachment_HasKey`,2),i._FPDFAttachment_GetValueType=R(`FPDFAttachment_GetValueType`,2),i._FPDFAttachment_SetStringValue=R(`FPDFAttachment_SetStringValue`,3),i._FPDFAttachment_GetStringValue=R(`FPDFAttachment_GetStringValue`,4),i._FPDFAttachment_SetFile=R(`FPDFAttachment_SetFile`,4),i._FPDFAttachment_GetFile=R(`FPDFAttachment_GetFile`,4),i._FPDFAttachment_GetSubtype=R(`FPDFAttachment_GetSubtype`,3),i._EPDFAttachment_SetSubtype=R(`EPDFAttachment_SetSubtype`,2),i._EPDFAttachment_SetDescription=R(`EPDFAttachment_SetDescription`,2),i._EPDFAttachment_GetDescription=R(`EPDFAttachment_GetDescription`,3),i._EPDFAttachment_GetIntegerValue=R(`EPDFAttachment_GetIntegerValue`,3),i._FPDFCatalog_IsTagged=R(`FPDFCatalog_IsTagged`,1),i._FPDFCatalog_SetLanguage=R(`FPDFCatalog_SetLanguage`,2),i._EPDFCatalog_GetLanguage=R(`EPDFCatalog_GetLanguage`,3),i._FPDFAvail_Create=R(`FPDFAvail_Create`,2),i._FPDFAvail_Destroy=R(`FPDFAvail_Destroy`,1),i._FPDFAvail_IsDocAvail=R(`FPDFAvail_IsDocAvail`,2),i._FPDFAvail_GetDocument=R(`FPDFAvail_GetDocument`,2),i._FPDFAvail_GetFirstPageNum=R(`FPDFAvail_GetFirstPageNum`,1),i._FPDFAvail_IsPageAvail=R(`FPDFAvail_IsPageAvail`,3),i._FPDFAvail_IsFormAvail=R(`FPDFAvail_IsFormAvail`,2),i._FPDFAvail_IsLinearized=R(`FPDFAvail_IsLinearized`,1),i._FPDFBookmark_GetFirstChild=R(`FPDFBookmark_GetFirstChild`,2),i._FPDFBookmark_GetNextSibling=R(`FPDFBookmark_GetNextSibling`,2),i._FPDFBookmark_GetTitle=R(`FPDFBookmark_GetTitle`,3),i._FPDFBookmark_GetCount=R(`FPDFBookmark_GetCount`,1),i._FPDFBookmark_Find=R(`FPDFBookmark_Find`,2),i._FPDFBookmark_GetDest=R(`FPDFBookmark_GetDest`,2),i._FPDFBookmark_GetAction=R(`FPDFBookmark_GetAction`,1),i._FPDFAction_GetType=R(`FPDFAction_GetType`,1),i._FPDFAction_GetDest=R(`FPDFAction_GetDest`,2),i._FPDFAction_GetFilePath=R(`FPDFAction_GetFilePath`,3),i._FPDFAction_GetURIPath=R(`FPDFAction_GetURIPath`,4),i._FPDFDest_GetDestPageIndex=R(`FPDFDest_GetDestPageIndex`,2),i._FPDFDest_GetView=R(`FPDFDest_GetView`,3),i._FPDFDest_GetLocationInPage=R(`FPDFDest_GetLocationInPage`,7),i._FPDFLink_GetLinkAtPoint=R(`FPDFLink_GetLinkAtPoint`,3),i._FPDFLink_GetLinkZOrderAtPoint=R(`FPDFLink_GetLinkZOrderAtPoint`,3),i._FPDFLink_GetDest=R(`FPDFLink_GetDest`,2),i._FPDFLink_GetAction=R(`FPDFLink_GetAction`,1),i._FPDFLink_Enumerate=R(`FPDFLink_Enumerate`,3),i._FPDFLink_GetAnnot=R(`FPDFLink_GetAnnot`,2),i._FPDFLink_GetAnnotRect=R(`FPDFLink_GetAnnotRect`,2),i._FPDFLink_CountQuadPoints=R(`FPDFLink_CountQuadPoints`,1),i._FPDFLink_GetQuadPoints=R(`FPDFLink_GetQuadPoints`,3),i._FPDF_GetPageAAction=R(`FPDF_GetPageAAction`,2),i._FPDF_GetFileIdentifier=R(`FPDF_GetFileIdentifier`,4),i._FPDF_GetMetaText=R(`FPDF_GetMetaText`,4),i._FPDF_GetPageLabel=R(`FPDF_GetPageLabel`,4),i._EPDF_SetMetaText=R(`EPDF_SetMetaText`,3),i._EPDF_HasMetaText=R(`EPDF_HasMetaText`,2),i._EPDF_GetMetaTrapped=R(`EPDF_GetMetaTrapped`,1),i._EPDF_SetMetaTrapped=R(`EPDF_SetMetaTrapped`,2),i._EPDF_GetMetaKeyCount=R(`EPDF_GetMetaKeyCount`,2),i._EPDF_GetMetaKeyName=R(`EPDF_GetMetaKeyName`,5),i._FPDFPageObj_NewImageObj=R(`FPDFPageObj_NewImageObj`,1),i._FPDFImageObj_LoadJpegFile=R(`FPDFImageObj_LoadJpegFile`,4),i._FPDFImageObj_LoadJpegFileInline=R(`FPDFImageObj_LoadJpegFileInline`,4),i._FPDFImageObj_SetMatrix=R(`FPDFImageObj_SetMatrix`,7),i._FPDFImageObj_SetBitmap=R(`FPDFImageObj_SetBitmap`,4),i._FPDFImageObj_GetBitmap=R(`FPDFImageObj_GetBitmap`,1),i._FPDFImageObj_GetRenderedBitmap=R(`FPDFImageObj_GetRenderedBitmap`,3),i._FPDFImageObj_GetImageDataDecoded=R(`FPDFImageObj_GetImageDataDecoded`,3),i._FPDFImageObj_GetImageDataRaw=R(`FPDFImageObj_GetImageDataRaw`,3),i._FPDFImageObj_GetImageFilterCount=R(`FPDFImageObj_GetImageFilterCount`,1),i._FPDFImageObj_GetImageFilter=R(`FPDFImageObj_GetImageFilter`,4),i._FPDFImageObj_GetImageMetadata=R(`FPDFImageObj_GetImageMetadata`,3),i._FPDFImageObj_GetImagePixelSize=R(`FPDFImageObj_GetImagePixelSize`,3),i._FPDFImageObj_GetIccProfileDataDecoded=R(`FPDFImageObj_GetIccProfileDataDecoded`,5),i._FPDF_CreateNewDocument=R(`FPDF_CreateNewDocument`,0),i._FPDFPage_Delete=R(`FPDFPage_Delete`,2),i._FPDF_MovePages=R(`FPDF_MovePages`,4),i._FPDFPage_New=R(`FPDFPage_New`,4),i._FPDFPage_GetRotation=R(`FPDFPage_GetRotation`,1),i._FPDFPage_InsertObject=R(`FPDFPage_InsertObject`,2),i._FPDFPage_InsertObjectAtIndex=R(`FPDFPage_InsertObjectAtIndex`,3),i._FPDFPage_RemoveObject=R(`FPDFPage_RemoveObject`,2),i._FPDFPage_CountObjects=R(`FPDFPage_CountObjects`,1),i._FPDFPage_GetObject=R(`FPDFPage_GetObject`,2),i._FPDFPage_HasTransparency=R(`FPDFPage_HasTransparency`,1),i._FPDFPageObj_Destroy=R(`FPDFPageObj_Destroy`,1),i._FPDFPageObj_GetMarkedContentID=R(`FPDFPageObj_GetMarkedContentID`,1),i._FPDFPageObj_CountMarks=R(`FPDFPageObj_CountMarks`,1),i._FPDFPageObj_GetMark=R(`FPDFPageObj_GetMark`,2),i._FPDFPageObj_AddMark=R(`FPDFPageObj_AddMark`,2),i._FPDFPageObj_RemoveMark=R(`FPDFPageObj_RemoveMark`,2),i._FPDFPageObjMark_GetName=R(`FPDFPageObjMark_GetName`,4),i._FPDFPageObjMark_CountParams=R(`FPDFPageObjMark_CountParams`,1),i._FPDFPageObjMark_GetParamKey=R(`FPDFPageObjMark_GetParamKey`,5),i._FPDFPageObjMark_GetParamValueType=R(`FPDFPageObjMark_GetParamValueType`,2),i._FPDFPageObjMark_GetParamIntValue=R(`FPDFPageObjMark_GetParamIntValue`,3),i._FPDFPageObjMark_GetParamStringValue=R(`FPDFPageObjMark_GetParamStringValue`,5),i._FPDFPageObjMark_GetParamBlobValue=R(`FPDFPageObjMark_GetParamBlobValue`,5),i._FPDFPageObj_HasTransparency=R(`FPDFPageObj_HasTransparency`,1),i._FPDFPageObjMark_SetIntParam=R(`FPDFPageObjMark_SetIntParam`,5),i._FPDFPageObjMark_SetStringParam=R(`FPDFPageObjMark_SetStringParam`,5),i._FPDFPageObjMark_SetBlobParam=R(`FPDFPageObjMark_SetBlobParam`,6),i._FPDFPageObjMark_RemoveParam=R(`FPDFPageObjMark_RemoveParam`,3),i._FPDFPageObj_GetType=R(`FPDFPageObj_GetType`,1),i._FPDFPageObj_GetIsActive=R(`FPDFPageObj_GetIsActive`,2),i._FPDFPageObj_SetIsActive=R(`FPDFPageObj_SetIsActive`,2),i._FPDFPage_GenerateContent=R(`FPDFPage_GenerateContent`,1),i._FPDFPageObj_Transform=R(`FPDFPageObj_Transform`,7),i._FPDFPageObj_TransformF=R(`FPDFPageObj_TransformF`,2),i._FPDFPageObj_GetMatrix=R(`FPDFPageObj_GetMatrix`,2),i._FPDFPageObj_SetMatrix=R(`FPDFPageObj_SetMatrix`,2),i._FPDFPageObj_SetBlendMode=R(`FPDFPageObj_SetBlendMode`,2),i._FPDFPage_TransformAnnots=R(`FPDFPage_TransformAnnots`,7),i._FPDFPage_SetRotation=R(`FPDFPage_SetRotation`,2),i._FPDFPageObj_SetFillColor=R(`FPDFPageObj_SetFillColor`,5),i._FPDFPageObj_GetFillColor=R(`FPDFPageObj_GetFillColor`,5),i._FPDFPageObj_GetBounds=R(`FPDFPageObj_GetBounds`,5),i._FPDFPageObj_GetRotatedBounds=R(`FPDFPageObj_GetRotatedBounds`,2),i._FPDFPageObj_SetStrokeColor=R(`FPDFPageObj_SetStrokeColor`,5),i._FPDFPageObj_GetStrokeColor=R(`FPDFPageObj_GetStrokeColor`,5),i._FPDFPageObj_SetStrokeWidth=R(`FPDFPageObj_SetStrokeWidth`,2),i._FPDFPageObj_GetStrokeWidth=R(`FPDFPageObj_GetStrokeWidth`,2),i._FPDFPageObj_GetLineJoin=R(`FPDFPageObj_GetLineJoin`,1),i._FPDFPageObj_SetLineJoin=R(`FPDFPageObj_SetLineJoin`,2),i._FPDFPageObj_GetLineCap=R(`FPDFPageObj_GetLineCap`,1),i._FPDFPageObj_SetLineCap=R(`FPDFPageObj_SetLineCap`,2),i._FPDFPageObj_GetDashPhase=R(`FPDFPageObj_GetDashPhase`,2),i._FPDFPageObj_SetDashPhase=R(`FPDFPageObj_SetDashPhase`,2),i._FPDFPageObj_GetDashCount=R(`FPDFPageObj_GetDashCount`,1),i._FPDFPageObj_GetDashArray=R(`FPDFPageObj_GetDashArray`,3),i._FPDFPageObj_SetDashArray=R(`FPDFPageObj_SetDashArray`,4),i._FPDFFormObj_CountObjects=R(`FPDFFormObj_CountObjects`,1),i._FPDFFormObj_GetObject=R(`FPDFFormObj_GetObject`,2),i._FPDFFormObj_RemoveObject=R(`FPDFFormObj_RemoveObject`,2),i._FPDFPageObj_CreateNewPath=R(`FPDFPageObj_CreateNewPath`,2),i._FPDFPageObj_CreateNewRect=R(`FPDFPageObj_CreateNewRect`,4),i._FPDFPath_CountSegments=R(`FPDFPath_CountSegments`,1),i._FPDFPath_GetPathSegment=R(`FPDFPath_GetPathSegment`,2),i._FPDFPath_MoveTo=R(`FPDFPath_MoveTo`,3),i._FPDFPath_LineTo=R(`FPDFPath_LineTo`,3),i._FPDFPath_BezierTo=R(`FPDFPath_BezierTo`,7),i._FPDFPath_Close=R(`FPDFPath_Close`,1),i._FPDFPath_SetDrawMode=R(`FPDFPath_SetDrawMode`,3),i._FPDFPath_GetDrawMode=R(`FPDFPath_GetDrawMode`,3),i._FPDFPathSegment_GetPoint=R(`FPDFPathSegment_GetPoint`,3),i._FPDFPathSegment_GetType=R(`FPDFPathSegment_GetType`,1),i._FPDFPathSegment_GetClose=R(`FPDFPathSegment_GetClose`,1),i._FPDFPageObj_NewTextObj=R(`FPDFPageObj_NewTextObj`,3),i._FPDFText_SetText=R(`FPDFText_SetText`,2),i._FPDFText_SetCharcodes=R(`FPDFText_SetCharcodes`,3),i._FPDFText_LoadFont=R(`FPDFText_LoadFont`,5),i._FPDFText_LoadStandardFont=R(`FPDFText_LoadStandardFont`,2),i._FPDFText_LoadCidType2Font=R(`FPDFText_LoadCidType2Font`,6),i._FPDFTextObj_GetFontSize=R(`FPDFTextObj_GetFontSize`,2),i._FPDFTextObj_GetText=R(`FPDFTextObj_GetText`,4),i._FPDFTextObj_GetRenderedBitmap=R(`FPDFTextObj_GetRenderedBitmap`,4),i._FPDFFont_Close=R(`FPDFFont_Close`,1),i._FPDFPageObj_CreateTextObj=R(`FPDFPageObj_CreateTextObj`,3),i._FPDFTextObj_GetTextRenderMode=R(`FPDFTextObj_GetTextRenderMode`,1),i._FPDFTextObj_SetTextRenderMode=R(`FPDFTextObj_SetTextRenderMode`,2),i._FPDFTextObj_GetFont=R(`FPDFTextObj_GetFont`,1),i._FPDFFont_GetBaseFontName=R(`FPDFFont_GetBaseFontName`,3),i._FPDFFont_GetFamilyName=R(`FPDFFont_GetFamilyName`,3),i._FPDFFont_GetFontData=R(`FPDFFont_GetFontData`,4),i._FPDFFont_GetIsEmbedded=R(`FPDFFont_GetIsEmbedded`,1),i._FPDFFont_GetFlags=R(`FPDFFont_GetFlags`,1),i._FPDFFont_GetWeight=R(`FPDFFont_GetWeight`,1),i._FPDFFont_GetItalicAngle=R(`FPDFFont_GetItalicAngle`,2),i._FPDFFont_GetAscent=R(`FPDFFont_GetAscent`,3),i._FPDFFont_GetDescent=R(`FPDFFont_GetDescent`,3),i._FPDFFont_GetGlyphWidth=R(`FPDFFont_GetGlyphWidth`,4),i._FPDFFont_GetGlyphPath=R(`FPDFFont_GetGlyphPath`,3),i._FPDFGlyphPath_CountGlyphSegments=R(`FPDFGlyphPath_CountGlyphSegments`,1),i._FPDFGlyphPath_GetGlyphPathSegment=R(`FPDFGlyphPath_GetGlyphPathSegment`,2),i._EPDFText_RedactInRect=R(`EPDFText_RedactInRect`,4),i._EPDFText_RedactInQuads=R(`EPDFText_RedactInQuads`,5),i._FPDFDoc_GetPageMode=R(`FPDFDoc_GetPageMode`,1),i._FPDFPage_Flatten=R(`FPDFPage_Flatten`,2),i._FPDFPage_HasFormFieldAtPoint=R(`FPDFPage_HasFormFieldAtPoint`,4),i._FPDFPage_FormFieldZOrderAtPoint=R(`FPDFPage_FormFieldZOrderAtPoint`,4),i._malloc=R(`malloc`,1),i._free=R(`free`,1),i._FORM_OnMouseMove=R(`FORM_OnMouseMove`,5),i._FORM_OnMouseWheel=R(`FORM_OnMouseWheel`,6),i._FORM_OnFocus=R(`FORM_OnFocus`,5),i._FORM_OnLButtonDown=R(`FORM_OnLButtonDown`,5),i._FORM_OnLButtonUp=R(`FORM_OnLButtonUp`,5),i._FORM_OnLButtonDoubleClick=R(`FORM_OnLButtonDoubleClick`,5),i._FORM_OnRButtonDown=R(`FORM_OnRButtonDown`,5),i._FORM_OnRButtonUp=R(`FORM_OnRButtonUp`,5),i._FORM_OnKeyDown=R(`FORM_OnKeyDown`,4),i._FORM_OnKeyUp=R(`FORM_OnKeyUp`,4),i._FORM_OnChar=R(`FORM_OnChar`,4),i._FORM_GetFocusedText=R(`FORM_GetFocusedText`,4),i._FORM_GetSelectedText=R(`FORM_GetSelectedText`,4),i._FORM_ReplaceAndKeepSelection=R(`FORM_ReplaceAndKeepSelection`,3),i._FORM_ReplaceSelection=R(`FORM_ReplaceSelection`,3),i._FORM_SelectAllText=R(`FORM_SelectAllText`,2),i._FORM_CanUndo=R(`FORM_CanUndo`,2),i._FORM_CanRedo=R(`FORM_CanRedo`,2),i._FORM_Undo=R(`FORM_Undo`,2),i._FORM_Redo=R(`FORM_Redo`,2),i._FORM_ForceToKillFocus=R(`FORM_ForceToKillFocus`,1),i._FORM_GetFocusedAnnot=R(`FORM_GetFocusedAnnot`,3),i._FORM_SetFocusedAnnot=R(`FORM_SetFocusedAnnot`,2),i._FPDF_FFLDraw=R(`FPDF_FFLDraw`,9),i._FPDF_SetFormFieldHighlightColor=R(`FPDF_SetFormFieldHighlightColor`,3),i._FPDF_SetFormFieldHighlightAlpha=R(`FPDF_SetFormFieldHighlightAlpha`,2),i._FPDF_RemoveFormFieldHighlight=R(`FPDF_RemoveFormFieldHighlight`,1),i._FORM_OnAfterLoadPage=R(`FORM_OnAfterLoadPage`,2),i._FORM_OnBeforeClosePage=R(`FORM_OnBeforeClosePage`,2),i._FORM_DoDocumentJSAction=R(`FORM_DoDocumentJSAction`,1),i._FORM_DoDocumentOpenAction=R(`FORM_DoDocumentOpenAction`,1),i._FORM_DoDocumentAAction=R(`FORM_DoDocumentAAction`,2),i._FORM_DoPageAAction=R(`FORM_DoPageAAction`,3),i._FORM_SetIndexSelected=R(`FORM_SetIndexSelected`,4),i._FORM_IsIndexSelected=R(`FORM_IsIndexSelected`,3),i._FPDFDoc_GetJavaScriptActionCount=R(`FPDFDoc_GetJavaScriptActionCount`,1),i._FPDFDoc_GetJavaScriptAction=R(`FPDFDoc_GetJavaScriptAction`,2),i._FPDFDoc_CloseJavaScriptAction=R(`FPDFDoc_CloseJavaScriptAction`,1),i._FPDFJavaScriptAction_GetName=R(`FPDFJavaScriptAction_GetName`,3),i._FPDFJavaScriptAction_GetScript=R(`FPDFJavaScriptAction_GetScript`,3),i._FPDF_ImportPagesByIndex=R(`FPDF_ImportPagesByIndex`,5),i._FPDF_ImportPages=R(`FPDF_ImportPages`,4),i._FPDF_ImportNPagesToOne=R(`FPDF_ImportNPagesToOne`,5),i._FPDF_NewXObjectFromPage=R(`FPDF_NewXObjectFromPage`,3),i._FPDF_CloseXObject=R(`FPDF_CloseXObject`,1),i._FPDF_NewFormObjectFromXObject=R(`FPDF_NewFormObjectFromXObject`,1),i._FPDF_CopyViewerPreferences=R(`FPDF_CopyViewerPreferences`,2),i._FPDF_RenderPageBitmapWithColorScheme_Start=R(`FPDF_RenderPageBitmapWithColorScheme_Start`,10),i._FPDF_RenderPageBitmap_Start=R(`FPDF_RenderPageBitmap_Start`,9),i._FPDF_RenderPage_Continue=R(`FPDF_RenderPage_Continue`,2),i._FPDF_RenderPage_Close=R(`FPDF_RenderPage_Close`,1),i._FPDF_SaveWithVersion=R(`FPDF_SaveWithVersion`,4),i._FPDFText_GetCharIndexFromTextIndex=R(`FPDFText_GetCharIndexFromTextIndex`,2),i._FPDFText_GetTextIndexFromCharIndex=R(`FPDFText_GetTextIndexFromCharIndex`,2),i._FPDF_GetSignatureCount=R(`FPDF_GetSignatureCount`,1),i._FPDF_GetSignatureObject=R(`FPDF_GetSignatureObject`,2),i._FPDFSignatureObj_GetContents=R(`FPDFSignatureObj_GetContents`,3),i._FPDFSignatureObj_GetByteRange=R(`FPDFSignatureObj_GetByteRange`,3),i._FPDFSignatureObj_GetSubFilter=R(`FPDFSignatureObj_GetSubFilter`,3),i._FPDFSignatureObj_GetReason=R(`FPDFSignatureObj_GetReason`,3),i._FPDFSignatureObj_GetTime=R(`FPDFSignatureObj_GetTime`,3),i._FPDFSignatureObj_GetDocMDPPermission=R(`FPDFSignatureObj_GetDocMDPPermission`,1),i._FPDF_StructTree_GetForPage=R(`FPDF_StructTree_GetForPage`,1),i._FPDF_StructTree_Close=R(`FPDF_StructTree_Close`,1),i._FPDF_StructTree_CountChildren=R(`FPDF_StructTree_CountChildren`,1),i._FPDF_StructTree_GetChildAtIndex=R(`FPDF_StructTree_GetChildAtIndex`,2),i._FPDF_StructElement_GetAltText=R(`FPDF_StructElement_GetAltText`,3),i._FPDF_StructElement_GetActualText=R(`FPDF_StructElement_GetActualText`,3),i._FPDF_StructElement_GetID=R(`FPDF_StructElement_GetID`,3),i._FPDF_StructElement_GetLang=R(`FPDF_StructElement_GetLang`,3),i._FPDF_StructElement_GetAttributeCount=R(`FPDF_StructElement_GetAttributeCount`,1),i._FPDF_StructElement_GetAttributeAtIndex=R(`FPDF_StructElement_GetAttributeAtIndex`,2),i._FPDF_StructElement_GetStringAttribute=R(`FPDF_StructElement_GetStringAttribute`,4),i._FPDF_StructElement_GetMarkedContentID=R(`FPDF_StructElement_GetMarkedContentID`,1),i._FPDF_StructElement_GetType=R(`FPDF_StructElement_GetType`,3),i._FPDF_StructElement_GetObjType=R(`FPDF_StructElement_GetObjType`,3),i._FPDF_StructElement_GetTitle=R(`FPDF_StructElement_GetTitle`,3),i._FPDF_StructElement_CountChildren=R(`FPDF_StructElement_CountChildren`,1),i._FPDF_StructElement_GetChildAtIndex=R(`FPDF_StructElement_GetChildAtIndex`,2),i._FPDF_StructElement_GetChildMarkedContentID=R(`FPDF_StructElement_GetChildMarkedContentID`,2),i._FPDF_StructElement_GetParent=R(`FPDF_StructElement_GetParent`,1),i._FPDF_StructElement_Attr_GetCount=R(`FPDF_StructElement_Attr_GetCount`,1),i._FPDF_StructElement_Attr_GetName=R(`FPDF_StructElement_Attr_GetName`,5),i._FPDF_StructElement_Attr_GetValue=R(`FPDF_StructElement_Attr_GetValue`,2),i._FPDF_StructElement_Attr_GetType=R(`FPDF_StructElement_Attr_GetType`,1),i._FPDF_StructElement_Attr_GetBooleanValue=R(`FPDF_StructElement_Attr_GetBooleanValue`,2),i._FPDF_StructElement_Attr_GetNumberValue=R(`FPDF_StructElement_Attr_GetNumberValue`,2),i._FPDF_StructElement_Attr_GetStringValue=R(`FPDF_StructElement_Attr_GetStringValue`,4),i._FPDF_StructElement_Attr_GetBlobValue=R(`FPDF_StructElement_Attr_GetBlobValue`,4),i._FPDF_StructElement_Attr_CountChildren=R(`FPDF_StructElement_Attr_CountChildren`,1),i._FPDF_StructElement_Attr_GetChildAtIndex=R(`FPDF_StructElement_Attr_GetChildAtIndex`,2),i._FPDF_StructElement_GetMarkedContentIdCount=R(`FPDF_StructElement_GetMarkedContentIdCount`,1),i._FPDF_StructElement_GetMarkedContentIdAtIndex=R(`FPDF_StructElement_GetMarkedContentIdAtIndex`,2),i._FPDF_AddInstalledFont=R(`FPDF_AddInstalledFont`,3),i._FPDF_SetSystemFontInfo=R(`FPDF_SetSystemFontInfo`,1),i._FPDF_GetDefaultTTFMap=R(`FPDF_GetDefaultTTFMap`,0),i._FPDF_GetDefaultTTFMapCount=R(`FPDF_GetDefaultTTFMapCount`,0),i._FPDF_GetDefaultTTFMapEntry=R(`FPDF_GetDefaultTTFMapEntry`,1),i._FPDF_GetDefaultSystemFontInfo=R(`FPDF_GetDefaultSystemFontInfo`,0),i._FPDF_FreeDefaultSystemFontInfo=R(`FPDF_FreeDefaultSystemFontInfo`,1),i._FPDFText_LoadPage=R(`FPDFText_LoadPage`,1),i._FPDFText_ClosePage=R(`FPDFText_ClosePage`,1),i._FPDFText_CountChars=R(`FPDFText_CountChars`,1),i._FPDFText_GetUnicode=R(`FPDFText_GetUnicode`,2),i._FPDFText_GetTextObject=R(`FPDFText_GetTextObject`,2),i._FPDFText_IsGenerated=R(`FPDFText_IsGenerated`,2),i._FPDFText_IsHyphen=R(`FPDFText_IsHyphen`,2),i._FPDFText_HasUnicodeMapError=R(`FPDFText_HasUnicodeMapError`,2),i._FPDFText_GetFontSize=R(`FPDFText_GetFontSize`,2),i._FPDFText_GetFontInfo=R(`FPDFText_GetFontInfo`,5),i._FPDFText_GetFontWeight=R(`FPDFText_GetFontWeight`,2),i._FPDFText_GetFillColor=R(`FPDFText_GetFillColor`,6),i._FPDFText_GetStrokeColor=R(`FPDFText_GetStrokeColor`,6),i._FPDFText_GetCharAngle=R(`FPDFText_GetCharAngle`,2),i._FPDFText_GetCharBox=R(`FPDFText_GetCharBox`,6),i._FPDFText_GetLooseCharBox=R(`FPDFText_GetLooseCharBox`,3),i._FPDFText_GetMatrix=R(`FPDFText_GetMatrix`,3),i._FPDFText_GetCharOrigin=R(`FPDFText_GetCharOrigin`,4),i._FPDFText_GetCharIndexAtPos=R(`FPDFText_GetCharIndexAtPos`,5),i._FPDFText_GetText=R(`FPDFText_GetText`,4),i._FPDFText_CountRects=R(`FPDFText_CountRects`,3),i._FPDFText_GetRect=R(`FPDFText_GetRect`,6),i._FPDFText_GetBoundedText=R(`FPDFText_GetBoundedText`,7),i._FPDFText_FindStart=R(`FPDFText_FindStart`,4),i._FPDFText_FindNext=R(`FPDFText_FindNext`,1),i._FPDFText_FindPrev=R(`FPDFText_FindPrev`,1),i._FPDFText_GetSchResultIndex=R(`FPDFText_GetSchResultIndex`,1),i._FPDFText_GetSchCount=R(`FPDFText_GetSchCount`,1),i._FPDFText_FindClose=R(`FPDFText_FindClose`,1),i._FPDFLink_LoadWebLinks=R(`FPDFLink_LoadWebLinks`,1),i._FPDFLink_CountWebLinks=R(`FPDFLink_CountWebLinks`,1),i._FPDFLink_GetURL=R(`FPDFLink_GetURL`,4),i._FPDFLink_CountRects=R(`FPDFLink_CountRects`,2),i._FPDFLink_GetRect=R(`FPDFLink_GetRect`,7),i._FPDFLink_GetTextRange=R(`FPDFLink_GetTextRange`,4),i._FPDFLink_CloseWebLinks=R(`FPDFLink_CloseWebLinks`,1),i._FPDFPage_GetDecodedThumbnailData=R(`FPDFPage_GetDecodedThumbnailData`,3),i._FPDFPage_GetRawThumbnailData=R(`FPDFPage_GetRawThumbnailData`,3),i._FPDFPage_GetThumbnailAsBitmap=R(`FPDFPage_GetThumbnailAsBitmap`,1),i._FPDFPage_SetMediaBox=R(`FPDFPage_SetMediaBox`,5),i._FPDFPage_SetCropBox=R(`FPDFPage_SetCropBox`,5),i._FPDFPage_SetBleedBox=R(`FPDFPage_SetBleedBox`,5),i._FPDFPage_SetTrimBox=R(`FPDFPage_SetTrimBox`,5),i._FPDFPage_SetArtBox=R(`FPDFPage_SetArtBox`,5),i._FPDFPage_GetMediaBox=R(`FPDFPage_GetMediaBox`,5),i._FPDFPage_GetCropBox=R(`FPDFPage_GetCropBox`,5),i._FPDFPage_GetBleedBox=R(`FPDFPage_GetBleedBox`,5),i._FPDFPage_GetTrimBox=R(`FPDFPage_GetTrimBox`,5),i._FPDFPage_GetArtBox=R(`FPDFPage_GetArtBox`,5),i._FPDFPage_TransFormWithClip=R(`FPDFPage_TransFormWithClip`,3),i._FPDFPageObj_TransformClipPath=R(`FPDFPageObj_TransformClipPath`,7),i._FPDFPageObj_GetClipPath=R(`FPDFPageObj_GetClipPath`,1),i._FPDFClipPath_CountPaths=R(`FPDFClipPath_CountPaths`,1),i._FPDFClipPath_CountPathSegments=R(`FPDFClipPath_CountPathSegments`,2),i._FPDFClipPath_GetPathSegment=R(`FPDFClipPath_GetPathSegment`,3),i._FPDF_CreateClipPath=R(`FPDF_CreateClipPath`,4),i._FPDF_DestroyClipPath=R(`FPDF_DestroyClipPath`,1),i._FPDFPage_InsertClipPath=R(`FPDFPage_InsertClipPath`,2),i._FPDF_InitLibrary=R(`FPDF_InitLibrary`,0),i._FPDF_DestroyLibrary=R(`FPDF_DestroyLibrary`,0),i._FPDF_SetSandBoxPolicy=R(`FPDF_SetSandBoxPolicy`,2),i._FPDF_LoadDocument=R(`FPDF_LoadDocument`,2),i._FPDF_GetFormType=R(`FPDF_GetFormType`,1),i._FPDF_LoadXFA=R(`FPDF_LoadXFA`,1),i._FPDF_LoadMemDocument=R(`FPDF_LoadMemDocument`,3),i._FPDF_LoadMemDocument64=R(`FPDF_LoadMemDocument64`,3),i._FPDF_LoadCustomDocument=R(`FPDF_LoadCustomDocument`,2),i._FPDF_GetFileVersion=R(`FPDF_GetFileVersion`,2),i._FPDF_DocumentHasValidCrossReferenceTable=R(`FPDF_DocumentHasValidCrossReferenceTable`,1),i._FPDF_GetDocPermissions=R(`FPDF_GetDocPermissions`,1),i._FPDF_GetDocUserPermissions=R(`FPDF_GetDocUserPermissions`,1),i._FPDF_GetSecurityHandlerRevision=R(`FPDF_GetSecurityHandlerRevision`,1),i._FPDF_GetPageCount=R(`FPDF_GetPageCount`,1),i._FPDF_LoadPage=R(`FPDF_LoadPage`,2),i._FPDF_GetPageWidthF=R(`FPDF_GetPageWidthF`,1),i._FPDF_GetPageWidth=R(`FPDF_GetPageWidth`,1),i._FPDF_GetPageHeightF=R(`FPDF_GetPageHeightF`,1),i._FPDF_GetPageHeight=R(`FPDF_GetPageHeight`,1),i._FPDF_GetPageBoundingBox=R(`FPDF_GetPageBoundingBox`,2),i._FPDF_RenderPageBitmap=R(`FPDF_RenderPageBitmap`,8),i._FPDF_RenderPageBitmapWithMatrix=R(`FPDF_RenderPageBitmapWithMatrix`,5),i._EPDF_RenderAnnotBitmap=R(`EPDF_RenderAnnotBitmap`,6),i._FPDF_ClosePage=R(`FPDF_ClosePage`,1),i._FPDF_CloseDocument=R(`FPDF_CloseDocument`,1),i._FPDF_GetLastError=R(`FPDF_GetLastError`,0),i._FPDF_DeviceToPage=R(`FPDF_DeviceToPage`,10),i._FPDF_PageToDevice=R(`FPDF_PageToDevice`,10),i._FPDFBitmap_Create=R(`FPDFBitmap_Create`,3),i._FPDFBitmap_CreateEx=R(`FPDFBitmap_CreateEx`,5),i._FPDFBitmap_GetFormat=R(`FPDFBitmap_GetFormat`,1),i._FPDFBitmap_FillRect=R(`FPDFBitmap_FillRect`,6),i._FPDFBitmap_GetBuffer=R(`FPDFBitmap_GetBuffer`,1),i._FPDFBitmap_GetWidth=R(`FPDFBitmap_GetWidth`,1),i._FPDFBitmap_GetHeight=R(`FPDFBitmap_GetHeight`,1),i._FPDFBitmap_GetStride=R(`FPDFBitmap_GetStride`,1),i._FPDFBitmap_Destroy=R(`FPDFBitmap_Destroy`,1),i._FPDF_GetPageSizeByIndexF=R(`FPDF_GetPageSizeByIndexF`,3),i._EPDF_GetPageRotationByIndex=R(`EPDF_GetPageRotationByIndex`,2),i._FPDF_GetPageSizeByIndex=R(`FPDF_GetPageSizeByIndex`,4),i._FPDF_VIEWERREF_GetPrintScaling=R(`FPDF_VIEWERREF_GetPrintScaling`,1),i._FPDF_VIEWERREF_GetNumCopies=R(`FPDF_VIEWERREF_GetNumCopies`,1),i._FPDF_VIEWERREF_GetPrintPageRange=R(`FPDF_VIEWERREF_GetPrintPageRange`,1),i._FPDF_VIEWERREF_GetPrintPageRangeCount=R(`FPDF_VIEWERREF_GetPrintPageRangeCount`,1),i._FPDF_VIEWERREF_GetPrintPageRangeElement=R(`FPDF_VIEWERREF_GetPrintPageRangeElement`,2),i._FPDF_VIEWERREF_GetDuplex=R(`FPDF_VIEWERREF_GetDuplex`,1),i._FPDF_VIEWERREF_GetName=R(`FPDF_VIEWERREF_GetName`,4),i._FPDF_CountNamedDests=R(`FPDF_CountNamedDests`,1),i._FPDF_GetNamedDestByName=R(`FPDF_GetNamedDestByName`,2),i._FPDF_GetNamedDest=R(`FPDF_GetNamedDest`,4),i._FPDF_GetXFAPacketCount=R(`FPDF_GetXFAPacketCount`,1),i._FPDF_GetXFAPacketName=R(`FPDF_GetXFAPacketName`,4),i._FPDF_GetXFAPacketContent=R(`FPDF_GetXFAPacketContent`,5),i._FPDF_GetTrailerEnds=R(`FPDF_GetTrailerEnds`,3);var et,tt,nt=R(`fflush`,1),rt=R(`emscripten_builtin_memalign`,2),it=R(`strerror`,1),$=R(`setThrew`,2),at=()=>(at=Q.emscripten_stack_init)(),ot=()=>(ot=Q.emscripten_stack_get_end)(),st=e=>(st=Q._emscripten_stack_restore)(e),ct=e=>(ct=Q._emscripten_stack_alloc)(e),lt=()=>(lt=Q.emscripten_stack_get_current)();function ut(){var e;at(),O(!(3&(e=ot()))),e==0&&(e+=4),w[e>>2]=34821223,w[e+4>>2]=2310721022,w[0]=1668509029}function dt(){var e;function t(){et||(et=1,i.calledRun=1,D||(O(!j),j=!0,ee(),i.noFSInit||Y.initialized||Y.init(),Y.ignorePermissions=!1,ye(ne),n(i),i.onRuntimeInitialized?.(),O(!i._main,`compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]`),function(){ee();var e=i.postRun;e&&(typeof e==`function`&&(e=[e]),e.forEach(ie)),ye(A)}()))}M>0||(ut(),!tt&&(tt=1,(e=i.preRun)&&(typeof e==`function`&&(e=[e]),e.forEach(re)),ye(te),M>0)||(i.setStatus?(i.setStatus(`Running...`),setTimeout(()=>{setTimeout(()=>i.setStatus(``),1),t()},1)):t(),ee()))}if(i.dynCall_ji=R(`dynCall_ji`,2),i.dynCall_jij=R(`dynCall_jij`,4),i.dynCall_iiij=R(`dynCall_iiij`,5),i.dynCall_iij=R(`dynCall_iij`,4),i.dynCall_j=R(`dynCall_j`,1),i.dynCall_jji=R(`dynCall_jji`,4),i.dynCall_iji=R(`dynCall_iji`,4),i.dynCall_viijii=R(`dynCall_viijii`,7),i.dynCall_iiji=R(`dynCall_iiji`,5),i.dynCall_jiji=R(`dynCall_jiji`,5),i.dynCall_iiiiij=R(`dynCall_iiiiij`,7),i.dynCall_iiiiijj=R(`dynCall_iiiiijj`,9),i.dynCall_iiiiiijj=R(`dynCall_iiiiiijj`,10),i.dynCall_viji=R(`dynCall_viji`,5),i.wasmExports=Q,i.ccall=Qe,i.cwrap=(e,t,n,r)=>(...r)=>Qe(e,t,n,r),i.addFunction=(e,t)=>{O(e!==void 0);var n=Je(e);if(n)return n;var r=(()=>{if(Ye.length)return Ye.pop();try{q.grow(1)}catch(e){throw e instanceof RangeError?`Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.`:e}return q.length-1})();try{Xe(r,e)}catch(n){if(!(n instanceof TypeError))throw n;O(t!==void 0,`Missing signature argument to addFunction: `+e),Xe(r,qe(e,t))}return Ae.set(e,r),r},i.removeFunction=e=>{Ae.delete(Z(e)),Xe(e,null),Ye.push(e)},i.setValue=function(e,t,n=`i8`){switch(n.endsWith(`*`)&&(n=`*`),n){case`i1`:case`i8`:y[e]=t;break;case`i16`:x[e>>1]=t;break;case`i32`:C[e>>2]=t;break;case`i64`:F(`to do setValue(i64) use WASM_BIGINT`);case`float`:T[e>>2]=t;break;case`double`:E[e>>3]=t;break;case`*`:w[e>>2]=t;break;default:F(`invalid type for setValue: ${n}`)}},i.getValue=function(e,t=`i8`){switch(t.endsWith(`*`)&&(t=`*`),t){case`i1`:case`i8`:return y[e];case`i16`:return x[e>>1];case`i32`:return C[e>>2];case`i64`:F(`to do getValue(i64) use WASM_BIGINT`);case`float`:return T[e>>2];case`double`:return E[e>>3];case`*`:return w[e>>2];default:F(`invalid type for getValue: ${t}`)}},i.UTF8ToString=W,i.stringToUTF8=Re,i.UTF16ToString=(e,t)=>{O(e%2==0,`Pointer passed to UTF16ToString must be aligned to two bytes!`);for(var n=e,r=n>>1,i=r+t/2;!(r>=i)&&S[r];)++r;if((n=r<<1)-e>32&&Ge)return Ge.decode(b.subarray(e,n));for(var a=``,o=0;!(o>=t/2);++o){var s=x[e+2*o>>1];if(s==0)break;a+=String.fromCharCode(s)}return a},i.stringToUTF16=(e,t,n)=>{if(O(t%2==0,`Pointer passed to stringToUTF16 must be aligned to two bytes!`),O(typeof n==`number`,`stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!`),n??=2147483647,n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,a=0;a<i;++a){var o=e.charCodeAt(a);x[t>>1]=o,t+=2}return x[t>>1]=0,t-r},`writeI53ToI64.writeI53ToI64Clamped.writeI53ToI64Signaling.writeI53ToU64Clamped.writeI53ToU64Signaling.readI53FromI64.readI53FromU64.convertI32PairToI53.convertU32PairToI53.getTempRet0.setTempRet0.exitJS.inetPton4.inetNtop4.inetPton6.inetNtop6.readSockaddr.writeSockaddr.emscriptenLog.readEmAsmArgs.jstoi_q.listenOnce.autoResumeAudioContext.dynCallLegacy.getDynCaller.dynCall.handleException.keepRuntimeAlive.runtimeKeepalivePush.runtimeKeepalivePop.callUserCallback.maybeExit.asmjsMangle.HandleAllocator.getNativeTypeSize.STACK_SIZE.STACK_ALIGN.POINTER_SIZE.ASSERTIONS.reallyNegative.unSign.strLen.reSign.formatString.intArrayToString.AsciiToString.lengthBytesUTF16.UTF32ToString.stringToUTF32.lengthBytesUTF32.stringToNewUTF8.registerKeyEventCallback.maybeCStringToJsString.findEventTarget.getBoundingClientRect.fillMouseEventData.registerMouseEventCallback.registerWheelEventCallback.registerUiEventCallback.registerFocusEventCallback.fillDeviceOrientationEventData.registerDeviceOrientationEventCallback.fillDeviceMotionEventData.registerDeviceMotionEventCallback.screenOrientation.fillOrientationChangeEventData.registerOrientationChangeEventCallback.fillFullscreenChangeEventData.registerFullscreenChangeEventCallback.JSEvents_requestFullscreen.JSEvents_resizeCanvasForFullscreen.registerRestoreOldStyle.hideEverythingExceptGivenElement.restoreHiddenElements.setLetterbox.softFullscreenResizeWebGLRenderTarget.doRequestFullscreen.fillPointerlockChangeEventData.registerPointerlockChangeEventCallback.registerPointerlockErrorEventCallback.requestPointerLock.fillVisibilityChangeEventData.registerVisibilityChangeEventCallback.registerTouchEventCallback.fillGamepadEventData.registerGamepadEventCallback.registerBeforeUnloadEventCallback.fillBatteryEventData.battery.registerBatteryEventCallback.setCanvasElementSize.getCanvasElementSize.jsStackTrace.getCallstack.convertPCtoSourceLocation.checkWasiClock.wasiRightsToMuslOFlags.wasiOFlagsToMuslOFlags.createDyncallWrapper.safeSetTimeout.setImmediateWrapped.clearImmediateWrapped.polyfillSetImmediate.registerPostMainLoop.registerPreMainLoop.getPromise.makePromise.idsToPromises.makePromiseCallback.ExceptionInfo.findMatchingCatch.Browser_asyncPrepareDataCounter.safeRequestAnimationFrame.arraySum.addDays.getSocketFromFD.getSocketAddress.FS_unlink.FS_mkdirTree._setNetworkCallback.heapObjectForWebGLType.toTypedArrayIndex.webgl_enable_ANGLE_instanced_arrays.webgl_enable_OES_vertex_array_object.webgl_enable_WEBGL_draw_buffers.webgl_enable_WEBGL_multi_draw.webgl_enable_EXT_polygon_offset_clamp.webgl_enable_EXT_clip_control.webgl_enable_WEBGL_polygon_mode.emscriptenWebGLGet.computeUnpackAlignedImageSize.colorChannelsInGlTextureFormat.emscriptenWebGLGetTexPixelData.emscriptenWebGLGetUniform.webglGetUniformLocation.webglPrepareUniformLocationsBeforeFirstUse.webglGetLeftBracePos.emscriptenWebGLGetVertexAttrib.__glGetActiveAttribOrUniform.writeGLArray.registerWebGlEventCallback.runAndAbortIfError.ALLOC_NORMAL.ALLOC_STACK.allocate.writeStringToMemory.writeAsciiToMemory.setErrNo.demangle.stackTrace`.split(`.`).forEach(function(e){ge(e,()=>{var t=`\`${e}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,n=e;n.startsWith(`_`)||(n=`$`+e),t+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${n}')`,he(e)&&(t+=`. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you`),U(t)}),ve(e)}),`run.addOnPreRun.addOnInit.addOnPreMain.addOnExit.addOnPostRun.addRunDependency.removeRunDependency.out.err.callMain.abort.wasmMemory.writeStackCookie.checkStackCookie.convertI32PairToI53Checked.stackSave.stackRestore.stackAlloc.ptrToString.zeroMemory.getHeapMax.growMemory.ENV.ERRNO_CODES.strError.DNS.Protocols.Sockets.initRandomFill.randomFill.timers.warnOnce.readEmAsmArgsArray.jstoi_s.getExecutableName.asyncLoad.alignMemory.mmapAlloc.wasmTable.noExitRuntime.getCFunc.uleb128Encode.sigToWasmTypes.generateFuncType.convertJsFunctionToWasm.freeTableIndexes.functionsInTableMap.getEmptyTableSlot.updateTableMap.getFunctionAddress.PATH.PATH_FS.UTF8Decoder.UTF8ArrayToString.stringToUTF8Array.lengthBytesUTF8.intArrayFromString.stringToAscii.UTF16Decoder.stringToUTF8OnStack.writeArrayToMemory.JSEvents.specialHTMLTargets.findCanvasEventTarget.currentFullscreenStrategy.restoreOldWindowedStyle.UNWIND_CACHE.ExitStatus.getEnvStrings.doReadv.doWritev.promiseMap.uncaughtExceptionCount.exceptionLast.exceptionCaught.Browser.getPreloadedImageData__data.wget.MONTH_DAYS_REGULAR.MONTH_DAYS_LEAP.MONTH_DAYS_REGULAR_CUMULATIVE.MONTH_DAYS_LEAP_CUMULATIVE.isLeapYear.ydayFromDate.SYSCALLS.preloadPlugins.FS_createPreloadedFile.FS_modeStringToFlags.FS_getMode.FS_stdin_getChar_buffer.FS_stdin_getChar.FS_createPath.FS_createDevice.FS_readFile.FS.FS_createDataFile.FS_createLazyFile.MEMFS.TTY.PIPEFS.SOCKFS.tempFixedLengthArray.miniTempWebGLFloatBuffers.miniTempWebGLIntBuffers.GL.AL.GLUT.EGL.GLEW.IDBStore.SDL.SDL_gfx.allocateUTF8.allocateUTF8OnStack.print.printErr`.split(`.`).forEach(ve),oe=function e(){et||dt(),et||(oe=e)},i.preInit)for(typeof i.preInit==`function`&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();dt(),t=a;for(let t of Object.keys(i))t in e||Object.defineProperty(e,t,{configurable:!0,get(){F(`Access to module property ('${t}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return t}),N={EPDF_GetMetaKeyCount:[[`number`,`boolean`],`number`],EPDF_GetMetaKeyName:[[`number`,`number`,`boolean`,`number`,`number`],`number`],EPDF_GetMetaTrapped:[[`number`],`number`],EPDF_GetPageRotationByIndex:[[`number`,`number`],`number`],EPDF_HasMetaText:[[`number`,`string`],`boolean`],EPDF_PNG_EncodeRGBA:[[`number`,`number`,`number`,`number`,`number`,`number`],`number`],EPDF_RenderAnnotBitmap:[[`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],EPDF_SetMetaText:[[`number`,`string`,`number`],`boolean`],EPDF_SetMetaTrapped:[[`number`,`number`],`boolean`],EPDFAction_CreateGoTo:[[`number`,`number`],`number`],EPDFAction_CreateGoToNamed:[[`number`,`string`],`number`],EPDFAction_CreateLaunch:[[`number`,`number`],`number`],EPDFAction_CreateRemoteGoToByName:[[`number`,`number`,`number`],`number`],EPDFAction_CreateRemoteGoToDest:[[`number`,`number`,`number`],`number`],EPDFAction_CreateURI:[[`number`,`string`],`number`],EPDFAnnot_ClearColor:[[`number`,`number`],`boolean`],EPDFAnnot_GenerateAppearance:[[`number`],`boolean`],EPDFAnnot_GenerateAppearanceWithBlend:[[`number`,`number`],`boolean`],EPDFAnnot_GetBlendMode:[[`number`],`number`],EPDFAnnot_GetBorderDashPattern:[[`number`,`number`,`number`],`boolean`],EPDFAnnot_GetBorderDashPatternCount:[[`number`],`number`],EPDFAnnot_GetBorderEffect:[[`number`,`number`],`boolean`],EPDFAnnot_GetBorderStyle:[[`number`,`number`],`number`],EPDFAnnot_GetColor:[[`number`,`number`,`number`,`number`,`number`],`boolean`],EPDFAnnot_GetDefaultAppearance:[[`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],EPDFAnnot_GetIcon:[[`number`],`number`],EPDFAnnot_GetIntent:[[`number`,`number`,`number`],`number`],EPDFAnnot_GetLineEndings:[[`number`,`number`,`number`],`boolean`],EPDFAnnot_GetOpacity:[[`number`,`number`],`boolean`],EPDFAnnot_GetRectangleDifferences:[[`number`,`number`,`number`,`number`,`number`],`boolean`],EPDFAnnot_GetRichContent:[[`number`,`number`,`number`],`number`],EPDFAnnot_GetTextAlignment:[[`number`],`number`],EPDFAnnot_GetVerticalAlignment:[[`number`],`number`],EPDFAnnot_SetBorderDashPattern:[[`number`,`number`,`number`],`boolean`],EPDFAnnot_SetBorderStyle:[[`number`,`number`,`number`],`boolean`],EPDFAnnot_SetColor:[[`number`,`number`,`number`,`number`,`number`],`boolean`],EPDFAnnot_SetDefaultAppearance:[[`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],EPDFAnnot_SetIcon:[[`number`,`number`],`boolean`],EPDFAnnot_SetIntent:[[`number`,`string`],`boolean`],EPDFAnnot_SetLine:[[`number`,`number`,`number`],`boolean`],EPDFAnnot_SetLineEndings:[[`number`,`number`,`number`],`boolean`],EPDFAnnot_SetLinkedAnnot:[[`number`,`string`,`number`],`boolean`],EPDFAnnot_SetOpacity:[[`number`,`number`],`boolean`],EPDFAnnot_SetTextAlignment:[[`number`,`number`],`boolean`],EPDFAnnot_SetVerticalAlignment:[[`number`,`number`],`boolean`],EPDFAnnot_SetVertices:[[`number`,`number`,`number`],`boolean`],EPDFAnnot_UpdateAppearanceToRect:[[`number`,`number`],`boolean`],EPDFAttachment_GetDescription:[[`number`,`number`,`number`],`number`],EPDFAttachment_GetIntegerValue:[[`number`,`string`,`number`],`boolean`],EPDFAttachment_SetDescription:[[`number`,`number`],`boolean`],EPDFAttachment_SetSubtype:[[`number`,`string`],`boolean`],EPDFBookmark_AppendChild:[[`number`,`number`,`number`],`number`],EPDFBookmark_Clear:[[`number`],`boolean`],EPDFBookmark_ClearTarget:[[`number`],`boolean`],EPDFBookmark_Create:[[`number`,`number`],`number`],EPDFBookmark_Delete:[[`number`,`number`],`boolean`],EPDFBookmark_InsertAfter:[[`number`,`number`,`number`,`number`],`number`],EPDFBookmark_SetAction:[[`number`,`number`,`number`],`boolean`],EPDFBookmark_SetDest:[[`number`,`number`,`number`],`boolean`],EPDFBookmark_SetTitle:[[`number`,`number`],`boolean`],EPDFCatalog_GetLanguage:[[`number`,`number`,`number`],`number`],EPDFDest_CreateRemoteView:[[`number`,`number`,`number`,`number`,`number`],`number`],EPDFDest_CreateRemoteXYZ:[[`number`,`number`,`boolean`,`number`,`boolean`,`number`,`boolean`,`number`],`number`],EPDFDest_CreateView:[[`number`,`number`,`number`,`number`],`number`],EPDFDest_CreateXYZ:[[`number`,`boolean`,`number`,`boolean`,`number`,`boolean`,`number`],`number`],EPDFNamedDest_Remove:[[`number`,`string`],`boolean`],EPDFNamedDest_SetDest:[[`number`,`string`,`number`],`boolean`],EPDFPage_CreateAnnot:[[`number`,`number`],`number`],EPDFPage_GetAnnotByName:[[`number`,`number`],`number`],EPDFPage_GetAnnotCountRaw:[[`number`,`number`],`number`],EPDFPage_GetAnnotRaw:[[`number`,`number`,`number`],`number`],EPDFPage_RemoveAnnotByName:[[`number`,`number`],`boolean`],EPDFPage_RemoveAnnotRaw:[[`number`,`number`,`number`],`boolean`],EPDFText_RedactInQuads:[[`number`,`number`,`number`,`boolean`,`boolean`],`boolean`],EPDFText_RedactInRect:[[`number`,`number`,`boolean`,`boolean`],`boolean`],FORM_CanRedo:[[`number`,`number`],`boolean`],FORM_CanUndo:[[`number`,`number`],`boolean`],FORM_DoDocumentAAction:[[`number`,`number`],null],FORM_DoDocumentJSAction:[[`number`],null],FORM_DoDocumentOpenAction:[[`number`],null],FORM_DoPageAAction:[[`number`,`number`,`number`],null],FORM_ForceToKillFocus:[[`number`],`boolean`],FORM_GetFocusedAnnot:[[`number`,`number`,`number`],`boolean`],FORM_GetFocusedText:[[`number`,`number`,`number`,`number`],`number`],FORM_GetSelectedText:[[`number`,`number`,`number`,`number`],`number`],FORM_IsIndexSelected:[[`number`,`number`,`number`],`boolean`],FORM_OnAfterLoadPage:[[`number`,`number`],null],FORM_OnBeforeClosePage:[[`number`,`number`],null],FORM_OnChar:[[`number`,`number`,`number`,`number`],`boolean`],FORM_OnFocus:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FORM_OnKeyDown:[[`number`,`number`,`number`,`number`],`boolean`],FORM_OnKeyUp:[[`number`,`number`,`number`,`number`],`boolean`],FORM_OnLButtonDoubleClick:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FORM_OnLButtonDown:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FORM_OnLButtonUp:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FORM_OnMouseMove:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FORM_OnMouseWheel:[[`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FORM_OnRButtonDown:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FORM_OnRButtonUp:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FORM_Redo:[[`number`,`number`],`boolean`],FORM_ReplaceAndKeepSelection:[[`number`,`number`,`number`],null],FORM_ReplaceSelection:[[`number`,`number`,`number`],null],FORM_SelectAllText:[[`number`,`number`],`boolean`],FORM_SetFocusedAnnot:[[`number`,`number`],`boolean`],FORM_SetIndexSelected:[[`number`,`number`,`number`,`boolean`],`boolean`],FORM_Undo:[[`number`,`number`],`boolean`],FPDF_AddInstalledFont:[[`number`,`number`,`number`],null],FPDF_CloseDocument:[[`number`],null],FPDF_ClosePage:[[`number`],null],FPDF_CloseXObject:[[`number`],null],FPDF_CopyViewerPreferences:[[`number`,`number`],`boolean`],FPDF_CountNamedDests:[[`number`],`number`],FPDF_CreateClipPath:[[`number`,`number`,`number`,`number`],`number`],FPDF_CreateNewDocument:[[],`number`],FPDF_DestroyClipPath:[[`number`],null],FPDF_DestroyLibrary:[[],null],FPDF_DeviceToPage:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDF_DocumentHasValidCrossReferenceTable:[[`number`],`boolean`],FPDF_FFLDraw:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`],null],FPDF_FreeDefaultSystemFontInfo:[[`number`],null],FPDF_GetDefaultSystemFontInfo:[[],`number`],FPDF_GetDefaultTTFMap:[[],`number`],FPDF_GetDefaultTTFMapCount:[[],`number`],FPDF_GetDefaultTTFMapEntry:[[`number`],`number`],FPDF_GetDocPermissions:[[`number`],`number`],FPDF_GetDocUserPermissions:[[`number`],`number`],FPDF_GetFileIdentifier:[[`number`,`number`,`number`,`number`],`number`],FPDF_GetFileVersion:[[`number`,`number`],`boolean`],FPDF_GetFormType:[[`number`],`number`],FPDF_GetLastError:[[],`number`],FPDF_GetMetaText:[[`number`,`string`,`number`,`number`],`number`],FPDF_GetNamedDest:[[`number`,`number`,`number`,`number`],`number`],FPDF_GetNamedDestByName:[[`number`,`string`],`number`],FPDF_GetPageAAction:[[`number`,`number`],`number`],FPDF_GetPageBoundingBox:[[`number`,`number`],`boolean`],FPDF_GetPageCount:[[`number`],`number`],FPDF_GetPageHeight:[[`number`],`number`],FPDF_GetPageHeightF:[[`number`],`number`],FPDF_GetPageLabel:[[`number`,`number`,`number`,`number`],`number`],FPDF_GetPageSizeByIndex:[[`number`,`number`,`number`,`number`],`number`],FPDF_GetPageSizeByIndexF:[[`number`,`number`,`number`],`boolean`],FPDF_GetPageWidth:[[`number`],`number`],FPDF_GetPageWidthF:[[`number`],`number`],FPDF_GetSecurityHandlerRevision:[[`number`],`number`],FPDF_GetSignatureCount:[[`number`],`number`],FPDF_GetSignatureObject:[[`number`,`number`],`number`],FPDF_GetTrailerEnds:[[`number`,`number`,`number`],`number`],FPDF_GetXFAPacketContent:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDF_GetXFAPacketCount:[[`number`],`number`],FPDF_GetXFAPacketName:[[`number`,`number`,`number`,`number`],`number`],FPDF_ImportNPagesToOne:[[`number`,`number`,`number`,`number`,`number`],`number`],FPDF_ImportPages:[[`number`,`number`,`string`,`number`],`boolean`],FPDF_ImportPagesByIndex:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDF_InitLibrary:[[],null],FPDF_InitLibraryWithConfig:[[`number`],null],FPDF_LoadCustomDocument:[[`number`,`string`],`number`],FPDF_LoadDocument:[[`number`,`string`],`number`],FPDF_LoadMemDocument:[[`number`,`number`,`string`],`number`],FPDF_LoadMemDocument64:[[`number`,`number`,`string`],`number`],FPDF_LoadPage:[[`number`,`number`],`number`],FPDF_LoadXFA:[[`number`],`boolean`],FPDF_MovePages:[[`number`,`number`,`number`,`number`],`boolean`],FPDF_NewFormObjectFromXObject:[[`number`],`number`],FPDF_NewXObjectFromPage:[[`number`,`number`,`number`],`number`],FPDF_PageToDevice:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDF_RemoveFormFieldHighlight:[[`number`],null],FPDF_RenderPage_Close:[[`number`],null],FPDF_RenderPage_Continue:[[`number`,`number`],`number`],FPDF_RenderPageBitmap:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`],null],FPDF_RenderPageBitmap_Start:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`],`number`],FPDF_RenderPageBitmapWithColorScheme_Start:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`,`number`],`number`],FPDF_RenderPageBitmapWithMatrix:[[`number`,`number`,`number`,`number`,`number`],null],FPDF_SaveAsCopy:[[`number`,`number`,`number`],`boolean`],FPDF_SaveWithVersion:[[`number`,`number`,`number`,`number`],`boolean`],FPDF_SetFormFieldHighlightAlpha:[[`number`,`number`],null],FPDF_SetFormFieldHighlightColor:[[`number`,`number`,`number`],null],FPDF_SetSandBoxPolicy:[[`number`,`boolean`],null],FPDF_SetSystemFontInfo:[[`number`],null],FPDF_StructElement_Attr_CountChildren:[[`number`],`number`],FPDF_StructElement_Attr_GetBlobValue:[[`number`,`number`,`number`,`number`],`boolean`],FPDF_StructElement_Attr_GetBooleanValue:[[`number`,`number`],`boolean`],FPDF_StructElement_Attr_GetChildAtIndex:[[`number`,`number`],`number`],FPDF_StructElement_Attr_GetCount:[[`number`],`number`],FPDF_StructElement_Attr_GetName:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDF_StructElement_Attr_GetNumberValue:[[`number`,`number`],`boolean`],FPDF_StructElement_Attr_GetStringValue:[[`number`,`number`,`number`,`number`],`boolean`],FPDF_StructElement_Attr_GetType:[[`number`],`number`],FPDF_StructElement_Attr_GetValue:[[`number`,`string`],`number`],FPDF_StructElement_CountChildren:[[`number`],`number`],FPDF_StructElement_GetActualText:[[`number`,`number`,`number`],`number`],FPDF_StructElement_GetAltText:[[`number`,`number`,`number`],`number`],FPDF_StructElement_GetAttributeAtIndex:[[`number`,`number`],`number`],FPDF_StructElement_GetAttributeCount:[[`number`],`number`],FPDF_StructElement_GetChildAtIndex:[[`number`,`number`],`number`],FPDF_StructElement_GetChildMarkedContentID:[[`number`,`number`],`number`],FPDF_StructElement_GetID:[[`number`,`number`,`number`],`number`],FPDF_StructElement_GetLang:[[`number`,`number`,`number`],`number`],FPDF_StructElement_GetMarkedContentID:[[`number`],`number`],FPDF_StructElement_GetMarkedContentIdAtIndex:[[`number`,`number`],`number`],FPDF_StructElement_GetMarkedContentIdCount:[[`number`],`number`],FPDF_StructElement_GetObjType:[[`number`,`number`,`number`],`number`],FPDF_StructElement_GetParent:[[`number`],`number`],FPDF_StructElement_GetStringAttribute:[[`number`,`string`,`number`,`number`],`number`],FPDF_StructElement_GetTitle:[[`number`,`number`,`number`],`number`],FPDF_StructElement_GetType:[[`number`,`number`,`number`],`number`],FPDF_StructTree_Close:[[`number`],null],FPDF_StructTree_CountChildren:[[`number`],`number`],FPDF_StructTree_GetChildAtIndex:[[`number`,`number`],`number`],FPDF_StructTree_GetForPage:[[`number`],`number`],FPDF_VIEWERREF_GetDuplex:[[`number`],`number`],FPDF_VIEWERREF_GetName:[[`number`,`string`,`number`,`number`],`number`],FPDF_VIEWERREF_GetNumCopies:[[`number`],`number`],FPDF_VIEWERREF_GetPrintPageRange:[[`number`],`number`],FPDF_VIEWERREF_GetPrintPageRangeCount:[[`number`],`number`],FPDF_VIEWERREF_GetPrintPageRangeElement:[[`number`,`number`],`number`],FPDF_VIEWERREF_GetPrintScaling:[[`number`],`boolean`],FPDFAction_GetDest:[[`number`,`number`],`number`],FPDFAction_GetFilePath:[[`number`,`number`,`number`],`number`],FPDFAction_GetType:[[`number`],`number`],FPDFAction_GetURIPath:[[`number`,`number`,`number`,`number`],`number`],FPDFAnnot_AddFileAttachment:[[`number`,`number`],`number`],FPDFAnnot_AddInkStroke:[[`number`,`number`,`number`],`number`],FPDFAnnot_AppendAttachmentPoints:[[`number`,`number`],`boolean`],FPDFAnnot_AppendObject:[[`number`,`number`],`boolean`],FPDFAnnot_CountAttachmentPoints:[[`number`],`number`],FPDFAnnot_GetAP:[[`number`,`number`,`number`,`number`],`number`],FPDFAnnot_GetAttachmentPoints:[[`number`,`number`,`number`],`boolean`],FPDFAnnot_GetBorder:[[`number`,`number`,`number`,`number`],`boolean`],FPDFAnnot_GetColor:[[`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFAnnot_GetFileAttachment:[[`number`],`number`],FPDFAnnot_GetFlags:[[`number`],`number`],FPDFAnnot_GetFocusableSubtypes:[[`number`,`number`,`number`],`boolean`],FPDFAnnot_GetFocusableSubtypesCount:[[`number`],`number`],FPDFAnnot_GetFontColor:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFAnnot_GetFontSize:[[`number`,`number`,`number`],`boolean`],FPDFAnnot_GetFormAdditionalActionJavaScript:[[`number`,`number`,`number`,`number`,`number`],`number`],FPDFAnnot_GetFormControlCount:[[`number`,`number`],`number`],FPDFAnnot_GetFormControlIndex:[[`number`,`number`],`number`],FPDFAnnot_GetFormFieldAlternateName:[[`number`,`number`,`number`,`number`],`number`],FPDFAnnot_GetFormFieldAtPoint:[[`number`,`number`,`number`],`number`],FPDFAnnot_GetFormFieldExportValue:[[`number`,`number`,`number`,`number`],`number`],FPDFAnnot_GetFormFieldFlags:[[`number`,`number`],`number`],FPDFAnnot_GetFormFieldName:[[`number`,`number`,`number`,`number`],`number`],FPDFAnnot_GetFormFieldType:[[`number`,`number`],`number`],FPDFAnnot_GetFormFieldValue:[[`number`,`number`,`number`,`number`],`number`],FPDFAnnot_GetInkListCount:[[`number`],`number`],FPDFAnnot_GetInkListPath:[[`number`,`number`,`number`,`number`],`number`],FPDFAnnot_GetLine:[[`number`,`number`,`number`],`boolean`],FPDFAnnot_GetLink:[[`number`],`number`],FPDFAnnot_GetLinkedAnnot:[[`number`,`string`],`number`],FPDFAnnot_GetNumberValue:[[`number`,`string`,`number`],`boolean`],FPDFAnnot_GetObject:[[`number`,`number`],`number`],FPDFAnnot_GetObjectCount:[[`number`],`number`],FPDFAnnot_GetOptionCount:[[`number`,`number`],`number`],FPDFAnnot_GetOptionLabel:[[`number`,`number`,`number`,`number`,`number`],`number`],FPDFAnnot_GetRect:[[`number`,`number`],`boolean`],FPDFAnnot_GetStringValue:[[`number`,`string`,`number`,`number`],`number`],FPDFAnnot_GetSubtype:[[`number`],`number`],FPDFAnnot_GetValueType:[[`number`,`string`],`number`],FPDFAnnot_GetVertices:[[`number`,`number`,`number`],`number`],FPDFAnnot_HasAttachmentPoints:[[`number`],`boolean`],FPDFAnnot_HasKey:[[`number`,`string`],`boolean`],FPDFAnnot_IsChecked:[[`number`,`number`],`boolean`],FPDFAnnot_IsObjectSupportedSubtype:[[`number`],`boolean`],FPDFAnnot_IsOptionSelected:[[`number`,`number`,`number`],`boolean`],FPDFAnnot_IsSupportedSubtype:[[`number`],`boolean`],FPDFAnnot_RemoveInkList:[[`number`],`boolean`],FPDFAnnot_RemoveObject:[[`number`,`number`],`boolean`],FPDFAnnot_SetAP:[[`number`,`number`,`number`],`boolean`],FPDFAnnot_SetAttachmentPoints:[[`number`,`number`,`number`],`boolean`],FPDFAnnot_SetBorder:[[`number`,`number`,`number`,`number`],`boolean`],FPDFAnnot_SetColor:[[`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFAnnot_SetFlags:[[`number`,`number`],`boolean`],FPDFAnnot_SetFocusableSubtypes:[[`number`,`number`,`number`],`boolean`],FPDFAnnot_SetFontColor:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFAnnot_SetFormFieldFlags:[[`number`,`number`,`number`],`boolean`],FPDFAnnot_SetRect:[[`number`,`number`],`boolean`],FPDFAnnot_SetStringValue:[[`number`,`string`,`number`],`boolean`],FPDFAnnot_SetURI:[[`number`,`number`],`boolean`],FPDFAnnot_UpdateObject:[[`number`,`number`],`boolean`],FPDFAttachment_GetFile:[[`number`,`number`,`number`,`number`],`boolean`],FPDFAttachment_GetName:[[`number`,`number`,`number`],`number`],FPDFAttachment_GetStringValue:[[`number`,`string`,`number`,`number`],`number`],FPDFAttachment_GetSubtype:[[`number`,`number`,`number`],`number`],FPDFAttachment_GetValueType:[[`number`,`string`],`number`],FPDFAttachment_HasKey:[[`number`,`string`],`boolean`],FPDFAttachment_SetFile:[[`number`,`number`,`number`,`number`],`boolean`],FPDFAttachment_SetStringValue:[[`number`,`string`,`number`],`boolean`],FPDFAvail_Create:[[`number`,`number`],`number`],FPDFAvail_Destroy:[[`number`],null],FPDFAvail_GetDocument:[[`number`,`string`],`number`],FPDFAvail_GetFirstPageNum:[[`number`],`number`],FPDFAvail_IsDocAvail:[[`number`,`number`],`number`],FPDFAvail_IsFormAvail:[[`number`,`number`],`number`],FPDFAvail_IsLinearized:[[`number`],`number`],FPDFAvail_IsPageAvail:[[`number`,`number`,`number`],`number`],FPDFBitmap_Create:[[`number`,`number`,`number`],`number`],FPDFBitmap_CreateEx:[[`number`,`number`,`number`,`number`,`number`],`number`],FPDFBitmap_Destroy:[[`number`],null],FPDFBitmap_FillRect:[[`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFBitmap_GetBuffer:[[`number`],`number`],FPDFBitmap_GetFormat:[[`number`],`number`],FPDFBitmap_GetHeight:[[`number`],`number`],FPDFBitmap_GetStride:[[`number`],`number`],FPDFBitmap_GetWidth:[[`number`],`number`],FPDFBookmark_Find:[[`number`,`number`],`number`],FPDFBookmark_GetAction:[[`number`],`number`],FPDFBookmark_GetCount:[[`number`],`number`],FPDFBookmark_GetDest:[[`number`,`number`],`number`],FPDFBookmark_GetFirstChild:[[`number`,`number`],`number`],FPDFBookmark_GetNextSibling:[[`number`,`number`],`number`],FPDFBookmark_GetTitle:[[`number`,`number`,`number`],`number`],FPDFCatalog_IsTagged:[[`number`],`boolean`],FPDFCatalog_SetLanguage:[[`number`,`string`],`boolean`],FPDFClipPath_CountPaths:[[`number`],`number`],FPDFClipPath_CountPathSegments:[[`number`,`number`],`number`],FPDFClipPath_GetPathSegment:[[`number`,`number`,`number`],`number`],FPDFDest_GetDestPageIndex:[[`number`,`number`],`number`],FPDFDest_GetLocationInPage:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFDest_GetView:[[`number`,`number`,`number`],`number`],FPDFDoc_AddAttachment:[[`number`,`number`],`number`],FPDFDoc_CloseJavaScriptAction:[[`number`],null],FPDFDoc_DeleteAttachment:[[`number`,`number`],`boolean`],FPDFDOC_ExitFormFillEnvironment:[[`number`],null],FPDFDoc_GetAttachment:[[`number`,`number`],`number`],FPDFDoc_GetAttachmentCount:[[`number`],`number`],FPDFDoc_GetJavaScriptAction:[[`number`,`number`],`number`],FPDFDoc_GetJavaScriptActionCount:[[`number`],`number`],FPDFDoc_GetPageMode:[[`number`],`number`],FPDFDOC_InitFormFillEnvironment:[[`number`,`number`],`number`],FPDFFont_Close:[[`number`],null],FPDFFont_GetAscent:[[`number`,`number`,`number`],`boolean`],FPDFFont_GetBaseFontName:[[`number`,`number`,`number`],`number`],FPDFFont_GetDescent:[[`number`,`number`,`number`],`boolean`],FPDFFont_GetFamilyName:[[`number`,`number`,`number`],`number`],FPDFFont_GetFlags:[[`number`],`number`],FPDFFont_GetFontData:[[`number`,`number`,`number`,`number`],`boolean`],FPDFFont_GetGlyphPath:[[`number`,`number`,`number`],`number`],FPDFFont_GetGlyphWidth:[[`number`,`number`,`number`,`number`],`boolean`],FPDFFont_GetIsEmbedded:[[`number`],`number`],FPDFFont_GetItalicAngle:[[`number`,`number`],`boolean`],FPDFFont_GetWeight:[[`number`],`number`],FPDFFormObj_CountObjects:[[`number`],`number`],FPDFFormObj_GetObject:[[`number`,`number`],`number`],FPDFFormObj_RemoveObject:[[`number`,`number`],`boolean`],FPDFGlyphPath_CountGlyphSegments:[[`number`],`number`],FPDFGlyphPath_GetGlyphPathSegment:[[`number`,`number`],`number`],FPDFImageObj_GetBitmap:[[`number`],`number`],FPDFImageObj_GetIccProfileDataDecoded:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFImageObj_GetImageDataDecoded:[[`number`,`number`,`number`],`number`],FPDFImageObj_GetImageDataRaw:[[`number`,`number`,`number`],`number`],FPDFImageObj_GetImageFilter:[[`number`,`number`,`number`,`number`],`number`],FPDFImageObj_GetImageFilterCount:[[`number`],`number`],FPDFImageObj_GetImageMetadata:[[`number`,`number`,`number`],`boolean`],FPDFImageObj_GetImagePixelSize:[[`number`,`number`,`number`],`boolean`],FPDFImageObj_GetRenderedBitmap:[[`number`,`number`,`number`],`number`],FPDFImageObj_LoadJpegFile:[[`number`,`number`,`number`,`number`],`boolean`],FPDFImageObj_LoadJpegFileInline:[[`number`,`number`,`number`,`number`],`boolean`],FPDFImageObj_SetBitmap:[[`number`,`number`,`number`,`number`],`boolean`],FPDFImageObj_SetMatrix:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFJavaScriptAction_GetName:[[`number`,`number`,`number`],`number`],FPDFJavaScriptAction_GetScript:[[`number`,`number`,`number`],`number`],FPDFLink_CloseWebLinks:[[`number`],null],FPDFLink_CountQuadPoints:[[`number`],`number`],FPDFLink_CountRects:[[`number`,`number`],`number`],FPDFLink_CountWebLinks:[[`number`],`number`],FPDFLink_Enumerate:[[`number`,`number`,`number`],`boolean`],FPDFLink_GetAction:[[`number`],`number`],FPDFLink_GetAnnot:[[`number`,`number`],`number`],FPDFLink_GetAnnotRect:[[`number`,`number`],`boolean`],FPDFLink_GetDest:[[`number`,`number`],`number`],FPDFLink_GetLinkAtPoint:[[`number`,`number`,`number`],`number`],FPDFLink_GetLinkZOrderAtPoint:[[`number`,`number`,`number`],`number`],FPDFLink_GetQuadPoints:[[`number`,`number`,`number`],`boolean`],FPDFLink_GetRect:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFLink_GetTextRange:[[`number`,`number`,`number`,`number`],`boolean`],FPDFLink_GetURL:[[`number`,`number`,`number`,`number`],`number`],FPDFLink_LoadWebLinks:[[`number`],`number`],FPDFPage_CloseAnnot:[[`number`],null],FPDFPage_CountObjects:[[`number`],`number`],FPDFPage_CreateAnnot:[[`number`,`number`],`number`],FPDFPage_Delete:[[`number`,`number`],null],FPDFPage_Flatten:[[`number`,`number`],`number`],FPDFPage_FormFieldZOrderAtPoint:[[`number`,`number`,`number`,`number`],`number`],FPDFPage_GenerateContent:[[`number`],`boolean`],FPDFPage_GetAnnot:[[`number`,`number`],`number`],FPDFPage_GetAnnotCount:[[`number`],`number`],FPDFPage_GetAnnotIndex:[[`number`,`number`],`number`],FPDFPage_GetArtBox:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFPage_GetBleedBox:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFPage_GetCropBox:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFPage_GetDecodedThumbnailData:[[`number`,`number`,`number`],`number`],FPDFPage_GetMediaBox:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFPage_GetObject:[[`number`,`number`],`number`],FPDFPage_GetRawThumbnailData:[[`number`,`number`,`number`],`number`],FPDFPage_GetRotation:[[`number`],`number`],FPDFPage_GetThumbnailAsBitmap:[[`number`],`number`],FPDFPage_GetTrimBox:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFPage_HasFormFieldAtPoint:[[`number`,`number`,`number`,`number`],`number`],FPDFPage_HasTransparency:[[`number`],`boolean`],FPDFPage_InsertClipPath:[[`number`,`number`],null],FPDFPage_InsertObject:[[`number`,`number`],null],FPDFPage_InsertObjectAtIndex:[[`number`,`number`,`number`],`boolean`],FPDFPage_New:[[`number`,`number`,`number`,`number`],`number`],FPDFPage_RemoveAnnot:[[`number`,`number`],`boolean`],FPDFPage_RemoveObject:[[`number`,`number`],`boolean`],FPDFPage_SetArtBox:[[`number`,`number`,`number`,`number`,`number`],null],FPDFPage_SetBleedBox:[[`number`,`number`,`number`,`number`,`number`],null],FPDFPage_SetCropBox:[[`number`,`number`,`number`,`number`,`number`],null],FPDFPage_SetMediaBox:[[`number`,`number`,`number`,`number`,`number`],null],FPDFPage_SetRotation:[[`number`,`number`],null],FPDFPage_SetTrimBox:[[`number`,`number`,`number`,`number`,`number`],null],FPDFPage_TransformAnnots:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`],null],FPDFPage_TransFormWithClip:[[`number`,`number`,`number`],`boolean`],FPDFPageObj_AddMark:[[`number`,`string`],`number`],FPDFPageObj_CountMarks:[[`number`],`number`],FPDFPageObj_CreateNewPath:[[`number`,`number`],`number`],FPDFPageObj_CreateNewRect:[[`number`,`number`,`number`,`number`],`number`],FPDFPageObj_CreateTextObj:[[`number`,`number`,`number`],`number`],FPDFPageObj_Destroy:[[`number`],null],FPDFPageObj_GetBounds:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFPageObj_GetClipPath:[[`number`],`number`],FPDFPageObj_GetDashArray:[[`number`,`number`,`number`],`boolean`],FPDFPageObj_GetDashCount:[[`number`],`number`],FPDFPageObj_GetDashPhase:[[`number`,`number`],`boolean`],FPDFPageObj_GetFillColor:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFPageObj_GetIsActive:[[`number`,`number`],`boolean`],FPDFPageObj_GetLineCap:[[`number`],`number`],FPDFPageObj_GetLineJoin:[[`number`],`number`],FPDFPageObj_GetMark:[[`number`,`number`],`number`],FPDFPageObj_GetMarkedContentID:[[`number`],`number`],FPDFPageObj_GetMatrix:[[`number`,`number`],`boolean`],FPDFPageObj_GetRotatedBounds:[[`number`,`number`],`boolean`],FPDFPageObj_GetStrokeColor:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFPageObj_GetStrokeWidth:[[`number`,`number`],`boolean`],FPDFPageObj_GetType:[[`number`],`number`],FPDFPageObj_HasTransparency:[[`number`],`boolean`],FPDFPageObj_NewImageObj:[[`number`],`number`],FPDFPageObj_NewTextObj:[[`number`,`string`,`number`],`number`],FPDFPageObj_RemoveMark:[[`number`,`number`],`boolean`],FPDFPageObj_SetBlendMode:[[`number`,`string`],null],FPDFPageObj_SetDashArray:[[`number`,`number`,`number`,`number`],`boolean`],FPDFPageObj_SetDashPhase:[[`number`,`number`],`boolean`],FPDFPageObj_SetFillColor:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFPageObj_SetIsActive:[[`number`,`boolean`],`boolean`],FPDFPageObj_SetLineCap:[[`number`,`number`],`boolean`],FPDFPageObj_SetLineJoin:[[`number`,`number`],`boolean`],FPDFPageObj_SetMatrix:[[`number`,`number`],`boolean`],FPDFPageObj_SetStrokeColor:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFPageObj_SetStrokeWidth:[[`number`,`number`],`boolean`],FPDFPageObj_Transform:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`],null],FPDFPageObj_TransformClipPath:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`],null],FPDFPageObj_TransformF:[[`number`,`number`],`boolean`],FPDFPageObjMark_CountParams:[[`number`],`number`],FPDFPageObjMark_GetName:[[`number`,`number`,`number`,`number`],`boolean`],FPDFPageObjMark_GetParamBlobValue:[[`number`,`string`,`number`,`number`,`number`],`boolean`],FPDFPageObjMark_GetParamIntValue:[[`number`,`string`,`number`],`boolean`],FPDFPageObjMark_GetParamKey:[[`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFPageObjMark_GetParamStringValue:[[`number`,`string`,`number`,`number`,`number`],`boolean`],FPDFPageObjMark_GetParamValueType:[[`number`,`string`],`number`],FPDFPageObjMark_RemoveParam:[[`number`,`number`,`string`],`boolean`],FPDFPageObjMark_SetBlobParam:[[`number`,`number`,`number`,`string`,`number`,`number`],`boolean`],FPDFPageObjMark_SetIntParam:[[`number`,`number`,`number`,`string`,`number`],`boolean`],FPDFPageObjMark_SetStringParam:[[`number`,`number`,`number`,`string`,`string`],`boolean`],FPDFPath_BezierTo:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFPath_Close:[[`number`],`boolean`],FPDFPath_CountSegments:[[`number`],`number`],FPDFPath_GetDrawMode:[[`number`,`number`,`number`],`boolean`],FPDFPath_GetPathSegment:[[`number`,`number`],`number`],FPDFPath_LineTo:[[`number`,`number`,`number`],`boolean`],FPDFPath_MoveTo:[[`number`,`number`,`number`],`boolean`],FPDFPath_SetDrawMode:[[`number`,`number`,`boolean`],`boolean`],FPDFPathSegment_GetClose:[[`number`],`boolean`],FPDFPathSegment_GetPoint:[[`number`,`number`,`number`],`boolean`],FPDFPathSegment_GetType:[[`number`],`number`],FPDFSignatureObj_GetByteRange:[[`number`,`number`,`number`],`number`],FPDFSignatureObj_GetContents:[[`number`,`number`,`number`],`number`],FPDFSignatureObj_GetDocMDPPermission:[[`number`],`number`],FPDFSignatureObj_GetReason:[[`number`,`number`,`number`],`number`],FPDFSignatureObj_GetSubFilter:[[`number`,`number`,`number`],`number`],FPDFSignatureObj_GetTime:[[`number`,`number`,`number`],`number`],FPDFText_ClosePage:[[`number`],null],FPDFText_CountChars:[[`number`],`number`],FPDFText_CountRects:[[`number`,`number`,`number`],`number`],FPDFText_FindClose:[[`number`],null],FPDFText_FindNext:[[`number`],`boolean`],FPDFText_FindPrev:[[`number`],`boolean`],FPDFText_FindStart:[[`number`,`number`,`number`,`number`],`number`],FPDFText_GetBoundedText:[[`number`,`number`,`number`,`number`,`number`,`number`,`number`],`number`],FPDFText_GetCharAngle:[[`number`,`number`],`number`],FPDFText_GetCharBox:[[`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFText_GetCharIndexAtPos:[[`number`,`number`,`number`,`number`,`number`],`number`],FPDFText_GetCharIndexFromTextIndex:[[`number`,`number`],`number`],FPDFText_GetCharOrigin:[[`number`,`number`,`number`,`number`],`boolean`],FPDFText_GetFillColor:[[`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFText_GetFontInfo:[[`number`,`number`,`number`,`number`,`number`],`number`],FPDFText_GetFontSize:[[`number`,`number`],`number`],FPDFText_GetFontWeight:[[`number`,`number`],`number`],FPDFText_GetLooseCharBox:[[`number`,`number`,`number`],`boolean`],FPDFText_GetMatrix:[[`number`,`number`,`number`],`boolean`],FPDFText_GetRect:[[`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFText_GetSchCount:[[`number`],`number`],FPDFText_GetSchResultIndex:[[`number`],`number`],FPDFText_GetStrokeColor:[[`number`,`number`,`number`,`number`,`number`,`number`],`boolean`],FPDFText_GetText:[[`number`,`number`,`number`,`number`],`number`],FPDFText_GetTextIndexFromCharIndex:[[`number`,`number`],`number`],FPDFText_GetTextObject:[[`number`,`number`],`number`],FPDFText_GetUnicode:[[`number`,`number`],`number`],FPDFText_HasUnicodeMapError:[[`number`,`number`],`number`],FPDFText_IsGenerated:[[`number`,`number`],`number`],FPDFText_IsHyphen:[[`number`,`number`],`number`],FPDFText_LoadCidType2Font:[[`number`,`number`,`number`,`string`,`number`,`number`],`number`],FPDFText_LoadFont:[[`number`,`number`,`number`,`number`,`boolean`],`number`],FPDFText_LoadPage:[[`number`],`number`],FPDFText_LoadStandardFont:[[`number`,`string`],`number`],FPDFText_SetCharcodes:[[`number`,`number`,`number`],`boolean`],FPDFText_SetText:[[`number`,`number`],`boolean`],FPDFTextObj_GetFont:[[`number`],`number`],FPDFTextObj_GetFontSize:[[`number`,`number`],`boolean`],FPDFTextObj_GetRenderedBitmap:[[`number`,`number`,`number`,`number`],`number`],FPDFTextObj_GetText:[[`number`,`number`,`number`,`number`],`number`],FPDFTextObj_GetTextRenderMode:[[`number`],`number`],FPDFTextObj_SetTextRenderMode:[[`number`,`number`],`boolean`],PDFiumExt_CloseFileWriter:[[`number`],null],PDFiumExt_CloseFormFillInfo:[[`number`],null],PDFiumExt_ExitFormFillEnvironment:[[`number`],null],PDFiumExt_GetFileWriterData:[[`number`,`number`,`number`],`number`],PDFiumExt_GetFileWriterSize:[[`number`],`number`],PDFiumExt_Init:[[],null],PDFiumExt_InitFormFillEnvironment:[[`number`,`number`],`number`],PDFiumExt_OpenFileWriter:[[],`number`],PDFiumExt_OpenFormFillInfo:[[],`number`],PDFiumExt_SaveAsCopy:[[`number`,`number`],`number`]};async function oe(e){return async function(e){let t={pdfium:e};for(let n in N){let r=n,i=N[r][0],a=N[r][1];t[r]=e.cwrap(n,a,i)}return t}(await M(e))}function P(e,t,n,r=100){let i=e.wasmExports.malloc(r);for(let t=0;t<r;t++)e.HEAP8[i+t]=0;let a=t(i,r),o;if(a>r){e.wasmExports.free(i),i=e.wasmExports.malloc(a);for(let t=0;t<a;t++)e.HEAP8[i+t]=0;t(i,a),o=n(i)}else o=n(i);return e.wasmExports.free(i),o}function se(e,t){let n=t(0,0),r=e.wasmExports.malloc(n);t(r,n);let i=new ArrayBuffer(n),a=new DataView(i);for(let t=0;t<n;t++)a.setInt8(t,e.getValue(r+t,`i8`));return e.wasmExports.free(r),i}var ce=new Set([`Title`,`Author`,`Subject`,`Keywords`,`Producer`,`Creator`,`CreationDate`,`ModDate`,`Trapped`]);function le(e){if(!e||e.length>127||ce.has(e)||e[0]===`/`)return!1;for(let t=0;t<e.length;t++){let n=e.charCodeAt(t);if(n<32||n>126)return!1}return!0}var F={pageTtl:5e3,maxPagesPerDocument:10},ue=class{constructor(e,t,n={}){this.pdfium=e,this.memoryManager=t,this.docs=new Map,this.config={...F,...n}}setDocument(e,t,n){let r=this.docs.get(e);r||(r=new I(t,n,this.pdfium,this.memoryManager,this.config),this.docs.set(e,r))}getContext(e){return this.docs.get(e)}closeDocument(e){let t=this.docs.get(e);return!!t&&(t.dispose(),this.docs.delete(e),!0)}closeAllDocuments(){for(let e of this.docs.values())e.dispose();this.docs.clear()}updateConfig(e){Object.assign(this.config,e);for(let e of this.docs.values())e.updateConfig(this.config)}getCacheStats(){let e={},t=0;for(let[n,r]of this.docs.entries()){let i=r.getCacheSize();e[n]=i,t+=i}return{documents:this.docs.size,totalPages:t,pagesByDocument:e}}},I=class{constructor(e,t,n,r,i){this.filePtr=e,this.docPtr=t,this.memoryManager=r,this.pageCache=new L(n,t,i)}acquirePage(e){return this.pageCache.acquire(e)}borrowPage(e,t){return this.pageCache.borrowPage(e,t)}updateConfig(e){this.pageCache.updateConfig(e)}getCacheSize(){return this.pageCache.size()}dispose(){this.pageCache.forceReleaseAll(),this.pageCache.pdf.FPDF_CloseDocument(this.docPtr),this.memoryManager.free(this.filePtr)}},L=class{constructor(e,t,n){this.pdf=e,this.docPtr=t,this.cache=new Map,this.accessOrder=[],this.config=n}acquire(e){let t=this.cache.get(e);if(!t){this.evictIfNeeded();let n=this.pdf.FPDF_LoadPage(this.docPtr,e);t=new de(this.pdf,this.docPtr,e,n,this.config.pageTtl,()=>{this.cache.delete(e),this.removeFromAccessOrder(e)}),this.cache.set(e,t)}return this.updateAccessOrder(e),t.clearExpiryTimer(),t.bumpRefCount(),t}borrowPage(e,t){let n=this.cache.has(e),r=this.acquire(e);try{return t(r)}finally{n?r.release():r.disposeImmediate()}}forceReleaseAll(){for(let e of this.cache.values())e.disposeImmediate();this.cache.clear(),this.accessOrder.length=0}updateConfig(e){this.config=e;for(let t of this.cache.values())t.updateTtl(e.pageTtl);this.evictIfNeeded()}size(){return this.cache.size}evictIfNeeded(){for(;this.cache.size>=this.config.maxPagesPerDocument;){let e=this.accessOrder[0];if(e===void 0)break;{let t=this.cache.get(e);if(t){if(t.getRefCount()!==0)break;t.disposeImmediate()}else this.removeFromAccessOrder(e)}}}updateAccessOrder(e){this.removeFromAccessOrder(e),this.accessOrder.push(e)}removeFromAccessOrder(e){let t=this.accessOrder.indexOf(e);t>-1&&this.accessOrder.splice(t,1)}},de=class{constructor(e,t,n,r,i,a){this.pdf=e,this.docPtr=t,this.pageIdx=n,this.pagePtr=r,this.onFinalDispose=a,this.refCount=0,this.disposed=!1,this.ttl=i}bumpRefCount(){if(this.disposed)throw Error(`Context already disposed`);this.refCount++}getRefCount(){return this.refCount}clearExpiryTimer(){this.expiryTimer&&=(clearTimeout(this.expiryTimer),void 0)}updateTtl(e){this.ttl=e,this.expiryTimer&&this.refCount===0&&(this.clearExpiryTimer(),this.expiryTimer=setTimeout(()=>this.disposeImmediate(),this.ttl))}release(){this.disposed||(this.refCount--,this.refCount===0&&(this.expiryTimer=setTimeout(()=>this.disposeImmediate(),this.ttl)))}disposeImmediate(){this.disposed||(this.disposed=!0,this.clearExpiryTimer(),this.textPagePtr!==void 0&&this.pdf.FPDFText_ClosePage(this.textPagePtr),this.formHandle!==void 0&&(this.pdf.FORM_OnBeforeClosePage(this.pagePtr,this.formHandle),this.pdf.PDFiumExt_ExitFormFillEnvironment(this.formHandle)),this.formInfoPtr!==void 0&&this.pdf.PDFiumExt_CloseFormFillInfo(this.formInfoPtr),this.pdf.FPDF_ClosePage(this.pagePtr),this.onFinalDispose())}getTextPage(){return this.ensureAlive(),this.textPagePtr===void 0&&(this.textPagePtr=this.pdf.FPDFText_LoadPage(this.pagePtr)),this.textPagePtr}getFormHandle(){return this.ensureAlive(),this.formHandle===void 0&&(this.formInfoPtr=this.pdf.PDFiumExt_OpenFormFillInfo(),this.formHandle=this.pdf.PDFiumExt_InitFormFillEnvironment(this.docPtr,this.formInfoPtr),this.pdf.FORM_OnAfterLoadPage(this.pagePtr,this.formHandle)),this.formHandle}withAnnotation(e,t){this.ensureAlive();let n=this.pdf.FPDFPage_GetAnnot(this.pagePtr,e);try{return t(n)}finally{this.pdf.FPDFPage_CloseAnnot(n)}}ensureAlive(){if(this.disposed)throw Error(`PageContext already disposed`)}},fe={MAX_TOTAL_MEMORY:2147483648},R=`PDFiumEngine`,pe=`MemoryManager`,me=class{constructor(e,t){this.pdfiumModule=e,this.logger=t,this.allocations=new Map,this.totalAllocated=0}malloc(e){if(this.totalAllocated+e>fe.MAX_TOTAL_MEMORY)throw Error(`Total memory usage would exceed limit: ${this.totalAllocated+e} > ${fe.MAX_TOTAL_MEMORY}`);let t=this.pdfiumModule.pdfium.wasmExports.malloc(e);if(!t)throw Error(`Failed to allocate ${e} bytes`);let n={ptr:t,size:e,timestamp:Date.now(),stack:this.logger.isEnabled(`debug`)?Error().stack:void 0};return this.allocations.set(t,n),this.totalAllocated+=e,t}free(e){let t=this.allocations.get(e);t?(this.totalAllocated-=t.size,this.allocations.delete(e)):this.logger.warn(R,pe,`Freeing untracked pointer: ${e}`),this.pdfiumModule.pdfium.wasmExports.free(e)}getStats(){return{totalAllocated:this.totalAllocated,allocationCount:this.allocations.size,allocations:this.logger.isEnabled(`debug`)?Array.from(this.allocations.values()):[]}}checkLeaks(){if(this.allocations.size>0){this.logger.warn(R,pe,`Potential memory leak: ${this.allocations.size} unfreed allocations`);for(let[e,t]of this.allocations)this.logger.warn(R,pe,`  - ${e}: ${t.size} bytes`,t.stack)}}},z=`PDFiumEngine`,B=`Engine`,he=class{constructor(e,t={}){this.pdfiumModule=e,this.memoryLeakCheckInterval=null;let{logger:n=new o}=t;this.logger=n,this.memoryManager=new me(this.pdfiumModule,this.logger),this.cache=new ue(this.pdfiumModule,this.memoryManager),this.logger.isEnabled(`debug`)&&(this.memoryLeakCheckInterval=setInterval(()=>{this.memoryManager.checkLeaks()},1e4)),this.logger.debug(z,B,`initialize`),this.logger.perf(z,B,`Initialize`,`Begin`,`General`),this.pdfiumModule.PDFiumExt_Init(),this.logger.perf(z,B,`Initialize`,`End`,`General`)}destroy(){return this.logger.debug(z,B,`destroy`),this.logger.perf(z,B,`Destroy`,`Begin`,`General`),this.pdfiumModule.FPDF_DestroyLibrary(),this.memoryLeakCheckInterval&&=(clearInterval(this.memoryLeakCheckInterval),null),this.logger.perf(z,B,`Destroy`,`End`,`General`),A.resolve(!0)}withWString(e,t){let n=2*(e.length+1),r=this.memoryManager.malloc(n);try{return this.pdfiumModule.pdfium.stringToUTF16(e,r,n),t(r)}finally{this.memoryManager.free(r)}}withFloatArray(e,t){let n=e??[],r=4*n.length,i=r?this.memoryManager.malloc(r):0;try{if(r)for(let e=0;e<n.length;e++)this.pdfiumModule.pdfium.setValue(i+4*e,n[e],`float`);return t(i,n.length)}finally{r&&this.memoryManager.free(i)}}openDocumentBuffer(e,t){this.logger.debug(z,B,`openDocumentBuffer`,e,t),this.logger.perf(z,B,`OpenDocumentBuffer`,`Begin`,e.id);let n=new Uint8Array(e.content),r=n.length,i=this.memoryManager.malloc(r);this.pdfiumModule.pdfium.HEAPU8.set(n,i);let a=this.pdfiumModule.FPDF_LoadMemDocument(i,r,t?.password??``);if(!a){let t=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(z,B,`FPDF_LoadMemDocument failed with ${t}`),this.memoryManager.free(i),this.logger.perf(z,B,`OpenDocumentBuffer`,`End`,e.id),A.reject({code:t,message:`FPDF_LoadMemDocument failed`})}let o=this.pdfiumModule.FPDF_GetPageCount(a),s=[],c=this.memoryManager.malloc(8);for(let t=0;t<o;t++){if(!this.pdfiumModule.FPDF_GetPageSizeByIndexF(a,t,c)){let t=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(z,B,`FPDF_GetPageSizeByIndexF failed with ${t}`),this.memoryManager.free(c),this.pdfiumModule.FPDF_CloseDocument(a),this.memoryManager.free(i),this.logger.perf(z,B,`OpenDocumentBuffer`,`End`,e.id),A.reject({code:t,message:`FPDF_GetPageSizeByIndexF failed`})}let n=this.pdfiumModule.EPDF_GetPageRotationByIndex(a,t),r={index:t,size:{width:this.pdfiumModule.pdfium.getValue(c,`float`),height:this.pdfiumModule.pdfium.getValue(c+4,`float`)},rotation:n};s.push(r)}this.memoryManager.free(c);let l={id:e.id,pageCount:o,pages:s};return this.cache.setDocument(e.id,i,a),this.logger.perf(z,B,`OpenDocumentBuffer`,`End`,e.id),A.resolve(l)}getMetadata(e){this.logger.debug(z,B,`getMetadata`,e),this.logger.perf(z,B,`GetMetadata`,`Begin`,e.id);let t=this.cache.getContext(e.id);if(!t)return this.logger.perf(z,B,`GetMetadata`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let n=this.readMetaText(t.docPtr,`CreationDate`),r=this.readMetaText(t.docPtr,`ModDate`),i={title:this.readMetaText(t.docPtr,`Title`),author:this.readMetaText(t.docPtr,`Author`),subject:this.readMetaText(t.docPtr,`Subject`),keywords:this.readMetaText(t.docPtr,`Keywords`),producer:this.readMetaText(t.docPtr,`Producer`),creator:this.readMetaText(t.docPtr,`Creator`),creationDate:n?l(n)??null:null,modificationDate:r?l(r)??null:null,trapped:this.getMetaTrapped(t.docPtr),custom:this.readAllMeta(t.docPtr,!0)};return this.logger.perf(z,B,`GetMetadata`,`End`,e.id),A.resolve(i)}setMetadata(e,t){this.logger.debug(z,B,`setMetadata`,e,t),this.logger.perf(z,B,`SetMetadata`,`Begin`,e.id);let n=this.cache.getContext(e.id);if(!n)return this.logger.perf(z,B,`SetMetadata`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let r=[[`title`,`Title`],[`author`,`Author`],[`subject`,`Subject`],[`keywords`,`Keywords`],[`producer`,`Producer`],[`creator`,`Creator`]],i=!0;for(let[e,a]of r){let r=t[e];if(r===void 0)continue;let o=r===null?null:r;this.setMetaText(n.docPtr,a,o)||(i=!1)}let a=(e,r)=>{let a=t[e];if(a===void 0)return;if(a===null)return void(this.setMetaText(n.docPtr,r,null)||(i=!1));let o=k(a);this.setMetaText(n.docPtr,r,o)||(i=!1)};if(a(`creationDate`,`CreationDate`),a(`modificationDate`,`ModDate`),t.trapped!==void 0&&(this.setMetaTrapped(n.docPtr,t.trapped??null)||(i=!1)),t.custom!==void 0)for(let[e,r]of Object.entries(t.custom))le(e)?this.setMetaText(n.docPtr,e,r??null)||(i=!1):this.logger.warn(z,B,`Invalid custom metadata key skipped`,e);return this.logger.perf(z,B,`SetMetadata`,`End`,e.id),i?A.resolve(!0):A.reject({code:_.Unknown,message:`one or more metadata fields could not be written`})}getDocPermissions(e){this.logger.debug(z,B,`getDocPermissions`,e),this.logger.perf(z,B,`getDocPermissions`,`Begin`,e.id);let t=this.cache.getContext(e.id);if(!t)return this.logger.perf(z,B,`getDocPermissions`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let n=this.pdfiumModule.FPDF_GetDocPermissions(t.docPtr);return A.resolve(n)}getDocUserPermissions(e){this.logger.debug(z,B,`getDocUserPermissions`,e),this.logger.perf(z,B,`getDocUserPermissions`,`Begin`,e.id);let t=this.cache.getContext(e.id);if(!t)return this.logger.perf(z,B,`getDocUserPermissions`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let n=this.pdfiumModule.FPDF_GetDocUserPermissions(t.docPtr);return A.resolve(n)}getSignatures(e){this.logger.debug(z,B,`getSignatures`,e),this.logger.perf(z,B,`GetSignatures`,`Begin`,e.id);let t=this.cache.getContext(e.id);if(!t)return this.logger.perf(z,B,`GetSignatures`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let n=[],r=this.pdfiumModule.FPDF_GetSignatureCount(t.docPtr);for(let e=0;e<r;e++){let r=this.pdfiumModule.FPDF_GetSignatureObject(t.docPtr,e),i=se(this.pdfiumModule.pdfium,(e,t)=>this.pdfiumModule.FPDFSignatureObj_GetContents(r,e,t)),a=se(this.pdfiumModule.pdfium,(e,t)=>4*this.pdfiumModule.FPDFSignatureObj_GetByteRange(r,e,t)),o=se(this.pdfiumModule.pdfium,(e,t)=>this.pdfiumModule.FPDFSignatureObj_GetSubFilter(r,e,t)),s=P(this.pdfiumModule.pdfium,(e,t)=>this.pdfiumModule.FPDFSignatureObj_GetReason(r,e,t),this.pdfiumModule.pdfium.UTF16ToString),c=P(this.pdfiumModule.pdfium,(e,t)=>this.pdfiumModule.FPDFSignatureObj_GetTime(r,e,t),this.pdfiumModule.pdfium.UTF8ToString),l=this.pdfiumModule.FPDFSignatureObj_GetDocMDPPermission(r);n.push({contents:i,byteRange:a,subFilter:o,reason:s,time:c,docMDP:l})}return this.logger.perf(z,B,`GetSignatures`,`End`,e.id),A.resolve(n)}getBookmarks(e){this.logger.debug(z,B,`getBookmarks`,e),this.logger.perf(z,B,`GetBookmarks`,`Begin`,e.id);let t=this.cache.getContext(e.id);if(!t)return this.logger.perf(z,B,`getBookmarks`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let n=this.readPdfBookmarks(t.docPtr,0);return this.logger.perf(z,B,`GetBookmarks`,`End`,e.id),A.resolve({bookmarks:n})}setBookmarks(e,t){this.logger.debug(z,B,`setBookmarks`,e,t),this.logger.perf(z,B,`SetBookmarks`,`Begin`,e.id);let n=this.cache.getContext(e.id);if(!n)return this.logger.perf(z,B,`SetBookmarks`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});if(!this.pdfiumModule.EPDFBookmark_Clear(n.docPtr))return this.logger.perf(z,B,`SetBookmarks`,`End`,e.id),A.reject({code:_.Unknown,message:`failed to clear existing bookmarks`});let r=(e,t)=>{for(let i of t){let t=this.withWString(i.title??``,t=>this.pdfiumModule.EPDFBookmark_AppendChild(n.docPtr,e,t));if(!t||i.target&&!this.applyBookmarkTarget(n.docPtr,t,i.target)||i.children?.length&&!r(t,i.children))return!1}return!0},i=r(0,t);return this.logger.perf(z,B,`SetBookmarks`,`End`,e.id),i?A.resolve(!0):A.reject({code:_.Unknown,message:`failed to build bookmark tree`})}deleteBookmarks(e){this.logger.debug(z,B,`deleteBookmarks`,e),this.logger.perf(z,B,`DeleteBookmarks`,`Begin`,e.id);let t=this.cache.getContext(e.id);if(!t)return this.logger.perf(z,B,`DeleteBookmarks`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let n=this.pdfiumModule.EPDFBookmark_Clear(t.docPtr);return this.logger.perf(z,B,`DeleteBookmarks`,`End`,e.id),n?A.resolve(!0):A.reject({code:_.Unknown,message:`failed to clear bookmarks`})}renderPageRaw(e,t,n){this.logger.debug(z,B,`renderPage`,e,t,n),this.logger.perf(z,B,`RenderPage`,`Begin`,`${e.id}-${t.index}`);let r={origin:{x:0,y:0},size:t.size},i=this.renderRectEncoded(e,t,r,n);return this.logger.perf(z,B,`RenderPage`,`End`,`${e.id}-${t.index}`),i}renderPageRect(e,t,n,r){this.logger.debug(z,B,`renderPageRect`,e,t,n,r),this.logger.perf(z,B,`RenderPageRect`,`Begin`,`${e.id}-${t.index}`);let i=this.renderRectEncoded(e,t,n,r);return this.logger.perf(z,B,`RenderPageRect`,`End`,`${e.id}-${t.index}`),i}getPageAnnotations(e,t){this.logger.debug(z,B,`getPageAnnotations`,e,t),this.logger.perf(z,B,`GetPageAnnotations`,`Begin`,`${e.id}-${t.index}`);let n=this.cache.getContext(e.id);if(!n)return this.logger.perf(z,B,`GetPageAnnotations`,`End`,`${e.id}-${t.index}`),A.reject({code:_.DocNotOpen,message:`document does not open`});let r=this.readPageAnnotations(n,t);return this.logger.perf(z,B,`GetPageAnnotations`,`End`,`${e.id}-${t.index}`),this.logger.debug(z,B,`GetPageAnnotations`,`${e.id}-${t.index}`,r),A.resolve(r)}createPageAnnotation(e,t,n,r){this.logger.debug(z,B,`createPageAnnotation`,e,t,n),this.logger.perf(z,B,`CreatePageAnnotation`,`Begin`,`${e.id}-${t.index}`);let i=this.cache.getContext(e.id);if(!i)return this.logger.perf(z,B,`CreatePageAnnotation`,`End`,`${e.id}-${t.index}`),A.reject({code:_.DocNotOpen,message:`document does not open`});let o=i.acquirePage(t.index),s=this.pdfiumModule.EPDFPage_CreateAnnot(o.pagePtr,n.type);if(!s)return this.logger.perf(z,B,`CreatePageAnnotation`,`End`,`${e.id}-${t.index}`),o.release(),A.reject({code:_.CantCreateAnnot,message:`can not create annotation with specified type`});if(a(n.id)||(n.id=u()),!this.setAnnotString(s,`NM`,n.id))return this.pdfiumModule.FPDFPage_CloseAnnot(s),o.release(),A.reject({code:_.CantSetAnnotString,message:`can not set the name of the annotation`});if(!this.setPageAnnoRect(t,s,n.rect))return this.pdfiumModule.FPDFPage_CloseAnnot(s),o.release(),this.logger.perf(z,B,`CreatePageAnnotation`,`End`,`${e.id}-${t.index}`),A.reject({code:_.CantSetAnnotRect,message:`can not set the rect of the annotation`});let c=!1;switch(n.type){case g.INK:c=this.addInkStroke(t,o.pagePtr,s,n);break;case g.STAMP:c=this.addStampContent(i.docPtr,t,o.pagePtr,s,n,r?.imageData);break;case g.TEXT:c=this.addTextContent(t,o.pagePtr,s,n);break;case g.FREETEXT:c=this.addFreeTextContent(t,o.pagePtr,s,n);break;case g.LINE:c=this.addLineContent(t,o.pagePtr,s,n);break;case g.POLYLINE:case g.POLYGON:c=this.addPolyContent(t,o.pagePtr,s,n);break;case g.CIRCLE:case g.SQUARE:c=this.addShapeContent(t,o.pagePtr,s,n);break;case g.UNDERLINE:case g.STRIKEOUT:case g.SQUIGGLY:case g.HIGHLIGHT:c=this.addTextMarkupContent(t,o.pagePtr,s,n)}return c?(n.blendMode===void 0?this.pdfiumModule.EPDFAnnot_GenerateAppearance(s):this.pdfiumModule.EPDFAnnot_GenerateAppearanceWithBlend(s,n.blendMode),this.pdfiumModule.FPDFPage_GenerateContent(o.pagePtr),this.pdfiumModule.FPDFPage_CloseAnnot(s),o.release(),this.logger.perf(z,B,`CreatePageAnnotation`,`End`,`${e.id}-${t.index}`),A.resolve(n.id)):(this.pdfiumModule.FPDFPage_RemoveAnnot(o.pagePtr,s),o.release(),this.logger.perf(z,B,`CreatePageAnnotation`,`End`,`${e.id}-${t.index}`),A.reject({code:_.CantSetAnnotContent,message:`can not add content of the annotation`}))}updatePageAnnotation(e,t,n){this.logger.debug(z,B,`updatePageAnnotation`,e,t,n),this.logger.perf(z,B,`UpdatePageAnnotation`,`Begin`,`${e.id}-${t.index}`);let r=this.cache.getContext(e.id);if(!r)return this.logger.perf(z,B,`UpdatePageAnnotation`,`End`,`${e.id}-${t.index}`),A.reject({code:_.DocNotOpen,message:`document does not open`});let i=r.acquirePage(t.index),a=this.getAnnotationByName(i.pagePtr,n.id);if(!a)return i.release(),this.logger.perf(z,B,`UpdatePageAnnotation`,`End`,`${e.id}-${t.index}`),A.reject({code:_.NotFound,message:`annotation not found`});if(!this.setPageAnnoRect(t,a,n.rect))return this.pdfiumModule.FPDFPage_CloseAnnot(a),i.release(),this.logger.perf(z,B,`UpdatePageAnnotation`,`End`,`${e.id}-${t.index}`),A.reject({code:_.CantSetAnnotRect,message:`failed to move annotation`});let o=!1;switch(n.type){case g.INK:if(!this.pdfiumModule.FPDFAnnot_RemoveInkList(a))break;o=this.addInkStroke(t,i.pagePtr,a,n);break;case g.STAMP:o=this.addStampContent(r.docPtr,t,i.pagePtr,a,n);break;case g.TEXT:o=this.addTextContent(t,i.pagePtr,a,n);break;case g.FREETEXT:o=this.addFreeTextContent(t,i.pagePtr,a,n);break;case g.CIRCLE:case g.SQUARE:o=this.addShapeContent(t,i.pagePtr,a,n);break;case g.LINE:o=this.addLineContent(t,i.pagePtr,a,n);break;case g.POLYGON:case g.POLYLINE:o=this.addPolyContent(t,i.pagePtr,a,n);break;case g.HIGHLIGHT:case g.UNDERLINE:case g.STRIKEOUT:case g.SQUIGGLY:o=this.addTextMarkupContent(t,i.pagePtr,a,n);break;default:o=!1}return o&&(n.blendMode===void 0?this.pdfiumModule.EPDFAnnot_GenerateAppearance(a):this.pdfiumModule.EPDFAnnot_GenerateAppearanceWithBlend(a,n.blendMode),this.pdfiumModule.FPDFPage_GenerateContent(i.pagePtr)),this.pdfiumModule.FPDFPage_CloseAnnot(a),i.release(),this.logger.perf(z,B,`UpdatePageAnnotation`,`End`,`${e.id}-${t.index}`),o?A.resolve(!0):A.reject({code:_.CantSetAnnotContent,message:`failed to update annotation`})}removePageAnnotation(e,t,n){this.logger.debug(z,B,`removePageAnnotation`,e,t,n),this.logger.perf(z,B,`RemovePageAnnotation`,`Begin`,`${e.id}-${t.index}`);let r=this.cache.getContext(e.id);if(!r)return this.logger.perf(z,B,`RemovePageAnnotation`,`End`,`${e.id}-${t.index}`),A.reject({code:_.DocNotOpen,message:`document does not open`});let i=r.acquirePage(t.index),a=!1;return a=this.removeAnnotationByName(i.pagePtr,n.id),a?(a=this.pdfiumModule.FPDFPage_GenerateContent(i.pagePtr),a||this.logger.error(z,B,`FPDFPage_GenerateContent Failed`,`${e.id}-${t.index}`)):this.logger.error(z,B,`FPDFPage_RemoveAnnot Failed`,`${e.id}-${t.index}`),i.release(),this.logger.perf(z,B,`RemovePageAnnotation`,`End`,`${e.id}-${t.index}`),A.resolve(a)}getPageTextRects(e,t){this.logger.debug(z,B,`getPageTextRects`,e,t),this.logger.perf(z,B,`GetPageTextRects`,`Begin`,`${e.id}-${t.index}`);let n=this.cache.getContext(e.id);if(!n)return this.logger.perf(z,B,`GetPageTextRects`,`End`,`${e.id}-${t.index}`),A.reject({code:_.DocNotOpen,message:`document does not open`});let r=n.acquirePage(t.index),i=this.pdfiumModule.FPDFText_LoadPage(r.pagePtr),a=this.readPageTextRects(t,r.docPtr,r.pagePtr,i);return this.pdfiumModule.FPDFText_ClosePage(i),r.release(),this.logger.perf(z,B,`GetPageTextRects`,`End`,`${e.id}-${t.index}`),A.resolve(a)}renderThumbnailRaw(e,t,n){let{scaleFactor:r=1,...i}=n??{};if(this.logger.debug(z,B,`renderThumbnail`,e,t,n),this.logger.perf(z,B,`RenderThumbnail`,`Begin`,`${e.id}-${t.index}`),!this.cache.getContext(e.id))return this.logger.perf(z,B,`RenderThumbnail`,`End`,`${e.id}-${t.index}`),A.reject({code:_.DocNotOpen,message:`document does not open`});let a=this.renderPageRaw(e,t,{scaleFactor:Math.max(r,.5),...i});return this.logger.perf(z,B,`RenderThumbnail`,`End`,`${e.id}-${t.index}`),a}getAttachments(e){this.logger.debug(z,B,`getAttachments`,e),this.logger.perf(z,B,`GetAttachments`,`Begin`,e.id);let t=this.cache.getContext(e.id);if(!t)return this.logger.perf(z,B,`GetAttachments`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let n=[],r=this.pdfiumModule.FPDFDoc_GetAttachmentCount(t.docPtr);for(let e=0;e<r;e++){let r=this.readPdfAttachment(t.docPtr,e);n.push(r)}return this.logger.perf(z,B,`GetAttachments`,`End`,e.id),A.resolve(n)}addAttachment(e,t){this.logger.debug(z,B,`addAttachment`,e,t?.name),this.logger.perf(z,B,`AddAttachment`,`Begin`,e.id);let n=this.cache.getContext(e.id);if(!n)return this.logger.perf(z,B,`AddAttachment`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let{name:r,description:i,mimeType:a,data:o}=t??{};if(!r)return this.logger.perf(z,B,`AddAttachment`,`End`,e.id),A.reject({code:_.NotFound,message:`attachment name is required`});if(!o||(Uint8Array,o.byteLength===0))return this.logger.perf(z,B,`AddAttachment`,`End`,e.id),A.reject({code:_.NotFound,message:`attachment data is empty`});let s=this.withWString(r,e=>this.pdfiumModule.FPDFDoc_AddAttachment(n.docPtr,e));if(!s)return this.logger.perf(z,B,`AddAttachment`,`End`,e.id),A.reject({code:_.Unknown,message:`An attachment named "${r}" already exists`});this.withWString(i,e=>this.pdfiumModule.EPDFAttachment_SetDescription(s,e)),this.pdfiumModule.EPDFAttachment_SetSubtype(s,a);let c=o instanceof Uint8Array?o:new Uint8Array(o),l=c.byteLength,u=this.memoryManager.malloc(l);try{if(this.pdfiumModule.pdfium.HEAPU8.set(c,u),!this.pdfiumModule.FPDFAttachment_SetFile(s,n.docPtr,u,l))return this.logger.perf(z,B,`AddAttachment`,`End`,e.id),A.reject({code:_.Unknown,message:`failed to write attachment bytes`})}finally{this.memoryManager.free(u)}return this.logger.perf(z,B,`AddAttachment`,`End`,e.id),A.resolve(!0)}removeAttachment(e,t){this.logger.debug(z,B,`deleteAttachment`,e,t),this.logger.perf(z,B,`DeleteAttachment`,`Begin`,e.id);let n=this.cache.getContext(e.id);if(!n)return this.logger.perf(z,B,`DeleteAttachment`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let r=this.pdfiumModule.FPDFDoc_GetAttachmentCount(n.docPtr);if(t.index<0||t.index>=r)return this.logger.perf(z,B,`DeleteAttachment`,`End`,e.id),A.reject({code:_.Unknown,message:`attachment index ${t.index} out of range`});let i=this.pdfiumModule.FPDFDoc_DeleteAttachment(n.docPtr,t.index);return this.logger.perf(z,B,`DeleteAttachment`,`End`,e.id),i?A.resolve(!0):A.reject({code:_.Unknown,message:`failed to delete attachment`})}readAttachmentContent(e,t){this.logger.debug(z,B,`readAttachmentContent`,e,t),this.logger.perf(z,B,`ReadAttachmentContent`,`Begin`,e.id);let n=this.cache.getContext(e.id);if(!n)return this.logger.perf(z,B,`ReadAttachmentContent`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let r=this.pdfiumModule.FPDFDoc_GetAttachment(n.docPtr,t.index),i=this.memoryManager.malloc(4);if(!this.pdfiumModule.FPDFAttachment_GetFile(r,0,0,i))return this.memoryManager.free(i),this.logger.perf(z,B,`ReadAttachmentContent`,`End`,e.id),A.reject({code:_.CantReadAttachmentSize,message:`can not read attachment size`});let a=this.pdfiumModule.pdfium.getValue(i,`i32`)>>>0,o=this.memoryManager.malloc(a);if(!this.pdfiumModule.FPDFAttachment_GetFile(r,o,a,i))return this.memoryManager.free(i),this.memoryManager.free(o),this.logger.perf(z,B,`ReadAttachmentContent`,`End`,e.id),A.reject({code:_.CantReadAttachmentContent,message:`can not read attachment content`});let s=new ArrayBuffer(a),c=new DataView(s);for(let e=0;e<a;e++)c.setInt8(e,this.pdfiumModule.pdfium.getValue(o+e,`i8`));return this.memoryManager.free(i),this.memoryManager.free(o),this.logger.perf(z,B,`ReadAttachmentContent`,`End`,e.id),A.resolve(s)}setFormFieldValue(e,t,n,r){this.logger.debug(z,B,`SetFormFieldValue`,e,n,r),this.logger.perf(z,B,`SetFormFieldValue`,`Begin`,`${e.id}-${n.id}`);let i=this.cache.getContext(e.id);if(!i)return this.logger.debug(z,B,`SetFormFieldValue`,`document is not opened`),this.logger.perf(z,B,`SetFormFieldValue`,`End`,`${e.id}-${n.id}`),A.reject({code:_.DocNotOpen,message:`document does not open`});let a=this.pdfiumModule.PDFiumExt_OpenFormFillInfo(),o=this.pdfiumModule.PDFiumExt_InitFormFillEnvironment(i.docPtr,a),s=i.acquirePage(t.index);this.pdfiumModule.FORM_OnAfterLoadPage(s.pagePtr,o);let c=this.getAnnotationByName(s.pagePtr,n.id);if(!c)return s.release(),this.logger.perf(z,B,`SetFormFieldValue`,`End`,`${e.id}-${t.index}`),A.reject({code:_.NotFound,message:`annotation not found`});if(!this.pdfiumModule.FORM_SetFocusedAnnot(o,c))return this.logger.debug(z,B,`SetFormFieldValue`,`failed to set focused annotation`),this.logger.perf(z,B,`SetFormFieldValue`,`End`,`${e.id}-${n.id}`),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,o),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(o),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(a),A.reject({code:_.CantFocusAnnot,message:`failed to set focused annotation`});switch(r.kind){case`text`:{if(!this.pdfiumModule.FORM_SelectAllText(o,s.pagePtr))return this.logger.debug(z,B,`SetFormFieldValue`,`failed to select all text`),this.logger.perf(z,B,`SetFormFieldValue`,`End`,`${e.id}-${n.id}`),this.pdfiumModule.FORM_ForceToKillFocus(o),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,o),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(o),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(a),A.reject({code:_.CantSelectText,message:`failed to select all text`});let t=2*(r.text.length+1),i=this.memoryManager.malloc(t);this.pdfiumModule.pdfium.stringToUTF16(r.text,i,t),this.pdfiumModule.FORM_ReplaceSelection(o,s.pagePtr,i),this.memoryManager.free(i)}break;case`selection`:if(!this.pdfiumModule.FORM_SetIndexSelected(o,s.pagePtr,r.index,r.isSelected))return this.logger.debug(z,B,`SetFormFieldValue`,`failed to set index selected`),this.logger.perf(z,B,`SetFormFieldValue`,`End`,`${e.id}-${n.id}`),this.pdfiumModule.FORM_ForceToKillFocus(o),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,o),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(o),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(a),A.reject({code:_.CantSelectOption,message:`failed to set index selected`});break;case`checked`:if(!this.pdfiumModule.FORM_OnChar(o,s.pagePtr,13,0))return this.logger.debug(z,B,`SetFormFieldValue`,`failed to set field checked`),this.logger.perf(z,B,`SetFormFieldValue`,`End`,`${e.id}-${n.id}`),this.pdfiumModule.FORM_ForceToKillFocus(o),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,o),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(o),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(a),A.reject({code:_.CantCheckField,message:`failed to set field checked`})}return this.pdfiumModule.FORM_ForceToKillFocus(o),this.pdfiumModule.FPDFPage_CloseAnnot(c),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,o),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(o),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(a),A.resolve(!0)}flattenPage(e,t,n){let{flag:r=S.Display}=n??{};this.logger.debug(z,B,`flattenPage`,e,t,r),this.logger.perf(z,B,`flattenPage`,`Begin`,e.id);let i=this.cache.getContext(e.id);if(!i)return this.logger.perf(z,B,`flattenPage`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let a=i.acquirePage(t.index),o=this.pdfiumModule.FPDFPage_Flatten(a.pagePtr,r);return a.release(),this.logger.perf(z,B,`flattenPage`,`End`,e.id),A.resolve(o)}extractPages(e,t){this.logger.debug(z,B,`extractPages`,e,t),this.logger.perf(z,B,`ExtractPages`,`Begin`,e.id);let n=this.cache.getContext(e.id);if(!n)return this.logger.perf(z,B,`ExtractPages`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let r=this.pdfiumModule.FPDF_CreateNewDocument();if(!r)return this.logger.perf(z,B,`ExtractPages`,`End`,e.id),A.reject({code:_.CantCreateNewDoc,message:`can not create new document`});let i=this.memoryManager.malloc(4*t.length);for(let e=0;e<t.length;e++)this.pdfiumModule.pdfium.setValue(i+4*e,t[e],`i32`);if(!this.pdfiumModule.FPDF_ImportPagesByIndex(r,n.docPtr,i,t.length,0))return this.pdfiumModule.FPDF_CloseDocument(r),this.logger.perf(z,B,`ExtractPages`,`End`,e.id),A.reject({code:_.CantImportPages,message:`can not import pages to new document`});let a=this.saveDocument(r);return this.pdfiumModule.FPDF_CloseDocument(r),this.logger.perf(z,B,`ExtractPages`,`End`,e.id),A.resolve(a)}extractText(e,t){this.logger.debug(z,B,`extractText`,e,t),this.logger.perf(z,B,`ExtractText`,`Begin`,e.id);let n=this.cache.getContext(e.id);if(!n)return this.logger.perf(z,B,`ExtractText`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let r=[];for(let e=0;e<t.length;e++){let i=n.acquirePage(t[e]),a=this.pdfiumModule.FPDFText_LoadPage(i.pagePtr),o=this.pdfiumModule.FPDFText_CountChars(a),s=this.memoryManager.malloc(2*(o+1));this.pdfiumModule.FPDFText_GetText(a,0,o,s);let c=this.pdfiumModule.pdfium.UTF16ToString(s);this.memoryManager.free(s),r.push(c),this.pdfiumModule.FPDFText_ClosePage(a),i.release()}let i=r.join(`

`);return this.logger.perf(z,B,`ExtractText`,`End`,e.id),A.resolve(i)}getTextSlices(e,t){if(this.logger.debug(z,B,`getTextSlices`,e,t),this.logger.perf(z,B,`GetTextSlices`,`Begin`,e.id),t.length===0)return this.logger.perf(z,B,`GetTextSlices`,`End`,e.id),A.resolve([]);let n=this.cache.getContext(e.id);if(!n)return this.logger.perf(z,B,`GetTextSlices`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});try{let r=Array(t.length),i=new Map;t.forEach((e,t)=>{(i.get(e.pageIndex)??i.set(e.pageIndex,[]).get(e.pageIndex)).push({slice:e,pos:t})});for(let[e,t]of i){let i=n.acquirePage(e),a=i.getTextPage();for(let{slice:e,pos:n}of t){let t=this.memoryManager.malloc(2*(e.charCount+1));this.pdfiumModule.FPDFText_GetText(a,e.charIndex,e.charCount,t),r[n]=c(this.pdfiumModule.pdfium.UTF16ToString(t)),this.memoryManager.free(t)}i.release()}return this.logger.perf(z,B,`GetTextSlices`,`End`,e.id),A.resolve(r)}catch(t){return this.logger.error(z,B,`getTextSlices error`,t),this.logger.perf(z,B,`GetTextSlices`,`End`,e.id),A.reject({code:_.Unknown,message:String(t)})}}merge(e){this.logger.debug(z,B,`merge`,e);let t=e.map(e=>e.id).join(`.`);this.logger.perf(z,B,`Merge`,`Begin`,t);let n=this.pdfiumModule.FPDF_CreateNewDocument();if(!n)return this.logger.perf(z,B,`Merge`,`End`,t),A.reject({code:_.CantCreateNewDoc,message:`can not create new document`});let r=[];for(let i of e.reverse()){let e=new Uint8Array(i.content),a=e.length,o=this.memoryManager.malloc(a);this.pdfiumModule.pdfium.HEAPU8.set(e,o);let s=this.pdfiumModule.FPDF_LoadMemDocument(o,a,``);if(!s){let e=this.pdfiumModule.FPDF_GetLastError();this.logger.error(z,B,`FPDF_LoadMemDocument failed with ${e}`),this.memoryManager.free(o);for(let e of r)this.pdfiumModule.FPDF_CloseDocument(e.docPtr),this.memoryManager.free(e.filePtr);return this.logger.perf(z,B,`Merge`,`End`,t),A.reject({code:e,message:`FPDF_LoadMemDocument failed`})}if(r.push({filePtr:o,docPtr:s}),!this.pdfiumModule.FPDF_ImportPages(n,s,``,0)){this.pdfiumModule.FPDF_CloseDocument(n);for(let e of r)this.pdfiumModule.FPDF_CloseDocument(e.docPtr),this.memoryManager.free(e.filePtr);return this.logger.perf(z,B,`Merge`,`End`,t),A.reject({code:_.CantImportPages,message:`can not import pages to new document`})}}let i=this.saveDocument(n);this.pdfiumModule.FPDF_CloseDocument(n);for(let e of r)this.pdfiumModule.FPDF_CloseDocument(e.docPtr),this.memoryManager.free(e.filePtr);let a={id:`${Math.random()}`,content:i};return this.logger.perf(z,B,`Merge`,`End`,t),A.resolve(a)}mergePages(e){let t=e.map(e=>`${e.docId}:${e.pageIndices.join(`,`)}`).join(`|`);this.logger.debug(z,B,`mergePages`,e),this.logger.perf(z,B,`MergePages`,`Begin`,t);let n=this.pdfiumModule.FPDF_CreateNewDocument();if(!n)return this.logger.perf(z,B,`MergePages`,`End`,t),A.reject({code:_.CantCreateNewDoc,message:`Cannot create new document`});try{for(let t of[...e].reverse()){let e=this.cache.getContext(t.docId);if(!e){this.logger.warn(z,B,`Document ${t.docId} is not open, skipping`);continue}let r=this.pdfiumModule.FPDF_GetPageCount(e.docPtr),i=t.pageIndices.filter(e=>e>=0&&e<r);if(i.length===0)continue;let a=i.map(e=>e+1).join(`,`);try{if(!this.pdfiumModule.FPDF_ImportPages(n,e.docPtr,a,0))throw Error(`Failed to import pages ${a} from document ${t.docId}`)}finally{}}let r=this.saveDocument(n),i={id:`${Math.random()}`,content:r};return this.logger.perf(z,B,`MergePages`,`End`,t),A.resolve(i)}catch(e){return this.logger.error(z,B,`mergePages failed`,e),this.logger.perf(z,B,`MergePages`,`End`,t),A.reject({code:_.CantImportPages,message:e instanceof Error?e.message:`Failed to merge pages`})}finally{n&&this.pdfiumModule.FPDF_CloseDocument(n)}}saveAsCopy(e){this.logger.debug(z,B,`saveAsCopy`,e),this.logger.perf(z,B,`SaveAsCopy`,`Begin`,e.id);let t=this.cache.getContext(e.id);if(!t)return this.logger.perf(z,B,`SaveAsCopy`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let n=this.saveDocument(t.docPtr);return this.logger.perf(z,B,`SaveAsCopy`,`End`,e.id),A.resolve(n)}closeDocument(e){this.logger.debug(z,B,`closeDocument`,e),this.logger.perf(z,B,`CloseDocument`,`Begin`,e.id);let t=this.cache.getContext(e.id);return t?(t.dispose(),this.logger.perf(z,B,`CloseDocument`,`End`,e.id),A.resolve(!0)):A.resolve(!0)}closeAllDocuments(){return this.logger.debug(z,B,`closeAllDocuments`),this.logger.perf(z,B,`CloseAllDocuments`,`Begin`),this.cache.closeAllDocuments(),this.logger.perf(z,B,`CloseAllDocuments`,`End`),A.resolve(!0)}addTextContent(e,t,n,r){return!!this.setAnnotString(n,`Contents`,r.contents??``)&&!!this.setAnnotString(n,`T`,r.author||``)&&!(r.modified&&!this.setAnnotationDate(n,`M`,r.modified))&&!(r.created&&!this.setAnnotationDate(n,`CreationDate`,r.created))&&!(r.inReplyToId&&!this.setInReplyToId(t,n,r.inReplyToId))&&!!this.setAnnotationIcon(n,r.icon||w.Comment)&&!!this.setAnnotationFlags(n,r.flags||[`print`,`noZoom`,`noRotate`])&&!(r.state&&!this.setAnnotString(n,`State`,r.state))&&!(r.stateModel&&!this.setAnnotString(n,`StateModel`,r.stateModel))}addFreeTextContent(t,n,r,i){if(i.created&&!this.setAnnotationDate(r,`CreationDate`,i.created)||i.flags&&!this.setAnnotationFlags(r,i.flags)||i.modified&&!this.setAnnotationDate(r,`M`,i.modified)||!this.setBorderStyle(r,e.SOLID,0)||!this.setAnnotString(r,`Contents`,i.contents??``)||!this.setAnnotString(r,`T`,i.author||``)||!this.setAnnotationOpacity(r,i.opacity??1)||!this.setAnnotationTextAlignment(r,i.textAlign)||!this.setAnnotationVerticalAlignment(r,i.verticalAlign)||!this.setAnnotationDefaultAppearance(r,i.fontFamily,i.fontSize,i.fontColor)||i.intent&&!this.setAnnotIntent(r,i.intent))return!1;if(i.backgroundColor&&i.backgroundColor!==`transparent`){if(!this.setAnnotationColor(r,i.backgroundColor??`#FFFFFF`,T.Color))return!1}else if(!this.pdfiumModule.EPDFAnnot_ClearColor(r,T.Color))return!1;return!0}addInkStroke(t,n,r,i){return!(i.created&&!this.setAnnotationDate(r,`CreationDate`,i.created))&&!(i.flags&&!this.setAnnotationFlags(r,i.flags))&&!(i.modified&&!this.setAnnotationDate(r,`M`,i.modified))&&!!this.setAnnotString(r,`Contents`,i.contents??``)&&!!this.setBorderStyle(r,e.SOLID,i.strokeWidth)&&!!this.setInkList(t,r,i.inkList)&&!!this.setAnnotString(r,`T`,i.author||``)&&!!this.setAnnotationOpacity(r,i.opacity??1)&&!!this.setAnnotationColor(r,i.color??`#FFFF00`,T.Color)}addLineContent(e,t,n,r){if(r.created&&!this.setAnnotationDate(n,`CreationDate`,r.created)||r.flags&&!this.setAnnotationFlags(n,r.flags)||r.modified&&!this.setAnnotationDate(n,`M`,r.modified)||!this.setLinePoints(e,n,r.linePoints.start,r.linePoints.end)||!this.setLineEndings(n,r.lineEndings?.start??v.None,r.lineEndings?.end??v.None)||!this.setAnnotString(n,`Contents`,r.contents??``)||!this.setAnnotString(n,`T`,r.author||``)||!this.setBorderStyle(n,r.strokeStyle,r.strokeWidth)||!this.setBorderDashPattern(n,r.strokeDashArray??[])||r.intent&&!this.setAnnotIntent(n,r.intent))return!1;if(r.color&&r.color!==`transparent`){if(!this.setAnnotationColor(n,r.color??`#FFFF00`,T.InteriorColor))return!1}else if(!this.pdfiumModule.EPDFAnnot_ClearColor(n,T.InteriorColor))return!1;return!!this.setAnnotationOpacity(n,r.opacity??1)&&!!this.setAnnotationColor(n,r.strokeColor??`#FFFF00`,T.Color)}addPolyContent(e,t,n,r){if(r.created&&!this.setAnnotationDate(n,`CreationDate`,r.created)||r.modified&&!this.setAnnotationDate(n,`M`,r.modified)||r.flags&&!this.setAnnotationFlags(n,r.flags)||r.type===g.POLYLINE&&!this.setLineEndings(n,r.lineEndings?.start??v.None,r.lineEndings?.end??v.None)||!this.setPdfAnnoVertices(e,n,r.vertices)||!this.setAnnotString(n,`Contents`,r.contents??``)||!this.setAnnotString(n,`T`,r.author||``)||!this.setBorderStyle(n,r.strokeStyle,r.strokeWidth)||!this.setBorderDashPattern(n,r.strokeDashArray??[])||r.intent&&!this.setAnnotIntent(n,r.intent))return!1;if(r.color&&r.color!==`transparent`){if(!this.setAnnotationColor(n,r.color??`#FFFF00`,T.InteriorColor))return!1}else if(!this.pdfiumModule.EPDFAnnot_ClearColor(n,T.InteriorColor))return!1;return!!this.setAnnotationOpacity(n,r.opacity??1)&&!!this.setAnnotationColor(n,r.strokeColor??`#FFFF00`,T.Color)}addShapeContent(e,t,n,r){if(r.created&&!this.setAnnotationDate(n,`CreationDate`,r.created)||r.modified&&!this.setAnnotationDate(n,`M`,r.modified)||!this.setAnnotString(n,`Contents`,r.contents??``)||!this.setAnnotString(n,`T`,r.author||``)||!this.setBorderStyle(n,r.strokeStyle,r.strokeWidth)||!this.setBorderDashPattern(n,r.strokeDashArray??[])||!this.setAnnotationFlags(n,r.flags))return!1;if(r.color&&r.color!==`transparent`){if(!this.setAnnotationColor(n,r.color??`#FFFF00`,T.InteriorColor))return!1}else if(!this.pdfiumModule.EPDFAnnot_ClearColor(n,T.InteriorColor))return!1;return!!this.setAnnotationOpacity(n,r.opacity??1)&&!!this.setAnnotationColor(n,r.strokeColor??`#FFFF00`,T.Color)}addTextMarkupContent(e,t,n,r){return!(r.created&&!this.setAnnotationDate(n,`CreationDate`,r.created))&&!(r.custom&&!this.setAnnotCustom(n,r.custom))&&!(r.flags&&!this.setAnnotationFlags(n,r.flags))&&!(r.modified&&!this.setAnnotationDate(n,`M`,r.modified))&&!!this.syncQuadPointsAnno(e,n,r.segmentRects)&&!!this.setAnnotString(n,`Contents`,r.contents??``)&&!!this.setAnnotString(n,`T`,r.author||``)&&!!this.setAnnotationOpacity(n,r.opacity??1)&&!!this.setAnnotationColor(n,r.color??`#FFFF00`,T.Color)}addStampContent(e,t,n,r,i,a){if(i.created&&!this.setAnnotationDate(r,`CreationDate`,i.created)||i.flags&&!this.setAnnotationFlags(r,i.flags)||i.modified&&!this.setAnnotationDate(r,`M`,i.modified)||i.icon&&!this.setAnnotationIcon(r,i.icon)||i.subject&&!this.setAnnotString(r,`Subj`,i.subject)||!this.setAnnotString(r,`Contents`,i.contents??``))return!1;if(a){for(let e=this.pdfiumModule.FPDFAnnot_GetObjectCount(r)-1;e>=0;e--)this.pdfiumModule.FPDFAnnot_RemoveObject(r,e);if(!this.addImageObject(e,t,n,r,i.rect,a))return!1}return!!this.pdfiumModule.EPDFAnnot_UpdateAppearanceToRect(r,s.Cover)}addImageObject(e,t,n,r,i,a){let o=a.width*a.height,s=this.memoryManager.malloc(4*o);if(!s)return!1;for(let e=0;e<o;e++){let t=a.data[4*e],n=a.data[4*e+1],r=a.data[4*e+2],i=a.data[4*e+3];this.pdfiumModule.pdfium.setValue(s+4*e,r,`i8`),this.pdfiumModule.pdfium.setValue(s+4*e+1,n,`i8`),this.pdfiumModule.pdfium.setValue(s+4*e+2,t,`i8`),this.pdfiumModule.pdfium.setValue(s+4*e+3,i,`i8`)}let c=this.pdfiumModule.FPDFBitmap_CreateEx(a.width,a.height,4,s,0);if(!c)return this.memoryManager.free(s),!1;let l=this.pdfiumModule.FPDFPageObj_NewImageObj(e);if(!l)return this.pdfiumModule.FPDFBitmap_Destroy(c),this.memoryManager.free(s),!1;if(!this.pdfiumModule.FPDFImageObj_SetBitmap(n,0,l,c))return this.pdfiumModule.FPDFBitmap_Destroy(c),this.pdfiumModule.FPDFPageObj_Destroy(l),this.memoryManager.free(s),!1;let u=this.memoryManager.malloc(24);if(this.pdfiumModule.pdfium.setValue(u,a.width,`float`),this.pdfiumModule.pdfium.setValue(u+4,0,`float`),this.pdfiumModule.pdfium.setValue(u+8,0,`float`),this.pdfiumModule.pdfium.setValue(u+12,a.height,`float`),this.pdfiumModule.pdfium.setValue(u+16,0,`float`),this.pdfiumModule.pdfium.setValue(u+20,0,`float`),!this.pdfiumModule.FPDFPageObj_SetMatrix(l,u))return this.memoryManager.free(u),this.pdfiumModule.FPDFBitmap_Destroy(c),this.pdfiumModule.FPDFPageObj_Destroy(l),this.memoryManager.free(s),!1;this.memoryManager.free(u);let d=this.convertDevicePointToPagePoint(t,{x:i.origin.x,y:i.origin.y+a.height});return this.pdfiumModule.FPDFPageObj_Transform(l,1,0,0,1,d.x,d.y),this.pdfiumModule.FPDFAnnot_AppendObject(r,l)?(this.pdfiumModule.FPDFBitmap_Destroy(c),this.memoryManager.free(s),!0):(this.pdfiumModule.FPDFBitmap_Destroy(c),this.pdfiumModule.FPDFPageObj_Destroy(l),this.memoryManager.free(s),!1)}saveDocument(e){let t=this.pdfiumModule.PDFiumExt_OpenFileWriter();this.pdfiumModule.PDFiumExt_SaveAsCopy(e,t);let n=this.pdfiumModule.PDFiumExt_GetFileWriterSize(t),r=this.memoryManager.malloc(n);this.pdfiumModule.PDFiumExt_GetFileWriterData(t,r,n);let i=new ArrayBuffer(n),a=new DataView(i);for(let e=0;e<n;e++)a.setInt8(e,this.pdfiumModule.pdfium.getValue(r+e,`i8`));return this.memoryManager.free(r),this.pdfiumModule.PDFiumExt_CloseFileWriter(t),i}readCatalogLanguage(e){let t=this.pdfiumModule.EPDFCatalog_GetLanguage(e,0,0)>>>0;return t===0?null:t===2?``:P(this.pdfiumModule.pdfium,(t,n)=>this.pdfiumModule.EPDFCatalog_GetLanguage(e,t,n),this.pdfiumModule.pdfium.UTF16ToString,t)}readMetaText(e,t){if(!this.pdfiumModule.EPDF_HasMetaText(e,t))return null;let n=this.pdfiumModule.FPDF_GetMetaText(e,t,0,0);return n===2?``:P(this.pdfiumModule.pdfium,(n,r)=>this.pdfiumModule.FPDF_GetMetaText(e,t,n,r),this.pdfiumModule.pdfium.UTF16ToString,n)}setMetaText(e,t,n){if(n==null||n.length===0)return!!this.pdfiumModule.EPDF_SetMetaText(e,t,0);let r=2*(n.length+1),i=this.memoryManager.malloc(r);try{return this.pdfiumModule.pdfium.stringToUTF16(n,i,r),!!this.pdfiumModule.EPDF_SetMetaText(e,t,i)}finally{this.memoryManager.free(i)}}getMetaTrapped(e){let t=Number(this.pdfiumModule.EPDF_GetMetaTrapped(e));switch(t){case r.NotSet:case r.True:case r.False:case r.Unknown:return t;default:return r.Unknown}}setMetaTrapped(e,t){let n=t==null||t===void 0?r.NotSet:t;return!(n!==r.NotSet&&n!==r.True&&n!==r.False&&n!==r.Unknown)&&!!this.pdfiumModule.EPDF_SetMetaTrapped(e,n)}getMetaKeyCount(e,t){return 0|Number(this.pdfiumModule.EPDF_GetMetaKeyCount(e,t))}getMetaKeyName(e,t,n){let r=this.pdfiumModule.EPDF_GetMetaKeyName(e,t,n,0,0);return r?P(this.pdfiumModule.pdfium,(r,i)=>this.pdfiumModule.EPDF_GetMetaKeyName(e,t,n,r,i),this.pdfiumModule.pdfium.UTF8ToString,r):null}readAllMeta(e,t=!0){let n=this.getMetaKeyCount(e,t),r={};for(let i=0;i<n;i++){let n=this.getMetaKeyName(e,i,t);n&&(r[n]=this.readMetaText(e,n))}return r}readPdfBookmarks(e,t=0){let n=this.pdfiumModule.FPDFBookmark_GetFirstChild(e,t),r=[];for(;n;){let t=this.readPdfBookmark(e,n);r.push(t),n=this.pdfiumModule.FPDFBookmark_GetNextSibling(e,n)}return r}readPdfBookmark(e,t){let n=P(this.pdfiumModule.pdfium,(e,n)=>this.pdfiumModule.FPDFBookmark_GetTitle(t,e,n),this.pdfiumModule.pdfium.UTF16ToString),r=this.readPdfBookmarks(e,t);return{title:n,target:this.readPdfBookmarkTarget(e,()=>this.pdfiumModule.FPDFBookmark_GetAction(t),()=>this.pdfiumModule.FPDFBookmark_GetDest(e,t)),children:r}}readPageTextRects(e,t,n,r){let i=this.pdfiumModule.FPDFText_CountRects(r,0,-1),a=[];for(let t=0;t<i;t++){let i=this.memoryManager.malloc(8),o=this.memoryManager.malloc(8),s=this.memoryManager.malloc(8),c=this.memoryManager.malloc(8);if(!this.pdfiumModule.FPDFText_GetRect(r,t,o,i,s,c)){this.memoryManager.free(o),this.memoryManager.free(i),this.memoryManager.free(s),this.memoryManager.free(c);continue}let l=this.pdfiumModule.pdfium.getValue(o,`double`),u=this.pdfiumModule.pdfium.getValue(i,`double`),d=this.pdfiumModule.pdfium.getValue(s,`double`),f=this.pdfiumModule.pdfium.getValue(c,`double`);this.memoryManager.free(o),this.memoryManager.free(i),this.memoryManager.free(s),this.memoryManager.free(c);let p=this.memoryManager.malloc(4),m=this.memoryManager.malloc(4);this.pdfiumModule.FPDF_PageToDevice(n,0,0,e.size.width,e.size.height,0,l,u,p,m);let h=this.pdfiumModule.pdfium.getValue(p,`i32`),g=this.pdfiumModule.pdfium.getValue(m,`i32`);this.memoryManager.free(p),this.memoryManager.free(m);let _={origin:{x:h,y:g},size:{width:Math.ceil(Math.abs(d-l)),height:Math.ceil(Math.abs(u-f))}},v=this.pdfiumModule.FPDFText_GetBoundedText(r,l,u,d,f,0,0),y=2*(v+1),b=this.memoryManager.malloc(y);this.pdfiumModule.FPDFText_GetBoundedText(r,l,u,d,f,b,v);let x=this.pdfiumModule.pdfium.UTF16ToString(b);this.memoryManager.free(b);let S=this.pdfiumModule.FPDFText_GetCharIndexAtPos(r,l,u,2,2),C=``,w=_.size.height;if(S>=0){w=this.pdfiumModule.FPDFText_GetFontSize(r,S);let e=this.pdfiumModule.FPDFText_GetFontInfo(r,S,0,0,0)+1,t=this.memoryManager.malloc(e),n=this.memoryManager.malloc(4);this.pdfiumModule.FPDFText_GetFontInfo(r,S,t,e,n),C=this.pdfiumModule.pdfium.UTF8ToString(t),this.memoryManager.free(t),this.memoryManager.free(n)}let T={content:x,rect:_,font:{family:C,size:w}};a.push(T)}return a}getPageGeometry(e,t){let n=`getPageGeometry`;this.logger.perf(z,B,n,`Begin`,e.id);let r=this.cache.getContext(e.id);if(!r)return this.logger.perf(z,B,n,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let i=r.acquirePage(t.index),a=i.getTextPage(),o=this.pdfiumModule.FPDFText_CountChars(a),s=[];for(let e=0;e<o;e++){let n=this.readGlyphInfo(t,i.pagePtr,a,e);s.push(n)}let c=this.buildRunsFromGlyphs(s,a);return i.release(),this.logger.perf(z,B,n,`End`,e.id),A.resolve({runs:c})}buildRunsFromGlyphs(e,t){let n=[],r=null,i=null,a=null;for(let o=0;o<e.length;o++){let s=e[o],c=this.pdfiumModule.FPDFText_GetTextObject(t,o);if(c!==i&&(i=c,r={rect:{x:s.origin.x,y:s.origin.y,width:s.size.width,height:s.size.height},charStart:o,glyphs:[]},a={minX:s.origin.x,minY:s.origin.y,maxX:s.origin.x+s.size.width,maxY:s.origin.y+s.size.height},n.push(r)),r.glyphs.push({x:s.origin.x,y:s.origin.y,width:s.size.width,height:s.size.height,flags:s.isEmpty?2:s.isSpace?1:0}),s.isEmpty)continue;let l=s.origin.x+s.size.width,u=s.origin.y+s.size.height;a.minX=Math.min(a.minX,s.origin.x),a.minY=Math.min(a.minY,s.origin.y),a.maxX=Math.max(a.maxX,l),a.maxY=Math.max(a.maxY,u),r.rect.x=a.minX,r.rect.y=a.minY,r.rect.width=a.maxX-a.minX,r.rect.height=a.maxY-a.minY}return n}readGlyphInfo(e,t,n,r){let i=this.memoryManager.malloc(4),a=this.memoryManager.malloc(4),o=this.memoryManager.malloc(4),s=this.memoryManager.malloc(4),c=this.memoryManager.malloc(16),l=0,u=0,d=0,f=0,p=!1;if(this.pdfiumModule.FPDFText_GetLooseCharBox(n,r,c)){let m=this.pdfiumModule.pdfium.getValue(c,`float`),h=this.pdfiumModule.pdfium.getValue(c+4,`float`),g=this.pdfiumModule.pdfium.getValue(c+8,`float`),_=this.pdfiumModule.pdfium.getValue(c+12,`float`);if(m===g||h===_)return[c,i,a,o,s].forEach(e=>this.memoryManager.free(e)),{origin:{x:0,y:0},size:{width:0,height:0},isEmpty:!0};this.pdfiumModule.FPDF_PageToDevice(t,0,0,e.size.width,e.size.height,0,m,h,i,a),this.pdfiumModule.FPDF_PageToDevice(t,0,0,e.size.width,e.size.height,0,g,_,o,s);let v=this.pdfiumModule.pdfium.getValue(i,`i32`),y=this.pdfiumModule.pdfium.getValue(a,`i32`),b=this.pdfiumModule.pdfium.getValue(o,`i32`),x=this.pdfiumModule.pdfium.getValue(s,`i32`);l=Math.min(v,b),u=Math.min(y,x),d=Math.max(1,Math.abs(b-v)),f=Math.max(1,Math.abs(x-y)),p=this.pdfiumModule.FPDFText_GetUnicode(n,r)===32}return[c,i,a,o,s].forEach(e=>this.memoryManager.free(e)),{origin:{x:l,y:u},size:{width:d,height:f},...p&&{isSpace:p}}}getPageGlyphs(e,t){this.logger.debug(z,B,`getPageGlyphs`,e,t),this.logger.perf(z,B,`getPageGlyphs`,`Begin`,e.id);let n=this.cache.getContext(e.id);if(!n)return this.logger.perf(z,B,`getPageGlyphs`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`document does not open`});let r=n.acquirePage(t.index),i=r.getTextPage(),a=this.pdfiumModule.FPDFText_CountChars(i),o=Array(a);for(let e=0;e<a;e++){let n=this.readGlyphInfo(t,r.pagePtr,i,e);n.isEmpty||(o[e]={...n})}return r.release(),this.logger.perf(z,B,`getPageGlyphs`,`End`,e.id),A.resolve(o)}readCharBox(e,t,n,r){let i=this.memoryManager.malloc(8),a=this.memoryManager.malloc(8),o=this.memoryManager.malloc(8),s=this.memoryManager.malloc(8),c=0,l=0,u=0,d=0;if(this.pdfiumModule.FPDFText_GetCharBox(n,r,a,s,o,i)){let n=this.pdfiumModule.pdfium.getValue(i,`double`),r=this.pdfiumModule.pdfium.getValue(a,`double`),f=this.pdfiumModule.pdfium.getValue(o,`double`),p=this.pdfiumModule.pdfium.getValue(s,`double`),m=this.memoryManager.malloc(4),h=this.memoryManager.malloc(4);this.pdfiumModule.FPDF_PageToDevice(t,0,0,e.size.width,e.size.height,0,r,n,m,h),c=this.pdfiumModule.pdfium.getValue(m,`i32`),l=this.pdfiumModule.pdfium.getValue(h,`i32`),this.memoryManager.free(m),this.memoryManager.free(h),u=Math.ceil(Math.abs(p-r)),d=Math.ceil(Math.abs(n-f))}return this.memoryManager.free(i),this.memoryManager.free(a),this.memoryManager.free(o),this.memoryManager.free(s),{origin:{x:c,y:l},size:{width:u,height:d}}}readPageAnnotations(e,t){return e.borrowPage(t.index,n=>{let r=this.pdfiumModule.FPDFPage_GetAnnotCount(n.pagePtr),i=[];for(let a=0;a<r;a++)n.withAnnotation(a,r=>{let a=this.readPageAnnotation(e.docPtr,t,r,n);a&&i.push(a)});return i})}readPageAnnotationsRaw(e,t){let n=this.pdfiumModule.EPDFPage_GetAnnotCountRaw(e.docPtr,t.index);if(n<=0)return[];let r=[];for(let i=0;i<n;++i){let n=this.pdfiumModule.EPDFPage_GetAnnotRaw(e.docPtr,t.index,i);if(n)try{let i=this.readPageAnnotation(e.docPtr,t,n);i&&r.push(i)}finally{this.pdfiumModule.FPDFPage_CloseAnnot(n)}}return r}getPageAnnotationsRaw(e,t){this.logger.debug(z,B,`getPageAnnotationsRaw`,e,t),this.logger.perf(z,B,`GetPageAnnotationsRaw`,`Begin`,`${e.id}-${t.index}`);let n=this.cache.getContext(e.id);if(!n)return A.reject({code:_.DocNotOpen,message:`document does not open`});let r=this.readPageAnnotationsRaw(n,t);return this.logger.perf(z,B,`GetPageAnnotationsRaw`,`End`,`${e.id}-${t.index}`),this.logger.debug(z,B,`getPageAnnotationsRaw`,`${e.id}-${t.index}`,r),A.resolve(r)}readPageAnnotation(e,t,n,r){let i=this.getAnnotString(n,`NM`);i&&a(i)||(i=u(),this.setAnnotString(n,`NM`,i));let o=this.pdfiumModule.FPDFAnnot_GetSubtype(n),s;switch(o){case g.TEXT:s=this.readPdfTextAnno(t,n,i);break;case g.FREETEXT:s=this.readPdfFreeTextAnno(t,n,i);break;case g.LINK:s=this.readPdfLinkAnno(t,e,n,i);break;case g.WIDGET:if(r)return this.readPdfWidgetAnno(t,n,r.getFormHandle(),i);case g.FILEATTACHMENT:s=this.readPdfFileAttachmentAnno(t,n,i);break;case g.INK:s=this.readPdfInkAnno(t,n,i);break;case g.POLYGON:s=this.readPdfPolygonAnno(t,n,i);break;case g.POLYLINE:s=this.readPdfPolylineAnno(t,n,i);break;case g.LINE:s=this.readPdfLineAnno(t,n,i);break;case g.HIGHLIGHT:s=this.readPdfHighlightAnno(t,n,i);break;case g.STAMP:s=this.readPdfStampAnno(t,n,i);break;case g.SQUARE:s=this.readPdfSquareAnno(t,n,i);break;case g.CIRCLE:s=this.readPdfCircleAnno(t,n,i);break;case g.UNDERLINE:s=this.readPdfUnderlineAnno(t,n,i);break;case g.SQUIGGLY:s=this.readPdfSquigglyAnno(t,n,i);break;case g.STRIKEOUT:s=this.readPdfStrikeOutAnno(t,n,i);break;case g.CARET:s=this.readPdfCaretAnno(t,n,i);break;default:s=this.readPdfAnno(t,o,n,i)}return s}readAnnotationColor(e,t=T.Color){let n=this.memoryManager.malloc(4),r=this.memoryManager.malloc(4),i=this.memoryManager.malloc(4),a;return this.pdfiumModule.EPDFAnnot_GetColor(e,t,n,r,i)&&(a={red:255&this.pdfiumModule.pdfium.getValue(n,`i32`),green:255&this.pdfiumModule.pdfium.getValue(r,`i32`),blue:255&this.pdfiumModule.pdfium.getValue(i,`i32`)}),this.memoryManager.free(n),this.memoryManager.free(r),this.memoryManager.free(i),a}getAnnotationColor(e,t=T.Color){let n=this.readAnnotationColor(e,t);return n?y(n):void 0}setAnnotationColor(e,t,n=T.Color){let r=b(t);return this.pdfiumModule.EPDFAnnot_SetColor(e,n,255&r.red,255&r.green,255&r.blue)}getAnnotationOpacity(e){let t=this.memoryManager.malloc(4),n=this.pdfiumModule.EPDFAnnot_GetOpacity(e,t)?this.pdfiumModule.pdfium.getValue(t,`i32`):255;return this.memoryManager.free(t),m(n)}setAnnotationOpacity(e,t){let n=ee(t);return this.pdfiumModule.EPDFAnnot_SetOpacity(e,255&n)}getAnnotationTextAlignment(e){return this.pdfiumModule.EPDFAnnot_GetTextAlignment(e)}setAnnotationTextAlignment(e,t){return!!this.pdfiumModule.EPDFAnnot_SetTextAlignment(e,t)}getAnnotationVerticalAlignment(e){return this.pdfiumModule.EPDFAnnot_GetVerticalAlignment(e)}setAnnotationVerticalAlignment(e,t){return!!this.pdfiumModule.EPDFAnnot_SetVerticalAlignment(e,t)}getAnnotationDefaultAppearance(e){let t=this.memoryManager.malloc(4),n=this.memoryManager.malloc(4),r=this.memoryManager.malloc(4),i=this.memoryManager.malloc(4),a=this.memoryManager.malloc(4);if(!this.pdfiumModule.EPDFAnnot_GetDefaultAppearance(e,t,n,r,i,a))return void[t,n,r,i,a].forEach(e=>this.memoryManager.free(e));let o=this.pdfiumModule.pdfium,s=o.getValue(t,`i32`),c=o.getValue(n,`float`),l=255&o.getValue(r,`i32`),u=255&o.getValue(i,`i32`),d=255&o.getValue(a,`i32`);return[t,n,r,i,a].forEach(e=>this.memoryManager.free(e)),{fontFamily:s,fontSize:c,fontColor:y({red:l,green:u,blue:d})}}setAnnotationDefaultAppearance(e,t,n,r){let{red:i,green:a,blue:o}=b(r);return!!this.pdfiumModule.EPDFAnnot_SetDefaultAppearance(e,t,n,255&i,255&a,255&o)}getBorderStyle(t){let n=this.memoryManager.malloc(4),r=0,i=e.UNKNOWN,a=!1;return i=this.pdfiumModule.EPDFAnnot_GetBorderStyle(t,n),r=this.pdfiumModule.pdfium.getValue(n,`float`),a=i!==e.UNKNOWN,this.memoryManager.free(n),{ok:a,style:i,width:r}}setBorderStyle(e,t,n){return this.pdfiumModule.EPDFAnnot_SetBorderStyle(e,t,n)}getAnnotationIcon(e){return this.pdfiumModule.EPDFAnnot_GetIcon(e)}setAnnotationIcon(e,t){return this.pdfiumModule.EPDFAnnot_SetIcon(e,t)}getBorderEffect(e){let t=this.memoryManager.malloc(4),n=!!this.pdfiumModule.EPDFAnnot_GetBorderEffect(e,t),r=n?this.pdfiumModule.pdfium.getValue(t,`float`):0;return this.memoryManager.free(t),{ok:n,intensity:r}}getRectangleDifferences(e){let t=this.memoryManager.malloc(4),n=this.memoryManager.malloc(4),r=this.memoryManager.malloc(4),i=this.memoryManager.malloc(4),a=!!this.pdfiumModule.EPDFAnnot_GetRectangleDifferences(e,t,n,r,i),o=this.pdfiumModule.pdfium,s=o.getValue(t,`float`),c=o.getValue(n,`float`),l=o.getValue(r,`float`),u=o.getValue(i,`float`);return this.memoryManager.free(t),this.memoryManager.free(n),this.memoryManager.free(r),this.memoryManager.free(i),{ok:a,left:s,top:c,right:l,bottom:u}}getAnnotationDate(e,t){let n=this.getAnnotString(e,t);return n?l(n):void 0}setAnnotationDate(e,t,n){let r=k(n);return this.setAnnotString(e,t,r)}getAttachmentDate(e,t){let n=this.getAttachmentString(e,t);return n?l(n):void 0}setAttachmentDate(e,t,n){let r=k(n);return this.setAttachmentString(e,t,r)}getBorderDashPattern(e){let t=this.pdfiumModule.EPDFAnnot_GetBorderDashPatternCount(e);if(t===0)return{ok:!1,pattern:[]};let n=this.memoryManager.malloc(4*t),r=!!this.pdfiumModule.EPDFAnnot_GetBorderDashPattern(e,n,t),i=[];if(r){let e=this.pdfiumModule.pdfium;for(let r=0;r<t;r++)i.push(e.getValue(n+4*r,`float`))}return this.memoryManager.free(n),{ok:r,pattern:i}}setBorderDashPattern(e,t){if(!t||t.length===0)return this.pdfiumModule.EPDFAnnot_SetBorderDashPattern(e,0,0);let n=t.map(e=>Number.isFinite(e)&&e>0?e:0).filter(e=>e>0);if(n.length===0)return this.pdfiumModule.EPDFAnnot_SetBorderDashPattern(e,0,0);let r=4*n.length,i=this.memoryManager.malloc(r);for(let e=0;e<n.length;e++)this.pdfiumModule.pdfium.setValue(i+4*e,n[e],`float`);let a=!!this.pdfiumModule.EPDFAnnot_SetBorderDashPattern(e,i,n.length);return this.memoryManager.free(i),a}getLineEndings(e){let t=this.memoryManager.malloc(4),n=this.memoryManager.malloc(4);if(!this.pdfiumModule.EPDFAnnot_GetLineEndings(e,t,n))return this.memoryManager.free(t),void this.memoryManager.free(n);let r=this.pdfiumModule.pdfium.getValue(t,`i32`),i=this.pdfiumModule.pdfium.getValue(n,`i32`);return this.memoryManager.free(t),this.memoryManager.free(n),{start:r,end:i}}setLineEndings(e,t,n){return!!this.pdfiumModule.EPDFAnnot_SetLineEndings(e,t,n)}getLinePoints(e,t){let n=this.memoryManager.malloc(8),r=this.memoryManager.malloc(8);if(!this.pdfiumModule.FPDFAnnot_GetLine(t,n,r))return this.memoryManager.free(n),void this.memoryManager.free(r);let i=this.pdfiumModule.pdfium,a=i.getValue(n+0,`float`),o=i.getValue(n+4,`float`),s=i.getValue(r+0,`float`),c=i.getValue(r+4,`float`);return this.memoryManager.free(n),this.memoryManager.free(r),{start:this.convertPagePointToDevicePoint(e,{x:a,y:o}),end:this.convertPagePointToDevicePoint(e,{x:s,y:c})}}setLinePoints(e,t,n,r){let i=this.convertDevicePointToPagePoint(e,n),a=this.convertDevicePointToPagePoint(e,r);if(!i||!a)return!1;let o=this.memoryManager.malloc(16),s=this.pdfiumModule.pdfium;s.setValue(o+0,i.x,`float`),s.setValue(o+4,i.y,`float`),s.setValue(o+8,a.x,`float`),s.setValue(o+12,a.y,`float`);let c=this.pdfiumModule.EPDFAnnot_SetLine(t,o,o+8);return this.memoryManager.free(o),!!c}getQuadPointsAnno(e,t){let n=this.pdfiumModule.FPDFAnnot_CountAttachmentPoints(t);if(n===0)return[];let r=[];for(let i=0;i<n;i++){let n=this.memoryManager.malloc(32);if(this.pdfiumModule.FPDFAnnot_GetAttachmentPoints(t,i,n)){let t=[],i=[];for(let e=0;e<4;e++){let r=n+8*e;t.push(this.pdfiumModule.pdfium.getValue(r,`float`)),i.push(this.pdfiumModule.pdfium.getValue(r+4,`float`))}let a=this.convertPagePointToDevicePoint(e,{x:t[0],y:i[0]}),o=this.convertPagePointToDevicePoint(e,{x:t[1],y:i[1]}),s=this.convertPagePointToDevicePoint(e,{x:t[2],y:i[2]}),c=this.convertPagePointToDevicePoint(e,{x:t[3],y:i[3]});r.push({p1:a,p2:o,p3:s,p4:c})}this.memoryManager.free(n)}return r.map(ne)}syncQuadPointsAnno(e,t,n){let r=this.pdfiumModule.pdfium,i=this.pdfiumModule.FPDFAnnot_CountAttachmentPoints(t),a=this.memoryManager.malloc(32),o=t=>{let n=p(t),i=this.convertDevicePointToPagePoint(e,n.p1),o=this.convertDevicePointToPagePoint(e,n.p2),s=this.convertDevicePointToPagePoint(e,n.p3),c=this.convertDevicePointToPagePoint(e,n.p4);r.setValue(a+0,i.x,`float`),r.setValue(a+4,i.y,`float`),r.setValue(a+8,o.x,`float`),r.setValue(a+12,o.y,`float`),r.setValue(a+16,c.x,`float`),r.setValue(a+20,c.y,`float`),r.setValue(a+24,s.x,`float`),r.setValue(a+28,s.y,`float`)},s=Math.min(i,n.length);for(let e=0;e<s;e++)if(o(n[e]),!this.pdfiumModule.FPDFAnnot_SetAttachmentPoints(t,e,a))return this.memoryManager.free(a),!1;for(let e=i;e<n.length;e++)if(o(n[e]),!this.pdfiumModule.FPDFAnnot_AppendAttachmentPoints(t,a))return this.memoryManager.free(a),!1;return this.memoryManager.free(a),!0}redactTextInRects(e,t,n,r){let{recurseForms:i=!0,drawBlackBoxes:a=!1}=r??{};this.logger.debug(`PDFiumEngine`,`Engine`,`redactTextInQuads`,e.id,t.index,n.length);let o=`RedactTextInQuads`;this.logger.perf(`PDFiumEngine`,`Engine`,o,`Begin`,`${e.id}-${t.index}`);let s=this.cache.getContext(e.id);if(!s)return this.logger.perf(`PDFiumEngine`,`Engine`,o,`End`,`${e.id}-${t.index}`),A.reject({code:_.DocNotOpen,message:`document does not open`});let c=(n??[]).filter(e=>e&&Number.isFinite(e.origin?.x)&&Number.isFinite(e.origin?.y)&&Number.isFinite(e.size?.width)&&Number.isFinite(e.size?.height)&&e.size.width>0&&e.size.height>0);if(c.length===0)return this.logger.perf(`PDFiumEngine`,`Engine`,o,`End`,`${e.id}-${t.index}`),A.resolve(!1);let l=s.acquirePage(t.index),{ptr:u,count:d}=this.allocFSQuadsBufferFromRects(t,c),f=!1;try{f=!!this.pdfiumModule.EPDFText_RedactInQuads(l.pagePtr,u,d,!!i,!!a)}finally{this.memoryManager.free(u)}return f&&=!!this.pdfiumModule.FPDFPage_GenerateContent(l.pagePtr),l.disposeImmediate(),this.logger.perf(`PDFiumEngine`,`Engine`,o,`End`,`${e.id}-${t.index}`),A.resolve(!!f)}allocFSQuadsBufferFromRects(e,t){let n=t.length,r=this.memoryManager.malloc(32*n),i=this.pdfiumModule.pdfium;for(let a=0;a<n;a++){let n=t[a],o=p(n),s=this.convertDevicePointToPagePoint(e,o.p1),c=this.convertDevicePointToPagePoint(e,o.p2),l=this.convertDevicePointToPagePoint(e,o.p3),u=this.convertDevicePointToPagePoint(e,o.p4),d=r+32*a;i.setValue(d+0,s.x,`float`),i.setValue(d+4,s.y,`float`),i.setValue(d+8,c.x,`float`),i.setValue(d+12,c.y,`float`),i.setValue(d+16,u.x,`float`),i.setValue(d+20,u.y,`float`),i.setValue(d+24,l.x,`float`),i.setValue(d+28,l.y,`float`)}return{ptr:r,count:n}}getInkList(e,t){let n=[],r=this.pdfiumModule.FPDFAnnot_GetInkListCount(t);if(r<=0)return n;let i=this.pdfiumModule.pdfium;for(let a=0;a<r;a++){let r=[],o=this.pdfiumModule.FPDFAnnot_GetInkListPath(t,a,0,0);if(o>0){let n=this.memoryManager.malloc(8*o);this.pdfiumModule.FPDFAnnot_GetInkListPath(t,a,n,o);for(let t=0;t<o;t++){let a=n+8*t,o=i.getValue(a+0,`float`),s=i.getValue(a+4,`float`),c=this.convertPagePointToDevicePoint(e,{x:o,y:s});r.push({x:c.x,y:c.y})}this.memoryManager.free(n)}n.push({points:r})}return n}setInkList(e,t,n){let r=this.pdfiumModule.pdfium;for(let i of n){let n=i.points.length;if(n===0)continue;let a=this.memoryManager.malloc(8*n);for(let t=0;t<n;t++){let n=i.points[t],o=this.convertDevicePointToPagePoint(e,n);r.setValue(a+8*t+0,o.x,`float`),r.setValue(a+8*t+4,o.y,`float`)}let o=this.pdfiumModule.FPDFAnnot_AddInkStroke(t,a,n);if(this.memoryManager.free(a),o===-1)return!1}return!0}readPdfTextAnno(e,t,n){let r=this.getAnnotCustom(t),i=this.readPageAnnoRect(t),a=this.convertPageRectToDeviceRect(e,i),o=this.getAnnotString(t,`T`),s=this.getAnnotationDate(t,`M`),c=this.getAnnotationDate(t,`CreationDate`),l=this.getAnnotString(t,`Contents`)||``,u=this.getAnnotString(t,`State`),d=this.getAnnotString(t,`StateModel`),f=this.getAnnotationColor(t),p=this.getAnnotationOpacity(t),m=this.getInReplyToId(t),h=this.getAnnotationFlags(t),_=this.getAnnotationIcon(t);return{pageIndex:e.index,custom:r,id:n,type:g.TEXT,flags:h,contents:l,color:f??`#FFFF00`,opacity:p,rect:a,inReplyToId:m,author:o,modified:s,created:c,state:u,stateModel:d,icon:_}}readPdfFreeTextAnno(e,t,n){let r=this.getAnnotCustom(t),a=this.readPageAnnoRect(t),o=this.convertPageRectToDeviceRect(e,a),s=this.getAnnotString(t,`Contents`)||``,c=this.getAnnotString(t,`T`),l=this.getAnnotationDate(t,`M`),u=this.getAnnotationDate(t,`CreationDate`),d=this.getAnnotString(t,`DS`),f=this.getAnnotationDefaultAppearance(t),p=this.getAnnotationColor(t),m=this.getAnnotationTextAlignment(t),h=this.getAnnotationVerticalAlignment(t),_=this.getAnnotationOpacity(t),v=this.getAnnotRichContent(t),y=this.getAnnotationFlags(t);return{pageIndex:e.index,custom:r,id:n,type:g.FREETEXT,fontFamily:f?.fontFamily??i.Unknown,fontSize:f?.fontSize??12,fontColor:f?.fontColor??`#000000`,verticalAlign:h,backgroundColor:p,flags:y,opacity:_,textAlign:m,defaultStyle:d,richContent:v,contents:s,author:c,modified:l,created:u,rect:o}}readPdfLinkAnno(e,t,n,r){let i=this.getAnnotCustom(n),a=this.pdfiumModule.FPDFAnnot_GetLink(n);if(!a)return;let o=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(e,o),c=this.getAnnotString(n,`T`),l=this.getAnnotationDate(n,`M`),u=this.getAnnotationDate(n,`CreationDate`),d=this.getAnnotationFlags(n),f=this.readPdfLinkAnnoTarget(t,()=>this.pdfiumModule.FPDFLink_GetAction(a),()=>this.pdfiumModule.FPDFLink_GetDest(t,a));return{pageIndex:e.index,custom:i,id:r,type:g.LINK,flags:d,target:f,rect:s,author:c,modified:l,created:u}}readPdfWidgetAnno(e,t,n,r){let i=this.getAnnotCustom(t),a=this.readPageAnnoRect(t),o=this.convertPageRectToDeviceRect(e,a),s=this.getAnnotString(t,`T`),c=this.getAnnotationDate(t,`M`),l=this.getAnnotationDate(t,`CreationDate`),u=this.getAnnotationFlags(t),d=this.readPdfWidgetAnnoField(n,t);return{pageIndex:e.index,custom:i,id:r,type:g.WIDGET,flags:u,rect:o,field:d,author:s,modified:c,created:l}}readPdfFileAttachmentAnno(e,t,n){let r=this.getAnnotCustom(t),i=this.readPageAnnoRect(t),a=this.convertPageRectToDeviceRect(e,i),o=this.getAnnotString(t,`T`),s=this.getAnnotationDate(t,`M`),c=this.getAnnotationDate(t,`CreationDate`),l=this.getAnnotationFlags(t);return{pageIndex:e.index,custom:r,id:n,type:g.FILEATTACHMENT,flags:l,rect:a,author:o,modified:s,created:c}}readPdfInkAnno(e,t,n){let r=this.getAnnotCustom(t),i=this.readPageAnnoRect(t),a=this.convertPageRectToDeviceRect(e,i),o=this.getAnnotString(t,`T`),s=this.getAnnotationDate(t,`M`),c=this.getAnnotationDate(t,`CreationDate`),l=this.getAnnotationColor(t),u=this.getAnnotationOpacity(t),{width:d}=this.getBorderStyle(t),f=this.getInkList(e,t),p=this.pdfiumModule.EPDFAnnot_GetBlendMode(t),m=this.getAnnotIntent(t),h=this.getAnnotationFlags(t),_=this.getAnnotString(t,`Contents`)||``;return{pageIndex:e.index,custom:r,id:n,type:g.INK,...m&&{intent:m},contents:_,blendMode:p,flags:h,color:l??`#FF0000`,opacity:u,strokeWidth:d===0?1:d,rect:a,inkList:f,author:o,modified:s,created:c}}readPdfPolygonAnno(t,n,r){let i=this.getAnnotCustom(n),a=this.readPageAnnoRect(n),o=this.convertPageRectToDeviceRect(t,a),s=this.getAnnotString(n,`T`),c=this.getAnnotationDate(n,`M`),l=this.getAnnotationDate(n,`CreationDate`),u=this.readPdfAnnoVertices(t,n),d=this.getAnnotString(n,`Contents`)||``,f=this.getAnnotationFlags(n),p=this.getAnnotationColor(n),m=this.getAnnotationColor(n,T.InteriorColor),h=this.getAnnotationOpacity(n),_,{style:v,width:y}=this.getBorderStyle(n);if(v===e.DASHED){let{ok:e,pattern:t}=this.getBorderDashPattern(n);e&&(_=t)}if(u.length>1){let e=u[0],t=u[u.length-1];e.x===t.x&&e.y===t.y&&u.pop()}return{pageIndex:t.index,custom:i,id:r,type:g.POLYGON,contents:d,flags:f,strokeColor:p??`#FF0000`,color:m??`transparent`,opacity:h,strokeWidth:y===0?1:y,strokeStyle:v,strokeDashArray:_,rect:o,vertices:u,author:s,modified:c,created:l}}readPdfPolylineAnno(t,n,r){let i=this.getAnnotCustom(n),a=this.readPageAnnoRect(n),o=this.convertPageRectToDeviceRect(t,a),s=this.getAnnotString(n,`T`),c=this.getAnnotationDate(n,`M`),l=this.getAnnotationDate(n,`CreationDate`),u=this.readPdfAnnoVertices(t,n),d=this.getAnnotString(n,`Contents`)||``,f=this.getAnnotationColor(n),p=this.getAnnotationFlags(n),m=this.getAnnotationColor(n,T.InteriorColor),h=this.getAnnotationOpacity(n),_,{style:v,width:y}=this.getBorderStyle(n);if(v===e.DASHED){let{ok:e,pattern:t}=this.getBorderDashPattern(n);e&&(_=t)}let b=this.getLineEndings(n);return{pageIndex:t.index,custom:i,id:r,type:g.POLYLINE,contents:d,flags:p,strokeColor:f??`#FF0000`,color:m??`transparent`,opacity:h,strokeWidth:y===0?1:y,strokeStyle:v,strokeDashArray:_,lineEndings:b,rect:o,vertices:u,author:s,modified:c,created:l}}readPdfLineAnno(t,n,r){let i=this.getAnnotCustom(n),a=this.readPageAnnoRect(n),o=this.convertPageRectToDeviceRect(t,a),s=this.getAnnotString(n,`T`),c=this.getAnnotationDate(n,`M`),l=this.getAnnotationDate(n,`CreationDate`),u=this.getLinePoints(t,n),d=this.getLineEndings(n),f=this.getAnnotString(n,`Contents`)||``,p=this.getAnnotationColor(n),m=this.getAnnotationFlags(n),h=this.getAnnotationColor(n,T.InteriorColor),_=this.getAnnotationOpacity(n),y,{style:b,width:x}=this.getBorderStyle(n);if(b===e.DASHED){let{ok:e,pattern:t}=this.getBorderDashPattern(n);e&&(y=t)}return{pageIndex:t.index,custom:i,id:r,type:g.LINE,flags:m,rect:o,contents:f,strokeWidth:x===0?1:x,strokeStyle:b,strokeDashArray:y,strokeColor:p??`#FF0000`,color:h??`transparent`,opacity:_,linePoints:u||{start:{x:0,y:0},end:{x:0,y:0}},lineEndings:d||{start:v.None,end:v.None},author:s,modified:c,created:l}}readPdfHighlightAnno(e,t,n){let r=this.getAnnotCustom(t),i=this.readPageAnnoRect(t),a=this.convertPageRectToDeviceRect(e,i),o=this.getQuadPointsAnno(e,t),s=this.getAnnotationColor(t),c=this.getAnnotationOpacity(t),l=this.pdfiumModule.EPDFAnnot_GetBlendMode(t),u=this.getAnnotString(t,`T`),d=this.getAnnotationDate(t,`M`),f=this.getAnnotationDate(t,`CreationDate`),p=this.getAnnotString(t,`Contents`)||``,m=this.getAnnotationFlags(t);return{pageIndex:e.index,custom:r,id:n,blendMode:l,type:g.HIGHLIGHT,rect:a,flags:m,contents:p,segmentRects:o,color:s??`#FFFF00`,opacity:c,author:u,modified:d,created:f}}readPdfUnderlineAnno(e,t,n){let r=this.getAnnotCustom(t),i=this.readPageAnnoRect(t),a=this.convertPageRectToDeviceRect(e,i),o=this.getAnnotString(t,`T`),s=this.getAnnotationDate(t,`M`),c=this.getAnnotationDate(t,`CreationDate`),l=this.getQuadPointsAnno(e,t),u=this.getAnnotString(t,`Contents`)||``,d=this.getAnnotationColor(t),f=this.getAnnotationOpacity(t),p=this.pdfiumModule.EPDFAnnot_GetBlendMode(t),m=this.getAnnotationFlags(t);return{pageIndex:e.index,custom:r,id:n,blendMode:p,type:g.UNDERLINE,rect:a,flags:m,contents:u,segmentRects:l,color:d??`#FF0000`,opacity:f,author:o,modified:s,created:c}}readPdfStrikeOutAnno(e,t,n){let r=this.getAnnotCustom(t),i=this.readPageAnnoRect(t),a=this.convertPageRectToDeviceRect(e,i),o=this.getAnnotString(t,`T`),s=this.getAnnotationDate(t,`M`),c=this.getAnnotationDate(t,`CreationDate`),l=this.getQuadPointsAnno(e,t),u=this.getAnnotString(t,`Contents`)||``,d=this.getAnnotationColor(t),f=this.getAnnotationOpacity(t),p=this.pdfiumModule.EPDFAnnot_GetBlendMode(t),m=this.getAnnotationFlags(t);return{pageIndex:e.index,custom:r,id:n,blendMode:p,type:g.STRIKEOUT,flags:m,rect:a,contents:u,segmentRects:l,color:d??`#FF0000`,opacity:f,author:o,modified:s,created:c}}readPdfSquigglyAnno(e,t,n){let r=this.getAnnotCustom(t),i=this.readPageAnnoRect(t),a=this.convertPageRectToDeviceRect(e,i),o=this.getAnnotString(t,`T`),s=this.getAnnotationDate(t,`M`),c=this.getAnnotationDate(t,`CreationDate`),l=this.getQuadPointsAnno(e,t),u=this.getAnnotString(t,`Contents`)||``,d=this.getAnnotationColor(t),f=this.getAnnotationOpacity(t),p=this.pdfiumModule.EPDFAnnot_GetBlendMode(t),m=this.getAnnotationFlags(t);return{pageIndex:e.index,custom:r,id:n,blendMode:p,type:g.SQUIGGLY,rect:a,flags:m,contents:u,segmentRects:l,color:d??`#FF0000`,opacity:f,author:o,modified:s,created:c}}readPdfCaretAnno(e,t,n){let r=this.getAnnotCustom(t),i=this.readPageAnnoRect(t),a=this.convertPageRectToDeviceRect(e,i),o=this.getAnnotString(t,`T`),s=this.getAnnotationDate(t,`M`),c=this.getAnnotationDate(t,`CreationDate`),l=this.getAnnotationFlags(t);return{pageIndex:e.index,custom:r,id:n,type:g.CARET,rect:a,flags:l,author:o,modified:s,created:c}}readPdfStampAnno(e,t,n){let r=this.getAnnotCustom(t),i=this.readPageAnnoRect(t),a=this.convertPageRectToDeviceRect(e,i),o=this.getAnnotString(t,`T`),s=this.getAnnotationDate(t,`M`),c=this.getAnnotationDate(t,`CreationDate`),l=this.getAnnotationFlags(t),u=this.getAnnotString(t,`Contents`)||``;return{pageIndex:e.index,custom:r,id:n,type:g.STAMP,contents:u,rect:a,author:o,modified:s,created:c,flags:l}}readPdfPageObject(e){switch(this.pdfiumModule.FPDFPageObj_GetType(e)){case C.PATH:return this.readPathObject(e);case C.IMAGE:return this.readImageObject(e);case C.FORM:return this.readFormObject(e)}}readPathObject(e){let t=this.pdfiumModule.FPDFPath_CountSegments(e),n=this.memoryManager.malloc(4),r=this.memoryManager.malloc(4),i=this.memoryManager.malloc(4),a=this.memoryManager.malloc(4);this.pdfiumModule.FPDFPageObj_GetBounds(e,n,r,i,a);let o={left:this.pdfiumModule.pdfium.getValue(n,`float`),bottom:this.pdfiumModule.pdfium.getValue(r,`float`),right:this.pdfiumModule.pdfium.getValue(i,`float`),top:this.pdfiumModule.pdfium.getValue(a,`float`)};this.memoryManager.free(n),this.memoryManager.free(r),this.memoryManager.free(i),this.memoryManager.free(a);let s=[];for(let n=0;n<t;n++){let t=this.readPdfSegment(e,n);s.push(t)}let c=this.readPdfPageObjectTransformMatrix(e);return{type:C.PATH,bounds:o,segments:s,matrix:c}}readPdfSegment(e,t){let n=this.pdfiumModule.FPDFPath_GetPathSegment(e,t),r=this.pdfiumModule.FPDFPathSegment_GetType(n),i=this.pdfiumModule.FPDFPathSegment_GetClose(n),a=this.memoryManager.malloc(4),o=this.memoryManager.malloc(4);this.pdfiumModule.FPDFPathSegment_GetPoint(n,a,o);let s=this.pdfiumModule.pdfium.getValue(a,`float`),c=this.pdfiumModule.pdfium.getValue(o,`float`);return this.memoryManager.free(a),this.memoryManager.free(o),{type:r,point:{x:s,y:c},isClosed:i}}readImageObject(e){let t=this.pdfiumModule.FPDFImageObj_GetBitmap(e),n=this.pdfiumModule.FPDFBitmap_GetBuffer(t),r=this.pdfiumModule.FPDFBitmap_GetWidth(t),i=this.pdfiumModule.FPDFBitmap_GetHeight(t),a=this.pdfiumModule.FPDFBitmap_GetFormat(t),o=r*i,s=new Uint8ClampedArray(4*o);for(let e=0;e<o;e++)if(a===2){let t=this.pdfiumModule.pdfium.getValue(n+3*e,`i8`),r=this.pdfiumModule.pdfium.getValue(n+3*e+1,`i8`),i=this.pdfiumModule.pdfium.getValue(n+3*e+2,`i8`);s[4*e]=i,s[4*e+1]=r,s[4*e+2]=t,s[4*e+3]=100}let c={data:s,width:r,height:i},l=this.readPdfPageObjectTransformMatrix(e);return{type:C.IMAGE,imageData:c,matrix:l}}readFormObject(e){let t=this.pdfiumModule.FPDFFormObj_CountObjects(e),n=[];for(let r=0;r<t;r++){let t=this.pdfiumModule.FPDFFormObj_GetObject(e,r),i=this.readPdfPageObject(t);i&&n.push(i)}let r=this.readPdfPageObjectTransformMatrix(e);return{type:C.FORM,objects:n,matrix:r}}readPdfPageObjectTransformMatrix(e){let t=this.memoryManager.malloc(24);if(this.pdfiumModule.FPDFPageObj_GetMatrix(e,t)){let e=this.pdfiumModule.pdfium.getValue(t,`float`),n=this.pdfiumModule.pdfium.getValue(t+4,`float`),r=this.pdfiumModule.pdfium.getValue(t+8,`float`),i=this.pdfiumModule.pdfium.getValue(t+12,`float`),a=this.pdfiumModule.pdfium.getValue(t+16,`float`),o=this.pdfiumModule.pdfium.getValue(t+20,`float`);return this.memoryManager.free(t),{a:e,b:n,c:r,d:i,e:a,f:o}}return this.memoryManager.free(t),{a:1,b:0,c:0,d:1,e:0,f:0}}readStampAnnotationContents(e){let t=[],n=this.pdfiumModule.FPDFAnnot_GetObjectCount(e);for(let r=0;r<n;r++){let n=this.pdfiumModule.FPDFAnnot_GetObject(e,r),i=this.readPdfPageObject(n);i&&t.push(i)}return t}getStrokeWidth(e){let t=this.memoryManager.malloc(4),n=this.memoryManager.malloc(4),r=this.memoryManager.malloc(4),i=this.pdfiumModule.FPDFAnnot_GetBorder(e,t,n,r)?this.pdfiumModule.pdfium.getValue(r,`float`):1;return this.memoryManager.free(t),this.memoryManager.free(n),this.memoryManager.free(r),i}getAnnotationFlags(e){return h(this.pdfiumModule.FPDFAnnot_GetFlags(e))}setAnnotationFlags(e,t){let n=O(t);return this.pdfiumModule.FPDFAnnot_SetFlags(e,n)}readPdfCircleAnno(t,n,r){let i=this.getAnnotCustom(n),a=this.getAnnotationFlags(n),o=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(t,o),c=this.getAnnotString(n,`T`),l=this.getAnnotationDate(n,`M`),u=this.getAnnotationDate(n,`CreationDate`),d=this.getAnnotString(n,`Contents`)||``,f=this.getAnnotationColor(n,T.InteriorColor),p=this.getAnnotationColor(n),m=this.getAnnotationOpacity(n),h,{style:_,width:v}=this.getBorderStyle(n);if(_===e.DASHED){let{ok:e,pattern:t}=this.getBorderDashPattern(n);e&&(h=t)}return{pageIndex:t.index,custom:i,id:r,type:g.CIRCLE,flags:a,color:f??`transparent`,opacity:m,contents:d,strokeWidth:v,strokeColor:p??`#FF0000`,strokeStyle:_,rect:s,author:c,modified:l,created:u,...h!==void 0&&{strokeDashArray:h}}}readPdfSquareAnno(t,n,r){let i=this.getAnnotCustom(n),a=this.getAnnotationFlags(n),o=this.readPageAnnoRect(n),s=this.convertPageRectToDeviceRect(t,o),c=this.getAnnotString(n,`T`),l=this.getAnnotationDate(n,`M`),u=this.getAnnotationDate(n,`CreationDate`),d=this.getAnnotString(n,`Contents`)||``,f=this.getAnnotationColor(n,T.InteriorColor),p=this.getAnnotationColor(n),m=this.getAnnotationOpacity(n),h,{style:_,width:v}=this.getBorderStyle(n);if(_===e.DASHED){let{ok:e,pattern:t}=this.getBorderDashPattern(n);e&&(h=t)}return{pageIndex:t.index,custom:i,id:r,type:g.SQUARE,flags:a,color:f??`transparent`,opacity:m,contents:d,strokeColor:p??`#FF0000`,strokeWidth:v,strokeStyle:_,rect:s,author:c,modified:l,created:u,...h!==void 0&&{strokeDashArray:h}}}readPdfAnno(e,t,n,r){let i=this.getAnnotCustom(n),a=this.readPageAnnoRect(n),o=this.convertPageRectToDeviceRect(e,a),s=this.getAnnotString(n,`T`),c=this.getAnnotationDate(n,`M`),l=this.getAnnotationDate(n,`CreationDate`),u=this.getAnnotationFlags(n);return{pageIndex:e.index,custom:i,id:r,flags:u,type:t,rect:o,author:s,modified:c,created:l}}getInReplyToId(e){let t=this.pdfiumModule.FPDFAnnot_GetLinkedAnnot(e,`IRT`);if(t)return this.getAnnotString(t,`NM`)}setInReplyToId(e,t,n){let r=this.getAnnotationByName(e,n);return!!r&&this.pdfiumModule.EPDFAnnot_SetLinkedAnnot(t,`IRT`,r)}getAnnotString(e,t){let n=this.pdfiumModule.FPDFAnnot_GetStringValue(e,t,0,0);if(n===0)return;let r=2*(n+1),i=this.memoryManager.malloc(r);this.pdfiumModule.FPDFAnnot_GetStringValue(e,t,i,r);let a=this.pdfiumModule.pdfium.UTF16ToString(i);return this.memoryManager.free(i),a||void 0}getAttachmentString(e,t){let n=this.pdfiumModule.FPDFAttachment_GetStringValue(e,t,0,0);if(n===0)return;let r=2*(n+1),i=this.memoryManager.malloc(r);this.pdfiumModule.FPDFAttachment_GetStringValue(e,t,i,r);let a=this.pdfiumModule.pdfium.UTF16ToString(i);return this.memoryManager.free(i),a||void 0}getAttachmentNumber(e,t){let n=this.memoryManager.malloc(4);try{return this.pdfiumModule.EPDFAttachment_GetIntegerValue(e,t,n)?this.pdfiumModule.pdfium.getValue(n,`i32`)>>>0:void 0}finally{this.memoryManager.free(n)}}getAnnotCustom(e){let t=this.getAnnotString(e,`EPDFCustom`);if(t)try{return JSON.parse(t)}catch(e){console.warn(`Failed to parse annotation custom data as JSON:`,e),console.warn(`Invalid JSON string:`,t);return}}setAnnotCustom(e,t){if(t==null)return this.setAnnotString(e,`EPDFCustom`,``);try{let n=JSON.stringify(t);return this.setAnnotString(e,`EPDFCustom`,n)}catch(e){return console.warn(`Failed to stringify annotation custom data as JSON:`,e),console.warn(`Invalid data object:`,t),!1}}getAnnotIntent(e){let t=this.pdfiumModule.EPDFAnnot_GetIntent(e,0,0);if(t===0)return;let n=2*(t+1),r=this.memoryManager.malloc(n);this.pdfiumModule.EPDFAnnot_GetIntent(e,r,n);let i=this.pdfiumModule.pdfium.UTF16ToString(r);return this.memoryManager.free(r),i&&i!==`undefined`?i:void 0}setAnnotIntent(e,t){return this.pdfiumModule.EPDFAnnot_SetIntent(e,t)}getAnnotRichContent(e){let t=this.pdfiumModule.EPDFAnnot_GetRichContent(e,0,0);if(t===0)return;let n=2*(t+1),r=this.memoryManager.malloc(n);this.pdfiumModule.EPDFAnnot_GetRichContent(e,r,n);let i=this.pdfiumModule.pdfium.UTF16ToString(r);return this.memoryManager.free(r),i||void 0}getAnnotationByName(e,t){return this.withWString(t,t=>this.pdfiumModule.EPDFPage_GetAnnotByName(e,t))}removeAnnotationByName(e,t){return this.withWString(t,t=>this.pdfiumModule.EPDFPage_RemoveAnnotByName(e,t))}setAnnotString(e,t,n){return this.withWString(n,n=>this.pdfiumModule.FPDFAnnot_SetStringValue(e,t,n))}setAttachmentString(e,t,n){return this.withWString(n,n=>this.pdfiumModule.FPDFAttachment_SetStringValue(e,t,n))}readPdfAnnoVertices(e,t){let n=[],r=this.pdfiumModule.FPDFAnnot_GetVertices(t,0,0),i=this.memoryManager.malloc(8*r);this.pdfiumModule.FPDFAnnot_GetVertices(t,i,r);for(let t=0;t<r;t++){let r=this.pdfiumModule.pdfium.getValue(i+8*t,`float`),a=this.pdfiumModule.pdfium.getValue(i+8*t+4,`float`),{x:o,y:s}=this.convertPagePointToDevicePoint(e,{x:r,y:a}),c=n[n.length-1];c&&c.x===o&&c.y===s||n.push({x:o,y:s})}return this.memoryManager.free(i),n}setPdfAnnoVertices(e,t,n){let r=this.pdfiumModule.pdfium,i=this.memoryManager.malloc(8*n.length);n.forEach((t,n)=>{let a=this.convertDevicePointToPagePoint(e,t);r.setValue(i+8*n+0,a.x,`float`),r.setValue(i+8*n+4,a.y,`float`)});let a=this.pdfiumModule.EPDFAnnot_SetVertices(t,i,n.length);return this.memoryManager.free(i),a}readPdfBookmarkTarget(e,t,n){let r=t();if(r)return{type:`action`,action:this.readPdfAction(e,r)};{let t=n();if(t)return{type:`destination`,destination:this.readPdfDestination(e,t)}}}readPdfWidgetAnnoField(e,t){let n=this.pdfiumModule.FPDFAnnot_GetFormFieldFlags(e,t),r=this.pdfiumModule.FPDFAnnot_GetFormFieldType(e,t),i=P(this.pdfiumModule.pdfium,(n,r)=>this.pdfiumModule.FPDFAnnot_GetFormFieldName(e,t,n,r),this.pdfiumModule.pdfium.UTF16ToString),a=P(this.pdfiumModule.pdfium,(n,r)=>this.pdfiumModule.FPDFAnnot_GetFormFieldAlternateName(e,t,n,r),this.pdfiumModule.pdfium.UTF16ToString),o=P(this.pdfiumModule.pdfium,(n,r)=>this.pdfiumModule.FPDFAnnot_GetFormFieldValue(e,t,n,r),this.pdfiumModule.pdfium.UTF16ToString),s=[];if(r===j.COMBOBOX||r===j.LISTBOX){let n=this.pdfiumModule.FPDFAnnot_GetOptionCount(e,t);for(let r=0;r<n;r++){let n=P(this.pdfiumModule.pdfium,(n,i)=>this.pdfiumModule.FPDFAnnot_GetOptionLabel(e,t,r,n,i),this.pdfiumModule.pdfium.UTF16ToString),i=this.pdfiumModule.FPDFAnnot_IsOptionSelected(e,t,r);s.push({label:n,isSelected:i})}}let c=!1;return r!==j.CHECKBOX&&r!==j.RADIOBUTTON||(c=this.pdfiumModule.FPDFAnnot_IsChecked(e,t)),{flag:n,type:r,name:i,alternateName:a,value:o,isChecked:c,options:s}}renderPageAnnotationRaw(e,n,r,i){let{scaleFactor:a=1,rotation:o=D.Degree0,dpr:s=1,mode:c=E.Normal}=i??{};this.logger.debug(z,B,`renderPageAnnotation`,e,n,r,i),this.logger.perf(z,B,`RenderPageAnnotation`,`Begin`,`${e.id}-${n.index}-${r.id}`);let l=new x,u=this.cache.getContext(e.id);if(!u)return this.logger.perf(z,B,`RenderPageAnnotation`,`End`,`${e.id}-${n.index}-${r.id}`),A.reject({code:_.DocNotOpen,message:`document does not open`});let f=u.acquirePage(n.index),p=this.getAnnotationByName(f.pagePtr,r.id);if(!p)return this.logger.perf(z,B,`RenderPageAnnotation`,`End`,`${e.id}-${n.index}-${r.id}`),f.release(),A.reject({code:_.NotFound,message:`annotation not found`});let m=Math.max(.01,a*s),h=d(r.rect),g=d(t(n.size,h,o,m)),v=Math.max(1,g.size.width),y=Math.max(1,g.size.height),b=4*v,S=b*y,C=this.memoryManager.malloc(S),w=this.pdfiumModule.FPDFBitmap_CreateEx(v,y,4,C,b);this.pdfiumModule.FPDFBitmap_FillRect(w,0,0,v,y,0);let T=te(h,o,v,y),O=this.memoryManager.malloc(24);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,O,6).set([T.a,T.b,T.c,T.d,T.e,T.f]);let k=!1;try{k=!!this.pdfiumModule.EPDF_RenderAnnotBitmap(w,f.pagePtr,p,c,O,16)}finally{this.memoryManager.free(O),this.pdfiumModule.FPDFBitmap_Destroy(w),this.pdfiumModule.FPDFPage_CloseAnnot(p),f.release()}if(!k)return this.memoryManager.free(C),this.logger.perf(z,B,`RenderPageAnnotation`,`End`,`${e.id}-${n.index}-${r.id}`),A.reject({code:_.Unknown,message:`EPDF_RenderAnnotBitmap failed`});let ee=this.pdfiumModule.pdfium.HEAPU8.subarray(C,C+S),ne={data:new Uint8ClampedArray(ee),width:v,height:y};return l.resolve(ne),this.memoryManager.free(C),l}renderRectEncoded(e,t,n,r){let i=new x,a=r?.rotation??D.Degree0,o=this.cache.getContext(e.id);if(!o)return A.reject({code:_.DocNotOpen,message:`document does not open`});let s=Math.max(.01,r?.scaleFactor??1)*Math.max(1,r?.dpr??1),c=n.size.width,l=n.size.height,u=!(1&~a),d=Math.max(1,Math.round((u?l:c)*s)),f=Math.max(1,Math.round((u?c:l)*s)),p=4*d,m=p*f,h=o.acquirePage(t.index),g=r?.withForms??!1?h.getFormHandle():void 0,v=this.memoryManager.malloc(m),y=this.pdfiumModule.FPDFBitmap_CreateEx(d,f,4,v,p);this.pdfiumModule.FPDFBitmap_FillRect(y,0,0,d,f,4294967295);let b=te(n,a,d,f),S=this.memoryManager.malloc(24);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,S,6).set([b.a,b.b,b.c,b.d,b.e,b.f]);let C=this.memoryManager.malloc(16);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,C,4).set([0,0,d,f]);let w=16;r!=null&&r.withAnnotations&&(w|=1);try{if(this.pdfiumModule.FPDF_RenderPageBitmapWithMatrix(y,h.pagePtr,S,C,w),g!==void 0){let{startX:e,startY:r,formsWidth:i,formsHeight:o,scaleX:s,scaleY:c}=function(e,t,n,r){let i=t.origin.x,a=t.origin.y,o=i+t.size.width,s=a+t.size.height,c=n.width,l=n.height,u=Math.hypot(e.a,e.b),d=Math.hypot(e.c,e.d),f=!(1&~r),p=f?Math.max(1,Math.round(l*u)):Math.max(1,Math.round(c*u)),m=f?Math.max(1,Math.round(c*d)):Math.max(1,Math.round(l*d)),h,g;switch(r){case D.Degree0:h=-Math.round(i*u),g=-Math.round(a*d);break;case D.Degree90:h=Math.round((s-l)*u),g=-Math.round(i*d);break;case D.Degree180:h=Math.round((o-c)*u),g=Math.round((s-l)*d);break;case D.Degree270:h=-Math.round(a*u),g=Math.round((o-c)*d);break;default:h=-Math.round(i*u),g=-Math.round(a*d)}return{startX:h,startY:g,formsWidth:p,formsHeight:m,scaleX:u,scaleY:d}}(b,n,t.size,a);this.pdfiumModule.FPDF_FFLDraw(g,y,h.pagePtr,e,r,i,o,a,w)}}finally{h.release(),this.memoryManager.free(S),this.memoryManager.free(C)}this.logger.perf(z,B,`RenderRectEncodedData`,`Begin`,`${e.id}-${t.index}`);let T=this.pdfiumModule.pdfium.HEAPU8.subarray(v,v+m);this.logger.perf(z,B,`RenderRectEncodedData`,`End`,`${e.id}-${t.index}`),this.logger.perf(z,B,`RenderRectEncodedImageData`,`Begin`,`${e.id}-${t.index}`);let E={data:new Uint8ClampedArray(T),width:d,height:f};return this.logger.perf(z,B,`RenderRectEncodedImageData`,`End`,`${e.id}-${t.index}`),i.resolve(E),this.pdfiumModule.FPDFBitmap_Destroy(y),this.memoryManager.free(v),i}readPdfLinkAnnoTarget(e,t,n){let r=n();if(r)return{type:`destination`,destination:this.readPdfDestination(e,r)};{let n=t();if(n)return{type:`action`,action:this.readPdfAction(e,n)}}}createLocalDestPtr(e,t){let r=this.pdfiumModule.FPDF_LoadPage(e,t.pageIndex);if(!r)return 0;try{if(t.zoom.mode===n.XYZ){let{x:e,y:n,zoom:i}=t.zoom.params;return this.pdfiumModule.EPDFDest_CreateXYZ(r,!0,e,!0,n,!0,i)}let e,i=[];switch(t.zoom.mode){case n.FitPage:e=n.FitPage;break;case n.FitHorizontal:e=n.FitHorizontal,i=[t.view?.[0]??0];break;case n.FitVertical:e=n.FitVertical,i=[t.view?.[0]??0];break;case n.FitRectangle:{let r=t.view??[];i=[r[0]??0,r[1]??0,r[2]??0,r[3]??0],e=n.FitRectangle}break;case n.Unknown:default:return 0}return this.withFloatArray(i,(t,n)=>this.pdfiumModule.EPDFDest_CreateView(r,e,t,n))}finally{this.pdfiumModule.FPDF_ClosePage(r)}}applyBookmarkTarget(e,t,n){if(n.type===`destination`){let r=this.createLocalDestPtr(e,n.destination);return r?!!this.pdfiumModule.EPDFBookmark_SetDest(e,t,r):!1}let r=n.action;switch(r.type){case f.Goto:{let n=this.createLocalDestPtr(e,r.destination);if(!n)return!1;let i=this.pdfiumModule.EPDFAction_CreateGoTo(e,n);return!!i&&!!this.pdfiumModule.EPDFBookmark_SetAction(e,t,i)}case f.URI:{let n=this.pdfiumModule.EPDFAction_CreateURI(e,r.uri);return!!n&&!!this.pdfiumModule.EPDFBookmark_SetAction(e,t,n)}case f.LaunchAppOrOpenFile:{let n=this.withWString(r.path,t=>this.pdfiumModule.EPDFAction_CreateLaunch(e,t));return!!n&&!!this.pdfiumModule.EPDFBookmark_SetAction(e,t,n)}case f.RemoteGoto:case f.Unsupported:default:return!1}}readPdfAction(e,t){let n;switch(this.pdfiumModule.FPDFAction_GetType(t)){case f.Unsupported:n={type:f.Unsupported};break;case f.Goto:{let r=this.pdfiumModule.FPDFAction_GetDest(e,t);if(r){let t=this.readPdfDestination(e,r);n={type:f.Goto,destination:t}}else n={type:f.Unsupported}}break;case f.RemoteGoto:n={type:f.Unsupported};break;case f.URI:{let r=P(this.pdfiumModule.pdfium,(n,r)=>this.pdfiumModule.FPDFAction_GetURIPath(e,t,n,r),this.pdfiumModule.pdfium.UTF8ToString);n={type:f.URI,uri:r}}break;case f.LaunchAppOrOpenFile:{let e=P(this.pdfiumModule.pdfium,(e,n)=>this.pdfiumModule.FPDFAction_GetFilePath(t,e,n),this.pdfiumModule.pdfium.UTF8ToString);n={type:f.LaunchAppOrOpenFile,path:e}}}return n}readPdfDestination(e,t){let r=this.pdfiumModule.FPDFDest_GetDestPageIndex(e,t),i=this.memoryManager.malloc(4),a=this.memoryManager.malloc(16),o=this.pdfiumModule.FPDFDest_GetView(t,i,a),s=this.pdfiumModule.pdfium.getValue(i,`i32`),c=[];for(let e=0;e<s;e++){let t=a+4*e;c.push(this.pdfiumModule.pdfium.getValue(t,`float`))}if(this.memoryManager.free(i),this.memoryManager.free(a),o===n.XYZ){let e=this.memoryManager.malloc(1),n=this.memoryManager.malloc(1),i=this.memoryManager.malloc(1),a=this.memoryManager.malloc(4),s=this.memoryManager.malloc(4),l=this.memoryManager.malloc(4);if(this.pdfiumModule.FPDFDest_GetLocationInPage(t,e,n,i,a,s,l)){let t=this.pdfiumModule.pdfium.getValue(e,`i8`),u=this.pdfiumModule.pdfium.getValue(n,`i8`),d=this.pdfiumModule.pdfium.getValue(i,`i8`),f=t?this.pdfiumModule.pdfium.getValue(a,`float`):0,p=u?this.pdfiumModule.pdfium.getValue(s,`float`):0,m=d?this.pdfiumModule.pdfium.getValue(l,`float`):0;return this.memoryManager.free(e),this.memoryManager.free(n),this.memoryManager.free(i),this.memoryManager.free(a),this.memoryManager.free(s),this.memoryManager.free(l),{pageIndex:r,zoom:{mode:o,params:{x:f,y:p,zoom:m}},view:c}}return this.memoryManager.free(e),this.memoryManager.free(n),this.memoryManager.free(i),this.memoryManager.free(a),this.memoryManager.free(s),this.memoryManager.free(l),{pageIndex:r,zoom:{mode:o,params:{x:0,y:0,zoom:0}},view:c}}return{pageIndex:r,zoom:{mode:o},view:c}}readPdfAttachment(e,t){let n=this.pdfiumModule.FPDFDoc_GetAttachment(e,t),r=P(this.pdfiumModule.pdfium,(e,t)=>this.pdfiumModule.FPDFAttachment_GetName(n,e,t),this.pdfiumModule.pdfium.UTF16ToString),i=P(this.pdfiumModule.pdfium,(e,t)=>this.pdfiumModule.EPDFAttachment_GetDescription(n,e,t),this.pdfiumModule.pdfium.UTF16ToString),a=P(this.pdfiumModule.pdfium,(e,t)=>this.pdfiumModule.FPDFAttachment_GetSubtype(n,e,t),this.pdfiumModule.pdfium.UTF16ToString),o=this.getAttachmentDate(n,`CreationDate`),s=P(this.pdfiumModule.pdfium,(e,t)=>this.pdfiumModule.FPDFAttachment_GetStringValue(n,`Checksum`,e,t),this.pdfiumModule.pdfium.UTF16ToString);return{index:t,name:r,description:i,mimeType:a,size:this.getAttachmentNumber(n,`Size`),creationDate:o,checksum:s}}convertDevicePointToPagePoint(e,t){let n=e.size.width,r=e.size.height,i=3&e.rotation;return i===0?{x:t.x,y:r-t.y}:i===1?{x:t.y,y:t.x}:i===2?{x:n-t.x,y:t.y}:{x:r-t.y,y:n-t.x}}convertPagePointToDevicePoint(e,t){let n=e.size.width,r=e.size.height,i=3&e.rotation;return i===0?{x:t.x,y:r-t.y}:i===1?{x:t.y,y:t.x}:i===2?{x:n-t.x,y:t.y}:{x:n-t.y,y:r-t.x}}convertPageRectToDeviceRect(e,t){let{x:n,y:r}=this.convertPagePointToDevicePoint(e,{x:t.left,y:t.top});return{origin:{x:n,y:r},size:{width:Math.abs(t.right-t.left),height:Math.abs(t.top-t.bottom)}}}readPageAnnoAppearanceStreams(e){return{normal:this.readPageAnnoAppearanceStream(e,E.Normal),rollover:this.readPageAnnoAppearanceStream(e,E.Rollover),down:this.readPageAnnoAppearanceStream(e,E.Down)}}readPageAnnoAppearanceStream(e,t=E.Normal){let n=2*(this.pdfiumModule.FPDFAnnot_GetAP(e,t,0,0)+1),r=this.memoryManager.malloc(n);this.pdfiumModule.FPDFAnnot_GetAP(e,t,r,n);let i=this.pdfiumModule.pdfium.UTF16ToString(r);return this.memoryManager.free(r),i}setPageAnnoAppearanceStream(e,t=E.Normal,n){let r=2*(n.length+1),i=this.memoryManager.malloc(r);try{return this.pdfiumModule.pdfium.stringToUTF16(n,i,r),!!this.pdfiumModule.FPDFAnnot_SetAP(e,t,i)}finally{this.memoryManager.free(i)}}setPageAnnoRect(e,t,n){let r=Math.floor(n.origin.x),i=Math.floor(n.origin.y),a=Math.floor(n.origin.x+n.size.width),o=Math.floor(n.origin.y+n.size.height),s=this.convertDevicePointToPagePoint(e,{x:r,y:i}),c=this.convertDevicePointToPagePoint(e,{x:a,y:i}),l=this.convertDevicePointToPagePoint(e,{x:a,y:o}),u=this.convertDevicePointToPagePoint(e,{x:r,y:o}),d=Math.min(s.x,c.x,l.x,u.x),f=Math.max(s.x,c.x,l.x,u.x),p=Math.min(s.y,c.y,l.y,u.y),m=Math.max(s.y,c.y,l.y,u.y);d>f&&([d,f]=[f,d]),p>m&&([p,m]=[m,p]);let h=this.memoryManager.malloc(16),g=this.pdfiumModule.pdfium;g.setValue(h+0,d,`float`),g.setValue(h+4,m,`float`),g.setValue(h+8,f,`float`),g.setValue(h+12,p,`float`);let _=this.pdfiumModule.FPDFAnnot_SetRect(t,h);return this.memoryManager.free(h),!!_}readPageAnnoRect(e){let t=this.memoryManager.malloc(16),n={left:0,top:0,right:0,bottom:0};return this.pdfiumModule.FPDFAnnot_GetRect(e,t)&&(n.left=this.pdfiumModule.pdfium.getValue(t,`float`),n.top=this.pdfiumModule.pdfium.getValue(t+4,`float`),n.right=this.pdfiumModule.pdfium.getValue(t+8,`float`),n.bottom=this.pdfiumModule.pdfium.getValue(t+12,`float`)),this.memoryManager.free(t),n}getHighlightRects(e,t,n,r){let i=this.pdfiumModule.FPDFText_CountRects(t,n,r),a=[],o=this.memoryManager.malloc(8),s=this.memoryManager.malloc(8),c=this.memoryManager.malloc(8),l=this.memoryManager.malloc(8);for(let n=0;n<i;n++){if(!this.pdfiumModule.FPDFText_GetRect(t,n,o,s,c,l))continue;let r=this.pdfiumModule.pdfium.getValue(o,`double`),i=this.pdfiumModule.pdfium.getValue(s,`double`),u=this.pdfiumModule.pdfium.getValue(c,`double`),d=this.pdfiumModule.pdfium.getValue(l,`double`),f=this.convertPagePointToDevicePoint(e,{x:r,y:i}),p=this.convertPagePointToDevicePoint(e,{x:u,y:i}),m=this.convertPagePointToDevicePoint(e,{x:u,y:d}),h=this.convertPagePointToDevicePoint(e,{x:r,y:d}),g=[f.x,p.x,m.x,h.x],_=[f.y,p.y,m.y,h.y],v=Math.min(...g),y=Math.min(..._),b=Math.max(...g)-v,x=Math.max(..._)-y;a.push({origin:{x:v,y},size:{width:Math.ceil(b),height:Math.ceil(x)}})}return this.memoryManager.free(o),this.memoryManager.free(s),this.memoryManager.free(c),this.memoryManager.free(l),a}searchInPage(e,t,n,r){this.logger.debug(z,B,`searchInPage`,e,t,n,r),this.logger.perf(z,B,`SearchInPage`,`Begin`,`${e.id}-${t.index}`);let i=this.cache.getContext(e.id);if(!i)return this.logger.perf(z,B,`PreparePrintDocument`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`Document is not open`});let a=2*(n.length+1),o=this.memoryManager.malloc(a);this.pdfiumModule.pdfium.stringToUTF16(n,o,a);try{let e=this.searchAllInPage(i,t,o,r);return A.resolve(e)}finally{this.memoryManager.free(o)}}getAnnotationsBatch(e,t){this.logger.debug(z,B,`getAnnotationsBatch`,e.id,t.length);let n=new x;return queueMicrotask(()=>{this.logger.perf(z,B,`GetAnnotationsBatch`,`Begin`,e.id);let r=this.cache.getContext(e.id);if(!r)return void n.reject({code:_.DocNotOpen,message:`Document is not open`});let i={},a=t.length;for(let e=0;e<t.length;e++){let o=t[e],s=this.readPageAnnotationsRaw(r,o);i[o.index]=s,n.progress({pageIndex:o.index,result:s,completed:e+1,total:a})}this.logger.perf(z,B,`GetAnnotationsBatch`,`End`,e.id),n.resolve(i)}),n}searchBatch(e,t,n,r){this.logger.debug(z,B,`searchBatch`,e.id,t.length,n);let i=new x;return queueMicrotask(()=>{this.logger.perf(z,B,`SearchBatch`,`Begin`,e.id);let a=this.cache.getContext(e.id);if(!a)return void i.reject({code:_.DocNotOpen,message:`Document is not open`});let o=2*(n.length+1),s=this.memoryManager.malloc(o);this.pdfiumModule.pdfium.stringToUTF16(n,s,o);try{let n={},o=t.length;for(let e=0;e<t.length;e++){let c=t[e],l=this.searchAllInPage(a,c,s,r);n[c.index]=l,i.progress({pageIndex:c.index,result:l,completed:e+1,total:o})}this.logger.perf(z,B,`SearchBatch`,`End`,e.id),i.resolve(n)}finally{this.memoryManager.free(s)}}),i}buildContext(e,t,n,r=30){let i=/[\s\u00A0.,;:!?()\[\]{}<>/\\\-"'`"\u2013\u2014]/,a=t;for(;a>0&&i.test(e[a-1]);)a--;let o=0;for(;a>0&&o<r;)a--,i.test(e[a])||o++;a=(t=>{for(;t>0&&!i.test(e[t-1]);)t--;return t})(a);let s=t+n;for(;s<e.length&&i.test(e[s]);)s++;for(o=0;s<e.length&&o<r;)i.test(e[s])||o++,s++;s=(t=>{for(;t<e.length&&!i.test(e[t]);)t++;return t})(s);let c=e.slice(a,t).replace(/\s+/g,` `).trimStart(),l=e.slice(t,t+n),u=e.slice(t+n,s).replace(/\s+/g,` `).trimEnd();return{before:this.tidy(c),match:this.tidy(l),after:this.tidy(u),truncatedLeft:a>0,truncatedRight:s<e.length}}tidy(e){return e.replace(/-\uFFFE\s*/g,``).replace(/[\uFFFE\u00AD\u200B\u2060\uFEFF]/g,``).replace(/\s+/g,` `)}searchAllInPage(e,t,n,r){return e.borrowPage(t.index,e=>{let i=e.getTextPage(),a=this.pdfiumModule.FPDFText_CountChars(i),o=this.memoryManager.malloc(2*(a+1));this.pdfiumModule.FPDFText_GetText(i,0,a,o);let s=this.pdfiumModule.pdfium.UTF16ToString(o);this.memoryManager.free(o);let c=[],l=this.pdfiumModule.FPDFText_FindStart(i,n,r,0);for(;this.pdfiumModule.FPDFText_FindNext(l);){let e=this.pdfiumModule.FPDFText_GetSchResultIndex(l),n=this.pdfiumModule.FPDFText_GetSchCount(l),r=this.getHighlightRects(t,i,e,n),a=this.buildContext(s,e,n);c.push({pageIndex:t.index,charIndex:e,charCount:n,rects:r,context:a})}return this.pdfiumModule.FPDFText_FindClose(l),c})}preparePrintDocument(e,t){let{includeAnnotations:n=!0,pageRange:r=null}=t??{};this.logger.debug(z,B,`preparePrintDocument`,e,t),this.logger.perf(z,B,`PreparePrintDocument`,`Begin`,e.id);let i=this.cache.getContext(e.id);if(!i)return this.logger.perf(z,B,`PreparePrintDocument`,`End`,e.id),A.reject({code:_.DocNotOpen,message:`Document is not open`});let a=this.pdfiumModule.FPDF_CreateNewDocument();if(!a)return this.logger.perf(z,B,`PreparePrintDocument`,`End`,e.id),A.reject({code:_.CantCreateNewDoc,message:`Cannot create print document`});try{let t=this.sanitizePageRange(r,e.pageCount);if(!this.pdfiumModule.FPDF_ImportPages(a,i.docPtr,t??``,0))return this.pdfiumModule.FPDF_CloseDocument(a),this.logger.error(z,B,`Failed to import pages for printing`),this.logger.perf(z,B,`PreparePrintDocument`,`End`,e.id),A.reject({code:_.CantImportPages,message:`Failed to import pages for printing`});if(!n){let t=this.removeAnnotationsFromPrintDocument(a);if(!t.success)return this.pdfiumModule.FPDF_CloseDocument(a),this.logger.error(z,B,`Failed to remove annotations: ${t.error}`),this.logger.perf(z,B,`PreparePrintDocument`,`End`,e.id),A.reject({code:_.Unknown,message:`Failed to prepare print document: ${t.error}`});this.logger.debug(z,B,`Removed ${t.annotationsRemoved} annotations from ${t.pagesProcessed} pages`)}let o=this.saveDocument(a);return this.pdfiumModule.FPDF_CloseDocument(a),this.logger.perf(z,B,`PreparePrintDocument`,`End`,e.id),A.resolve(o)}catch(t){return a&&this.pdfiumModule.FPDF_CloseDocument(a),this.logger.error(z,B,`preparePrintDocument failed`,t),this.logger.perf(z,B,`PreparePrintDocument`,`End`,e.id),A.reject({code:_.Unknown,message:t instanceof Error?t.message:`Failed to prepare print document`})}}removeAnnotationsFromPrintDocument(e){let t=0,n=0;try{let r=this.pdfiumModule.FPDF_GetPageCount(e);for(let i=0;i<r;i++){let r=this.pdfiumModule.EPDFPage_GetAnnotCountRaw(e,i);if(r<=0){n++;continue}let a=0;for(let n=r-1;n>=0;n--)this.pdfiumModule.EPDFPage_RemoveAnnotRaw(e,i,n)?(a++,t++):this.logger.warn(z,B,`Failed to remove annotation ${n} from page ${i}`);if(a>0){let t=this.pdfiumModule.FPDF_LoadPage(e,i);t&&(this.pdfiumModule.FPDFPage_GenerateContent(t),this.pdfiumModule.FPDF_ClosePage(t))}n++}return{success:!0,annotationsRemoved:t,pagesProcessed:n}}catch(e){return{success:!1,annotationsRemoved:t,pagesProcessed:n,error:e instanceof Error?e.message:`Unknown error during annotation removal`}}}sanitizePageRange(e,t){if(!e||e.trim()===``)return null;try{let n=[],r=e.split(`,`);for(let e of r){let r=e.trim();if(r.includes(`-`)){let[e,i]=r.split(`-`).map(e=>e.trim()),a=parseInt(e,10),o=parseInt(i,10);if(isNaN(a)||isNaN(o)){this.logger.warn(z,B,`Invalid range: ${r}`);continue}let s=Math.max(1,Math.min(a,t)),c=Math.max(1,Math.min(o,t));for(let e=s;e<=c;e++)n.includes(e)||n.push(e)}else{let e=parseInt(r,10);if(isNaN(e)){this.logger.warn(z,B,`Invalid page number: ${r}`);continue}let i=Math.max(1,Math.min(e,t));n.includes(i)||n.push(i)}}if(n.length===0)return this.logger.warn(z,B,`No valid pages in range, using all pages`),null;n.sort((e,t)=>e-t);let i=[],a=n[0],o=n[0];for(let e=1;e<n.length;e++)n[e]===o+1||(a===o?i.push(a.toString()):o-a===1?(i.push(a.toString()),i.push(o.toString())):i.push(`${a}-${o}`),a=n[e]),o=n[e];a===o?i.push(a.toString()):o-a===1?(i.push(a.toString()),i.push(o.toString())):i.push(`${a}-${o}`);let s=i.join(`,`);return this.logger.debug(z,B,`Sanitized page range: "${e}" -> "${s}"`),s}catch(e){return this.logger.error(z,B,`Error sanitizing page range: ${e}`),null}}};async function ge(e,t){return new ie(new he(await oe({wasmBinary:await(await fetch(e)).arrayBuffer()}),{logger:t?.logger}),{imageConverter:re,logger:t?.logger})}export{ge as createPdfiumEngine};